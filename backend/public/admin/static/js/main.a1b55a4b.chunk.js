(window.webpackJsonpcmshadow=window.webpackJsonpcmshadow||[]).push([[0],{315:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAQQAAAAjCAYAAABy1nQwAAAACXBIWXMAAAsTAAALEwEAmpwYAAAF8WlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNS42LWMxNDggNzkuMTY0MDM2LCAyMDE5LzA4LzEzLTAxOjA2OjU3ICAgICAgICAiPiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPiA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtbG5zOnhtcE1NPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvbW0vIiB4bWxuczpzdEV2dD0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL3NUeXBlL1Jlc291cmNlRXZlbnQjIiB4bWxuczpkYz0iaHR0cDovL3B1cmwub3JnL2RjL2VsZW1lbnRzLzEuMS8iIHhtbG5zOnBob3Rvc2hvcD0iaHR0cDovL25zLmFkb2JlLmNvbS9waG90b3Nob3AvMS4wLyIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgMjEuMCAoV2luZG93cykiIHhtcDpDcmVhdGVEYXRlPSIyMDIwLTA0LTIyVDIyOjQwOjU3KzAyOjAwIiB4bXA6TWV0YWRhdGFEYXRlPSIyMDIwLTA0LTIyVDIyOjQwOjU3KzAyOjAwIiB4bXA6TW9kaWZ5RGF0ZT0iMjAyMC0wNC0yMlQyMjo0MDo1NyswMjowMCIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDoxYzExYjBkNy01ZmQ3LTNlNGMtOGViNS05MWM3OWM2NzQyMzIiIHhtcE1NOkRvY3VtZW50SUQ9ImFkb2JlOmRvY2lkOnBob3Rvc2hvcDpmNTVlM2E4ZS00YzdiLWZmNDItOTBlNC0wZDk4NTg5ZWE0YTAiIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDo1ZTRhNmZjMy00ODc1LWM3NGYtYTg3Ny05MTM2NTc0MDg2YTgiIGRjOmZvcm1hdD0iaW1hZ2UvcG5nIiBwaG90b3Nob3A6Q29sb3JNb2RlPSIzIiBwaG90b3Nob3A6SUNDUHJvZmlsZT0ic1JHQiBJRUM2MTk2Ni0yLjEiPiA8eG1wTU06SGlzdG9yeT4gPHJkZjpTZXE+IDxyZGY6bGkgc3RFdnQ6YWN0aW9uPSJjcmVhdGVkIiBzdEV2dDppbnN0YW5jZUlEPSJ4bXAuaWlkOjVlNGE2ZmMzLTQ4NzUtYzc0Zi1hODc3LTkxMzY1NzQwODZhOCIgc3RFdnQ6d2hlbj0iMjAyMC0wNC0yMlQyMjo0MDo1NyswMjowMCIgc3RFdnQ6c29mdHdhcmVBZ2VudD0iQWRvYmUgUGhvdG9zaG9wIDIxLjAgKFdpbmRvd3MpIi8+IDxyZGY6bGkgc3RFdnQ6YWN0aW9uPSJzYXZlZCIgc3RFdnQ6aW5zdGFuY2VJRD0ieG1wLmlpZDoxYzExYjBkNy01ZmQ3LTNlNGMtOGViNS05MWM3OWM2NzQyMzIiIHN0RXZ0OndoZW49IjIwMjAtMDQtMjJUMjI6NDA6NTcrMDI6MDAiIHN0RXZ0OnNvZnR3YXJlQWdlbnQ9IkFkb2JlIFBob3Rvc2hvcCAyMS4wIChXaW5kb3dzKSIgc3RFdnQ6Y2hhbmdlZD0iLyIvPiA8L3JkZjpTZXE+IDwveG1wTU06SGlzdG9yeT4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz7UrMDbAAAUi0lEQVR4nO2deZidVX3HPzNzM9km22SBJATCTsCyJSwBQkJcajFQwxKo1eLSTVrs0xZaQVtFURCrrRYsaosP1goWhKZoCggKDUIkkCCYsIRFCEsiSybbTGbL6R/fc3rOfe957z3vncnM8DDf53mfe+/7vue85z3nd377ObfBGMMwhjGMXLQAHwcWA2OABmAX8CjwFWDzoLVsD6A02A0YxjCGOD4MXB05/26gEbh4QFuzh1GEIRwMzAT2A2YBoxGnfBX4tf18Guiusy1NwAHAKMCpLQ2IA/+mjvr2BSZk6moDNtbZPoBxwBzbzgOAsUA78CLqg+eAl+uodyKSRN3AG0BPne1rAiYDzcBOYEud9WSxFzAC2IH6sK8YAbSi9lZTUXvQe7T3wzPrxSFVrh3Vj88Zi+gA1Mc7C5afCowE3qR4f7Ui7ae7FkMYA7wT+AhwEjAFDWIWBr3EWuAm4A6KT7ypwM2I4YST+A7g9wrWNQX4LzRpd9tzjcBy4IKCdYH6YRnwp8Bv2d9ZdKN3vg24EXikQP2XA2ch5ncOYi71YC/gh8A+6F3/vM56QiwBvoaYzHpgKX2foIcgOhmHH58YuhFT24hoazXwBPBSH5+fxYnAocgM+GXm2q4q5boi58YDJ9hyKwu0YR5wA5pf3wI+X6DsscD3EVO5BfjLAmUnA7eiubIGY0zesdgYc4+pDxuMMRcaY8ZUqT97HGSM2Rqpq9MYM79APRhjzsxp173GmIaCde1njLm94Pu3GWMuN8ZMS3zGbbZcuzHmkILtC4/Zxvfh8j7UE2ubw+n9UOe85J6sxHPGmM8YY/bvp/c73/g+e9mI7jHGHGmMucQY82SVtmwyxnzeGHOyLTPGGPMje63LGPOlAu14hzGmx5a9q+A7XB60aZ0xZlSBsu8Oyt4Y0xBKwCXA3yGzAMrVuoYcThNK9YOAa4H3ApcBv0rgVKOB3khdzUg6P5hQB4jDfiRTj6trrH1OqoSbgTjuvEi7sgivTQD+3p77bMJzOuzndqpLzFrYbesYH9TZF0wHjs+c+yCwoo/19gLbUDufAlbZ865fjf0+BpiENL797f37oz69APXx9/rQjj8ArsPT+QzgO8AvkI9gYo3yewGfRvNlOaK999lrI4C/Qe96WUJbNiAaPwV4B9KUX0go1wCcHPyeARwIrEsoC5qjDrfFGMLVeJUjbwLsRPakswXDe8IyZ9iGXZrQsNHIBgrhCOM9iDBSbOJD7f0xTEJElcIQRiAvcsgMwn7osvW0ICaaJeZ24KcJzxnKWIoIbAvwDHAcItgpwOt9rNv110+Ai2rc5xjBucDZaIz3B/4d+XQ+TXVfRAxnAd9GAifEvvYogpFIaMVwKbLrv0p1Zt8J3IX6dzqwgDSGMAUxAIeJiJmlMIQmPH3vBNY3Zm74JPnM4NeIG38YOM02/FTgdOCLiMt32ftdmWeAf0toGMiZmB0ch8PRAKbgTOI2PqizJiXWMx84334Pie1l4CrEdBaizv9b4B40qO7dbwT+N/FZQxXn2s8NwL8gm34W6uP+QpYGszDAVmTffwpYBHw9uH4ZaQInxAhE583I1g+PTkTHncH37NEdOXrt0WMP9xvgC8AxCe16AE9rcxPf5TjEwN5ATm1QiDQFU4HZ9vsG4IVQQ3gf3pERMoMuxN2+SdzZtQ74HyThFwB/jLg4aLCeSWzcOOJRDydxl1KbubQCHw3KxZ7RGjkfwzmZ3w3A40hlfixz7V7UR4sRczgBuCbxOUMVR+KJ+CfAfyPCng58AKnW/ZHEUoshZLEJ+Avk4Pw6mtSfQXS4PLEOg2j5FCQZq5nEMfMw5VyjrXcC0qaqOScdnrX3TkVRvRScYZ/1K0SXFyGtaSK1I0InIgc0yHm/3Q3GJCT1SpQzgx3Is34ptT3fHUjlOQepcP+EogapmJL5HWoaIGlci8suoLwjs3U0R54TwyjUWVBuKlxDJTNw6EHvvxT1weMJzxnK+F1EzAB3Iwn0M/v7WNIJdk/hm3j/TDOK1ExMLNsDXIEYnQtt7qhy7Kzj2GHr3ogmaYoK/xKKpoD6eHaN+5vxmsSzaFJjy6WERE/CM657wXPnc5Ejw6EB2TufQpKgKL5AsdAHiCuGcGqbm4wtlDtAYjjPfrpJvJvKmP60hLaMRXZrCAM8mVB2GxqY3lo3DmE04dXOZ/FO4R/Yz0nA7w90oyL4Ct5PcxTS3lLxFHIGbkYqf7WJ7Ry0JbwW20F1ptGB6PdKFNZLQQ9+Ujs/QjXMQuFCkCN0rX12Ce/crAbH1LegcaYREf6f2AuhNLyDclttT2Pv4LtLSHogc8/55Kv8M5Fvw5XvBe5H9meoJaRoCO3IWx+iAZkCbwcsRD4UUL6AcyA+hM8BWIJs8cFEF3KCO2fdEvKjYDHMxEc88hhCA5rYq1HE6RbUD51o/oSMIzy245lCEazGC5NafoRFKI/AIB/LJuzERhpuLGfIYQbSQkBa74ugFzoM2YshuoBv1Gp5P8NpCM5k6UITOgyfHYmf9Fl8gHKm8gJxzjwhci6LDjToIIJwbfoz4HcSyr/VcSbynPegBC+HTfg+ncPQYJAPomQlUIj0sMRyI5Bp14vPDAyPdjQ/ViFN+Y+AT9jjD+25X9h72iPlt9vjdNL9ViDT3K2POLDKfQC/bT83I2e3QWarK7t3rJDFqfhoygpsklUjmmRZZ97qoOKBQlZyjwHuAx62v92kPCNStoQP+7j7Hkd2WzbikBeByCLr/zAoNnwzUgPnJNbzVkMLkjygbMsnMtd/iPpiNP0bbagX25AvAGTKnFzlXtAYHo6iQy58mpXwLm34Z8hJfDsKHTpsQU7WS5DQgrh28RoyURcgQZQXRQvxMl4YHUt+CHSsfQ/s/a8GbQZpACdVeY7LL9mNzwOhEa82gFe3HqP+NQn1oAm9YIhRaELfZn+7ti1F6cMhTgaOyNx3G1oD4dRaxyiyz8nD/cC/Zuo0tvwnERFejZ88/YHdlBNeUbxJ3xKbQGq3c0jdQGVO/WN4JnEaPqlnMPF08D3P2TkSRaCuQNL9Q+jd2qicyL22zn9EkzoPm4EvI6nunJNZLeFNFDK/Ajnuz6S6qWXwpvIM8v0Ic1AuBkjCu3HfgI8uzCcfrp82A8+7kyW8JzP0H7xRpaI9gZGIAYToRKrYXUidcdx1PHIuhl78jyHCdO+wCUnycC2DQ6qG0IMkwGTEhLKJRzPt9U+gcNfNiAn1xZk4Cjl4X6WYLezaNZX098uDM4m2o9yKLNpQ3vwVyMZ9L55pDxa2Bt/H5dwzC/lGRqAQoEFjHAszNqJ3fyXh2RuRtnAeMjVDenN1j0STezTSGB6jetRuQ/B9LvAfkXtOQ2PdA6wJzr+A1mMsJF+L3Q/vn3iIYEFeiUpvOlQ61PY0mqkk5J1Ic1gH/IjyxKRlaAHIVpQ+mk3EuBNvA3ZSrqq1FGhXG/Jcfw7ZjROoZAwuS20ZsrevIT6RUjARpdIOFvZBhAR6h2dz7luB0oabkTd7sBlCGOPPZruG57ehcYtNWocmNLFT0u0dHkH91kx5VMvV7bSsEUhg5LXRYQ2apDPRMoAYnJb8AoGER8JzhW3P8Sir86lM2UUoioG99//zMBqJL7VNsXX6E81Uqp678B16U+baPDzhnoM6DnzuxLX2dzeVK9JaqT0gIdrRmvfTUQjWEV/IGFyHvh8xr6sYfA98PTgXSQ+Q1MvTdtbj1drFeOIayujGRxOq5Ry0IzOhiJa8C5kGtereYdtQyxx/Ee8LmEulH2ECXsLfQ2Ua+QNo7FqRrySL4+xnJ+XaBaVIZZCe3ttfGEulbd+OD9ncjcIqRwfXFyCifb/97ST2w8gpChqoLEOYhLSEouGgB+xxA9JWPog6PKsxjEKOKJCvoQjaUHZnvSbDNJRGPrlgWYd32s8NVE8q60SJZ6ciO/YsPBMeDITmZt64Gjwzz2oIYaZiCU3YIgzdhSazAjamffSQ5udZjWjM+RFCs+EUvDlwZ6Tsc4iG9qEyma8Rv8dDVrughLdXXMc0IHtrINFKpe0XTuYtyG49Orj+LqQluNCMa//1wT2OY4eYhFTzev0k99njBhTx+Cji4CFhNSCt4n6kMaRiF0r+qdex2IKyROthCHPxDqw3Uc5Hnqa4GxFqN9K23sXgMoQwlJxn7u5A/evCqQZJ0eyk7bL3TCN9T49J+AVtMXPEZcyW7LNTHPaho3QelQyhAdF3LFnuVSS8liHTYhSeGR6C1y5WkpkHJeIbecxHRP5iQsP7A5Op1BB2Uc5tf4wkrovpHgp8CW8ugJhbaM/GdvgZb+vIs49TscYeP0CpqRfimYJB0uCvEAdPjdg02rbVyxBaKb42wOEsvD/pBIrlGJyKMl2L2N39idDOzls78xvkQDsCMYIm/I5NMcfibJT5V0ual9C79xDXTpyT0tHG06QJo0cQjR5IZT6C0w7WE3dOGuQbWIYiRvPw4dFF+DlUMfcbUQgpuxx4HwY2NXUalYPSRrkqt55yZ91oRLShFLuVco2gg8rOH02xRJFaeBIlLH0OEU/4Hofx1rCvR+ETvgw+9bbasRPP6FrxC9oGGi1IQwHRzM9z7utFmt1NiE5W4lcudmaObWjcjk54/lzk2N4eqafLPnctikTdgiZqykKn1/B+hGPwfoRZeB/AHeQv5X8M71APk/mOtp+9aE6VoYQ46kp81pPjmB9DaspAaAnhOgY3oWK+jZuREzE0b9xnJ/CfmftNpJ4G8kNTfcFVaFIcEZybjAZwoDStenEifl38d4F/tt+r+TF2IyK9HqnMpyH/xUDmr4Amh+vz1dReb+K0r51IsrvQXRYlNBEbUYg7K/1Hosl1FJqUsRBmCTHPR6lP63MOv33ss15ETtwZiLarbdH2PNIwDscnMDUgzRqkza3JFiqhF70OMYRQ5T0QOY7Oo75B/jiyY36ZcO9ekXOxhJDbkdrn1NlQg7ibuMrqGEI4WKnJNA3I35CyMUsHSvIIGUKJYhGNwcJivBPtFtL3g1yDnLoXIKZyHJXrT/Yk3O5eLmc/TNCphQ4kDA+lkr6dgGlC4zkZmRwdiObGIK12uj0XYwYOz1H/ZrdPofdpxCchOe3gDapvLdCGNIzDkRbTjMxrl4h4DxF/i7M378Iuf8xgKdpVJparkIe9UYbfN5CNH9vjIAu3AjGc4DGGsAtFFsA7atxAfJs444px5tRchDOQWpaiDk+iMjy0jaG/b/9kfI7HetK3qnO4236OJH+dyZ7CRfhEqnVoB6VUGOQ0bKd8Q5RO/EYpbpHbRGT+HY20hsPQeG9HmkZYxh1uBeUz1L9vxBq8xnMUonWXYbia2k7PR+3nwSgnYT5+Lkf9PY4htKNQWbgy0L3EBchRt4TqknUmytr7MTI3QFrHZVRXPaFy6TPkb9F1Ixr8NjTZ25DWcF/O/dnUW0jL5puFGNrxiNCuRdw5xuDGok06DqJ88F9l6JsLp+K1mlspHn25D7/V19mk70nQV3wIZUuC7OHLKdb2CUgLDndKih270MTfhl+wtM0e2XLh7w77ewr156S04Zd3z0W+EjdWK6m9Xf/jeH/FInxKejs5+3qExP0QmtDfwW+a4OzzxSgktcbetwZJvlFIlZmPOGfoDXVlL0e5AXkbczZSKbF3k59D/jySChODZ2whf3eYmNOllg+hFTGAw/ALeS5EKyrXolVu69DAz0Hpu2HeuGOAKxj4rM+icBLW4J1YRbARmRl/jWhgIek7F7nnFkErMhMuxtPvlRTbjKcRpbWPQ/QRE1ixyEMKGjLfZyFHd71RrUft52y0TYFbwZiy4cpapEksoPzvA1aRY8pnpd13EUf7Ml57cAM2grRwlJukrmPupLqtE1vH0E51u2sj6THimIZQa0+EY/GrKkPH5USkFuepxiFxP48WxwxlHIxP7Po5xc0Fh3sRQwBJsSIMIeVPacaiiXU2CqWFy/W/hoROEbgwYDtS7VMYQgwp5ZzPoV48gUya8ahvmxDtP1ytkEUX0jAW2MNF5O4jp99j6u9XkQPlSuTdzJoQsU4Ir7nrHWiDlS8i9SoPI6nssFj+QL0I91NwEztmooRYjXZ8+iyV6xcgPujh+V1Iir3M0MZCfF8sp/6t21ciaXQM8jv9A7V3DHZ9thit/8jmTzQgupiCfEyzKWfkL6E9QL9VR3t70Njsi1/bkE0iClPSwzbl/Y7NC5e52Bc/0qP2OB6fgJW68Ar8ytQw/J0biclz+H0PcaCLUZShheocM7zWjV8anGfXhxiFdyqGg9Jff98V1uPqPwCfNRbDVhRhWYX2kzyd8q3WswjPP4ukZREp6XwzLdSfWATl5letSMpI/D9i1Qph1cJWtLDrGORLWkL1zMUmvNl2BOWRmVp4CYXDr6c8m68o3CSdRnkymQsvuuhQyBhiDMGNV0/w2+C1kE1UX0JdC+1obML/xyjyr2Brkdnq+nsbft/GClSLADyJVvhdh7j+EsRRWzLldiOJ/grafXk5Uj1jf3MVQxPKtuq0dTXZZ/fHH42AHHtPogni6n/N/q5l369CHvhFSF19D7LhslmVO5Hz8PvIAVlLOmbxij1eJ73fYuhGDGlvakuQOUjqvoKy2FJU0Gr4KUrjbka+lzCVO4tdaDKPy7nHTTy3m9FGZPM+iLzjz0fK1IPN+EVAbju0TfbceHuEtB4TCL2I/rfilzc7YfM69f0vaRar8OPZg/crpOBp5ONxeUZ3Ur68ugwNxiT7dCYiO26y/T4GDWwbsvdfoj5OWLJ1NuFjrl3IY1xvuCZWf8i5e2z9RfcumI4k4CR7NKL3fx0xgXolgUvd7kVEmmJXx1BCOR1NSLJU+zOV8UgF70HEvLXOZzo0ov5x4+i29IqhGU2cWtpQL34Tkz2JFvyf2Yah6yb8n6hmzQqD+mwn5ePVgv8T4P5yKIda9G4k5IrQ7njK/0g214QvwhCGMYy3IyajCRlbIfkGfdPohhxSkoaGMYy3M5xWGUrO1BDkWw7DDGEYw6gOt3NX6BNxqc0DvW5jj+P/AHjFmftlkscEAAAAAElFTkSuQmCC"},349:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAUAAAAArCAYAAAAJ1FGHAAAACXBIWXMAAAsTAAALEwEAmpwYAAAF8WlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNS42LWMxNDggNzkuMTY0MDM2LCAyMDE5LzA4LzEzLTAxOjA2OjU3ICAgICAgICAiPiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPiA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtbG5zOnhtcE1NPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvbW0vIiB4bWxuczpzdEV2dD0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL3NUeXBlL1Jlc291cmNlRXZlbnQjIiB4bWxuczpkYz0iaHR0cDovL3B1cmwub3JnL2RjL2VsZW1lbnRzLzEuMS8iIHhtbG5zOnBob3Rvc2hvcD0iaHR0cDovL25zLmFkb2JlLmNvbS9waG90b3Nob3AvMS4wLyIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgMjEuMCAoV2luZG93cykiIHhtcDpDcmVhdGVEYXRlPSIyMDIwLTA0LTIyVDIyOjQzOjMzKzAyOjAwIiB4bXA6TWV0YWRhdGFEYXRlPSIyMDIwLTA0LTIyVDIyOjQzOjMzKzAyOjAwIiB4bXA6TW9kaWZ5RGF0ZT0iMjAyMC0wNC0yMlQyMjo0MzozMyswMjowMCIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDo0ZTEzNjkzZi1lNjRhLTIwNDUtODljYy03ZGI3MWNkNjJkMDMiIHhtcE1NOkRvY3VtZW50SUQ9ImFkb2JlOmRvY2lkOnBob3Rvc2hvcDo3MGY4MjE2ZC05M2M3LTE1NGItYTk3NC05ZjRiZDU0YzkzZDIiIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDo3MWMxNzM5NS00ZGExLTdmNDQtYjEzMi03MmFhNjAyMmZiYWEiIGRjOmZvcm1hdD0iaW1hZ2UvcG5nIiBwaG90b3Nob3A6Q29sb3JNb2RlPSIzIiBwaG90b3Nob3A6SUNDUHJvZmlsZT0ic1JHQiBJRUM2MTk2Ni0yLjEiPiA8eG1wTU06SGlzdG9yeT4gPHJkZjpTZXE+IDxyZGY6bGkgc3RFdnQ6YWN0aW9uPSJjcmVhdGVkIiBzdEV2dDppbnN0YW5jZUlEPSJ4bXAuaWlkOjcxYzE3Mzk1LTRkYTEtN2Y0NC1iMTMyLTcyYWE2MDIyZmJhYSIgc3RFdnQ6d2hlbj0iMjAyMC0wNC0yMlQyMjo0MzozMyswMjowMCIgc3RFdnQ6c29mdHdhcmVBZ2VudD0iQWRvYmUgUGhvdG9zaG9wIDIxLjAgKFdpbmRvd3MpIi8+IDxyZGY6bGkgc3RFdnQ6YWN0aW9uPSJzYXZlZCIgc3RFdnQ6aW5zdGFuY2VJRD0ieG1wLmlpZDo0ZTEzNjkzZi1lNjRhLTIwNDUtODljYy03ZGI3MWNkNjJkMDMiIHN0RXZ0OndoZW49IjIwMjAtMDQtMjJUMjI6NDM6MzMrMDI6MDAiIHN0RXZ0OnNvZnR3YXJlQWdlbnQ9IkFkb2JlIFBob3Rvc2hvcCAyMS4wIChXaW5kb3dzKSIgc3RFdnQ6Y2hhbmdlZD0iLyIvPiA8L3JkZjpTZXE+IDwveG1wTU06SGlzdG9yeT4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz5l9ombAAAZw0lEQVR4nO2deZRdRZ3HP6/TCdnT2SCEQBIEhARICCSYoBARZUcyuKCCCh6dkVl0FFxHFEYUxlkc3AcVD24jozODwAiGwaBIEhJIMgkistiEsIWQhSxNJ91d88f3FlX3dt31vU6eSX/PqfPuu+/euvXqVv3qt1fNGEM/+tGPvRJvAN4LTAD2i851Ay8Bi4BvAh17omHNgtY93YB+9KMffYKpwA8Q8QvhPKAG/PNua1ETol4COBQYAQwBDLAD2Aq8XGe9+wr2A9pQP/ag/tsM7Npz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"},364:function(e,t,a){e.exports=a(639)},639:function(e,t,a){"use strict";a.r(t);var n=a(229);var c=()=>{n.a.initialize(String(window._envConfig.GA_TRACKING_CODE))},r=a(10),l=a(11);a(368);function i(){const e=Object(r.a)([""]);return i=function(){return e},e}var o=Object(l.a)(i()),s=a(652);var u=a(357),d=a(308),m=a.n(d),b=a(309),p=a.n(b),g=a(7);const f={load:"languageOnly",ns:["form-validation"],fallbackLng:"en",defaultNS:"global",backend:{loadPath:"/admin/locales/{{lng}}/{{ns}}.json"},detection:{order:["localStorage","navigator"],caches:["localStorage"],lookupLocalStorage:"i18nextLng"},interpolation:{format:(e,t)=>e instanceof Date?Object(s.a)(e,String(t)):e,escapeValue:!1},react:{bindI18n:"languageChanged"}};u.a.use(m.a).use(p.a).use(g.a).init(f);var O=a(0),j=a.n(O),E=a(201),v=a(5),h=a(642);const k="#FFF",x="#FAFAFA",y="#F5F5F5",w="#D9D9D9",C="#BFBFBF",_="#8C8C8C",T="#000",I="#1890FF",A="#00122F",S="#FF4D4F",L="#FA541C",R="#AD4E00",D="#08979C",G="#9254DE",N="#531DAB",M="#95dE64",P="#52C41A",z={TEXT:"#AD8B00",BOOLEAN:"#CF1322",DATE:G,DATE_TIME:N,GALLERY:"#0050B3",IMAGE:"#003A8C",INTEGER:P,LINK:I,RICH_TEXT:"#614700",STRING:_,PRICE:"#5CDBD3",TAX_RATE:D},F={PUBLISHED:M,DELETED:S,UNPUBLISHED:w,DRAFT:_};function Y(){const e=Object(r.a)(["\n  min-height: calc(100vh - 234px);\n  padding: 25px;\n  background: ",";\n  border-bottom: 1px solid ",";\n"]);return Y=function(){return e},e}const V=l.c.div(Y(),k,w);var B=a(136),H=a(47),W=a(9),U=a(2),Q=a.n(U),Z=a(8),J=a(669),X=a(6),K=a(4),q=a.n(K);class ${static login(e,t){return q()(Object(X.a)({},t,{method:"POST",url:"/login",data:e}))}static logout(e){return q()(Object(X.a)({},e,{method:"GET",url:"/logout"}))}}const ee=Object(J.a)("REQUEST_LOGIN"),te=Object(J.a)("RECEIVE_LOGIN"),ae=Object(J.a)("LOGOUT_CLEAR_STATE"),ne=(e,t)=>function(){var a=Object(Z.a)(Q.a.mark((function a(n){var c;return Q.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return n(ee()),a.prev=1,(c=new FormData).append("email",e),c.append("password",t),a.next=7,$.login(c);case 7:n(te(!0)),a.next=14;break;case 10:throw a.prev=10,a.t0=a.catch(1),n(te(!1)),a.t0;case 14:case"end":return a.stop()}}),a,null,[[1,10]])})));return function(e){return a.apply(this,arguments)}}(),ce=()=>function(){var e=Object(Z.a)(Q.a.mark((function e(t){var a;return Q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a="/admin",e.next=3,t(re());case 3:Object(W.e)(a+"/");case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),re=()=>function(){var e=Object(Z.a)(Q.a.mark((function e(t){return Q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,$.logout();case 2:t(ae());case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();var le=a(72);const ie=()=>Object(le.b)();function oe(){const e=Object(r.a)(["\n  margin-left: 24px;\n"]);return oe=function(){return e},e}const se=B.a.Item,ue=Object(l.c)(H.a)(oe()),de=()=>{const e=Object(g.b)().t,t=Object(W.f)().pathname.replace("/admin",""),a=ie(),n=Object(O.useCallback)(()=>{let e;return"/"===t?e="/":t.startsWith("/pages")?e="/pages":t.startsWith("/catalog")?e="/catalog":t.startsWith("/forms")?e="/forms":t.startsWith("/settings")&&(e="/settings"),[e]},[t]),c=Object(O.useCallback)(({key:e})=>{Object(W.e)("/admin"+e)},["/admin"]),r=Object(O.useCallback)(()=>{a(ce())},[a]);return j.a.createElement(B.a,{theme:"dark",mode:"horizontal",selectedKeys:n()},j.a.createElement(se,{onClick:c,key:"/"},e("navigation.dashboard")),j.a.createElement(se,{onClick:c,key:"/content"},e("navigation.content")),j.a.createElement(se,{onClick:c,key:"/catalog"},e("navigation.catalog")),j.a.createElement(se,{onClick:c,key:"/forms"},e("navigation.forms")),j.a.createElement(se,{onClick:c,key:"/settings"},e("navigation.settings")),j.a.createElement(ue,{onClick:r,type:"primary",shape:"round",size:"small"},e("navigation.logout")))};var me=a(315),be=a.n(me);function pe(){const e=Object(r.a)(["\n  width: 130px;\n  height: 31px;\n  margin: 16px 24px 16px 0;\n  background-image: url(",");\n  background-repeat: no-repeat;\n  background-position: 50% 50%;\n  background-size: contain;\n"]);return pe=function(){return e},e}const ge=l.c.div(pe(),be.a),fe=()=>j.a.createElement(ge,null);function Oe(){const e=Object(r.a)(["\n  height: 100%;\n"]);return Oe=function(){return e},e}const je=B.a.Item,Ee=B.a.SubMenu,ve=h.a.Sider,he=Object(l.c)(B.a)(Oe()),ke=()=>{const e=Object(g.b)().t,t=Object(W.f)().pathname.replace("/admin",""),a=Object(O.useCallback)(({key:e})=>{Object(W.e)("/admin"+e)},["/admin"]),n=Object(O.useCallback)(()=>{if(t.startsWith("/catalog")){let n;return!t.startsWith("/catalog")||t.includes("/templates")||t.includes("/languages")||t.includes("/categories")||t.includes("/currencies")?t.startsWith("/catalog/templates")?n="/catalog/templates":t.startsWith("/catalog/languages")?n="/catalog/languages":t.startsWith("/catalog/categories")?n="/catalog/categories":t.startsWith("/catalog/currencies")&&(n="/catalog/currencies"):n="/catalog",j.a.createElement(he,{mode:"inline",defaultSelectedKeys:[n]},j.a.createElement(je,{onClick:a,key:"/catalog"},e("sidebar.catalog.items")),j.a.createElement(je,{onClick:a,key:"/catalog/templates"},e("sidebar.catalog.templates")),j.a.createElement(je,{onClick:a,key:"/catalog/languages"},e("sidebar.catalog.languages")),j.a.createElement(je,{onClick:a,key:"/catalog/categories"},e("sidebar.catalog.categories")),j.a.createElement(je,{onClick:a,key:"/catalog/currencies"},e("sidebar.catalog.currencies")))}if(t.startsWith("/content")){let n;return!t.startsWith("/content")||t.includes("/pages")||t.includes("/layouts")||t.includes("/templates")||t.includes("/template-pages")||t.includes("/views")||t.includes("/variable-name-actions")||t.includes("/modules")?t.startsWith("/content/views")?n="/content/views":t.startsWith("/content/layouts")?n="/content/layouts":t.startsWith("/content/templates")?n="/content/templates":t.startsWith("/content/template-pages")?n="/content/template-pages":t.startsWith("/content/views")?n="/content/views":t.startsWith("/content/variable-name-actions")?n="/content/variable-name-actions":t.startsWith("/content/modules")&&(n="/content/modules"):n="/content",j.a.createElement(he,{mode:"inline",defaultSelectedKeys:[n]},j.a.createElement(je,{onClick:a,key:"/content"},e("sidebar.content.pages")),j.a.createElement(je,{onClick:a,key:"/content/layouts"},e("sidebar.content.layouts")),j.a.createElement(je,{onClick:a,key:"/content/templates"},e("sidebar.content.templates")),j.a.createElement(je,{onClick:a,key:"/content/template-pages",disabled:!0},e("sidebar.content.template-pages")),j.a.createElement(je,{onClick:a,key:"/content/views"},e("sidebar.content.views")),j.a.createElement(je,{onClick:a,key:"/content/variable-name-actions"},e("sidebar.content.variable-name-actions")),j.a.createElement(Ee,{key:"/content/modules",title:e("sidebar.content.modules.title")},j.a.createElement(je,{onClick:a,key:"/content/modules/navigations"},e("sidebar.content.modules.navigations")),j.a.createElement(je,{onClick:a,key:"/content/modules/buttons"},e("sidebar.content.modules.buttons"))))}},[a,t,e]);return"/"===t?null:j.a.createElement(ve,{theme:"light",width:200},n())};var xe=a(665);const ye=Object(J.a)("SET_CONTENT_SIDE_PANEL_POSITION"),we="side_panel",Ce=({children:e})=>{const t=ie(),a=Object(xe.a)({accept:we,drop(e,t){const a=t.getDifferenceFromInitialOffset(),n=Math.round(e.left+a.x),r=Math.round(e.top+a.y);c(n,r)}}),n=Object(v.a)(a,2)[1],c=Object(O.useCallback)((e,a)=>{t(ye({top:a,left:e}))},[t]);return j.a.createElement("div",{ref:n},e)};function _e(){const e=Object(r.a)(["\n  && {\n    display: grid;\n    grid-template-columns: min-content min-content;\n  }\n"]);return _e=function(){return e},e}function Te(){const e=Object(r.a)(["\n  && {\n    background: ",";\n  }\n"]);return Te=function(){return e},e}function Ie(){const e=Object(r.a)(["\n  margin: 25px 50px;\n"]);return Ie=function(){return e},e}function Ae(){const e=Object(r.a)(["\n  && {\n    margin: 0 50px 50px;\n    background: ",";\n  }\n"]);return Ae=function(){return e},e}const Se=h.a.Content,Le=h.a.Header,Re=h.a.Footer,De=Object(l.c)(h.a)(Ae(),k),Ge=l.c.div(Ie()),Ne=Object(l.c)(h.a)(Te(),y),Me=Object(l.c)(Le)(_e()),Pe=Object(O.createContext)({}),ze=({children:e})=>{const t=Object(O.useState)(null),a=Object(v.a)(t,2),n=a[0],c=a[1];return j.a.createElement(Ce,null,j.a.createElement(Pe.Provider,{value:{sceneTitle:n,setSceneTitle:c}},j.a.createElement(Ne,null,j.a.createElement(Me,null,j.a.createElement(fe,null),j.a.createElement(de,null)),j.a.createElement(Ge,null,n),j.a.createElement(De,null,j.a.createElement(ke,null),j.a.createElement(Se,null,j.a.createElement(V,null,e))),j.a.createElement(Re,null,"\xa9 Shadow Systems 2019 - ",(new Date).getFullYear()))))},Fe=()=>j.a.createElement(j.a.Fragment,null,"Dashboard");var Ye=a(658),Ve=a(643);function Be(){const e=Object(r.a)(["\n  margin-top: 2px;\n"]);return Be=function(){return e},e}function He(){const e=Object(r.a)(["\n  && {\n    margin: 0;\n    font-size: 28px;\n  }\n"]);return He=function(){return e},e}const We=Ye.a.Title,Ue=Object(l.c)(We)(He()),Qe=l.c.div(Be()),Ze=({title:e,extraContent:t})=>j.a.createElement(j.a.Fragment,null,j.a.createElement(E.Helmet,null,j.a.createElement("title",null,e)),j.a.createElement(Ve.a,{direction:"horizontal",size:"middle"},j.a.createElement(Ue,{level:1,style:{fontSize:28}},e),t&&j.a.createElement(Qe,null,t)));var Je=a(42),Xe=a(321);const Ke=({icon:e,color:t,size:a,className:n,transform:c})=>j.a.createElement(Xe.a,{icon:e,color:t,size:a,transform:c,className:n});function qe(){const e=Object(r.a)(["\n  margin-right: ",";\n"]);return qe=function(){return e},e}const $e=Object(l.c)(Ke)(qe(),({size:e})=>"sm"===e?"12px":"7px"),et=e=>{let t=e.icon,a=e.children,n=e.size,c=Object(Je.a)(e,["icon","children","size"]);const r="large"===n?"sm":"xs";return j.a.createElement(H.a,Object.assign({size:n},c),j.a.createElement(j.a.Fragment,null,j.a.createElement($e,{icon:t,size:r}),a))};var tt=a(650);const at=e=>{let t=e.columns,a=e.dataSource,n=e.loading,c=e.pagination,r=e.isScrollable,l=void 0!==r&&r,i=Object(Je.a)(e,["columns","dataSource","loading","pagination","isScrollable"]);const o=t.reduce((e,t)=>e+parseInt(String(t.width),10),0);return j.a.createElement(tt.a,Object.assign({columns:t,dataSource:a,loading:n,pagination:c,scroll:{x:l?o:void 0},tableLayout:"fixed"},i))};class nt{static getPages(e,t,a,n){return q()(Object(X.a)({},n,{method:"GET",url:"/pages",params:{parent:e,page:t,per_page:a}}))}static getAllPages(e){return q()(Object(X.a)({},e,{method:"GET",url:"/pages/all"}))}static getPage(e,t){return q()(Object(X.a)({},t,{method:"GET",url:"/pages/".concat(e)}))}static createPage(e,t){return q()(Object(X.a)({},t,{method:"POST",url:"/pages",data:e}))}static updatePage(e,t,a){return q()(Object(X.a)({},a,{method:"PUT",url:"/pages/".concat(e),data:t}))}static setPageModules(e,t,a){return q()(Object(X.a)({},a,{method:"PUT",url:"/pages/".concat(e,"/modules"),data:t}))}static getPageVersions(e,t,a,n){return q()(Object(X.a)({},n,{method:"GET",url:"/pages/".concat(e,"/versions"),params:{page:t,per_page:a}}))}static publishPage(e,t){return q()(Object(X.a)({},t,{method:"PUT",url:"/pages/".concat(e,"/publish")}))}static unpublishPage(e,t){return q()(Object(X.a)({},t,{method:"PUT",url:"/pages/".concat(e,"/unpublish")}))}static deletePage(e,t){return q()(Object(X.a)({},t,{method:"DELETE",url:"/pages/".concat(e,"/delete")}))}static revertPage(e,t,a){return q()(Object(X.a)({},a,{method:"DELETE",url:"/pages/".concat(e,"/revert/").concat(t)}))}}var ct=a(661),rt=a(231),lt=a(98);function it(){const e=Object(r.a)(["\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100vw;\n  height: ",";\n  min-height: 100vh;\n  background: ",";\n  visibility: ",";\n  opacity: ",";\n  transition: all 0.2s ease-out;\n"]);return it=function(){return e},e}const ot=l.c.div(it(),({isScrollable:e})=>e?"100%":"100vh",({background:e})=>e,({show:e})=>e?"visible":"hidden",({show:e})=>e?.2:0);function st(){const e=Object(r.a)(["\n  position: relative;\n\n  "," {\n    position: fixed;\n    z-index: 200;\n    margin-top: ",";\n    margin-left: ",";\n  }\n"]);return st=function(){return e},e}function ut(){const e=Object(r.a)(["\n  margin-bottom: 25px;\n  white-space: initial;\n"]);return ut=function(){return e},e}function dt(){const e=Object(r.a)(["\n  display: grid;\n  grid-gap: 12px;\n  grid-template-columns: min-content min-content;\n  justify-content: end;\n"]);return dt=function(){return e},e}function mt(){const e=Object(r.a)(["\n  width: ",";\n  padding: 25px;\n  background-color: ",";\n  border: 1px solid ",";\n  border-radius: 4px;\n"]);return mt=function(){return e},e}const bt=l.c.div(mt(),({width:e})=>e,k,w),pt=l.c.div(dt()),gt=l.c.div(ut()),ft=l.c.div(st(),bt,({top:e})=>e||"0",({left:e})=>e||"0"),Ot=({width:e="18rem",showBackdrop:t=!1,text:a,confirm:n,cancel:c,onConfirm:r,onCancel:l,className:i})=>{const o=()=>window,s=Object(O.useCallback)(e=>{l&&(e instanceof KeyboardEvent?27===e.keyCode&&l():e.target===e.currentTarget&&l())},[l]);return Object(O.useEffect)(()=>(l&&o().addEventListener("keydown",s,!0),()=>{l&&o().removeEventListener("keydown",s,!0)}),[l,s]),j.a.createElement(j.a.Fragment,null,j.a.createElement(bt,{width:e,className:i},j.a.createElement(gt,null,a),j.a.createElement(pt,null,j.a.createElement(H.a,{onClick:r,size:"small",type:"primary"},n),j.a.createElement(H.a,{onClick:s,size:"small"},c))),t&&j.a.createElement(ot,{show:!0,onClick:s}))};function jt(){const e=Object(r.a)(["\n  cursor: initial;\n"]);return jt=function(){return e},e}function Et(){const e=Object(r.a)(["\n  display: grid;\n  grid-template-columns: 28px auto;\n  align-items: center;\n"]);return Et=function(){return e},e}function vt(){const e=Object(r.a)(["\n  && {\n    border: 1px solid ",";\n  }\n"]);return vt=function(){return e},e}function ht(){const e=Object(r.a)(["\n  width: 180px;\n\n  svg {\n    margin-right: 20px;\n  }\n"]);return ht=function(){return e},e}const kt=B.a.Item,xt=B.a.Divider,yt=Object(l.c)(kt)(ht()),wt=Object(l.c)(B.a)(vt(),w),Ct=l.c.div(Et()),_t=Object(l.c)(Ot)(jt()),Tt=Object(lt.a)(T,.51),It=Object(lt.a)(T,.25),At=({children:e,onClick:t,closeOnClick:a=!0,icon:n,key:c,disabled:r=!1,dialog:l},i,o,s,u)=>{const d=n?j.a.createElement(Ct,null,j.a.createElement(Ke,{icon:n,size:"sm",color:r?It:Tt}),e):e;return j.a.createElement(yt,{onClick:()=>t&&(l?!u&&s():o(t,a)),key:c||i,disabled:r,"data-test":"DropdownItem"},l?j.a.createElement(ft,{top:"-25px",left:"calc(-100% - 130px)"},d,u&&j.a.createElement(_t,Object.assign({},l,{onConfirm:()=>t&&o(t,a),onCancel:()=>s()}))):d)},St=({children:e,items:t,trigger:a=["click"]})=>{const n=Object(O.useState)(!1),c=Object(v.a)(n,2),r=c[0],l=c[1],i=Object(O.useState)(!1),o=Object(v.a)(i,2),s=o[0],u=o[1],d=()=>{u(!s)},m=(e,t)=>{e&&e(),t&&(u(!1),l(!1))},b=[];for(let g,f=0;g=t[f];f++)g.hasDivider&&b.push(j.a.createElement(xt,{key:"separator-"+f})),b.push(At(g,f,m,d,s));const p=j.a.createElement(wt,null,b);return j.a.createElement(rt.a,{overlay:p,trigger:a,onVisibleChange:e=>{r&&u(!1),l(e)},visible:r},e)};function Lt(){return(Lt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function Rt(e,t){if(null==e)return{};var a,n,c=function(e,t){if(null==e)return{};var a,n,c={},r=Object.keys(e);for(n=0;n<r.length;n++)a=r[n],t.indexOf(a)>=0||(c[a]=e[a]);return c}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(n=0;n<r.length;n++)a=r[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(c[a]=e[a])}return c}var Dt=j.a.createElement("path",{transform:"rotate(90 511.99999999999994,512.0000000000001)",id:"svg_1",d:"m128,512q0,-27 18.5,-45.5t45.5,-18.5t45.5,18.5t18.5,45.5t-18.5,45.5t-45.5,18.5t-45.5,-18.5t-18.5,-45.5zm320,0q0,-27 18.5,-45.5t45.5,-18.5t45.5,18.5t18.5,45.5t-18.5,45.5t-45.5,18.5t-45.5,-18.5t-18.5,-45.5zm320,0q0,-27 18.5,-45.5t45.5,-18.5t45.5,18.5t18.5,45.5t-18.5,45.5t-45.5,18.5t-45.5,-18.5t-18.5,-45.5z"});const Gt=e=>{let t=e.svgRef,a=e.title,n=Rt(e,["svgRef","title"]);return j.a.createElement("svg",Lt({width:1024,height:1024,viewBox:"0 0 1024 1024",className:"icon",ref:t},n),a?j.a.createElement("title",null,a):null,Dt)},Nt=j.a.forwardRef((e,t)=>j.a.createElement(Gt,Lt({svgRef:t},e)));a.p;const Mt=Object(lt.a)(T,.65),Pt=({size:e=32,fill:t=Mt})=>j.a.createElement(Nt,{fill:t,width:e,height:e});function zt(){const e=Object(r.a)(["\n  && {\n    display: flex;\n    align-content: center;\n    align-items: center;\n    justify-content: center;\n    width: ",";\n    height: ",";\n    padding: 0;\n\n    :hover,\n    :focus,\n    :active {\n      svg {\n        transition: fill 0.3s;\n        fill: ",";\n      }\n    }\n  }\n"]);return zt=function(){return e},e}const Ft=Object(l.c)(H.a)(zt(),({size:e})=>"small"===e?"25px":"38px",({size:e})=>"small"===e?"25px":"38px",I),Yt=({onClick:e,size:t="large"})=>j.a.createElement(Ft,{onClick:e,size:t},j.a.createElement(Pt,{size:"small"===t?14:18})),Vt=({onClick:e})=>{const t=Object(g.b)("content").t,a=t=>{e(t)},n=[{children:t("table.context-menu.edit"),onClick:()=>a("edit"),icon:"pen"},{children:t("table.context-menu.add"),onClick:()=>a("add"),icon:"plus-square"},{children:t("table.context-menu.publish"),onClick:()=>a("publish"),icon:"cloud-upload-alt"},{children:t("table.context-menu.unpublish"),onClick:()=>a("unpublish"),icon:"cloud-download-alt"},{children:t("table.context-menu.delete"),onClick:()=>a("delete"),icon:"trash-alt",dialog:{text:t("table.context-menu.delete-dialog.text"),cancel:t("table.context-menu.delete-dialog.cancel"),confirm:t("table.context-menu.delete-dialog.confirm")}}];return j.a.createElement("div",null,j.a.createElement(St,{items:n,"data-test":"Dropdown"},j.a.createElement(Yt,{size:"small"})))},Bt="dd. MM. yyyy HH:mm",Ht=["DD. MM. YYYY","DD.MM.YYYY","DD/MM/YYYY","D. M. YYYY","D.M.YYYY","D/M/YYYY"],Wt=["DD. MM. YYYY HH:mm:ss","DD.MM.YYYY HH:mm:ss","DD/MM/YYYY HH:mm:ss","D. M. YYYY H:m:s","D.M.YYYY H:m:s","D/M/YYYY H:m:s"];var Ut=a(359);let Qt;function Zt(){const e=Object(r.a)(["\n    display: flex;\n  "]);return Zt=function(){return e},e}function Jt(){const e=Object(r.a)(["\n  ","\n"]);return Jt=function(){return e},e}function Xt(){const e=Object(r.a)(["\n  display: grid;\n  grid-gap: 6px;\n  grid-template-columns: 24px max-content;\n  align-items: center;\n"]);return Xt=function(){return e},e}!function(e){e.DRAFT="DRAFT",e.PUBLISHED="PUBLISHED",e.UNPUBLISHED="UNPUBLISHED",e.DELETED="DELETED"}(Qt||(Qt={}));const Kt=l.c.div(Xt()),qt=l.c.div(Jt(),({isPublished:e})=>e&&Object(l.b)(Zt())),$t=(e,t)=>[{key:"name",dataIndex:"name",title:e("table.columns.name"),width:250,render:(e,{has_children:t,identifier:a})=>{const n=j.a.createElement(Kt,null,j.a.createElement(Ke,{icon:t?"folder":"file",color:t?L:I}),e);return t?j.a.createElement(W.a,{to:"/admin/content?parent="+a},n):n}},{key:"path",dataIndex:"path",title:e("table.columns.path"),width:250,render:e=>j.a.createElement(W.a,{to:e,target:"_blank"},e)},{key:"status",dataIndex:"status",title:e("table.columns.status"),width:140,render:(e,{is_published:t})=>{const a=t&&e!==Qt.PUBLISHED;return j.a.createElement(qt,{isPublished:a},j.a.createElement(Ut.a,{color:F[e]},e),a&&j.a.createElement(Ut.a,{color:F[Qt.PUBLISHED]},Qt.PUBLISHED))}},{key:"version",dataIndex:"version",title:e("table.columns.version"),width:110},{key:"created_at",dataIndex:"created_at",title:e("table.columns.created-at"),render:e=>Object(s.a)(e,Bt),width:180},{key:"modified_at",dataIndex:"modified_at",title:e("table.columns.modified-at"),render:e=>e?Object(s.a)(e,Bt):"-",width:180},{key:"context_menu",dataIndex:"context_menu",width:60,render:(e,{identifier:a})=>j.a.createElement(Vt,{onClick:e=>t&&t(e,a)})}],ea=e=>e.map(({identifier:e,parent:t,name:a,path:n,created_at:c,created_by:r,modified_at:l,modified_by:i,status:o,version:s,has_children:u,is_published:d})=>({key:String(e),identifier:e,parent:t,name:a,path:n,created_at:new Date(c),created_by:r,modified_at:l?new Date(l):null,modified_by:i,status:o,version:s,has_children:!!u,is_published:!!d}));var ta=a(112);function aa(){const e=Object(r.a)(["\n  && {\n    .ant-table-title {\n      background: ",";\n      border-bottom: 1px solid #f0f0f0;\n    }\n  }\n"]);return aa=function(){return e},e}const na=Object(l.c)(at)(aa(),x),ca=({location:e})=>{const t=Object(g.b)("content").t,a=Object(O.useState)([]),n=Object(v.a)(a,2),c=n[0],r=n[1],l=Object(O.useState)(!1),i=Object(v.a)(l,2),o=i[0],s=i[1],u=Object(O.useState)(0),d=Object(v.a)(u,2),m=d[0],b=d[1],p=Object(O.useState)(1),f=Object(v.a)(p,2),E=f[0],h=f[1],k=Object(O.useState)(),x=Object(v.a)(k,2),y=x[0],w=x[1],C=Object(O.useState)(0),_=Object(v.a)(C,2),T=_[0],I=_[1],A=Object(O.useRef)(q.a.CancelToken.source()),S=Object(ta.parse)(e.search).parent,L=Object(O.useCallback)(Object(Z.a)(Q.a.mark((function e(){var t,a,n,c,l;return Q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s(!0),e.next=3,nt.getPages(S?String(S):void 0,E,T,{cancelToken:A.current.token});case 3:t=e.sent,a=t.data,n=a.data,c=a.total,l=a.per_page,r(ea(n)),b(c),I(l),s(!1);case 12:case"end":return e.stop()}}),e)}))),[E,T,S]),R=Object(O.useCallback)(Object(Z.a)(Q.a.mark((function e(){var t,a;return Q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!S){e.next=16;break}return e.prev=1,s(!0),e.next=5,nt.getPage(String(S),{cancelToken:A.current.token});case 5:t=e.sent,a=t.data,w(a),s(!1),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),s(!1);case 14:e.next=17;break;case 16:w(void 0);case 17:case"end":return e.stop()}}),e,null,[[1,11]])}))),[S]),D=Object(O.useCallback)(function(){var e=Object(Z.a)(Q.a.mark((function e(a,n){return Q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=a,e.next="edit"===e.t0?3:"add"===e.t0?5:"publish"===e.t0?7:"unpublish"===e.t0?17:"delete"===e.t0?27:37;break;case 3:return Object(W.e)("/admin/content/"+n),e.abrupt("break",38);case 5:return Object(W.e)("/admin/content/new?parent="+n),e.abrupt("break",38);case 7:return e.prev=7,e.next=10,nt.publishPage(n,{cancelToken:A.current.token});case 10:ct.a.success({message:t("table.publish-success")}),L(),e.next=16;break;case 14:e.prev=14,e.t1=e.catch(7);case 16:return e.abrupt("break",38);case 17:return e.prev=17,e.next=20,nt.unpublishPage(n,{cancelToken:A.current.token});case 20:ct.a.success({message:t("table.unpublish-success")}),L(),e.next=26;break;case 24:e.prev=24,e.t2=e.catch(17);case 26:return e.abrupt("break",38);case 27:return e.prev=27,e.next=30,nt.deletePage(n,{cancelToken:A.current.token});case 30:ct.a.success({message:t("table.delete-success")}),L(),e.next=36;break;case 34:e.prev=34,e.t3=e.catch(27);case 36:case 37:return e.abrupt("break",38);case 38:case"end":return e.stop()}}),e,null,[[7,14],[17,24],[27,34]])})));return function(t,a){return e.apply(this,arguments)}}(),["/admin",L,t]),G=Object(O.useCallback)(e=>{h(e)},[]),N=Object(O.useCallback)(()=>{Object(W.e)("/admin/content?parent="+y.parent)},[y,"/admin"]);return Object(O.useEffect)(()=>{R(),L()},[L,R]),Object(O.useEffect)(()=>{const e=A.current;return()=>e.cancel()},[]),j.a.createElement(j.a.Fragment,null,j.a.createElement(na,{isScrollable:!0,columns:$t(t,D),dataSource:c,loading:o,title:()=>j.a.createElement(et,{onClick:N,icon:"arrow-up",disabled:!y},t("one-level-up")),pagination:{current:E,pageSize:T,total:m,onChange:G}}))},ra=({location:e})=>{const t=Object(g.b)("content").t,a=Object(O.useContext)(Pe).setSceneTitle,n=Object(O.useCallback)(()=>{Object(W.e)("/admin/content/new")},["/admin"]);return Object(O.useEffect)(()=>{a(j.a.createElement(Ze,{title:t("scene-title")}))},[a,t]),j.a.createElement(Ve.a,{size:"large",direction:"vertical",style:{width:"100%"}},j.a.createElement(et,{size:"middle",type:"primary",icon:"plus",onClick:n},t("create-new-page")),j.a.createElement(ca,{location:e}))};class la{static getCatalogItems(e,t,a,n,c,r){return q()(Object(X.a)({},r,{method:"GET",url:"/catalog-items",params:{page:e,per_page:t,category:a,name:n,sku:c}}))}static getPublicCatalogItems(e,t,a,n,c){return q()(Object(X.a)({},c,{method:"GET",url:"/catalog-items/public",params:{page:e,per_page:t,language_code:a,category_id:n}}))}static getPublicCatalogItem(e,t=null,a=!1,n){return q()(Object(X.a)({},n,{method:"GET",url:"/catalog-items/".concat(e,"/public"),params:{language:t,is_listing:+a}}))}static getCatalogItem(e,t){return q()(Object(X.a)({},t,{method:"GET",url:"/catalog-items/".concat(e)}))}static createCatalogItem(e,t){return q()(Object(X.a)({},t,{method:"POST",url:"/catalog-items",data:e}))}static updateCatalogItem(e,t,a){return q()(Object(X.a)({},a,{method:"PUT",url:"/catalog-items/".concat(e),data:t}))}static publishCatalogItem(e,t){return q()(Object(X.a)({},t,{method:"PUT",url:"/catalog-items/".concat(e,"/publish")}))}static unpublishCatalogItem(e,t){return q()(Object(X.a)({},t,{method:"PUT",url:"/catalog-items/".concat(e,"/unpublish")}))}static deleteCatalogItem(e,t){return q()(Object(X.a)({},t,{method:"DELETE",url:"/catalog-items/".concat(e)}))}}const ia=({onClick:e,disabledActions:t=[]})=>{const a=Object(g.b)("catalog").t,n=t=>{e(t)},c=[{children:a("table.context-menu.edit"),onClick:()=>n("edit"),icon:"pen"},{children:a("table.context-menu.publish"),onClick:()=>n("publish"),icon:"cloud-upload-alt",disabled:t.includes("publish")},{children:a("table.context-menu.unpublish"),onClick:()=>n("unpublish"),icon:"cloud-download-alt",disabled:t.includes("unpublish")},{children:a("table.context-menu.delete"),onClick:()=>n("delete"),icon:"trash-alt",dialog:{text:a("table.context-menu.delete-dialog.text"),cancel:a("table.context-menu.delete-dialog.cancel"),confirm:a("table.context-menu.delete-dialog.confirm")}}];return j.a.createElement("div",null,j.a.createElement(St,{items:c,"data-test":"Dropdown"},j.a.createElement(Yt,{size:"small"})))},oa=(e,t)=>[{key:"id",dataIndex:"id",title:e("table.columns.id"),fixed:"left",width:90},{key:"field_name_value",dataIndex:"field_name_value",title:e("table.columns.field-name-value"),width:200,render:(t,a)=>j.a.createElement(W.a,{to:"".concat("/admin","/catalog/").concat(a.id)},t||e("table.n-a"))},{key:"field_sku_value",dataIndex:"field_sku_value",title:e("table.columns.field-sku-value"),width:200,render:t=>t||e("table.n-a")},{key:"created_at",dataIndex:"created_at",title:e("table.columns.created-at"),render:e=>Object(s.a)(e,Bt),width:170},{key:"modified_at",dataIndex:"modified_at",title:e("table.columns.modified-at"),render:e=>e?Object(s.a)(e,Bt):"-",width:170},{key:"published_at",dataIndex:"published_at",title:e("table.columns.published-at"),render:e=>e?Object(s.a)(e,Bt):"-",width:170},{key:"published",dataIndex:"published",title:e("table.columns.status"),render:t=>t&&j.a.createElement(Ut.a,{color:P},e("table.published")),width:120},{key:"context_menu",dataIndex:"context_menu",width:60,render:(e,{id:a,published:n})=>j.a.createElement(ia,{disabledActions:n?["publish"]:["unpublish"],onClick:e=>t&&t(e,a)}),fixed:"right"}],sa=e=>e.map(({id:e,field_name_value:t,field_sku_value:a,created_at:n,modified_at:c,published_at:r,published:l})=>({key:String(e),id:e,field_name_value:t?String(t):null,field_sku_value:a?String(a):null,created_at:new Date(n),modified_at:c?new Date(c):null,published_at:r?new Date(r):null,published:!!l})),ua=({filters:{categories:e,name:t,sku:a}})=>{const n=Object(g.b)("catalog").t,c=Object(O.useState)([]),r=Object(v.a)(c,2),l=r[0],i=r[1],o=Object(O.useState)(!1),s=Object(v.a)(o,2),u=s[0],d=s[1],m=Object(O.useState)(0),b=Object(v.a)(m,2),p=b[0],f=b[1],E=Object(O.useState)(1),h=Object(v.a)(E,2),k=h[0],x=h[1],y=Object(O.useState)(0),w=Object(v.a)(y,2),C=w[0],_=w[1],T=Object(O.useRef)(q.a.CancelToken.source()),I=Object(O.useCallback)(Object(Z.a)(Q.a.mark((function n(){var c,r,l,o,s;return Q.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return d(!0),n.next=3,la.getCatalogItems(k,C,e,t,a,{cancelToken:T.current.token});case 3:c=n.sent,r=c.data,l=r.data,o=r.total,s=r.per_page,i(sa(l)),f(o),_(s),d(!1);case 12:case"end":return n.stop()}}),n)}))),[k,C,e,t,a]),A=Object(O.useCallback)(function(){var e=Object(Z.a)(Q.a.mark((function e(t,a){return Q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=t,e.next="edit"===e.t0?3:"publish"===e.t0?5:"unpublish"===e.t0?15:"delete"===e.t0?25:35;break;case 3:return Object(W.e)("/admin/catalog/"+a),e.abrupt("break",36);case 5:return e.prev=5,e.next=8,la.publishCatalogItem(a,{cancelToken:T.current.token});case 8:ct.a.success({message:n("table.publish-success")}),I(),e.next=14;break;case 12:e.prev=12,e.t1=e.catch(5);case 14:return e.abrupt("break",36);case 15:return e.prev=15,e.next=18,la.unpublishCatalogItem(a,{cancelToken:T.current.token});case 18:ct.a.success({message:n("table.unpublish-success")}),I(),e.next=24;break;case 22:e.prev=22,e.t2=e.catch(15);case 24:return e.abrupt("break",36);case 25:return e.prev=25,e.next=28,la.deleteCatalogItem(a,{cancelToken:T.current.token});case 28:ct.a.success({message:n("table.delete-success")}),I(),e.next=34;break;case 32:e.prev=32,e.t3=e.catch(25);case 34:case 35:return e.abrupt("break",36);case 36:case"end":return e.stop()}}),e,null,[[5,12],[15,22],[25,32]])})));return function(t,a){return e.apply(this,arguments)}}(),["/admin",I,n]),S=Object(O.useCallback)(e=>{x(e)},[]);return Object(O.useEffect)(()=>{I()},[I,e,t]),Object(O.useEffect)(()=>{const e=T.current;return()=>e.cancel()},[]),j.a.createElement(at,{columns:oa(n,A),dataSource:l,loading:u,isScrollable:!0,pagination:{current:k,pageSize:C,total:p,onChange:S}})};var da=a(659),ma=a(16);class ba{static getCatalogCategories(e,t,a,n,c){return q()(Object(X.a)({},c,{method:"GET",url:"/catalog-categories",params:{parent_category_id:e,published_only:t?+t:void 0,with_detail:a?+a:void 0,language_code:n}}))}static getCatalogCategory(e,t,a){return q()(Object(X.a)({},a,{method:"GET",url:"/catalog-categories/".concat(e),params:{published_only:t?+t:void 0}}))}static createCatalogCategory(e,t){return q()(Object(X.a)({},t,{method:"POST",url:"/catalog-categories",data:e}))}static updateCatalogCategory(e,t,a){return q()(Object(X.a)({},a,{method:"PUT",url:"/catalog-categories/".concat(e),data:t}))}static deleteCatalogCategory(e,t){return q()(Object(X.a)({},t,{method:"DELETE",url:"/catalog-categories/".concat(e)}))}static publishCatalogCategory(e,t){return q()(Object(X.a)({},t,{method:"PUT",url:"/catalog-categories/".concat(e,"/publish")}))}static unpublishCatalogCategory(e,t){return q()(Object(X.a)({},t,{method:"PUT",url:"/catalog-categories/".concat(e,"/unpublish")}))}}var pa=a(162),ga=a.n(pa);const fa=(e,t,a=!0)=>{const n=ga()(e,(e,t)=>{switch(e){case"id":return["value",t];case"name":return["title",t];case"children":default:return[e,t]}},{deep:!0});return a&&n.unshift({value:0,title:t("none"),parent_id:0,published:0,weight:0}),n};var Oa=a(644),ja=a(645),Ea=a(362),va=a(670),ha=a(656);function ka(){const e=Object(r.a)(["\n  margin: 6px 0 12px;\n  color: ",";\n"]);return ka=function(){return e},e}const xa=l.c.div(ka(),S);var ya=({error:e})=>{const t=Object(g.b)("form-validation").t;return j.a.createElement(xa,null,t(e.message,e.params))};const wa=e=>{let t=e.name,a=e.showValidateSuccess,n=e.showInitialErrorAfterTouched,c=void 0!==n&&n,r=e.children,l=e.validate,i=Object(Je.a)(e,["name","showValidateSuccess","showInitialErrorAfterTouched","children","validate"]);return O.createElement(ma.b,{name:t,validate:l},({form:{errors:e={},touched:n={},initialErrors:l={}}})=>{const o=Object(ma.d)(e,t,void 0),s=Object(ma.d)(l,t,void 0);let u=Object(ma.d)(n,t,!1);Array.isArray(u)&&(u=u.reduce((e,t)=>e||t,!1));const d=void 0!==o&&u,m=void 0!==s,b=!o&&u,p=d||m&&(!u||c);return O.createElement(ha.a.Item,Object.assign({validateStatus:d||m&&!u?"error":b&&a?"success":void 0,hasFeedback:b,help:p&&O.createElement(O.Fragment,null,d&&O.createElement(ya,{error:o}),m&&(!u||c)&&O.createElement(ya,{error:s}))},i),r)})},Ca=Ea.a.SHOW_ALL,_a=ha.a.Item,Ta=da.a.Panel,Ia={name:void 0,sku:void 0,categories:void 0},Aa=({onSubmit:e})=>{const t=Object(g.b)("catalog").t,a=Object(O.useState)(!1),n=Object(v.a)(a,2),c=n[0],r=n[1],l=Object(O.useState)(),i=Object(v.a)(l,2),o=i[0],s=i[1],u=Object(O.useCallback)(({name:t,sku:a,categories:n})=>{const c=[];n&&n.forEach(e=>{c.push(e.value)}),e({categories:c,name:t,sku:a})},[e]),d=Object(O.useCallback)(function(){var e=Object(Z.a)(Q.a.mark((function e(a){var n,c;return Q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r(!0),e.next=4,ba.getCatalogCategories(void 0,void 0,void 0,void 0,{cancelToken:a});case 4:n=e.sent,c=n.data,s(fa(c,t,!1)),r(!1),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),r(!1);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t){return e.apply(this,arguments)}}(),[t]),m=Object(O.useCallback)(()=>j.a.createElement(va.a,{layout:"vertical"},j.a.createElement(wa,{label:t("filters.name"),name:"name"},j.a.createElement(Oa.a,{name:"name"})),j.a.createElement(wa,{label:t("filters.sku"),name:"sku"},j.a.createElement(Oa.a,{name:"sku"})),j.a.createElement(wa,{label:t("filters.categories"),name:"categories"},o?j.a.createElement(ja.a,{treeData:o,name:"categories",showCheckedStrategy:Ca,treeCheckable:!0,treeCheckStrictly:!0,treeDefaultExpandAll:!0,showArrow:!0,allowClear:!0,filterTreeNode:!0,treeNodeFilterProp:"title"}):j.a.createElement(Oa.a,{name:"categories",disabled:!0})),j.a.createElement(_a,null,j.a.createElement(H.a,{htmlType:"submit",type:"primary",size:"large",disabled:c},t("filters.submit")))),[o,c,t]);return Object(O.useEffect)(()=>{const e=q.a.CancelToken.source();return d(e.token),()=>e.cancel()},[d]),j.a.createElement(da.a,null,j.a.createElement(Ta,{header:t("filters.title"),key:"filters"},j.a.createElement(ma.c,{initialValues:Ia,onSubmit:u},()=>m())))},Sa=()=>{const e=Object(O.useState)(Ia),t=Object(v.a)(e,2),a=t[0],n=t[1],c=Object(g.b)("catalog").t,r=Object(O.useContext)(Pe).setSceneTitle,l=Object(O.useCallback)(()=>{Object(W.e)("/admin/catalog/new")},["/admin"]);return Object(O.useEffect)(()=>{r(j.a.createElement(Ze,{title:c("scene-title")}))},[r,c]),j.a.createElement(Ve.a,{size:"large",direction:"vertical",style:{width:"100%"}},j.a.createElement(et,{size:"middle",type:"primary",icon:"plus",onClick:l},c("create-new-catalog-item")),j.a.createElement(Aa,{onSubmit:e=>{n(e)}}),j.a.createElement(ua,{filters:a}))},La=()=>j.a.createElement(j.a.Fragment,null,"Forms"),Ra=()=>j.a.createElement(j.a.Fragment,null,"Settings");class Da{static getCatalogItemTemplates(e,t,a){return q()(Object(X.a)({},a,{method:"GET",url:"/catalog-item-templates",params:{page:e,per_page:t}}))}static getAllCatalogItemTemplates(e){return q()(Object(X.a)({},e,{method:"GET",url:"/catalog-item-templates/all"}))}static getCatalogItemTemplate(e,t){return q()(Object(X.a)({},t,{method:"GET",url:"/catalog-item-templates/".concat(e)}))}static createCatalogItemTemplate(e,t){return q()(Object(X.a)({},t,{method:"POST",url:"/catalog-item-templates",data:e}))}static updateCatalogItemTemplate(e,t,a){return q()(Object(X.a)({},a,{method:"PUT",url:"/catalog-item-templates/".concat(e),data:t}))}static deleteCatalogItemTemplate(e,t){return q()(Object(X.a)({},t,{method:"DELETE",url:"/catalog-item-templates/".concat(e)}))}}const Ga=({onClick:e})=>{const t=Object(g.b)("catalog-templates").t,a=t=>{e(t)},n=[{children:t("table.context-menu.edit"),onClick:()=>a("edit"),icon:"pen"},{children:t("table.context-menu.delete"),onClick:()=>a("delete"),icon:"trash-alt",dialog:{text:t("table.context-menu.delete-dialog.text"),cancel:t("table.context-menu.delete-dialog.cancel"),confirm:t("table.context-menu.delete-dialog.confirm")}}];return j.a.createElement("div",null,j.a.createElement(St,{items:n,"data-test":"Dropdown"},j.a.createElement(Yt,{size:"small"})))},Na=(e,t)=>[{key:"id",dataIndex:"id",title:e("table.columns.id")},{key:"view_id",dataIndex:"view_id",title:e("table.columns.view-id")},{key:"name",dataIndex:"name",title:e("table.columns.name")},{key:"path",dataIndex:"path",title:e("table.columns.path")},{key:"context_menu",dataIndex:"context_menu",width:60,render:(e,{id:a})=>j.a.createElement(Ga,{onClick:e=>t&&t(e,a)})}],Ma=e=>e.map(({id:e,name:t,path:a,view_id:n})=>({key:String(e),id:e,view_id:n,name:t,path:a})),Pa=()=>{const e=Object(g.b)("catalog-templates").t,t=Object(O.useState)([]),a=Object(v.a)(t,2),n=a[0],c=a[1],r=Object(O.useState)(!1),l=Object(v.a)(r,2),i=l[0],o=l[1],s=Object(O.useState)(0),u=Object(v.a)(s,2),d=u[0],m=u[1],b=Object(O.useState)(1),p=Object(v.a)(b,2),f=p[0],E=p[1],h=Object(O.useState)(0),k=Object(v.a)(h,2),x=k[0],y=k[1],w=Object(O.useRef)(q.a.CancelToken.source()),C=Object(O.useCallback)(Object(Z.a)(Q.a.mark((function e(){var t,a,n,r,l;return Q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o(!0),e.next=3,Da.getCatalogItemTemplates(f,x,{cancelToken:w.current.token});case 3:t=e.sent,a=t.data,n=a.data,r=a.total,l=a.per_page,c(Ma(n)),m(r),y(l),o(!1);case 12:case"end":return e.stop()}}),e)}))),[f,x]),_=Object(O.useCallback)(function(){var t=Object(Z.a)(Q.a.mark((function t(a,n){return Q.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:t.t0=a,t.next="edit"===t.t0?3:"delete"===t.t0?5:10;break;case 3:return Object(W.e)("/admin/catalog/templates/"+n),t.abrupt("break",11);case 5:return t.next=7,Da.deleteCatalogItemTemplate(n,{cancelToken:w.current.token});case 7:return ct.a.success({message:e("table.delete-success")}),C(),t.abrupt("break",11);case 10:return t.abrupt("break",11);case 11:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}(),["/admin",C,e]),T=Object(O.useCallback)(e=>{E(e)},[]);return Object(O.useEffect)(()=>{C()},[C]),Object(O.useEffect)(()=>{const e=w.current;return()=>e.cancel()},[]),j.a.createElement(at,{columns:Na(e,_),dataSource:n,loading:i,pagination:{current:f,pageSize:x,total:d,onChange:T}})},za=()=>{const e=Object(g.b)("catalog-templates").t,t=Object(O.useContext)(Pe).setSceneTitle,a=Object(O.useCallback)(()=>{Object(W.e)("/admin/catalog/templates/new")},["/admin"]);return Object(O.useEffect)(()=>{t(j.a.createElement(Ze,{title:e("scene-title")}))},[t,e]),j.a.createElement(j.a.Fragment,null,j.a.createElement(Ve.a,{size:"large",direction:"vertical",style:{width:"100%"}},j.a.createElement(et,{size:"middle",type:"primary",icon:"plus",onClick:a},e("create-new-template")),j.a.createElement(Pa,null)))};var Fa=a(646),Ya=a(12);Ya.f({mixed:{default:"mixed.default",required:"mixed.required"},string:{length:"string.length",min:"string.min",max:"string.max",email:"string.email"},number:{min:"number.min",max:"number.max",lessThan:"number.lessThan",moreThan:"number.moreThan",integer:"number.integer"},date:{min:"date.min",max:"date.max"}});const Va={},Ba=function(){var e=Object(Z.a)(Q.a.mark((function e(t,a,n={abortEarly:!1}){return Q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",a.validate(t,n).then(()=>Promise.resolve(Va)).catch(e=>{if("ValidationError"===e.name){let t={};return e.inner.length>0&&e.inner.forEach(e=>{t=Object(ma.e)(t,e.path,{message:e.message,params:e.params})}),Promise.resolve(t)}return Promise.reject(e)}));case 1:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}();class Ha{static getViews(e,t,a){return q()(Object(X.a)({},a,{method:"GET",url:"/views",params:{page:e,per_page:t}}))}static getAllViews(e){return q()(Object(X.a)({},e,{method:"GET",url:"/views/all"}))}static getView(e,t){return q()(Object(X.a)({},t,{method:"GET",url:"/views/".concat(e)}))}static createView(e,t){return q()(Object(X.a)({},t,{method:"POST",url:"/views",data:e}))}static updateView(e,t,a){return q()(Object(X.a)({},a,{method:"PUT",url:"/views/".concat(e),data:t}))}static deleteView(e,t){return q()(Object(X.a)({},t,{method:"DELETE",url:"/views/".concat(e)}))}}const Wa=ha.a.Item,Ua=Fa.a.Option,Qa=Ya.e().shape({view_id:Ya.d().required(),name:Ya.g().required(),path:Ya.g().required()}),Za=({catalogItemTemplateId:e,view:t})=>{const a=Object(g.b)("catalog-template-detail").t,n=Object(O.useState)([]),c=Object(v.a)(n,2),r=c[0],l=c[1],i=Object(O.useState)(),o=Object(v.a)(i,2),s=o[0],u=o[1],d=Object(O.useState)(!1),m=Object(v.a)(d,2),b=m[0],p=m[1],f=Object(O.useRef)(q.a.CancelToken.source()),E=s||{view_id:void 0,view_id_name:void 0,name:void 0,path:void 0},h=Object(O.useCallback)(function(){var a=Object(Z.a)(Q.a.mark((function a(n){var c,r,l,i;return Q.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if("detail"!==t||!e){a.next=12;break}return p(!0),a.next=4,Da.getCatalogItemTemplate(e,{cancelToken:n});case 4:return c=a.sent,r=c.data,a.next=8,Ha.getView(r.view_id,{cancelToken:n});case 8:l=a.sent,i=l.data.name,u(Object(X.a)({view_id_name:i},r)),p(!1);case 12:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}(),[t,e]),k=Object(O.useCallback)(function(){var e=Object(Z.a)(Q.a.mark((function e(a){var n,c;return Q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("new"!==t){e.next=8;break}return p(!0),e.next=4,Ha.getAllViews({cancelToken:a});case 4:n=e.sent,c=n.data,l(c),p(!1);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[t]),x=Object(O.useCallback)(function(){var n=Object(Z.a)(Q.a.mark((function n({view_id:c,name:r,path:l}){var i,o,s;return Q.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(p(!0),i=new FormData,"new"===t&&i.append("view_id",String(c)),i.append("name",r),i.append("path",l),"new"!==t){n.next=15;break}return n.next=8,Da.createCatalogItemTemplate(i,{cancelToken:f.current.token});case 8:o=n.sent,s=o.data.id,p(!1),ct.a.success({message:a("form.create-success")}),Object(W.e)("/admin/catalog/templates/"+s),n.next=20;break;case 15:if("detail"!==t){n.next=20;break}return n.next=18,Da.updateCatalogItemTemplate(e,i,{cancelToken:f.current.token});case 18:ct.a.success({message:a("form.update-success")}),p(!1);case 20:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),["/admin",t,e,a]),y=Object(O.useCallback)(()=>j.a.createElement(va.a,{layout:"vertical"},j.a.createElement(wa,{label:a("form.view-id"),name:"view_id"},"new"===t?j.a.createElement(Fa.a,{name:"view_id",loading:b},r.map(({id:e,name:t})=>j.a.createElement(Ua,{value:e,key:e},t))):j.a.createElement(Oa.a,{name:"view_id_name",disabled:!0})),j.a.createElement(wa,{label:a("form.name"),name:"name"},j.a.createElement(Oa.a,{name:"name"})),j.a.createElement(wa,{label:a("form.path"),name:"path"},j.a.createElement(Oa.a,{name:"path"})),j.a.createElement("div",null),j.a.createElement(Wa,null,j.a.createElement(H.a,{htmlType:"submit",type:"primary",size:"large",disabled:b},a("new"===t?"form.submit.new":"form.submit.detail")))),[a,t,r,b]);return Object(O.useEffect)(()=>{const e=q.a.CancelToken.source();return k(e.token),h(e.token),()=>e.cancel()},[k,h]),Object(O.useEffect)(()=>{const e=f.current;return()=>e.cancel()},[]),j.a.createElement(ma.c,{initialValues:E,enableReinitialize:!0,validate:e=>Ba(e,Qa),onSubmit:x},()=>y())};var Ja=a(647);class Xa{static getCatalogItemTemplateFields(e,t,a,n){return q()(Object(X.a)({},n,{method:"GET",url:"/catalog-item-templates/".concat(e,"/fields"),params:{page:t,per_page:a}}))}static getCatalogItemTemplateField(e,t,a){return q()(Object(X.a)({},a,{method:"GET",url:"/catalog-item-templates/".concat(e,"/fields/").concat(t)}))}static createCatalogItemTemplateField(e,t,a){return q()(Object(X.a)({},a,{method:"POST",url:"/catalog-item-templates/".concat(e,"/fields"),data:t}))}static updateCatalogItemTemplateField(e,t,a,n){return q()(Object(X.a)({},n,{method:"PUT",url:"/catalog-item-templates/".concat(e,"/fields/").concat(t),data:a}))}static deleteCatalogItemTemplateField(e,t,a){return q()(Object(X.a)({},a,{method:"DELETE",url:"/catalog-item-templates/".concat(e,"/fields/").concat(t)}))}}const Ka=e=>e.map(({id:e,name:t,key:a,default_value:n,is_multilingual:c,is_searchable:r,is_sortable:l,template_group_id:i,template_id:o,type:s,use_in_listing:u,weight:d})=>({key:String(e),id:e,template_id:o,template_group_id:i,is_multilingual:!!c,name:t,field_key:a,type:s,default_value:n,is_searchable:!!r,is_sortable:!!l,use_in_listing:!!u,weight:d})),qa=({onClick:e})=>{const t=Object(g.b)("catalog-template-detail").t,a=t=>{e(t)},n=[{children:t("fields.table.context-menu.edit"),onClick:()=>a("edit"),icon:"pen"},{children:t("fields.table.context-menu.delete"),onClick:()=>a("delete"),icon:"trash-alt",dialog:{text:t("fields.table.context-menu.delete-dialog.text"),cancel:t("fields.table.context-menu.delete-dialog.cancel"),confirm:t("fields.table.context-menu.delete-dialog.confirm")}}];return j.a.createElement("div",null,j.a.createElement(St,{items:n,"data-test":"Dropdown"},j.a.createElement(Yt,{size:"small"})))},$a=(e,t)=>[{key:"id",dataIndex:"id",title:e("fields.table.columns.id"),width:90,fixed:"left"},{key:"type",dataIndex:"type",title:e("fields.table.columns.type"),width:100,render:t=>j.a.createElement(Ut.a,{color:z[t]},e("enum:".concat(t)))},{key:"name",dataIndex:"name",title:e("fields.table.columns.name"),width:220},{key:"field_key",dataIndex:"field_key",title:e("fields.table.columns.key"),width:180},{key:"use_in_listing",dataIndex:"use_in_listing",title:e("fields.table.columns.use-in-listing"),width:120,render:t=>e(t?"fields.table.yes":"fields.table.no")},{key:"is_multilingual",dataIndex:"is_multilingual",title:e("fields.table.columns.is-multilingual"),width:130,render:t=>e(t?"fields.table.yes":"fields.table.no")},{key:"is_sortable",dataIndex:"is_sortable",title:e("fields.table.columns.is-sortable"),width:120,render:t=>e(t?"fields.table.yes":"fields.table.no")},{key:"is_searchable",dataIndex:"is_searchable",title:e("fields.table.columns.is-searchable"),width:120,render:t=>e(t?"fields.table.yes":"fields.table.no")},{fixed:"right",key:"context_menu",dataIndex:"context_menu",width:60,render:(e,{id:a})=>j.a.createElement(qa,{onClick:e=>t&&t(e,a)})}];function en(){const e=Object(r.a)(["\n  display: flex;\n  flex-direction: row;\n  justify-content: space-between;\n"]);return en=function(){return e},e}const tn=l.c.div(en()),an=Ye.a.Title,nn=({catalogItemTempalteId:e})=>{const t=Object(g.b)("catalog-template-detail").t,a=Object(O.useState)([]),n=Object(v.a)(a,2),c=n[0],r=n[1],l=Object(O.useState)(!1),i=Object(v.a)(l,2),o=i[0],s=i[1],u=Object(O.useState)(0),d=Object(v.a)(u,2),m=d[0],b=d[1],p=Object(O.useState)(1),f=Object(v.a)(p,2),E=f[0],h=f[1],k=Object(O.useState)(0),x=Object(v.a)(k,2),y=x[0],w=x[1],C=Object(O.useRef)(q.a.CancelToken.source()),_=Object(O.useCallback)(Object(Z.a)(Q.a.mark((function t(){var a,n,c,l,i;return Q.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return s(!0),t.next=3,Xa.getCatalogItemTemplateFields(e,E,y,{cancelToken:C.current.token});case 3:a=t.sent,n=a.data,c=n.data,l=n.total,i=n.per_page,r(Ka(c)),b(l),w(i),s(!1);case 12:case"end":return t.stop()}}),t)}))),[E,y,e]),T=Object(O.useCallback)(function(){var a=Object(Z.a)(Q.a.mark((function a(n,c){return Q.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:a.t0=n,a.next="edit"===a.t0?3:"delete"===a.t0?5:15;break;case 3:return Object(W.e)("/admin/catalog/templates/"+e+"/fields/"+c),a.abrupt("break",16);case 5:return a.prev=5,a.next=8,Xa.deleteCatalogItemTemplateField(e,c,{cancelToken:C.current.token});case 8:ct.a.success({message:t("fields.table.delete-success")}),_(),a.next=14;break;case 12:a.prev=12,a.t1=a.catch(5);case 14:case 15:return a.abrupt("break",16);case 16:case"end":return a.stop()}}),a,null,[[5,12]])})));return function(e,t){return a.apply(this,arguments)}}(),["/admin",_,t,e]),I=Object(O.useCallback)(e=>{h(e)},[]),A=Object(O.useCallback)(()=>{Object(W.e)("/admin/catalog/templates/"+e+"/fields/new")},["/admin",e]);return Object(O.useEffect)(()=>{_()},[_]),Object(O.useEffect)(()=>{const e=C.current;return()=>e.cancel()},[]),j.a.createElement(j.a.Fragment,null,j.a.createElement(Ja.a,null),j.a.createElement(Ve.a,{size:"large",direction:"vertical",style:{width:"100%"}},j.a.createElement(tn,null,j.a.createElement(an,{level:3},t("fields.title")),j.a.createElement(et,{size:"middle",type:"primary",icon:"plus",onClick:A},t("fields.create-new-field"))),j.a.createElement(at,{columns:$a(t,T),dataSource:c,loading:o,isScrollable:!0,pagination:{current:E,pageSize:y,total:m,onChange:I}})))},cn=({title:e,to:t})=>{const a=Object(O.useCallback)(()=>{Object(W.e)("/admin"+t)},[t,"/admin"]);return j.a.createElement(et,{icon:"arrow-left",size:"small",type:"primary",shape:"round",ghost:!0,onClick:a},e)},rn=({catalogItemTemplateId:e,view:t})=>{const a=Object(g.b)("catalog-template-detail").t,n=Object(O.useContext)(Pe).setSceneTitle;return Object(O.useEffect)(()=>{n(j.a.createElement(Ze,{title:a("detail"===t?"scene-title.detail":"scene-title.new"),extraContent:j.a.createElement(cn,{title:a("scene-title.back-to-templates"),to:"/catalog/templates"})}))},[n,a,t]),j.a.createElement(j.a.Fragment,null,j.a.createElement(Za,{catalogItemTemplateId:e,view:t}),"detail"===t&&j.a.createElement(nn,{catalogItemTempalteId:e}))};var ln=a(648),on=a(664);let sn;!function(e){e.RICH_TEXT="RICH_TEXT",e.TEXT="TEXT",e.STRING="STRING",e.INTEGER="INTEGER",e.BOOLEAN="BOOLEAN",e.DATE="DATE",e.DATE_TIME="DATE_TIME",e.IMAGE="IMAGE",e.GALLERY="GALLERY",e.LINK="LINK",e.PRICE="PRICE",e.TAX_RATE="TAX_RATE"}(sn||(sn={}));const un=({default_value:e,id:t,is_multilingual:a,is_searchable:n,is_sortable:c,name:r,key:l,template_group_id:i,template_id:o,type:s,use_in_listing:u,weight:d})=>({is_multilingual:!!a,use_in_listing:!!u,is_sortable:!!c,is_searchable:!!n,default_value:e,id:t,name:r,key:l,template_group_id:i,template_id:o,type:s,weight:d}),dn=ha.a.Item,mn=Fa.a.Option,bn=Ya.e().shape({template_group_id:Ya.d().nullable().notRequired(),is_multilingual:Ya.b().required(),name:Ya.g().required(),key:Ya.g().matches(/^[A-Za-z0-9_.]+$/).required(),type:Ya.c().required(),default_value:Ya.g().notRequired(),use_in_listing:Ya.b().required(),is_sortable:Ya.b().required(),is_searchable:Ya.b().required(),weight:Ya.d().required()}),pn=({catalogItemTemplateId:e,catalogItemTemplateFieldId:t,view:a})=>{const n=Object(g.b)("catalog-template-field-detail").t,c=Object(O.useState)(),r=Object(v.a)(c,2),l=r[0],i=r[1],o=Object(O.useState)(!1),s=Object(v.a)(o,2),u=s[0],d=s[1],m=Object(O.useRef)(q.a.CancelToken.source()),b=l||{template_group_id:null,is_multilingual:!1,name:void 0,key:void 0,type:void 0,default_value:"",use_in_listing:!1,is_sortable:!1,is_searchable:!1,weight:50},p=Object(O.useRef)(),f=Object(O.useCallback)(function(){var n=Object(Z.a)(Q.a.mark((function n(c){var r,l;return Q.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if("detail"!==a||!e||!t){n.next=8;break}return d(!0),n.next=4,Xa.getCatalogItemTemplateField(e,t,{cancelToken:c});case 4:r=n.sent,l=r.data,i(un(l)),d(!1);case 8:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),[a,e,t]),E=Object(O.useCallback)(function(){var c=Object(Z.a)(Q.a.mark((function c({is_multilingual:r,default_value:l,name:i,key:o,type:s,is_searchable:u,is_sortable:b,use_in_listing:g,weight:f}){var O,j;return Q.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:if(d(!0),(O=new FormData).append("type",String(s)),O.append("name",i),O.append("key",o),O.append("is_multilingual",String(+r)),O.append("default_value",String(l)),O.append("is_searchable",String(+u)),O.append("is_sortable",String(+b)),O.append("use_in_listing",String(+g)),O.append("weight",String(f)),"new"!==a){c.next=24;break}return c.prev=12,c.next=15,Xa.createCatalogItemTemplateField(e,O,{cancelToken:m.current.token});case 15:"create"===p.current?Object(W.e)("/admin/catalog/templates/"+e):(j="/admin/catalog/templates/"+e+"/fields/new",Object(W.e)("/admin/redirect-to",{state:{to:j}})),ct.a.success({message:n("form.create-success")}),c.next=22;break;case 19:c.prev=19,c.t0=c.catch(12),d(!1);case 22:c.next=34;break;case 24:if("detail"!==a){c.next=34;break}return c.prev=25,c.next=28,Xa.updateCatalogItemTemplateField(e,t,O,{cancelToken:m.current.token});case 28:ct.a.success({message:n("form.update-success")}),c.next=33;break;case 31:c.prev=31,c.t1=c.catch(25);case 33:d(!1);case 34:case"end":return c.stop()}}),c,null,[[12,19],[25,31]])})));return function(e){return c.apply(this,arguments)}}(),["/admin",a,e,t,n]),h=Object(O.useCallback)((e,t)=>{p.current=e,t()},[]),k=Object(O.useCallback)(({submitForm:e})=>j.a.createElement(va.a,{layout:"vertical"},j.a.createElement(wa,{label:n("form.type"),name:"type"},j.a.createElement(Ve.a,{size:"middle",direction:"vertical",style:{width:"100%"}},j.a.createElement(Fa.a,{name:"type"},Object.keys(sn).map(e=>j.a.createElement(mn,{value:e,key:e},j.a.createElement(Ut.a,{color:z[e]},n("enum:".concat(e)))))),"detail"===a&&j.a.createElement(on.a,{type:"warning",message:n("form.type-warning")}))),j.a.createElement(wa,{label:n("form.name"),name:"name"},j.a.createElement(Oa.a,{name:"name"})),j.a.createElement(wa,{label:n("form.key"),name:"key"},j.a.createElement(Oa.a,{name:"key"})),j.a.createElement(wa,{label:n("form.default-value"),name:"default_value"},j.a.createElement(Oa.a,{name:"default_value"})),j.a.createElement(wa,{label:n("form.is-multilingual"),name:"is_multilingual"},j.a.createElement(ln.a,{name:"is_multilingual"})),j.a.createElement(wa,{label:n("form.use-in-listing"),name:"use_in_listing"},j.a.createElement(ln.a,{name:"use_in_listing"})),j.a.createElement(wa,{label:n("form.is-sortable"),name:"is_sortable"},j.a.createElement(ln.a,{name:"is_sortable"})),j.a.createElement(wa,{label:n("form.is-searchable"),name:"is_searchable"},j.a.createElement(ln.a,{name:"is_searchable"})),j.a.createElement(wa,{label:n("form.weight"),name:"weight"},j.a.createElement(Oa.a,{name:"weight",type:"number"})),j.a.createElement(dn,null,"new"===a?j.a.createElement(Ve.a,{size:"middle",direction:"horizontal"},j.a.createElement(H.a,{htmlType:"button",type:"primary",size:"large",disabled:u,onClick:()=>h("create",e)},n("form.submit.new.create")),j.a.createElement(H.a,{htmlType:"button",type:"default",size:"large",disabled:u,onClick:()=>h("create-another",e)},n("form.submit.new.create-and-create-another"))):j.a.createElement(H.a,{htmlType:"submit",type:"primary",size:"large",disabled:u},n("form.submit.detail")))),[n,a,u,h]);return Object(O.useEffect)(()=>{const e=q.a.CancelToken.source();return f(e.token),()=>e.cancel()},[f]),Object(O.useEffect)(()=>{const e=m.current;return()=>e.cancel()},[]),j.a.createElement(ma.c,{initialValues:b,enableReinitialize:!0,validate:e=>Ba(e,bn),onSubmit:E},e=>k(e))},gn=({catalogItemTemplateId:e,catalogItemTemplateFieldId:t,view:a})=>{const n=Object(g.b)("catalog-template-field-detail").t,c=Object(O.useContext)(Pe).setSceneTitle;return Object(O.useEffect)(()=>{c(j.a.createElement(Ze,{title:n("detail"===a?"scene-title.detail":"scene-title.new"),extraContent:j.a.createElement(cn,{title:n("scene-title.back-to-template-detail"),to:"/catalog/templates/"+e})}))},[n,e,a,c]),j.a.createElement(pn,{catalogItemTemplateFieldId:t,catalogItemTemplateId:e,view:a})};var fn=a(663);const On=()=>{const e=Object(g.b)().t,t=Object(O.useCallback)(()=>{Object(W.e)("/admin/")},["/admin"]);return j.a.createElement(fn.a,{status:"500",title:"500",subTitle:e("internal-server-error.text"),extra:j.a.createElement(H.a,{type:"primary",onClick:t},e("internal-server-error.button"))})};function jn(){const e=Object(r.a)(["\n  min-height: calc(100vh - 134px);\n  padding: 50px 0;\n  background: ",";\n"]);return jn=function(){return e},e}const En=h.a.Footer,vn=Object(l.c)(h.a)(jn(),k),hn=({children:e})=>j.a.createElement(h.a,null,j.a.createElement(Me,null,j.a.createElement(fe,null),j.a.createElement(de,null)),j.a.createElement(vn,null,e),j.a.createElement(En,null,"Footer")),kn=()=>{const e=Object(g.b)().t,t=Object(O.useCallback)(()=>{Object(W.e)("/admin/")},["/admin"]);return console.log("404"),j.a.createElement(fn.a,{status:"404",title:"404",subTitle:e("page-not-found.text"),extra:j.a.createElement(H.a,{type:"primary",onClick:t},e("page-not-found.button"))})},xn=({location:{state:e}})=>(Object(O.useEffect)(()=>{Object(W.e)(e.to)},[e]),null);class yn{static getCatalogLanguages(e,t,a){return q()(Object(X.a)({},a,{method:"GET",url:"/catalog-languages",params:{page:e,per_page:t}}))}static getAllCatalogLanguages(e){return q()(Object(X.a)({},e,{method:"GET",url:"/catalog-languages/all"}))}static getCatalogLanguage(e,t){return q()(Object(X.a)({},t,{method:"GET",url:"/catalog-languages/".concat(e)}))}static createCatalogLanguage(e,t){return q()(Object(X.a)({},t,{method:"POST",url:"/catalog-languages",data:e}))}static updateCatalogLanguage(e,t,a){return q()(Object(X.a)({},a,{method:"PUT",url:"/catalog-languages/".concat(e),data:t}))}static deleteCatalogLanguage(e,t){return q()(Object(X.a)({},t,{method:"DELETE",url:"/catalog-languages/".concat(e)}))}}const wn=({onClick:e})=>{const t=Object(g.b)("catalog-languages").t,a=Object(O.useCallback)(t=>{e(t)},[e]),n=[{children:t("table.context-menu.edit"),onClick:()=>a("edit"),icon:"pen"},{children:t("table.context-menu.delete"),onClick:()=>a("delete"),icon:"trash-alt",dialog:{text:t("table.context-menu.delete-dialog.text"),cancel:t("table.context-menu.delete-dialog.cancel"),confirm:t("table.context-menu.delete-dialog.confirm")}}];return j.a.createElement("div",null,j.a.createElement(St,{items:n,"data-test":"Dropdown"},j.a.createElement(Yt,{size:"small"})))},Cn=(e,t)=>[{key:"code",dataIndex:"code",title:e("table.columns.code"),width:200},{key:"name",dataIndex:"name",title:e("table.columns.name")},{key:"context_menu",dataIndex:"context_menu",width:60,render:(e,{code:a})=>j.a.createElement(wn,{onClick:e=>t&&t(e,a)}),fixed:"right"}],_n=e=>e.map(({name:e,code:t})=>({key:String(t),name:e,code:t})),Tn=()=>{const e=Object(g.b)("catalog-languages").t,t=Object(O.useState)([]),a=Object(v.a)(t,2),n=a[0],c=a[1],r=Object(O.useState)(!1),l=Object(v.a)(r,2),i=l[0],o=l[1],s=Object(O.useState)(0),u=Object(v.a)(s,2),d=u[0],m=u[1],b=Object(O.useState)(1),p=Object(v.a)(b,2),f=p[0],E=p[1],h=Object(O.useState)(0),k=Object(v.a)(h,2),x=k[0],y=k[1],w=Object(O.useRef)(q.a.CancelToken.source()),C=Object(O.useCallback)(Object(Z.a)(Q.a.mark((function e(){var t,a,n,r,l;return Q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o(!0),e.next=3,yn.getCatalogLanguages(f,x,{cancelToken:w.current.token});case 3:t=e.sent,a=t.data,n=a.data,r=a.total,l=a.per_page,c(_n(n)),m(r),y(l),o(!1);case 12:case"end":return e.stop()}}),e)}))),[f,x]),_=Object(O.useCallback)(function(){var t=Object(Z.a)(Q.a.mark((function t(a,n){return Q.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:t.t0=a,t.next="edit"===t.t0?3:"delete"===t.t0?5:15;break;case 3:return Object(W.e)("/admin/catalog/languages/"+n),t.abrupt("break",16);case 5:return t.prev=5,t.next=8,yn.deleteCatalogLanguage(n,{cancelToken:w.current.token});case 8:ct.a.success({message:e("table.delete-success")}),C(),t.next=14;break;case 12:t.prev=12,t.t1=t.catch(5);case 14:case 15:return t.abrupt("break",16);case 16:case"end":return t.stop()}}),t,null,[[5,12]])})));return function(e,a){return t.apply(this,arguments)}}(),["/admin",C,e]),T=Object(O.useCallback)(e=>{E(e)},[]);return Object(O.useEffect)(()=>{C()},[C]),Object(O.useEffect)(()=>{const e=w.current;return()=>e.cancel()},[]),j.a.createElement(at,{columns:Cn(e,_),dataSource:n,loading:i,pagination:{current:f,pageSize:x,total:d,onChange:T}})},In=()=>{const e=Object(g.b)("catalog-languages").t,t=Object(O.useContext)(Pe).setSceneTitle,a=Object(O.useCallback)(()=>{Object(W.e)("/admin/catalog/languages/new")},["/admin"]);return Object(O.useEffect)(()=>{t(j.a.createElement(Ze,{title:e("scene-title")}))},[t,e]),j.a.createElement(Ve.a,{size:"large",direction:"vertical",style:{width:"100%"}},j.a.createElement(et,{size:"middle",type:"primary",icon:"plus",onClick:a},e("create-new-catalog-language")),j.a.createElement(Tn,null))};class An{static getCatalogCurrencies(e,t,a){return q()(Object(X.a)({},a,{method:"GET",url:"/catalog-currencies",params:{page:e,per_page:t}}))}static getAllCatalogCurrencies(e){return q()(Object(X.a)({},e,{method:"GET",url:"/catalog-currencies/all"}))}static getCatalogCurrency(e,t){return q()(Object(X.a)({},t,{method:"GET",url:"/catalog-currencies/".concat(e)}))}static createCatalogCurrency(e,t){return q()(Object(X.a)({},t,{method:"POST",url:"/catalog-currencies",data:e}))}static updateCatalogCurrency(e,t,a){return q()(Object(X.a)({},a,{method:"PUT",url:"/catalog-currencies/".concat(e),data:t}))}static deleteCatalogCurrency(e,t){return q()(Object(X.a)({},t,{method:"DELETE",url:"/catalog-currencies/".concat(e)}))}}const Sn=ha.a.Item,Ln=Fa.a.Option,Rn=Ya.e().shape({name:Ya.g().required(),code:Ya.g().required(),default_currency_id:Ya.d()}),Dn=({code:e,view:t})=>{const a=Object(g.b)("catalog-language-detail").t,n=Object(O.useState)(),c=Object(v.a)(n,2),r=c[0],l=c[1],i=Object(O.useState)([]),o=Object(v.a)(i,2),s=o[0],u=o[1],d=Object(O.useState)(!1),m=Object(v.a)(d,2),b=m[0],p=m[1],f=Object(O.useRef)(q.a.CancelToken.source()),E=r||{name:void 0,code:void 0,default_currency_id:void 0},h=Object(O.useCallback)(function(){var a=Object(Z.a)(Q.a.mark((function a(n){var c,r;return Q.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if("detail"!==t||!e){a.next=8;break}return p(!0),a.next=4,yn.getCatalogLanguage(e,{cancelToken:n});case 4:c=a.sent,r=c.data,l(r),p(!1);case 8:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}(),[t,e]),k=Object(O.useCallback)(function(){var e=Object(Z.a)(Q.a.mark((function e(t){var a,n;return Q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return p(!0),e.next=3,An.getAllCatalogCurrencies({cancelToken:t});case 3:a=e.sent,n=a.data,u(n),p(!1);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[u]),x=Object(O.useCallback)(function(){var n=Object(Z.a)(Q.a.mark((function n({code:c,name:r,default_currency_id:l}){var i,o;return Q.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,p(!0),(i=new FormData).append("name",r),i.append("code",c),i.append("default_currency_id",String(l)),"new"!==t){n.next=14;break}return n.next=9,yn.createCatalogLanguage(i,{cancelToken:f.current.token});case 9:p(!1),ct.a.success({message:a("form.create-success")}),Object(W.e)("/admin/catalog/languages"),n.next=20;break;case 14:if("detail"!==t){n.next=20;break}return n.next=17,yn.updateCatalogLanguage(e,i,{cancelToken:f.current.token});case 17:ct.a.success({message:a("form.update-success")}),p(!1),e!==c&&(o="/admin/catalog/languages/"+c,Object(W.e)("/admin/redirect-to",{state:{to:o}}));case 20:n.next=25;break;case 22:n.prev=22,n.t0=n.catch(0),p(!1);case 25:case"end":return n.stop()}}),n,null,[[0,22]])})));return function(e){return n.apply(this,arguments)}}(),["/admin",t,e,a]),y=Object(O.useCallback)(()=>j.a.createElement(va.a,{layout:"vertical"},j.a.createElement(wa,{label:a("form.name"),name:"name"},j.a.createElement(Oa.a,{name:"name"})),j.a.createElement(wa,{label:a("form.code"),name:"code"},j.a.createElement(Ve.a,{size:"middle",direction:"vertical",style:{width:"100%"}},j.a.createElement(Oa.a,{name:"code"}),"detail"===t&&j.a.createElement(on.a,{type:"warning",message:a("form.code-warning")}))),j.a.createElement(wa,{label:a("form.currency"),name:"default_currency_id"},j.a.createElement(Fa.a,{name:"default_currency_id"},s.map(({name:e,code:t,id:a})=>j.a.createElement(Ln,{value:a,key:a},e," (",t,")")))),j.a.createElement(Sn,null,j.a.createElement(H.a,{htmlType:"submit",type:"primary",size:"large",disabled:b},a("new"===t?"form.submit.new":"form.submit.detail")))),[a,t,b,s]);return Object(O.useEffect)(()=>{const e=q.a.CancelToken.source();return h(e.token),k(e.token),()=>e.cancel()},[h,k]),Object(O.useEffect)(()=>{const e=f.current;return()=>e.cancel()},[]),j.a.createElement(ma.c,{initialValues:E,enableReinitialize:!0,validate:e=>Ba(e,Rn),onSubmit:x},()=>y())},Gn=({code:e,view:t})=>{const a=Object(g.b)("catalog-language-detail").t,n=Object(O.useContext)(Pe).setSceneTitle;return Object(O.useEffect)(()=>{n(j.a.createElement(Ze,{title:a("detail"===t?"scene-title.detail":"scene-title.new"),extraContent:j.a.createElement(cn,{title:a("scene-title.back-to-languages"),to:"/catalog/languages"})}))},[n,a,t]),j.a.createElement(Dn,{code:e,view:t})};class Nn{static updateCatalogItemTemplateFieldValues(e,t,a){return q()(Object(X.a)({},a,{method:"PUT",url:"/catalog-item-templates/".concat(e,"/values"),data:t}))}}const Mn=ha.a.Item,Pn=Fa.a.Option,zn=Ya.e().shape({template_id:Ya.d().required()}),Fn=()=>{const e=Object(g.b)("catalog-detail").t,t=Object(O.useState)([]),a=Object(v.a)(t,2),n=a[0],c=a[1],r=Object(O.useState)(!1),l=Object(v.a)(r,2),i=l[0],o=l[1],s=Object(O.useRef)(q.a.CancelToken.source()),u={template_id:void 0},d=Object(O.useCallback)(function(){var e=Object(Z.a)(Q.a.mark((function e(t){var a,n;return Q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o(!0),e.next=3,Da.getAllCatalogItemTemplates({cancelToken:t});case 3:a=e.sent,n=a.data,c(n),o(!1);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[]),m=Object(O.useCallback)(function(){var t=Object(Z.a)(Q.a.mark((function t({template_id:a}){var n,c,r,l;return Q.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("submit"),t.prev=1,o(!0),(n=new FormData).append("template_id",String(a)),t.next=7,la.createCatalogItem(n,{cancelToken:s.current.token});case 7:return c=t.sent,r=c.data.id,(l=new FormData).append("item_id",String(r)),t.next=13,Nn.updateCatalogItemTemplateFieldValues(a,l,{cancelToken:s.current.token});case 13:Object(W.e)("/admin/catalog/"+r),ct.a.success({message:e("create.form.create-success")}),t.next=21;break;case 17:t.prev=17,t.t0=t.catch(1),console.log(t.t0),o(!1);case 21:case"end":return t.stop()}}),t,null,[[1,17]])})));return function(e){return t.apply(this,arguments)}}(),["/admin",e]),b=Object(O.useCallback)(()=>j.a.createElement(va.a,{layout:"vertical"},j.a.createElement(wa,{label:e("create.form.template"),name:"template_id"},j.a.createElement(Fa.a,{name:"template_id"},n.map(({id:e,name:t})=>j.a.createElement(Pn,{value:e,key:e},t)))),j.a.createElement(Mn,null,j.a.createElement(H.a,{htmlType:"submit",type:"primary",size:"large",disabled:i},e("create.form.submit")))),[e,n,i]);return Object(O.useEffect)(()=>{const e=q.a.CancelToken.source();return d(e.token),()=>e.cancel()},[d]),Object(O.useEffect)(()=>{const e=s.current;return()=>e.cancel()},[]),j.a.createElement(ma.c,{initialValues:u,validate:e=>Ba(e,zn),onSubmit:m},()=>b())};var Yn=a(660);function Vn(){const e=Object(r.a)(["\n  margin-bottom: 8px;\n"]);return Vn=function(){return e},e}function Bn(){const e=Object(r.a)(["\n  grid-column: ",";\n"]);return Bn=function(){return e},e}function Hn(){const e=Object(r.a)(["\n  display: grid;\n  grid-gap: 24px 12px;\n  grid-template-columns: ",";\n  padding: 24px;\n  border: 1px solid ",";\n  border-radius: 2px;\n"]);return Hn=function(){return e},e}const Wn=l.c.div(Hn(),({columns:e})=>e&&"repeat(".concat(e,", 1fr)"),w),Un=l.c.div(Bn(),({span:e})=>e&&e),Qn=l.c.div(Vn()),Zn=({items:e,columns:t=4,loading:a=!1,className:n})=>j.a.createElement(Wn,{columns:t,className:n},a?j.a.createElement(Yn.a,{active:!0,loading:!0,paragraph:{rows:4,width:"100%"}}):j.a.createElement(j.a.Fragment,null,e.map(({label:e,value:t,span:a,key:n})=>j.a.createElement(Un,{span:a,key:n},j.a.createElement(Qn,null,e),t))));function Jn(){const e=Object(r.a)(["\n  display: flex;\n  justify-content: flex-end;\n  margin-bottom: 24px;\n"]);return Jn=function(){return e},e}function Xn(){const e=Object(r.a)(["\n  margin-bottom: 24px;\n"]);return Xn=function(){return e},e}const Kn=H.a.Group,qn=Object(l.c)(Zn)(Xn()),$n=l.c.div(Jn()),ec=()=>{const e=Object(g.b)("catalog-detail").t,t=Object(O.useContext)(Pr),a=t.data,n=t.getData,c=t.loading,r=Object(O.useRef)(q.a.CancelToken.source()),l=Object(O.useCallback)(Object(Z.a)(Q.a.mark((function t(){return Q.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!a){t.next=10;break}return t.prev=1,t.next=4,la.publishCatalogItem(a.id,{cancelToken:r.current.token});case 4:ct.a.success({message:e("publish-success")}),n(),t.next=10;break;case 8:t.prev=8,t.t0=t.catch(1);case 10:case"end":return t.stop()}}),t,null,[[1,8]])}))),[a,n,e]),i=Object(O.useCallback)(Object(Z.a)(Q.a.mark((function t(){return Q.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!a){t.next=10;break}return t.prev=1,t.next=4,la.unpublishCatalogItem(a.id,{cancelToken:r.current.token});case 4:ct.a.success({message:e("unpublish-success")}),n(),t.next=10;break;case 8:t.prev=8,t.t0=t.catch(1);case 10:case"end":return t.stop()}}),t,null,[[1,8]])}))),[a,n,e]);if(a){const t=a.created_at,n=a.modified_at,r=a.published_at,o=a.published,u=[{key:"created-at",label:e("info.created-at"),value:t?Object(s.a)(new Date(t),Bt):"-"},{key:"modified-at",label:e("info.modified-at"),value:n?Object(s.a)(new Date(n),Bt):"-"},{key:"published-at",label:e("info.published-at"),value:r?Object(s.a)(new Date(r),Bt):"-"},{key:"status",label:e("info.status"),value:!!o&&j.a.createElement(Ut.a,{color:P},e("info.published"))}];return j.a.createElement(j.a.Fragment,null,j.a.createElement($n,null,j.a.createElement(Kn,null,j.a.createElement(et,{icon:"cloud-upload-alt",size:"middle",type:"default",disabled:!!o||c,onClick:l},e("info.publish")),j.a.createElement(et,{icon:"cloud-download-alt",size:"middle",type:"default",disabled:!o||c,onClick:i},e("info.unpublish")),j.a.createElement(et,{icon:"trash-alt",size:"middle",type:"danger",disabled:!0},e("info.delete")))),j.a.createElement(qn,{items:u,loading:c}))}return null},tc=e=>!Object.keys(e).includes("extra_content");var ac=a(165);const nc=(e,t,a)=>{const n=e.name,c=e.id;let r=n;a&&(r="".concat(n," (").concat(a.name,")"));const l="fields[".concat(c,"]").concat(a?"[".concat(a.code,"][value]"):"[value]");return j.a.createElement(wa,{label:r,name:l,key:l},t(l))};function cc(){const e=Object(r.a)(["\n  display: grid;\n  grid-gap: 1rem;\n  grid-template-columns: 1fr 1fr;\n"]);return cc=function(){return e},e}function rc(){const e=Object(r.a)(["\n  margin: 24px 0;\n  padding: 24px 24px 12px;\n  border: 1px solid ",";\n  border-radius: 3px;\n\n  form {\n    display: grid;\n    grid-gap: 24px;\n    grid-template-columns: 1fr 1fr 1fr;\n    margin-top: 12px;\n\n    > .ant-row {\n      margin: 0;\n    }\n  }\n"]);return rc=function(){return e},e}const lc=l.c.div(rc(),w),ic=l.c.div(cc()),oc=({languages:e,field:t})=>t.is_multilingual?j.a.createElement(ic,null,e.map(e=>nc(t,e=>j.a.createElement(Oa.a,{name:e}),e))):nc(t,e=>j.a.createElement(Oa.a,{name:e})),sc=({languages:e,field:t})=>t.is_multilingual?j.a.createElement(ic,null,e.map(e=>nc(t,e=>j.a.createElement(ln.a,{name:e}),e))):nc(t,e=>j.a.createElement(ln.a,{name:e}));var uc=a(651);const dc=({languages:e,field:t})=>t.is_multilingual?j.a.createElement(ic,null,e.map(e=>nc(t,e=>j.a.createElement(uc.a,{format:Ht,name:e}),e))):nc(t,e=>j.a.createElement(uc.a,{format:Ht,name:e})),mc=({languages:e,field:t})=>{const a=t.is_multilingual,n={format:"HH:mm"};return a?j.a.createElement(ic,null,e.map(e=>nc(t,e=>j.a.createElement(uc.a,{format:Wt,name:e,showTime:n}),e))):nc(t,e=>j.a.createElement(uc.a,{format:Wt,name:e,showTime:n}))};var bc=a(662);const pc=({languages:e,field:t})=>t.is_multilingual?j.a.createElement(ic,null,e.map(e=>nc(t,e=>j.a.createElement(bc.a,{name:e}),e))):nc(t,e=>j.a.createElement(bc.a,{name:e}));var gc=a(126),fc=a(268);const Oc=(e,t,a)=>{if(!e.fields)return{};const n=t.replace("[value]","").match(/\[(.*)\]/)[1],c=Object.keys(e.fields).find(e=>e===n);if(c){const t=e.fields[c];return a?t[a].extra_content||{}:t.extra_content||{}}return{}},jc=e=>e.replace("[value]","[extra_content]"),Ec=ha.a.Item,vc=({languages:e,field:t,t:a})=>{const n=Object(ma.g)(),c=n.setFieldValue,r=n.values,l=t.is_multilingual,i=Object(O.useCallback)((e,t)=>{const a=Oc(r,t);c(jc(t),Object(X.a)({},a,{format:e}))},[c,r]),o=Object(O.useCallback)((e,t)=>{const a=Oc(r,t);c(jc(t),Object(X.a)({},a,{target:e}))},[c,r]),s=Object(O.useCallback)((e,t)=>{const a=Oc(r,t);c(jc(t),Object(X.a)({},a,{rel:e}))},[c,r]),u=Object(O.useCallback)((e,t)=>(null===t&&(t={rel:"",format:"default",target:"self"}),j.a.createElement(j.a.Fragment,null,j.a.createElement(Oa.a,{name:e}),j.a.createElement(ha.a,{layout:"inline"},j.a.createElement(Ec,{label:a("fields.link.target.label")},j.a.createElement(gc.a,{defaultValue:t.target,onChange:t=>o(t,e)},j.a.createElement(gc.a.Option,{value:"self"},a("fields.link.target.self")),j.a.createElement(gc.a.Option,{value:"blank"},a("fields.link.target.blank")),j.a.createElement(gc.a.Option,{value:"parent"},a("fields.link.target.parent")),j.a.createElement(gc.a.Option,{value:"top"},a("fields.link.target.top")))),j.a.createElement(Ec,{label:a("fields.link.format.label")},j.a.createElement(gc.a,{defaultValue:t.format,onChange:t=>i(t,e)},j.a.createElement(gc.a.Option,{value:"default"},a("fields.link.format.default")),j.a.createElement(gc.a.Option,{value:"tel"},a("fields.link.format.tel")),j.a.createElement(gc.a.Option,{value:"mailto"},a("fields.link.format.mailto")))),j.a.createElement(Ec,{label:a("fields.link.rel.label")},j.a.createElement(fc.a,{defaultValue:t.rel,onChange:({target:{value:t}})=>s(t,e)}))))),[a,i,o,s]);if(l)return j.a.createElement(lc,null,e.map(e=>{let a=null;return Object.keys(t.data).length>0&&(a=tc(t.data)?t.data[e.code].extra_content:null),nc(t,e=>u(e,a),e)}));const d=tc(t.data)?null:t.data.extra_content;return j.a.createElement(lc,null,nc(t,e=>u(e,d)))},hc=Oa.a.TextArea,kc=({languages:e,field:t})=>t.is_multilingual?j.a.createElement(ic,null,e.map(e=>nc(t,e=>j.a.createElement(hc,{name:e,rows:4}),e))):nc(t,e=>j.a.createElement(hc,{name:e,rows:4}));var xc=a(232);const yc="".concat("/admin","/js/tinymce/tinymce.min.js"),wc={height:350,toolbar:"undo redo | formatselect | image \n   | bold italic backcolor | alignleft aligncenter \n   alignright alignjustify | bullist numlist outdent indent | removeformat ",plugins:["image imagetools","lists link","searchreplace visualblocks code fullscreen","insertdatetime media table paste code help wordcount"],images_upload_url:window._envConfig.CMS_BASE_URL+"/filemanager"},Cc=e=>{let t=e.name,a=Object(Je.a)(e,["name"]);const n=Object(ma.g)(),c=n.setFieldValue,r=n.setFieldTouched,l=Object(ma.f)(t),i=Object(v.a)(l,1)[0],o=Object(O.useCallback)(e=>{c(t,e),r(t,!0)},[c,r,t]);return j.a.createElement(xc.a,Object.assign({initialValue:i.value,onEditorChange:o,tinymceScriptSrc:yc,init:wc},a))},_c=({languages:e,field:t})=>t.is_multilingual?j.a.createElement(ic,null,e.map(e=>nc(t,e=>j.a.createElement(Cc,{name:e}),e))):nc(t,e=>j.a.createElement(Cc,{name:e}));var Tc=a(653);function Ic(){const e=Object(r.a)(["\n  white-space: nowrap;\n"]);return Ic=function(){return e},e}function Ac(){const e=Object(r.a)(["\n  width: 100%;\n  height: 1px;\n  margin-left: 24px;\n  background: ",";\n"]);return Ac=function(){return e},e}function Sc(){const e=Object(r.a)(["\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n"]);return Sc=function(){return e},e}const Lc=l.c.div(Sc()),Rc=l.c.div(Ac(),w),Dc=l.c.div(Ic()),Gc=e=>e.replace("[value]","");var Nc=a(666),Mc=a(667);const Pc="galleryImage";function zc(){const e=Object(r.a)(["\n  width: 120px;\n  height: 120px;\n  overflow: hidden;\n  background-repeat: no-repeat;\n  background-position: 50% 50%;\n  background-size: cover;\n  border: 1px solid ",";\n  border-radius: 2px;\n"]);return zc=function(){return e},e}function Fc(){const e=Object(r.a)(["\n  display: grid;\n  grid-gap: 24px;\n  grid-template-columns: 120px auto;\n  padding: 12px;\n  background: ",";\n  border: 1px solid ",";\n  border-radius: 2px;\n\n  .ant-form-item-label {\n    line-height: 1.1;\n\n    label {\n      height: initial;\n    }\n  }\n\n  .ant-form-item {\n    margin-bottom: 12px;\n\n    &:last-child {\n      margin-bottom: 0;\n    }\n  }\n"]);return Fc=function(){return e},e}function Yc(){const e=Object(r.a)(["\n  display: flex;\n  justify-content: space-between;\n  margin: 0 0 10px;\n  padding: 0 0 6px;\n  font-weight: bold;\n  border-bottom: 1px solid ",";\n"]);return Yc=function(){return e},e}const Vc=ha.a.Item,Bc=fc.a.TextArea,Hc=l.c.div(Yc(),w),Wc=l.c.div(Fc(),y,w),Uc=l.c.div(zc(),w),Qc=j.a.forwardRef(({imagePath:e,index:t,onDelete:a,titleValue:n="",onTitleChange:c,onDescriptionChange:r,descriptionValue:l="",isDragging:i,connectDragSource:o,connectDropTarget:s},u)=>{const d=Object(g.b)("catalog-detail").t,m=Object(O.useRef)(null);o(m),s(m);const b=i?0:1;return Object(O.useImperativeHandle)(u,()=>({getNode:()=>m.current})),j.a.createElement("div",{ref:m,style:{opacity:b}},j.a.createElement(Wc,null,j.a.createElement(Uc,{style:{backgroundImage:"url(".concat(e,")")}}),j.a.createElement("div",null,j.a.createElement(Hc,null,j.a.createElement(et,{size:"small",icon:"trash-alt",onClick:()=>a&&a(t)},d("fields.gallery-image.delete"))),j.a.createElement(Vc,{label:d("fields.gallery-image.title")},j.a.createElement(fc.a,{defaultValue:n,onChange:e=>c&&c(e.target.value,t)})),j.a.createElement(Vc,{label:d("fields.gallery-image.description")},j.a.createElement(Bc,{defaultValue:l,onChange:e=>r&&r(e.target.value,t),rows:2})))))}),Zc=Object(Nc.a)(Pc,{hover(e,t,a){if(!a)return null;const n=a.getNode();if(!n)return null;const c=t.getItem().index,r=e.index;if(c===r)return;const l=n.getBoundingClientRect(),i=(l.bottom-l.top)/2,o=t.getClientOffset().y-l.top;c<r&&o<i||c>r&&o>i||(e.onMove(c,r),t.getItem().index=r)}},e=>({connectDropTarget:e.dropTarget()}))(Object(Mc.a)(Pc,{beginDrag:e=>({index:e.index})},(e,t)=>({connectDragSource:e.dragSource(),isDragging:t.isDragging()}))(Qc)),Jc=e=>new Promise((t,a)=>{const n=new FileReader;n.readAsDataURL(e),n.onload=()=>t(n.result),n.onerror=e=>a(e)});function Xc(){const e=Object(r.a)(["\n  width: 120px;\n  height: 120px;\n  overflow: hidden;\n  background-repeat: no-repeat;\n  background-position: 50% 50%;\n  background-size: cover;\n  border: 1px solid ",";\n  border-radius: 2px;\n"]);return Xc=function(){return e},e}function Kc(){const e=Object(r.a)(["\n  display: grid;\n  grid-gap: 24px;\n  grid-template-columns: 120px auto;\n  padding: 12px;\n  background: ",";\n  border: 1px solid ",";\n  border-radius: 2px;\n\n  .ant-form-item-label {\n    line-height: 1.1;\n\n    label {\n      height: initial;\n    }\n  }\n\n  .ant-form-item {\n    margin-bottom: 12px;\n\n    &:last-child {\n      margin-bottom: 0;\n    }\n  }\n"]);return Kc=function(){return e},e}function qc(){const e=Object(r.a)(["\n  display: flex;\n  justify-content: space-between;\n  margin: 0 0 10px;\n  padding: 0 0 6px;\n  font-weight: bold;\n  border-bottom: 1px solid ",";\n"]);return qc=function(){return e},e}const $c=ha.a.Item,er=fc.a.TextArea,tr=l.c.div(qc(),w),ar=l.c.div(Kc(),y,w),nr=l.c.div(Xc(),w),cr=({file:e,onDelete:t,onTitleChange:a,onDescriptionChange:n})=>{const c=Object(O.useState)(),r=Object(v.a)(c,2),l=r[0],i=r[1],o=Object(g.b)("catalog-detail").t,s=Object(O.useCallback)(Object(Z.a)(Q.a.mark((function t(){var a;return Q.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e){t.next=5;break}return t.next=3,Jc(e.originFileObj);case 3:a=t.sent,i(a);case 5:case"end":return t.stop()}}),t)}))),[e]);return Object(O.useEffect)(()=>{s()},[s]),j.a.createElement(ar,null,j.a.createElement(nr,{style:{backgroundImage:"url(".concat(l,")")}}),j.a.createElement("div",null,j.a.createElement(tr,null,j.a.createElement("div",null,e.name),j.a.createElement(et,{size:"small",icon:"trash-alt",onClick:()=>t&&t(e)},o("fields.gallery-image.delete"))),j.a.createElement($c,{label:o("fields.gallery-image.title")},j.a.createElement(fc.a,{onChange:e=>a&&a(e.target.value)})),j.a.createElement($c,{label:o("fields.gallery-image.description")},j.a.createElement(er,{onChange:e=>n&&n(e.target.value),rows:2}))))},rr=(e,t,a)=>{if(!e.fields)return;const n=Object.keys(e.fields).find(e=>Number(e)===t);if(n){let t=e.fields[n];return a&&(t=t[a]),t.value}};var lr=a(226),ir=a.n(lr);function or(){const e=Object(r.a)(["\n  margin-top: 24px;\n"]);return or=function(){return e},e}function sr(){const e=Object(r.a)(["\n  display: grid;\n  grid-gap: 12px;\n  grid-template-columns: 1fr 1fr 1fr;\n  margin: 24px 0;\n"]);return sr=function(){return e},e}const ur=Tc.a.Dragger,dr=window._envConfig.CMS_STATIC_URL+"/images/catalog/",mr=l.c.div(sr()),br=Object(l.c)(({children:e,className:t})=>j.a.createElement(Lc,{className:t},j.a.createElement(Dc,null,e),j.a.createElement(Rc,null)))(or()),pr=({languages:e,field:t})=>{const a=t.is_multilingual,n=t.id,c=Object(ma.g)(),r=c.setFieldValue,l=c.values,i=Object(O.useState)([]),o=Object(v.a)(i,2),s=o[0],u=o[1],d=Object(g.b)("catalog-detail").t,m=Object(O.useCallback)(e=>{let a=[];return l.fields[t.id]&&(e?l.fields[t.id][e.code]&&(a=l.fields[t.id][e.code].value):a=l.fields[t.id].value),a},[l,t.id]),b=Object(O.useCallback)((e,t,a)=>{const n="".concat(jc(e),"[").concat(a,"][title]");r(n,t)},[r]),p=Object(O.useCallback)((e,t,a)=>{const n="".concat(jc(e),"[").concat(a,"][description]");r(n,t)},[r]),f=Object(O.useCallback)((e,t)=>{const n=Gc(e)+"[images]";if(a){const e=n.match(/.*\[(.*)\]\[images\]/)[1],a=s[e].filter(e=>e.uid!==t.uid);u(t=>(t[e]=a,t)),r(n,a)}else{const e=s.filter(e=>e.uid!==t.uid);u(e),r(n,e)}},[s,u,r,a]),E=Object(O.useCallback)((e,t,a,n)=>{const c=m(n).map((a,n)=>t===n?Object(X.a)({},a,{title:e}):a);r(a,c)},[r,m]),h=Object(O.useCallback)((e,t,a,n)=>{const c=m(n).map((a,n)=>t===n?Object(X.a)({},a,{description:e}):a);r(a,c)},[r,m]),k=Object(O.useCallback)((e,t,a)=>{const n=m(a).filter((t,a)=>a!==e);r(t,n)},[r,m]),x=Object(O.useCallback)((e,{fileList:t})=>{const n=Gc(e)+"[images]";if(a){const e=n.match(/.*\[(.*)\]\[images\]/)[1];u(a=>(a[e]=t,a))}else u(t);r(n,t)},[r,a]),y=Object(O.useCallback)((e,t,a,c)=>{const i=rr(l,n,c&&c.code),o=i[e];r(a,ir()(i,{$splice:[[e,1],[t,0,o]]}))},[l,n,r]),w=Object(O.useCallback)((e,t)=>{const n=m(t);let c=[];return c=a?s[t.code]||[]:s,j.a.createElement(j.a.Fragment,null,j.a.createElement(ur,{multiple:!0,beforeUpload:()=>!1,accept:"image/*",showUploadList:!1,onChange:t=>x(e,t)},j.a.createElement(Ke,{icon:"cloud-upload-alt",size:"2x"}),j.a.createElement("p",null,d("fields.gallery.upload-files-text"))),n&&j.a.createElement(mr,null,n.map(({thumbnail:a,title:n,description:c},r)=>j.a.createElement(Zc,{key:a,index:r,onDelete:a=>k(a,e,t),imagePath:dr+a,titleValue:n,onTitleChange:(a,n)=>E(a,n,e,t),descriptionValue:c,onDescriptionChange:(a,n)=>h(a,n,e,t),onMove:(a,n)=>y(a,n,e,t)}))),c.length>0&&j.a.createElement(br,null,d("fields.gallery.new-images")),j.a.createElement(mr,null,c.map((t,a)=>j.a.createElement(cr,{key:a,file:t,onTitleChange:t=>b(e,t,a),onDescriptionChange:t=>p(e,t,a),onDelete:t=>f(e,t)}))))},[p,b,f,h,E,k,x,m,d,s,y,a]);return a?j.a.createElement(lc,null,e.map(e=>nc(t,t=>w(t,e),e))):j.a.createElement(lc,null,nc(t,e=>w(e)))},gr=({languages:e,currencies:t,field:a})=>{const n=a.is_multilingual,c=a.id,r=Object(g.b)("catalog-detail").t,l=Object(ma.g)().values,i=Object(O.useCallback)((e,a)=>{if(n){const n=t.find(e=>a&&a.default_currency_id===e.id);return n?j.a.createElement(Oa.a,{type:"number",min:"0",name:e,addonBefore:n.code}):j.a.createElement(on.a,{type:"warning",message:r("fields.price.no-default-currency-for-language",{language:a.name})})}{const n=t.find(e=>!!e.is_main),r=t.filter(e=>!e.is_main),i=rr(l,c,a&&a.code);if(n)return j.a.createElement(Ve.a,{direction:"vertical",size:"small",style:{width:"100%"}},j.a.createElement(Oa.a,{type:"number",min:"0",name:e,addonBefore:n.code}),r.map(e=>{const t=i&&(e.rate*i).toFixed(e.decimal_places);return j.a.createElement(fc.a,{disabled:!0,value:t,addonBefore:e.code})}))}return j.a.createElement(on.a,{type:"warning",message:r("fields.price.no-main-currency")})},[t,r,c,l,n]);return n?j.a.createElement(ic,null,e.map(e=>nc(a,t=>i(t,e),e))):nc(a,i)};function fr(){const e=Object(r.a)(["\n  && {\n    width: 100% !important;\n\n    .ant-select-selector {\n      border-top-left-radius: 0;\n      border-bottom-left-radius: 0;\n    }\n  }\n"]);return fr=function(){return e},e}const Or=fc.a.Group,jr=Fa.a.Option,Er=Object(l.c)(Fa.a)(fr()),vr=({languages:e,currencies:t,taxRates:a,field:n})=>{const c=n.is_multilingual,r=Object(g.b)("catalog-detail").t,l=Object(O.useCallback)((e,t,a)=>j.a.createElement(Or,{className:"ant-input-wrapper"},j.a.createElement("div",{className:"ant-input-group-addon"},t.code),j.a.createElement(Er,{name:a},e.map(({id:e,rate:t})=>j.a.createElement(jr,{value:String(e),key:e},null===t?j.a.createElement(Ut.a,{color:R},r("fields.tax-rate.no-tax-rate")):"".concat(t,"%"))))),[r]),i=Object(O.useCallback)((e,n)=>{if(c){const c=t.find(e=>n&&n.default_currency_id===e.id);if(c){const t=a.filter(e=>e.currency_id===c.id);return l(t,c,e)}return j.a.createElement(on.a,{type:"warning",message:r("fields.price.no-default-currency-for-language",{language:n.name})})}{const n=t.find(e=>!!e.is_main);if(n){const t=a.filter(e=>e.currency_id===n.id);return j.a.createElement(Ve.a,{direction:"vertical",size:"small",style:{width:"100%"}},l(t,n,e),j.a.createElement(on.a,{type:"info",message:r("fields.tax-rate.main-tax-rate-info")}))}}return j.a.createElement(on.a,{type:"warning",message:r("fields.price.no-main-currency")})},[t,a,r,c,l]);return c?j.a.createElement(ic,null,e.map(e=>nc(n,t=>i(t,e),e))):nc(n,i)};class hr{static getCatalogCurrencyTaxRates(e,t,a,n){return q()(Object(X.a)({},n,{method:"GET",url:"/catalog-currencies/".concat(e,"/tax-rates"),params:{page:t,per_page:a}}))}static getAllCatalogCurrencyTaxRates(e,t){let a="";return a=e?"/catalog-currencies/".concat(e,"/all"):"/catalog-currencies/tax-rates",q()(Object(X.a)({},t,{method:"GET",url:a}))}static getCatalogCurrencyTaxRate(e,t,a){return q()(Object(X.a)({},a,{method:"GET",url:"/catalog-currencies/".concat(e,"/tax-rates/").concat(t)}))}static createCatalogCurrencyTaxRate(e,t,a){return q()(Object(X.a)({},a,{method:"POST",url:"/catalog-currencies/".concat(e,"/tax-rates"),data:t}))}static updateCatalogCurrencyTaxRate(e,t,a,n){return q()(Object(X.a)({},n,{method:"PUT",url:"/catalog-currencies/".concat(e,"/tax-rates/").concat(t),data:a}))}static deleteCatalogCurrencyTaxRate(e,t,a){return q()(Object(X.a)({},a,{method:"DELETE",url:"/catalog-currencies/".concat(e,"/tax-rates/").concat(t)}))}}function kr(){const e=Object(r.a)(["\n  display: flex;\n  flex-direction: row;\n  justify-content: flex-end;\n  width: 240px;\n  height: 240px;\n  margin-top: 24px;\n  padding: 12px;\n  overflow: hidden;\n  background-repeat: no-repeat;\n  background-position: 50% 50%;\n  background-size: cover;\n  border: 1px solid ",";\n  border-radius: 2px;\n"]);return kr=function(){return e},e}const xr=l.c.div(kr(),w),yr=({file:e,onDelete:t})=>{const a=Object(O.useState)(),n=Object(v.a)(a,2),c=n[0],r=n[1],l=Object(g.b)("catalog-detail").t,i=Object(O.useCallback)(Object(Z.a)(Q.a.mark((function t(){var a;return Q.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("string"===typeof e){t.next=7;break}return t.next=3,Jc(e.originFileObj);case 3:a=t.sent,r(a),t.next=8;break;case 7:r(e);case 8:case"end":return t.stop()}}),t)}))),[e]);return Object(O.useEffect)(()=>{i()},[i]),j.a.createElement(xr,{style:{backgroundImage:"url(".concat(c,")")}},j.a.createElement(et,{size:"small",icon:"trash-alt",onClick:()=>t&&t()},l("fields.image.delete")))},wr=window._envConfig.CMS_STATIC_URL+"/images/catalog/",Cr=Tc.a.Dragger,_r=({languages:e,field:t})=>{const a=Object(g.b)("catalog-detail").t,n=t.is_multilingual,c=Object(ma.g)(),r=c.setFieldValue,l=c.values,i=Object(O.useState)(),o=Object(v.a)(i,2),s=o[0],u=o[1],d=Object(O.useCallback)(e=>{let a;if(l.fields[t.id]&&(e?l.fields[t.id][e.code]&&(a=l.fields[t.id][e.code].value):a=l.fields[t.id].value),a)return a.thumbnail},[l,t.id]),m=Object(O.useCallback)((e,{fileList:t,file:{uid:a}})=>{const c=Gc(e)+"[image]",l=t.find(e=>e.uid===a);if(n){const e=c.match(/.*\[(.*)\]\[image\]/)[1];u(t=>(t[e]=l,t))}else u(l);r(c,l)},[r,n]),b=Object(O.useCallback)(e=>{if(s){const t=Gc(e)+"[image]";if(n){const e=t.match(/.*\[(.*)\]\[image\]/)[1];u(t=>(t[e]=void 0,t))}else u(void 0);r(t,void 0)}else r(e,"")},[s,r,n]),p=Object(O.useCallback)((e,t)=>{let n=void 0;const c=d(t);return t?s&&s[t.code]?n=s[t.code]:c&&(n=wr+c):s?n=s:c&&(n=wr+c),j.a.createElement(j.a.Fragment,null,j.a.createElement(Cr,{multiple:!1,beforeUpload:()=>!1,showUploadList:!1,accept:"image/*",onChange:t=>m(e,t)},j.a.createElement(Ke,{icon:"cloud-upload-alt",size:"2x"}),j.a.createElement("p",null,a("fields.image.upload-file-text"))),!!n&&j.a.createElement(yr,{file:n,onDelete:()=>b(e)}))},[a,s,d,b,m]);return n?j.a.createElement(lc,null,e.map(e=>nc(t,t=>p(t,e),e))):j.a.createElement(lc,null,nc(t,e=>p(e)))},Tr=()=>{const e=Object(g.b)("catalog-detail").t,t=Object(O.useState)([]),a=Object(v.a)(t,2),n=a[0],c=a[1],r=Object(O.useState)([]),l=Object(v.a)(r,2),i=l[0],o=l[1],s=Object(O.useState)([]),u=Object(v.a)(s,2),d=u[0],m=u[1],b=Object(O.useContext)(Pr),p=b.data,f=b.loading,E=b.setLoading,h=Object(O.useCallback)(function(){var e=Object(Z.a)(Q.a.mark((function e(t){var a,n;return Q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return E(!0),e.next=3,yn.getAllCatalogLanguages({cancelToken:t});case 3:a=e.sent,n=a.data,c(n),E(!1);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[E]),k=Object(O.useCallback)(function(){var e=Object(Z.a)(Q.a.mark((function e(t){var a,n;return Q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return E(!0),e.next=3,An.getAllCatalogCurrencies({cancelToken:t});case 3:a=e.sent,n=a.data,o(n),E(!1);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[E]),x=Object(O.useCallback)(function(){var e=Object(Z.a)(Q.a.mark((function e(t){var a,n;return Q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return E(!0),e.next=3,hr.getAllCatalogCurrencyTaxRates(void 0,{cancelToken:t});case 3:a=e.sent,n=a.data,m(n),E(!1);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[E]);if(Object(O.useEffect)(()=>{const e=q.a.CancelToken.source();return h(e.token),k(e.token),x(e.token),()=>e.cancel()},[h,k,x]),f)return j.a.createElement(Yn.a,{active:!0,loading:!0,paragraph:{rows:4,width:"400px"}});if(p){const t=p.fields;return j.a.createElement("div",null,t.map(t=>{switch(t.type){case sn.STRING:return j.a.createElement(oc,{languages:n,field:t,key:t.id});case sn.BOOLEAN:return j.a.createElement(sc,{languages:n,field:t,key:t.id});case sn.DATE:return j.a.createElement(dc,{languages:n,field:t,key:t.id});case sn.DATE_TIME:return j.a.createElement(mc,{languages:n,field:t,key:t.id});case sn.INTEGER:return j.a.createElement(pc,{languages:n,field:t,key:t.id});case sn.LINK:return j.a.createElement(vc,{languages:n,field:t,t:e,key:t.id});case sn.TEXT:return j.a.createElement(kc,{languages:n,field:t,key:t.id});case sn.RICH_TEXT:return j.a.createElement(_c,{languages:n,field:t,key:t.id});case sn.GALLERY:return j.a.createElement(pr,{languages:n,field:t,key:t.id});case sn.IMAGE:return j.a.createElement(_r,{languages:n,field:t,key:t.id});case sn.PRICE:return j.a.createElement(gr,{languages:n,currencies:i,field:t,key:t.id});case sn.TAX_RATE:return j.a.createElement(vr,{languages:n,currencies:i,taxRates:d,field:t,key:t.id});default:return null}}))}return null};var Ir=a(654);const Ar=Ea.a.SHOW_ALL,Sr=()=>{const e=Object(g.b)("catalog-detail").t,t=Object(O.useContext)(Pr).setLoading,a=Object(O.useState)(),n=Object(v.a)(a,2),c=n[0],r=n[1],l=Object(O.useCallback)(function(){var a=Object(Z.a)(Q.a.mark((function a(n){var c,l;return Q.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,t(!0),a.next=4,ba.getCatalogCategories(void 0,void 0,void 0,void 0,{cancelToken:n});case 4:c=a.sent,l=c.data,r(fa(l,e,!1)),t(!1),a.next=13;break;case 10:a.prev=10,a.t0=a.catch(0),t(!1);case 13:case"end":return a.stop()}}),a,null,[[0,10]])})));return function(e){return a.apply(this,arguments)}}(),[e,t]);return Object(O.useEffect)(()=>{const e=q.a.CancelToken.source();return l(e.token),()=>e.cancel()},[l]),j.a.createElement(wa,{label:e("categories.categories"),name:"categories"},c?j.a.createElement(ja.a,{treeData:c,name:"categories",showCheckedStrategy:Ar,treeCheckable:!0,treeCheckStrictly:!0,treeDefaultExpandAll:!0,showArrow:!0,allowClear:!0,filterTreeNode:!0,treeNodeFilterProp:"title"}):j.a.createElement(Oa.a,{name:"categories",disabled:!0}))};class Lr{static getCatalogItemCategories(e,t){return q()(Object(X.a)({},t,{method:"GET",url:"/catalog-items/".concat(e,"/categories")}))}static setCatalogItemCategories(e,t,a){return q()(Object(X.a)({},a,{method:"PUT",url:"/catalog-items/".concat(t,"/categories"),data:e}))}}const Rr=Ir.a.TabPane,Dr=ha.a.Item;let Gr;!function(e){e.DATA="Data",e.CATEGORIES="Categories"}(Gr||(Gr={}));const Nr=Ya.e().shape({}),Mr=()=>{const e=Object(g.b)("catalog-detail").t,t=Object(O.useContext)(Pr),a=t.data,n=t.loading,c=t.setLoading,r=(()=>{const e=Object(O.useContext)(Pr).data,t={fields:{},categories:[]};return e&&(t.categories=e.categories,e.fields.forEach(e=>{const a=e.is_multilingual,n=e.id;if(a){const a=e.data;t.fields[n]={},Object.keys(a).forEach(e=>{t.fields[n][e]={},t.fields[n][e].value=a[e]&&a[e].value?a[e].value:void 0,t.fields[n][e].extra_content=a[e]&&a[e].extra_content?a[e].extra_content:void 0})}else{const a=tc(e.data)?null:e.data;t.fields[n]={},t.fields[n].value=a&&a.value?a.value:void 0,t.fields[n].extra_content=a&&a.extra_content?a.extra_content:void 0}})),t})(),l=Object(O.useRef)(q.a.CancelToken.source()),i=Object(O.useCallback)(function(){var t=Object(Z.a)(Q.a.mark((function t(n){var r,i,o,s,u;return Q.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=l.current.token,!a){t.next=26;break}return t.prev=2,c(!0),i={fields:{}},Object.keys(n.fields).forEach(e=>{if("value"!==Object.keys(n.fields[e])[0])Object.keys(n.fields[e]).forEach(t=>{let a=n.fields[e][t];"object"===typeof a.value&&(a=Object(X.a)({},a,{value:JSON.stringify(a.value)})),"undefined"!==typeof a.images&&(a=Object(X.a)({},a,{images:a.images.map(e=>e.originFileObj)})),"undefined"!==typeof a.image&&(a=Object(X.a)({},a,{image:a.image.originFileObj})),i.fields[e]||(i.fields[e]={}),i.fields[e][t]=a});else{let t=n.fields[e];"object"===typeof t.value&&(t=Object(X.a)({},t,{value:JSON.stringify(t.value)})),"undefined"!==typeof t.images&&(t=Object(X.a)({},t,{images:t.images.map(e=>e.originFileObj)})),"undefined"!==typeof t.image&&(t=Object(X.a)({},t,{image:t.image.originFileObj})),i.fields[e]=t}}),(o=Object(ac.a)(i,{nullsAsUndefineds:!0,booleansAsIntegers:!0})).append("item_id",String(a.id)),s=new FormData,n.categories.forEach(e=>{"object"===typeof e&&(e=e.value),s.append("category[]",String(e))}),t.next=12,Nn.updateCatalogItemTemplateFieldValues(a.template_id,o,{cancelToken:r});case 12:return t.next=14,Lr.setCatalogItemCategories(s,a.id,{cancelToken:r});case 14:return t.next=16,la.updateCatalogItem(a.id,new FormData,{cancelToken:r});case 16:u="/admin/catalog/"+a.id,Object(W.e)("/admin/redirect-to",{state:{to:u}}),ct.a.success({message:e("save-success")}),c(!1),t.next=26;break;case 22:t.prev=22,t.t0=t.catch(2),console.log(t.t0),c(!1);case 26:case"end":return t.stop()}}),t,null,[[2,22]])})));return function(e){return t.apply(this,arguments)}}(),[a,"/admin",e,c]);return Object(O.useEffect)(()=>{const e=l.current;return()=>e.cancel()},[]),console.log(r),j.a.createElement(ma.c,{initialValues:r,enableReinitialize:!0,validate:e=>Ba(e,Nr),onSubmit:i},j.a.createElement(va.a,{layout:"vertical"},j.a.createElement(Ir.a,{defaultActiveKey:Gr.DATA},j.a.createElement(Rr,{tab:e("tabs.data"),key:Gr.DATA},j.a.createElement(Tr,null)),j.a.createElement(Rr,{tab:e("tabs.categories"),key:Gr.CATEGORIES},j.a.createElement(Sr,null))),j.a.createElement(Dr,null,j.a.createElement(H.a,{htmlType:"submit",type:"primary",size:"large",disabled:n},e("detail.form.submit")))))},Pr=Object(O.createContext)({}),zr=({catalogItemId:e,view:t})=>{const a=Object(g.b)("catalog-detail").t,n=Object(O.useContext)(Pe).setSceneTitle,c=Object(O.useState)(!1),r=Object(v.a)(c,2),l=r[0],i=r[1],o=Object(O.useState)(),s=Object(v.a)(o,2),u=s[0],d=s[1],m=Object(O.useRef)(q.a.CancelToken.source()),b=Object(O.useCallback)(Object(Z.a)(Q.a.mark((function a(){var n,c;return Q.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(!e||"detail"!==t){a.next=8;break}return i(!0),a.next=4,la.getCatalogItem(e,{cancelToken:m.current.token});case 4:n=a.sent,c=n.data,d(c),i(!1);case 8:case"end":return a.stop()}}),a)}))),[e,t]);return Object(O.useEffect)(()=>{n(j.a.createElement(Ze,{title:a("detail"===t?"scene-title.detail":"scene-title.new"),extraContent:j.a.createElement(cn,{title:a("scene-title.back-to-catalog-items"),to:"/catalog"})}))},[n,a,t]),Object(O.useEffect)(()=>{b()},[b]),Object(O.useEffect)(()=>{const e=m.current;return()=>e.cancel()},[]),"new"===t?j.a.createElement(Fn,null):j.a.createElement(Pr.Provider,{value:{data:u,getData:b,loading:l,setLoading:i}},j.a.createElement(ec,null),j.a.createElement(Mr,null))};function Fr(){const e=Object(r.a)(["\n  justify-self: end;\n"]);return Fr=function(){return e},e}function Yr(){const e=Object(r.a)(["\n  white-space: nowrap;\n"]);return Yr=function(){return e},e}function Vr(){const e=Object(r.a)(["\n  display: grid;\n  grid-gap: 12px;\n  grid-template-columns: min-content min-content auto;\n  margin-bottom: 6px;\n  margin-left: ","px;\n  padding: 8px 24px;\n  border: 1px solid ",";\n  border-radius: 2px;\n"]);return Vr=function(){return e},e}const Br=l.c.div(Vr(),({depth:e})=>e>0&&24*e,w),Hr=l.c.div(Yr()),Wr=Object(l.c)(({onClick:e,className:t})=>{const a=Object(g.b)("catalog-categories").t,n=Object(O.useCallback)(t=>{e(t)},[e]),c=[{children:a("tree.context-menu.edit"),onClick:()=>n("edit"),icon:"pen"},{children:a("tree.context-menu.create"),onClick:()=>n("create"),icon:"plus-square"},{children:a("tree.context-menu.publish"),onClick:()=>n("publish"),icon:"cloud-upload-alt"},{children:a("tree.context-menu.unpublish"),onClick:()=>n("unpublish"),icon:"cloud-download-alt"},{children:a("tree.context-menu.delete"),onClick:()=>n("delete"),icon:"trash-alt",dialog:{text:a("tree.context-menu.delete-dialog.text"),cancel:a("tree.context-menu.delete-dialog.cancel"),confirm:a("tree.context-menu.delete-dialog.confirm")}}];return j.a.createElement("div",{className:t},j.a.createElement(St,{items:c,"data-test":"Dropdown"},j.a.createElement(Yt,{size:"small"})))})(Fr()),Ur=()=>{const e=Object(g.b)("catalog-categories").t,t=Object(O.useState)([]),a=Object(v.a)(t,2),n=a[0],c=a[1],r=Object(O.useState)(!1),l=Object(v.a)(r,2),i=l[0],o=l[1],s=Object(O.useRef)(q.a.CancelToken.source()),u=Object(O.useCallback)(function(){var e=Object(Z.a)(Q.a.mark((function e(t){var a;return Q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,o(!0),e.next=4,ba.getCatalogCategories(void 0,void 0,void 0,void 0,{cancelToken:t});case 4:a=e.sent,c(a.data),o(!1),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),o(!1);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}(),[]),d=Object(O.useCallback)(function(){var t=Object(Z.a)(Q.a.mark((function t(a,n){var c;return Q.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:c=s.current.token,t.t0=a,t.next="create"===t.t0?4:"edit"===t.t0?6:"delete"===t.t0?8:"publish"===t.t0?18:"unpublish"===t.t0?28:38;break;case 4:return Object(W.e)("/admin/catalog/categories/new?parentId="+n),t.abrupt("break",39);case 6:return Object(W.e)("/admin/catalog/categories/"+n),t.abrupt("break",39);case 8:return t.prev=8,t.next=11,ba.deleteCatalogCategory(n,{cancelToken:c});case 11:u(c),ct.a.success({message:e("delete-success")}),t.next=17;break;case 15:t.prev=15,t.t1=t.catch(8);case 17:return t.abrupt("break",39);case 18:return t.prev=18,t.next=21,ba.publishCatalogCategory(n,{cancelToken:c});case 21:u(c),ct.a.success({message:e("publish-success")}),t.next=27;break;case 25:t.prev=25,t.t2=t.catch(18);case 27:return t.abrupt("break",39);case 28:return t.prev=28,t.next=31,ba.unpublishCatalogCategory(n,{cancelToken:c});case 31:u(c),ct.a.success({message:e("unpublish-success")}),t.next=37;break;case 35:t.prev=35,t.t3=t.catch(28);case 37:case 38:return t.abrupt("break",39);case 39:case"end":return t.stop()}}),t,null,[[8,15],[18,25],[28,35]])})));return function(e,a){return t.apply(this,arguments)}}(),["/admin",e,u]),m=Object(O.useCallback)((t,a)=>t.map(({id:t,name:n,published:c,items_count:r,children:l})=>j.a.createElement(j.a.Fragment,null,j.a.createElement(Br,{key:t,depth:a},j.a.createElement(Hr,null,n," ",e("tree.items-count",{itemsCount:r})),c?j.a.createElement(Ut.a,{color:P},e("tree.published")):j.a.createElement("div",null),j.a.createElement(Wr,{onClick:e=>d(e,t)})),l&&j.a.createElement("div",{key:t+"_children"},m(l,a+1)))),[e,d]);return Object(O.useEffect)(()=>{const e=q.a.CancelToken.source();return u(e.token),()=>e.cancel()},[u]),Object(O.useEffect)(()=>{const e=s.current;return()=>e.cancel()},[]),i?j.a.createElement(Yn.a,{active:!0,loading:!0,paragraph:{rows:4,width:"400px"}}):j.a.createElement(j.a.Fragment,null,m(n,0))},Qr=()=>{const e=Object(g.b)("catalog-categories").t,t=Object(O.useContext)(Pe).setSceneTitle,a=Object(O.useCallback)(()=>{Object(W.e)("/admin/catalog/categories/new")},["/admin"]);return Object(O.useEffect)(()=>{t(j.a.createElement(Ze,{title:e("scene-title")}))},[t,e]),j.a.createElement(Ve.a,{size:"large",direction:"vertical",style:{width:"100%"}},j.a.createElement(et,{size:"middle",type:"primary",icon:"plus",onClick:a},e("create-new-catalog-category")),j.a.createElement(Ur,null))},Zr=ha.a.Item,Jr=Ya.e().shape({name:Ya.g().required(),parent_id:Ya.d().nullable(),weight:Ya.d()}),Xr=({catalogCategoryId:e,parentId:t,view:a})=>{const n=Object(g.b)("catalog-category-detail").t,c=Object(O.useState)(),r=Object(v.a)(c,2),l=r[0],i=r[1],o=Object(O.useState)(),s=Object(v.a)(o,2),u=s[0],d=s[1],m=Object(O.useState)(),b=Object(v.a)(m,2),p=b[0],f=b[1],E=Object(O.useState)(!1),h=Object(v.a)(E,2),k=h[0],x=h[1],y=Object(O.useRef)(q.a.CancelToken.source()),w=Object(O.useRef)(),C=Object(O.useCallback)(()=>{if(l){const e=l.map(({code:e})=>({[e]:{name:void 0,description:void 0}}));return"detail"===a&&u?{name:u.name,parent_id:u.parent_id||0,weight:u.weight,values:Object(X.a)({},e,{},u.data)}:{name:void 0,parent_id:t||0,weight:50,values:e}}},[u,l,t,a]),_=Object(O.useCallback)(function(){var t=Object(Z.a)(Q.a.mark((function t(n){var c,r;return Q.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("detail"!==a||!e){t.next=14;break}return t.prev=1,x(!0),t.next=5,ba.getCatalogCategory(e,void 0,{cancelToken:n});case 5:c=t.sent,r=c.data,d(r),x(!1),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(1),x(!1);case 14:case"end":return t.stop()}}),t,null,[[1,11]])})));return function(e){return t.apply(this,arguments)}}(),[a,e]),T=Object(O.useCallback)(function(){var e=Object(Z.a)(Q.a.mark((function e(t){var a,c;return Q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,x(!0),e.next=4,ba.getCatalogCategories(void 0,void 0,void 0,void 0,{cancelToken:t});case 4:a=e.sent,c=a.data,f(fa(c,n)),x(!1),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),x(!1);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t){return e.apply(this,arguments)}}(),[n]),I=Object(O.useCallback)(function(){var e=Object(Z.a)(Q.a.mark((function e(t){var a,n;return Q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,x(!0),e.next=4,yn.getAllCatalogLanguages({cancelToken:t});case 4:a=e.sent,n=a.data,i(n),x(!1),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),x(!1);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t){return e.apply(this,arguments)}}(),[]),A=Object(O.useCallback)((e,t)=>{w.current=e,t()},[]),S=Object(O.useCallback)(function(){var t=Object(Z.a)(Q.a.mark((function t(c){var r,l;return Q.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,x(!0),0===c.parent_id&&delete c.parent_id,r=Object(ac.a)(c,{booleansAsIntegers:!0}),"new"!==a){t.next=11;break}return t.next=7,ba.createCatalogCategory(r,{cancelToken:y.current.token});case 7:ct.a.success({message:n("create-success")}),"create"===w.current?Object(W.e)("/admin/catalog/categories"):(l="/admin/catalog/categories/new",c.parent_id&&(l=l+"?parentId="+c.parent_id),Object(W.e)("/admin/redirect-to",{state:{to:l}})),t.next=16;break;case 11:if("detail"!==a||!e){t.next=16;break}return t.next=14,ba.updateCatalogCategory(e,r,{cancelToken:y.current.token});case 14:ct.a.success({message:n("update-success")}),Object(W.e)("/admin/catalog/categories");case 16:t.next=21;break;case 18:t.prev=18,t.t0=t.catch(0),x(!1);case 21:case"end":return t.stop()}}),t,null,[[0,18]])})));return function(e){return t.apply(this,arguments)}}(),["/admin",a,n,e]),L=Object(O.useCallback)(({submitForm:e})=>j.a.createElement(va.a,{layout:"vertical"},j.a.createElement(wa,{label:n("form.name"),name:"name"},j.a.createElement(Oa.a,{name:"name"})),j.a.createElement(wa,{label:n("form.parent"),name:"parent_id"},p?j.a.createElement(ja.a,{style:{width:"100%"},name:"parent_id",defaultActiveFirstOption:!0,dropdownStyle:{maxHeight:400,overflow:"auto"},treeData:p,placeholder:"Please select",treeDefaultExpandAll:!0}):j.a.createElement(Oa.a,{name:"parent_id",disabled:k})),j.a.createElement(wa,{label:n("form.weight"),name:"weight"},j.a.createElement(Oa.a,{name:"weight",type:"number"})),l&&l.map(({code:e,name:t})=>j.a.createElement(lc,{key:e},j.a.createElement(wa,{label:n("form.name-localized",{language:t}),name:"values[".concat(e,"][name]")},j.a.createElement(Oa.a,{name:"values[".concat(e,"][name]")})),j.a.createElement(wa,{label:n("form.description-localized",{language:t}),name:"values[".concat(e,"][description]")},j.a.createElement(Cc,{name:"values[".concat(e,"][description]")})))),j.a.createElement(Zr,null,"new"===a?j.a.createElement(Ve.a,{size:"middle",direction:"horizontal"},j.a.createElement(H.a,{htmlType:"submit",type:"primary",size:"large",disabled:k,onClick:()=>A("create",e)},n("form.submit.new")),j.a.createElement(H.a,{htmlType:"button",type:"default",size:"large",disabled:k,onClick:()=>A("create-another",e)},n("form.submit.create-and-create-another"))):j.a.createElement(H.a,{htmlType:"submit",type:"primary",size:"large",disabled:k},n("form.submit.detail")))),[n,a,p,l,k,A]);return Object(O.useEffect)(()=>{const e=q.a.CancelToken.source();return _(e.token),I(e.token),T(e.token),()=>e.cancel()},[_,I,T]),Object(O.useEffect)(()=>{const e=y.current;return()=>e.cancel()},[]),j.a.createElement(ma.c,{initialValues:C(),enableReinitialize:!0,validate:e=>Ba(e,Jr),onSubmit:S},e=>L(e))},Kr=({catalogCategoryId:e,view:t,location:a})=>{const n=Object(g.b)("catalog-category-detail").t,c=Object(O.useContext)(Pe).setSceneTitle,r=Object(ta.parse)(a.search).parentId;return Object(O.useEffect)(()=>{c(j.a.createElement(Ze,{title:n("detail"===t?"scene-title.detail":"scene-title.new"),extraContent:j.a.createElement(cn,{title:n("scene-title.back-to-categories"),to:"/catalog/categories"})}))},[c,n,t]),j.a.createElement(Xr,{parentId:r?Number(r):void 0,catalogCategoryId:e,view:t})},qr=({children:e,location:t})=>(Object(O.useEffect)(()=>{console.log("effect"),window.scrollTo(0,0)},[t.pathname]),j.a.createElement(j.a.Fragment,null,e)),$r=({onClick:e})=>{const t=Object(g.b)("catalog-currencies").t,a=t=>{e(t)},n=[{children:t("table.context-menu.edit"),onClick:()=>a("edit"),icon:"pen"},{children:t("table.context-menu.delete"),onClick:()=>a("delete"),icon:"trash-alt",dialog:{text:t("table.context-menu.delete-dialog.text"),cancel:t("table.context-menu.delete-dialog.cancel"),confirm:t("table.context-menu.delete-dialog.confirm")}}];return j.a.createElement("div",null,j.a.createElement(St,{items:n,"data-test":"Dropdown"},j.a.createElement(Yt,{size:"small"})))},el=(e,t)=>[{key:"id",dataIndex:"id",title:e("table.columns.id"),width:100,fixed:"left"},{key:"code",dataIndex:"code",title:e("table.columns.code"),width:150},{key:"name",dataIndex:"name",title:e("table.columns.name"),width:200},{key:"symbol",dataIndex:"symbol",title:e("table.columns.symbol"),width:200},{key:"rate",dataIndex:"rate",title:e("table.columns.rate"),width:150},{key:"is_main",dataIndex:"is_main",title:e("table.columns.is-main"),render:t=>e(t?"table.yes":"table.no"),width:100},{key:"context_menu",dataIndex:"context_menu",width:60,render:(e,{id:a})=>j.a.createElement($r,{onClick:e=>t&&t(e,a)}),fixed:"right"}],tl=e=>e.map(({id:e,name:t,code:a,symbol:n,is_main:c,rate:r})=>({key:String(e),id:e,name:t,code:a,symbol:n,is_main:!!c,rate:r})),al=()=>{const e=Object(g.b)("catalog-currencies").t,t=Object(O.useState)([]),a=Object(v.a)(t,2),n=a[0],c=a[1],r=Object(O.useState)(!1),l=Object(v.a)(r,2),i=l[0],o=l[1],s=Object(O.useState)(0),u=Object(v.a)(s,2),d=u[0],m=u[1],b=Object(O.useState)(1),p=Object(v.a)(b,2),f=p[0],E=p[1],h=Object(O.useState)(0),k=Object(v.a)(h,2),x=k[0],y=k[1],w=Object(O.useRef)(q.a.CancelToken.source()),C=Object(O.useCallback)(Object(Z.a)(Q.a.mark((function e(){var t,a,n,r,l;return Q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o(!0),e.next=3,An.getCatalogCurrencies(f,x,{cancelToken:w.current.token});case 3:t=e.sent,a=t.data,n=a.data,r=a.total,l=a.per_page,c(tl(n)),m(r),y(l),o(!1);case 12:case"end":return e.stop()}}),e)}))),[f,x]),_=Object(O.useCallback)(function(){var t=Object(Z.a)(Q.a.mark((function t(a,n){return Q.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:t.t0=a,t.next="edit"===t.t0?3:"delete"===t.t0?5:7;break;case 3:return Object(W.e)("/admin/catalog/currencies/"+n),t.abrupt("break",8);case 5:try{ct.a.success({message:e("table.delete-success")}),C()}catch(c){}return t.abrupt("break",8);case 7:return t.abrupt("break",8);case 8:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}(),["/admin",C,e]),T=Object(O.useCallback)(e=>{E(e)},[]);return Object(O.useEffect)(()=>{C()},[C]),Object(O.useEffect)(()=>{const e=w.current;return()=>e.cancel()},[]),j.a.createElement(at,{columns:el(e,_),dataSource:n,loading:i,isScrollable:!0,pagination:{current:f,pageSize:x,total:d,onChange:T}})},nl=()=>{const e=Object(g.b)("catalog-currencies").t,t=Object(O.useContext)(Pe).setSceneTitle,a=Object(O.useCallback)(()=>{Object(W.e)("/admin/catalog/currencies/new")},["/admin"]);return Object(O.useEffect)(()=>{t(j.a.createElement(Ze,{title:e("scene-title")}))},[t,e]),j.a.createElement(Ve.a,{size:"large",direction:"vertical",style:{width:"100%"}},j.a.createElement(et,{size:"middle",type:"primary",icon:"plus",onClick:a},e("create-new-catalog-currency")),j.a.createElement(al,null))},cl=({id:e,name:t,code:a,symbol:n,rate:c,decimal_places:r,is_main:l,inherits_tax_rate:i,fetch_currency_rate:o})=>({id:e,name:t,code:a,symbol:n,rate:c,decimal_places:r,is_main:!!l,inherits_tax_rate:!!i,fetch_currency_rate:!!o}),rl=ha.a.Item,ll=Ya.e().shape({name:Ya.g().required(),code:Ya.g().required(),symbol:Ya.g().required(),rate:Ya.d().required(),decimal_places:Ya.d(),is_main:Ya.b()}),il=({catalogCurrencyId:e,view:t})=>{const a=Object(g.b)("catalog-currency-detail").t,n=Object(O.useState)(),c=Object(v.a)(n,2),r=c[0],l=c[1],i=Object(O.useState)(!1),o=Object(v.a)(i,2),s=o[0],u=o[1],d=Object(O.useRef)(q.a.CancelToken.source()),m=r||{name:void 0,code:void 0,symbol:void 0,rate:1,decimal_places:2,is_main:!1},b=Object(O.useCallback)(function(){var a=Object(Z.a)(Q.a.mark((function a(n){var c,r;return Q.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if("detail"!==t||!e){a.next=8;break}return u(!0),a.next=4,An.getCatalogCurrency(e,{cancelToken:n});case 4:c=a.sent,r=c.data,l(cl(r)),u(!1);case 8:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}(),[t,e]),p=Object(O.useCallback)(function(){var n=Object(Z.a)(Q.a.mark((function n({code:c,decimal_places:r,is_main:l,name:i,rate:o,symbol:s}){var m,b,p,g;return Q.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,u(!0),(m=new FormData).append("name",i),m.append("code",c),m.append("symbol",s),m.append("rate",String(o)),m.append("decimal_places",String(r)),"detail"===t?m.append("is_main",String(+l)):m.append("is_main","0"),"new"!==t){n.next=19;break}return n.next=12,An.createCatalogCurrency(m,{cancelToken:d.current.token});case 12:b=n.sent,p=b.data.id,u(!1),ct.a.success({message:a("form.create-success")}),Object(W.e)("/admin/catalog/currencies/"+p),n.next=26;break;case 19:if("detail"!==t){n.next=26;break}return n.next=22,An.updateCatalogCurrency(e,m,{cancelToken:d.current.token});case 22:ct.a.success({message:a("form.update-success")}),u(!1),g="/admin/catalog/currencies/"+e,Object(W.e)("/admin/redirect-to",{state:{to:g}});case 26:n.next=31;break;case 28:n.prev=28,n.t0=n.catch(0),u(!1);case 31:case"end":return n.stop()}}),n,null,[[0,28]])})));return function(e){return n.apply(this,arguments)}}(),["/admin",t,e,a]),f=Object(O.useCallback)(()=>j.a.createElement(va.a,{layout:"vertical"},j.a.createElement(wa,{label:a("form.name"),name:"name"},j.a.createElement(Oa.a,{name:"name"})),j.a.createElement(wa,{label:a("form.code"),name:"code"},j.a.createElement(Ve.a,{size:"middle",direction:"vertical",style:{width:"100%"}},j.a.createElement(Oa.a,{name:"code"}))),j.a.createElement(wa,{label:a("form.symbol"),name:"symbol"},j.a.createElement(Oa.a,{name:"symbol"})),j.a.createElement(wa,{label:a("form.rate"),name:"rate"},j.a.createElement(Oa.a,{name:"rate",type:"number"})),j.a.createElement(wa,{label:a("form.decimal-places"),name:"decimal_places"},j.a.createElement(Oa.a,{name:"decimal_places",type:"number"})),j.a.createElement(wa,{label:a("form.is-main"),name:"is_main"},j.a.createElement(Ve.a,{size:"middle",direction:"vertical",style:{width:"100%"}},j.a.createElement(ln.a,{name:"is_main",disabled:"new"===t||r&&r.is_main}),"new"===t||r&&r.is_main&&j.a.createElement(on.a,{type:"info",message:a("form.is-main-info")}),"new"===t&&j.a.createElement(on.a,{type:"info",message:a("form.is-main-info-new")}),"detail"===t&&j.a.createElement(on.a,{type:"warning",message:a("form.is-main-warning-detail")}))),j.a.createElement(rl,null,j.a.createElement(H.a,{htmlType:"submit",type:"primary",size:"large",disabled:s},a("new"===t?"form.submit.new":"form.submit.detail")))),[a,t,r,s]);return Object(O.useEffect)(()=>{const e=q.a.CancelToken.source();return b(e.token),()=>e.cancel()},[b]),Object(O.useEffect)(()=>{const e=d.current;return()=>e.cancel()},[]),j.a.createElement(ma.c,{initialValues:m,enableReinitialize:!0,validate:e=>Ba(e,ll),onSubmit:p},()=>f())},ol=({onClick:e})=>{const t=Object(g.b)("catalog-currency-detail").t,a=t=>{e(t)},n=[{children:t("tax-rates.context-menu.edit"),onClick:()=>a("edit"),icon:"pen"},{children:t("tax-rates.context-menu.delete"),onClick:()=>a("delete"),icon:"trash-alt",dialog:{text:t("tax-rates.context-menu.delete-dialog.text"),cancel:t("tax-rates.context-menu.delete-dialog.cancel"),confirm:t("tax-rates.context-menu.delete-dialog.confirm")}}];return j.a.createElement("div",null,j.a.createElement(St,{items:n,"data-test":"Dropdown"},j.a.createElement(Yt,{size:"small"})))},sl=(e,t)=>[{key:"id",dataIndex:"id",title:e("tax-rates.columns.id"),width:100},{key:"rate",dataIndex:"rate",title:e("tax-rates.columns.rate"),render:t=>null===t?j.a.createElement(Ut.a,{color:R},e("tax-rates.no-tax-rate")):"".concat(t,"%")},{key:"context_menu",dataIndex:"context_menu",width:60,render:(e,{id:a})=>j.a.createElement(ol,{onClick:e=>t&&t(e,a)}),fixed:"right"}],ul=e=>e.map(({id:e,rate:t})=>({key:String(e),id:e,rate:t}));function dl(){const e=Object(r.a)(["\n  display: flex;\n  flex-direction: row;\n  justify-content: space-between;\n"]);return dl=function(){return e},e}const ml=l.c.div(dl()),bl=Ye.a.Title,pl=({catalogCurrencyId:e})=>{const t=Object(g.b)("catalog-currency-detail").t,a=Object(O.useState)([]),n=Object(v.a)(a,2),c=n[0],r=n[1],l=Object(O.useState)(!1),i=Object(v.a)(l,2),o=i[0],s=i[1],u=Object(O.useState)(0),d=Object(v.a)(u,2),m=d[0],b=d[1],p=Object(O.useState)(1),f=Object(v.a)(p,2),E=f[0],h=f[1],k=Object(O.useState)(0),x=Object(v.a)(k,2),y=x[0],w=x[1],C=Object(O.useRef)(q.a.CancelToken.source()),_=Object(O.useCallback)(Object(Z.a)(Q.a.mark((function t(){var a,n,c,l,i;return Q.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return s(!0),t.next=3,hr.getCatalogCurrencyTaxRates(e,E,y,{cancelToken:C.current.token});case 3:a=t.sent,n=a.data,c=n.data,l=n.total,i=n.per_page,r(ul(c)),b(l),w(i),s(!1);case 12:case"end":return t.stop()}}),t)}))),[E,y,e]),T=Object(O.useCallback)(function(){var a=Object(Z.a)(Q.a.mark((function a(n,c){return Q.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:a.t0=n,a.next="edit"===a.t0?3:"delete"===a.t0?5:15;break;case 3:return Object(W.e)("/admin/catalog/currencies/"+e+"/tax-rates/"+c),a.abrupt("break",16);case 5:return a.prev=5,a.next=8,hr.deleteCatalogCurrencyTaxRate(e,c,{cancelToken:C.current.token});case 8:ct.a.success({message:t("tax-rates.delete-success")}),_(),a.next=14;break;case 12:a.prev=12,a.t1=a.catch(5);case 14:case 15:return a.abrupt("break",16);case 16:case"end":return a.stop()}}),a,null,[[5,12]])})));return function(e,t){return a.apply(this,arguments)}}(),["/admin",_,t,e]),I=Object(O.useCallback)(e=>{h(e)},[]),A=Object(O.useCallback)(()=>{Object(W.e)("/admin/catalog/currencies/"+e+"/tax-rates/new")},["/admin",e]);return Object(O.useEffect)(()=>{_()},[_]),Object(O.useEffect)(()=>{const e=C.current;return()=>e.cancel()},[]),j.a.createElement(j.a.Fragment,null,j.a.createElement(Ja.a,null),j.a.createElement(Ve.a,{size:"large",direction:"vertical",style:{width:"100%"}},j.a.createElement(ml,null,j.a.createElement(bl,{level:3},t("tax-rates.title")),j.a.createElement(et,{size:"middle",type:"primary",icon:"plus",onClick:A},t("tax-rates.create-new-tax-rate"))),j.a.createElement(at,{columns:sl(t,T),dataSource:c,loading:o,pagination:{current:E,pageSize:y,total:m,onChange:I}})))},gl=({catalogCurrencyId:e,view:t})=>{const a=Object(g.b)("catalog-currency-detail").t,n=Object(O.useContext)(Pe).setSceneTitle;return Object(O.useEffect)(()=>{n(j.a.createElement(Ze,{title:a("detail"===t?"scene-title.detail":"scene-title.new"),extraContent:j.a.createElement(cn,{title:a("scene-title.back-to-currencies"),to:"/catalog/currencies"})}))},[n,a,t]),j.a.createElement(j.a.Fragment,null,j.a.createElement(il,{catalogCurrencyId:e,view:t}),"detail"===t&&j.a.createElement(pl,{catalogCurrencyId:e}))},fl=ha.a.Item,Ol=Ya.e().shape({rate:Ya.d(),no_rate:Ya.b()}),jl=({catalogCurrencyId:e,catalogCurrencyTaxRateId:t,view:a})=>{const n=Object(g.b)("catalog-currency-tax-rate-detail").t,c=Object(O.useState)(),r=Object(v.a)(c,2),l=r[0],i=r[1],o=Object(O.useState)(!1),s=Object(v.a)(o,2),u=s[0],d=s[1],m=Object(O.useRef)(q.a.CancelToken.source()),b=Object(O.useCallback)(()=>"new"!==a&&l?(console.log(l),{rate:l.rate||void 0,no_rate:null===l.rate}):{rate:void 0,no_rate:!1},[l,a]),p=Object(O.useCallback)(function(){var n=Object(Z.a)(Q.a.mark((function n(c){var r,l;return Q.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if("detail"!==a||!e||!t){n.next=8;break}return d(!0),n.next=4,hr.getCatalogCurrencyTaxRate(e,t,{cancelToken:c});case 4:r=n.sent,l=r.data,i(l),d(!1);case 8:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),[a,e,t]),f=Object(O.useCallback)(function(){var c=Object(Z.a)(Q.a.mark((function c({rate:r,no_rate:l}){var i;return Q.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:if(c.prev=0,d(!0),i=new FormData,l||i.append("rate",String(r)),"new"!==a){c.next=12;break}return c.next=7,hr.createCatalogCurrencyTaxRate(e,i,{cancelToken:m.current.token});case 7:d(!1),ct.a.success({message:n("form.create-success")}),Object(W.e)("/admin/catalog/currencies/"+e),c.next=18;break;case 12:if("detail"!==a){c.next=18;break}return l?i.append("rate",""):i.append("rate",String(r)),c.next=16,hr.updateCatalogCurrencyTaxRate(e,t,i,{cancelToken:m.current.token});case 16:ct.a.success({message:n("form.update-success")}),d(!1);case 18:c.next=23;break;case 20:c.prev=20,c.t0=c.catch(0),d(!1);case 23:case"end":return c.stop()}}),c,null,[[0,20]])})));return function(e){return c.apply(this,arguments)}}(),["/admin",a,e,t,n]),E=Object(O.useCallback)(({values:e})=>j.a.createElement(va.a,{layout:"vertical"},j.a.createElement(wa,{label:n("form.rate"),name:"rate"},j.a.createElement(bc.a,{formatter:e=>"".concat(e,"%"),parser:e=>e.replace("%",""),min:0,name:"rate",disabled:e.no_rate,style:{width:"100%"}})),j.a.createElement(wa,{label:n("form.no-rate"),name:"no_rate"},j.a.createElement(Ve.a,{size:"middle",direction:"vertical",style:{width:"100%"}},j.a.createElement(ln.a,{name:"no_rate"}),j.a.createElement(on.a,{type:"info",message:n("form.no-rate-info")}))),j.a.createElement(fl,null,j.a.createElement(H.a,{htmlType:"submit",type:"primary",size:"large",disabled:u},n("new"===a?"form.submit.new":"form.submit.detail")))),[n,a,u]);return Object(O.useEffect)(()=>{const e=q.a.CancelToken.source();return p(e.token),()=>e.cancel()},[p]),Object(O.useEffect)(()=>{const e=m.current;return()=>e.cancel()},[]),j.a.createElement(ma.c,{initialValues:b(),enableReinitialize:!0,validate:e=>Ba(e,Ol),onSubmit:f},e=>E(e))},El=({catalogCurrencyId:e,catalogCurrencyTaxRateId:t,view:a})=>{const n=Object(g.b)("catalog-currency-tax-rate-detail").t,c=Object(O.useContext)(Pe).setSceneTitle;return Object(O.useEffect)(()=>{c(j.a.createElement(Ze,{title:n("detail"===a?"scene-title.detail":"scene-title.new"),extraContent:j.a.createElement(cn,{title:n("scene-title.back-to-catalog-currency-detail"),to:"/catalog/currencies/"+e})}))},[c,n,a,e]),j.a.createElement(jl,{catalogCurrencyId:e,catalogCurrencyTaxRateId:t,view:a})},vl=({onClick:e})=>{const t=Object(g.b)("views").t,a=Object(O.useCallback)(t=>{e(t)},[e]),n=[{children:t("table.context-menu.edit"),onClick:()=>a("edit"),icon:"pen"},{children:t("table.context-menu.delete"),onClick:()=>a("delete"),icon:"trash-alt",dialog:{text:t("table.context-menu.delete-dialog.text"),cancel:t("table.context-menu.delete-dialog.cancel"),confirm:t("table.context-menu.delete-dialog.confirm")}}];return j.a.createElement("div",null,j.a.createElement(St,{items:n,"data-test":"Dropdown"},j.a.createElement(Yt,{size:"small"})))},hl=(e,t)=>[{key:"id",dataIndex:"id",title:e("table.columns.id"),width:100},{key:"name",dataIndex:"name",title:e("table.columns.name"),width:200},{key:"path",dataIndex:"path",title:e("table.columns.path")},{key:"context_menu",dataIndex:"context_menu",width:60,render:(e,{id:a})=>j.a.createElement(vl,{onClick:e=>t&&t(e,a)}),fixed:"right"}],kl=e=>e.map(({id:e,name:t,path:a})=>({key:String(e),id:e,name:t,path:a})),xl=()=>{const e=Object(g.b)("views").t,t=Object(O.useState)([]),a=Object(v.a)(t,2),n=a[0],c=a[1],r=Object(O.useState)(!1),l=Object(v.a)(r,2),i=l[0],o=l[1],s=Object(O.useState)(0),u=Object(v.a)(s,2),d=u[0],m=u[1],b=Object(O.useState)(1),p=Object(v.a)(b,2),f=p[0],E=p[1],h=Object(O.useState)(0),k=Object(v.a)(h,2),x=k[0],y=k[1],w=Object(O.useRef)(q.a.CancelToken.source()),C=Object(O.useCallback)(Object(Z.a)(Q.a.mark((function e(){var t,a,n,r,l;return Q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o(!0),e.next=3,Ha.getViews(f,x,{cancelToken:w.current.token});case 3:t=e.sent,a=t.data,n=a.data,r=a.total,l=a.per_page,c(kl(n)),m(r),y(l),o(!1);case 12:case"end":return e.stop()}}),e)}))),[f,x]),_=Object(O.useCallback)(function(){var t=Object(Z.a)(Q.a.mark((function t(a,n){return Q.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:t.t0=a,t.next="edit"===t.t0?3:"delete"===t.t0?5:15;break;case 3:return Object(W.e)("/admin/content/views/"+n),t.abrupt("break",16);case 5:return t.prev=5,t.next=8,Ha.deleteView(n,{cancelToken:w.current.token});case 8:ct.a.success({message:e("table.delete-success")}),C(),t.next=14;break;case 12:t.prev=12,t.t1=t.catch(5);case 14:case 15:return t.abrupt("break",16);case 16:case"end":return t.stop()}}),t,null,[[5,12]])})));return function(e,a){return t.apply(this,arguments)}}(),["/admin",C,e]),T=Object(O.useCallback)(e=>{E(e)},[]);return Object(O.useEffect)(()=>{C()},[C]),Object(O.useEffect)(()=>{const e=w.current;return()=>e.cancel()},[]),j.a.createElement(at,{columns:hl(e,_),dataSource:n,loading:i,pagination:{current:f,pageSize:x,total:d,onChange:T}})},yl=()=>{const e=Object(g.b)("views").t,t=Object(O.useContext)(Pe).setSceneTitle,a=Object(O.useCallback)(()=>{Object(W.e)("/admin/content/views/new")},["/admin"]);return Object(O.useEffect)(()=>{t(j.a.createElement(Ze,{title:e("scene-title")}))},[t,e]),j.a.createElement(Ve.a,{size:"large",direction:"vertical",style:{width:"100%"}},j.a.createElement(et,{size:"middle",type:"primary",icon:"plus",onClick:a},e("create-new-view")),j.a.createElement(xl,null))},wl=ha.a.Item,Cl=Ya.e().shape({name:Ya.g().required(),path:Ya.g().required()}),_l=({viewId:e,view:t})=>{const a=Object(g.b)("view-detail").t,n=Object(O.useState)(),c=Object(v.a)(n,2),r=c[0],l=c[1],i=Object(O.useState)(!1),o=Object(v.a)(i,2),s=o[0],u=o[1],d=Object(O.useRef)(q.a.CancelToken.source()),m=r||{name:void 0,path:void 0},b=Object(O.useCallback)(function(){var a=Object(Z.a)(Q.a.mark((function a(n){var c,r;return Q.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if("detail"!==t||!e){a.next=14;break}return a.prev=1,u(!0),a.next=5,Ha.getView(e,{cancelToken:n});case 5:c=a.sent,r=c.data,l(r),u(!1),a.next=14;break;case 11:a.prev=11,a.t0=a.catch(1),u(!1);case 14:case"end":return a.stop()}}),a,null,[[1,11]])})));return function(e){return a.apply(this,arguments)}}(),[t,e]),p=Object(O.useCallback)(function(){var n=Object(Z.a)(Q.a.mark((function n({name:c,path:r}){var l;return Q.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,u(!0),(l=new FormData).append("name",c),l.append("path",r),"new"!==t){n.next=12;break}return n.next=8,Ha.createView(l,{cancelToken:d.current.token});case 8:ct.a.success({message:a("create-success")}),Object(W.e)("/admin/content/views"),n.next=17;break;case 12:if("detail"!==t||!e){n.next=17;break}return n.next=15,Ha.updateView(e,l,{cancelToken:d.current.token});case 15:ct.a.success({message:a("update-success")}),Object(W.e)("/admin/content/views");case 17:n.next=22;break;case 19:n.prev=19,n.t0=n.catch(0),u(!1);case 22:case"end":return n.stop()}}),n,null,[[0,19]])})));return function(e){return n.apply(this,arguments)}}(),["/admin",t,a,e]),f=Object(O.useCallback)(()=>j.a.createElement(va.a,{layout:"vertical"},j.a.createElement(wa,{label:a("form.name"),name:"name"},j.a.createElement(Oa.a,{name:"name"})),j.a.createElement(wa,{label:a("form.path"),name:"path"},j.a.createElement(Oa.a,{name:"path"})),j.a.createElement(wl,null,j.a.createElement(H.a,{htmlType:"submit",type:"primary",size:"large",disabled:s},a("new"===t?"form.submit.new":"form.submit.detail")))),[a,t,s]);return Object(O.useEffect)(()=>{const e=q.a.CancelToken.source();return b(e.token),()=>e.cancel()},[b]),Object(O.useEffect)(()=>{const e=d.current;return()=>e.cancel()},[]),j.a.createElement(ma.c,{initialValues:m,enableReinitialize:!0,validate:e=>Ba(e,Cl),onSubmit:p},()=>f())},Tl=({viewId:e,view:t})=>{const a=Object(g.b)("view-detail").t,n=Object(O.useContext)(Pe).setSceneTitle;return Object(O.useEffect)(()=>{n(j.a.createElement(Ze,{title:a("detail"===t?"scene-title.detail":"scene-title.new"),extraContent:j.a.createElement(cn,{title:a("scene-title.back-to-views"),to:"/content/views"})}))},[n,a,t]),j.a.createElement(_l,{viewId:e,view:t})},Il=({onClick:e})=>{const t=Object(g.b)("templates").t,a=Object(O.useCallback)(t=>{e(t)},[e]),n=[{children:t("table.context-menu.edit"),onClick:()=>a("edit"),icon:"pen"},{children:t("table.context-menu.delete"),onClick:()=>a("delete"),icon:"trash-alt",dialog:{text:t("table.context-menu.delete-dialog.text"),cancel:t("table.context-menu.delete-dialog.cancel"),confirm:t("table.context-menu.delete-dialog.confirm")}}];return j.a.createElement("div",null,j.a.createElement(St,{items:n,"data-test":"Dropdown"},j.a.createElement(Yt,{size:"small"})))},Al=(e,t)=>[{key:"id",dataIndex:"id",title:e("table.columns.id"),width:100},{key:"name",dataIndex:"name",title:e("table.columns.name"),width:200},{key:"created_at",dataIndex:"created_at",title:e("table.columns.created-at"),width:170,render:e=>e?Object(s.a)(e,Bt):"-"},{key:"modified_at",dataIndex:"modified_at",title:e("table.columns.modified-at"),render:e=>e?Object(s.a)(e,Bt):"-"},{key:"context_menu",dataIndex:"context_menu",width:60,render:(e,{id:a})=>j.a.createElement(Il,{onClick:e=>t&&t(e,a)}),fixed:"right"}];class Sl{static getTemplates(e,t,a){return q()(Object(X.a)({},a,{method:"GET",url:"/templates",params:{page:e,per_page:t}}))}static getAllTemplates(e){return q()(Object(X.a)({},e,{method:"GET",url:"/templates/all"}))}static getTemplate(e,t){return q()(Object(X.a)({},t,{method:"GET",url:"/templates/".concat(e)}))}static createTemplate(e,t){return q()(Object(X.a)({},t,{method:"POST",url:"/templates",data:e}))}static updateTemplate(e,t,a){return q()(Object(X.a)({},a,{method:"PUT",url:"/templates/".concat(e),data:t}))}static deleteTemplate(e,t){return q()(Object(X.a)({},t,{method:"DELETE",url:"/templates/".concat(e)}))}}const Ll=e=>e.map(({id:e,name:t,created_at:a,modified_at:n})=>({key:String(e),id:e,name:t,created_at:a?new Date(a):null,modified_at:n?new Date(n):null})),Rl=()=>{const e=Object(g.b)("templates").t,t=Object(O.useState)([]),a=Object(v.a)(t,2),n=a[0],c=a[1],r=Object(O.useState)(!1),l=Object(v.a)(r,2),i=l[0],o=l[1],s=Object(O.useState)(0),u=Object(v.a)(s,2),d=u[0],m=u[1],b=Object(O.useState)(1),p=Object(v.a)(b,2),f=p[0],E=p[1],h=Object(O.useState)(0),k=Object(v.a)(h,2),x=k[0],y=k[1],w=Object(O.useRef)(q.a.CancelToken.source()),C=Object(O.useCallback)(Object(Z.a)(Q.a.mark((function e(){var t,a,n,r,l;return Q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o(!0),e.next=3,Sl.getTemplates(f,x,{cancelToken:w.current.token});case 3:t=e.sent,a=t.data,n=a.data,r=a.total,l=a.per_page,c(Ll(n)),m(r),y(l),o(!1);case 12:case"end":return e.stop()}}),e)}))),[f,x]),_=Object(O.useCallback)(function(){var t=Object(Z.a)(Q.a.mark((function t(a,n){return Q.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:t.t0=a,t.next="edit"===t.t0?3:"delete"===t.t0?5:15;break;case 3:return Object(W.e)("/admin/content/templates/"+n),t.abrupt("break",16);case 5:return t.prev=5,t.next=8,Sl.deleteTemplate(n,{cancelToken:w.current.token});case 8:ct.a.success({message:e("table.delete-success")}),C(),t.next=14;break;case 12:t.prev=12,t.t1=t.catch(5);case 14:case 15:return t.abrupt("break",16);case 16:case"end":return t.stop()}}),t,null,[[5,12]])})));return function(e,a){return t.apply(this,arguments)}}(),["/admin",C,e]),T=Object(O.useCallback)(e=>{E(e)},[]);return Object(O.useEffect)(()=>{C()},[C]),Object(O.useEffect)(()=>{const e=w.current;return()=>e.cancel()},[]),j.a.createElement(at,{columns:Al(e,_),dataSource:n,loading:i,pagination:{current:f,pageSize:x,total:d,onChange:T}})},Dl=()=>{const e=Object(g.b)("templates").t,t=Object(O.useContext)(Pe).setSceneTitle,a=Object(O.useCallback)(()=>{Object(W.e)("/admin/content/templates/new")},["/admin"]);return Object(O.useEffect)(()=>{t(j.a.createElement(Ze,{title:e("scene-title")}))},[t,e]),j.a.createElement(Ve.a,{size:"large",direction:"vertical",style:{width:"100%"}},j.a.createElement(et,{size:"middle",type:"primary",icon:"plus",onClick:a},e("create-new-template")),j.a.createElement(Rl,null))},Gl=({onClick:e})=>{const t=Object(g.b)("layouts").t,a=Object(O.useCallback)(t=>{e(t)},[e]),n=[{children:t("table.context-menu.edit"),onClick:()=>a("edit"),icon:"pen"},{children:t("table.context-menu.delete"),onClick:()=>a("delete"),icon:"trash-alt",dialog:{text:t("table.context-menu.delete-dialog.text"),cancel:t("table.context-menu.delete-dialog.cancel"),confirm:t("table.context-menu.delete-dialog.confirm")}}];return j.a.createElement("div",null,j.a.createElement(St,{items:n,"data-test":"Dropdown"},j.a.createElement(Yt,{size:"small"})))},Nl=(e,t)=>[{key:"id",dataIndex:"id",title:e("table.columns.id"),width:100},{key:"name",dataIndex:"name",title:e("table.columns.name"),width:250},{key:"created_at",dataIndex:"created_at",title:e("table.columns.created-at"),width:170,render:e=>Object(s.a)(e,Bt)},{key:"modified_at",dataIndex:"modified_at",title:e("table.columns.modified-at"),render:e=>e?Object(s.a)(e,Bt):"-"},{key:"context_menu",dataIndex:"context_menu",width:60,render:(e,{id:a})=>j.a.createElement(Gl,{onClick:e=>t&&t(e,a)}),fixed:"right"}];class Ml{static getLayouts(e,t,a){return q()(Object(X.a)({},a,{method:"GET",url:"/layouts",params:{page:e,per_page:t}}))}static getAllLayouts(e){return q()(Object(X.a)({},e,{method:"GET",url:"/layouts/all"}))}static getLayout(e,t){return q()(Object(X.a)({},t,{method:"GET",url:"/layouts/".concat(e)}))}static createLayout(e,t){return q()(Object(X.a)({},t,{method:"POST",url:"/layouts",data:e}))}static updateLayout(e,t,a){return q()(Object(X.a)({},a,{method:"PUT",url:"/layouts/".concat(e),data:t}))}static deleteLayout(e,t){return q()(Object(X.a)({},t,{method:"DELETE",url:"/layouts/".concat(e)}))}}const Pl=e=>e.map(({id:e,name:t,created_at:a,modified_at:n})=>({key:String(e),id:e,name:t,created_at:new Date(a),modified_at:n?new Date(n):null})),zl=()=>{const e=Object(g.b)("layouts").t,t=Object(O.useState)([]),a=Object(v.a)(t,2),n=a[0],c=a[1],r=Object(O.useState)(!1),l=Object(v.a)(r,2),i=l[0],o=l[1],s=Object(O.useState)(0),u=Object(v.a)(s,2),d=u[0],m=u[1],b=Object(O.useState)(1),p=Object(v.a)(b,2),f=p[0],E=p[1],h=Object(O.useState)(0),k=Object(v.a)(h,2),x=k[0],y=k[1],w=Object(O.useRef)(q.a.CancelToken.source()),C=Object(O.useCallback)(Object(Z.a)(Q.a.mark((function e(){var t,a,n,r,l;return Q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o(!0),e.next=3,Ml.getLayouts(f,x,{cancelToken:w.current.token});case 3:t=e.sent,a=t.data,n=a.data,r=a.total,l=a.per_page,c(Pl(n)),m(r),y(l),o(!1);case 12:case"end":return e.stop()}}),e)}))),[f,x]),_=Object(O.useCallback)(function(){var t=Object(Z.a)(Q.a.mark((function t(a,n){return Q.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:t.t0=a,t.next="edit"===t.t0?3:"delete"===t.t0?5:15;break;case 3:return Object(W.e)("/admin/content/layouts/"+n),t.abrupt("break",16);case 5:return t.prev=5,t.next=8,Ml.deleteLayout(n,{cancelToken:w.current.token});case 8:ct.a.success({message:e("table.delete-success")}),C(),t.next=14;break;case 12:t.prev=12,t.t1=t.catch(5);case 14:case 15:return t.abrupt("break",16);case 16:case"end":return t.stop()}}),t,null,[[5,12]])})));return function(e,a){return t.apply(this,arguments)}}(),["/admin",C,e]),T=Object(O.useCallback)(e=>{E(e)},[]);return Object(O.useEffect)(()=>{C()},[C]),Object(O.useEffect)(()=>{const e=w.current;return()=>e.cancel()},[]),j.a.createElement(at,{columns:Nl(e,_),dataSource:n,loading:i,pagination:{current:f,pageSize:x,total:d,onChange:T}})},Fl=()=>{const e=Object(g.b)("layouts").t,t=Object(O.useContext)(Pe).setSceneTitle,a=Object(O.useCallback)(()=>{Object(W.e)("/admin/content/layouts/new")},["/admin"]);return Object(O.useEffect)(()=>{t(j.a.createElement(Ze,{title:e("scene-title")}))},[t,e]),j.a.createElement(Ve.a,{size:"large",direction:"vertical",style:{width:"100%"}},j.a.createElement(et,{size:"middle",type:"primary",icon:"plus",onClick:a},e("create-new-layout")),j.a.createElement(zl,null))},Yl=ha.a.Item,Vl=Ya.e().shape({name:Ya.g().required()}),Bl=({layoutId:e,view:t})=>{const a=Object(g.b)("layout-detail").t,n=Object(O.useState)(),c=Object(v.a)(n,2),r=c[0],l=c[1],i=Object(O.useState)(!1),o=Object(v.a)(i,2),s=o[0],u=o[1],d=Object(O.useRef)(q.a.CancelToken.source()),m=r||{name:void 0},b=Object(O.useCallback)(function(){var a=Object(Z.a)(Q.a.mark((function a(n){var c,r;return Q.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if("detail"!==t||!e){a.next=14;break}return a.prev=1,u(!0),a.next=5,Ml.getLayout(e,{cancelToken:n});case 5:c=a.sent,r=c.data,l(r),u(!1),a.next=14;break;case 11:a.prev=11,a.t0=a.catch(1),u(!1);case 14:case"end":return a.stop()}}),a,null,[[1,11]])})));return function(e){return a.apply(this,arguments)}}(),[t,e]),p=Object(O.useCallback)(function(){var n=Object(Z.a)(Q.a.mark((function n({name:c}){var r,l,i,o;return Q.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,u(!0),(r=new FormData).append("name",c),"new"!==t){n.next=13;break}return n.next=7,Ml.createLayout(r,{cancelToken:d.current.token});case 7:l=n.sent,i=l.data.id,ct.a.success({message:a("create-success")}),Object(W.e)("/admin/content/layouts/"+i),n.next=19;break;case 13:if("detail"!==t||!e){n.next=19;break}return n.next=16,Ml.updateLayout(e,r,{cancelToken:d.current.token});case 16:ct.a.success({message:a("update-success")}),o="/admin/content/layouts/"+e,Object(W.e)("/admin/redirect-to",{state:{to:o}});case 19:n.next=24;break;case 21:n.prev=21,n.t0=n.catch(0),u(!1);case 24:case"end":return n.stop()}}),n,null,[[0,21]])})));return function(e){return n.apply(this,arguments)}}(),["/admin",t,a,e]),f=Object(O.useCallback)(()=>j.a.createElement(va.a,{layout:"vertical"},j.a.createElement(wa,{label:a("form.name"),name:"name"},j.a.createElement(Oa.a,{name:"name"})),j.a.createElement(Yl,null,j.a.createElement(H.a,{htmlType:"submit",type:"primary",size:"large",disabled:s},a("new"===t?"form.submit.new":"form.submit.detail")))),[a,t,s]);return Object(O.useEffect)(()=>{const e=q.a.CancelToken.source();return b(e.token),()=>e.cancel()},[b]),Object(O.useEffect)(()=>{const e=d.current;return()=>e.cancel()},[]),j.a.createElement(ma.c,{initialValues:m,enableReinitialize:!0,validate:e=>Ba(e,Vl),onSubmit:p},()=>f())};class Hl{static getLayoutSlots(e,t){return q()(Object(X.a)({},t,{method:"GET",url:"/layout-slots",params:{layout_id:e}}))}static getAllLayoutSlots(e,t){return q()(Object(X.a)({},t,{method:"GET",url:"/layout-slots/all",params:{layout_id:e}}))}static getLayoutSlot(e,t){return q()(Object(X.a)({},t,{method:"GET",url:"/layout-slots/".concat(e)}))}static createLayoutSlot(e,t){return q()(Object(X.a)({},t,{method:"POST",url:"/layout-slots",data:e}))}static updateLayoutSlot(e,t,a){return q()(Object(X.a)({},a,{method:"PUT",url:"/layout-slots/".concat(e),data:t}))}static deleteLayoutSlot(e,t){return q()(Object(X.a)({},t,{method:"DELETE",url:"/layout-slots/".concat(e)}))}}var Wl=a(657);const Ul=e=>{let t=e.writeable,a=e.locked,n=e.created_at,c=e.modified_at,r=Object(Je.a)(e,["writeable","locked","created_at","modified_at"]);return Object(X.a)({},r,{writeable:!!t,locked:!!a,created_at:new Date(n),modified_at:c?new Date(c):null})},Ql=ha.a.Item,Zl=Fa.a.Option,Jl=Ya.e().shape({parent_id:Ya.d().nullable().notRequired(),name:Ya.g().required(),writeable:Ya.b().notRequired(),locked:Ya.b().notRequired(),weight:Ya.d().required(),html_class_name:Ya.g().notRequired(),html_id:Ya.g().notRequired()}),Xl=({view:e,layoutId:t,parentId:a,slotId:n,onClose:c,onSave:r})=>{const l=Object(g.b)("layout-detail").t,i=Object(O.useState)(!1),o=Object(v.a)(i,2),s=o[0],u=o[1],d=Object(O.useState)(),m=Object(v.a)(d,2),b=m[0],p=m[1],f=Object(O.useState)([]),E=Object(v.a)(f,2),h=E[0],k=E[1],x=Object(O.useRef)(q.a.CancelToken.source()),y=Object(O.useCallback)(function(){var e=Object(Z.a)(Q.a.mark((function e(a){var n,c;return Q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,u(!0),e.next=4,Hl.getAllLayoutSlots(t,{cancelToken:a});case 4:n=e.sent,c=n.data,k(c),u(!1),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),u(!1);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t){return e.apply(this,arguments)}}(),[t]),w=Object(O.useCallback)(function(){var t=Object(Z.a)(Q.a.mark((function t(a){var c,r;return Q.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("detail"!==e||!n){t.next=14;break}return t.prev=1,u(!0),t.next=5,Hl.getLayoutSlot(n,{cancelToken:a});case 5:c=t.sent,r=c.data,p(Ul(r)),u(!1),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(1),u(!1);case 14:case"end":return t.stop()}}),t,null,[[1,11]])})));return function(e){return t.apply(this,arguments)}}(),[e,n]),C=Object(O.useCallback)(()=>b?Object(X.a)({},b,{parent_id:b.parent_id||0}):{parent_id:a||0,name:void 0,weight:50,locked:!1,writeable:!1,html_class_name:"",html_id:""},[b,a]),_=Object(O.useCallback)(function(){var c=Object(Z.a)(Q.a.mark((function c({name:l,writeable:i,locked:o,weight:s,html_class_name:u,html_id:d}){var m,b;return Q.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:if(m=x.current.token,(b=new FormData).append("name",l),b.append("writeable",String(+i)),b.append("locked",String(+o)),b.append("weight",String(s)),b.append("html_class_name",u),b.append("html_id",d),b.append("layout_id",String(t)),a&&b.append("parent_id",String(a)),"new"!==e){c.next=21;break}return c.prev=11,c.next=14,Hl.createLayoutSlot(b,{cancelToken:m});case 14:r(e),c.next=19;break;case 17:c.prev=17,c.t0=c.catch(11);case 19:c.next=30;break;case 21:if("detail"!==e||!n){c.next=30;break}return c.prev=22,c.next=25,Hl.updateLayoutSlot(n,b,{cancelToken:m});case 25:r(e),c.next=30;break;case 28:c.prev=28,c.t1=c.catch(22);case 30:case"end":return c.stop()}}),c,null,[[11,17],[22,28]])})));return function(e){return c.apply(this,arguments)}}(),[e,t,a,r,n]),T=Object(O.useCallback)(()=>j.a.createElement(va.a,{layout:"vertical"},j.a.createElement(wa,{label:l("slot-modal.form.parent-id.label"),name:"parent_id"},j.a.createElement(Fa.a,{name:"parent_id",loading:s},j.a.createElement(Zl,{value:0},l("slot-modal.form.parent-id.root")),h.map(({name:e,id:t})=>j.a.createElement(Zl,{value:t},j.a.createElement("em",null,"(id: ",t,")")," ",e)))),j.a.createElement(wa,{label:l("slot-modal.form.name"),name:"name"},j.a.createElement(Oa.a,{name:"name"})),j.a.createElement(wa,{label:l("slot-modal.form.writeable"),name:"writeable"},j.a.createElement(ln.a,{name:"writeable"})),j.a.createElement(wa,{label:l("slot-modal.form.locked"),name:"locked"},j.a.createElement(ln.a,{name:"locked"})),j.a.createElement(wa,{label:l("slot-modal.form.weight"),name:"weight"},j.a.createElement(Oa.a,{name:"weight",type:"number"})),j.a.createElement(wa,{label:l("slot-modal.form.html-class-name"),name:"html_class_name"},j.a.createElement(Oa.a,{name:"html_class_name"})),j.a.createElement(wa,{label:l("slot-modal.form.html-id"),name:"html_id"},j.a.createElement(Oa.a,{name:"html_id"})),j.a.createElement(Ql,null,j.a.createElement(Ve.a,{direction:"horizontal",size:"middle"},j.a.createElement(H.a,{htmlType:"submit",type:"primary",size:"large",disabled:s},l("new"===e?"slot-modal.form.submit.new":"slot-modal.form.submit.detail")),j.a.createElement(H.a,{type:"default",htmlType:"button",onClick:c,size:"large"},l("slot-modal.form.close"))))),[l,e,s,c,h]);return Object(O.useEffect)(()=>{const e=q.a.CancelToken.source();return w(e.token),y(e.token),()=>e.cancel()},[w,y]),j.a.createElement(Wl.a,{visible:!0,footer:null,closable:!1},j.a.createElement(ma.c,{initialValues:C(),enableReinitialize:!0,validate:e=>Ba(e,Jl),onSubmit:_},()=>T()))};function Kl(){const e=Object(r.a)(["\n  margin-left: 6px;\n"]);return Kl=function(){return e},e}function ql(){const e=Object(r.a)(["\n  display: grid;\n  grid-template-columns: auto max-content;\n  margin-bottom: ",";\n"]);return ql=function(){return e},e}function $l(){const e=Object(r.a)(["\n  margin-top: 12px;\n  padding: 24px;\n  border: 1px solid ",";\n  box-shadow: 0px 4px 10px 0px rgba(0, 0, 0, 0.1);\n"]);return $l=function(){return e},e}function ei(){const e=Object(r.a)(["\n  && {\n    position: absolute;\n  }\n"]);return ei=function(){return e},e}const ti=Object(l.c)(Ot)(ei()),ai=l.c.div($l(),w),ni=l.c.div(ql(),({hasChildren:e})=>e&&"24px"),ci=Object(l.c)(Ke)(Kl()),ri=({layoutId:e})=>{const t=Object(g.b)("layout-detail").t,a=Object(O.useState)([]),n=Object(v.a)(a,2),c=n[0],r=n[1],l=Object(O.useState)(!1),i=Object(v.a)(l,2),o=i[0],s=i[1],u=Object(O.useState)(!1),d=Object(v.a)(u,2),m=d[0],b=d[1],p=Object(O.useState)({parentId:void 0,slotId:void 0}),f=Object(v.a)(p,2),E=f[0],h=f[1],k=Object(O.useState)(),x=Object(v.a)(k,2),y=x[0],w=x[1],C=Object(O.useRef)(q.a.CancelToken.source()),_=Object(O.useCallback)(Object(Z.a)(Q.a.mark((function t(){var a,n;return Q.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,s(!0),t.next=4,Hl.getLayoutSlots(e,{cancelToken:C.current.token});case 4:a=t.sent,n=a.data,r(n),s(!1),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(0),s(!1);case 13:case"end":return t.stop()}}),t,null,[[0,10]])}))),[e]),T=Object(O.useCallback)(function(){var e=Object(Z.a)(Q.a.mark((function e(a){return Q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Hl.deleteLayoutSlot(a,{cancelToken:C.current.token});case 3:_(),ct.a.success({message:t("slots.delete-success")}),e.next=9;break;case 7:e.prev=7,e.t0=e.catch(0);case 9:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),[_,t]),I=Object(O.useCallback)(e=>e.map(({id:e,name:a,children:n,locked:r},l)=>j.a.createElement(ai,{key:e},j.a.createElement(ni,{hasChildren:!!n},j.a.createElement("span",null,a,r?j.a.createElement(ci,{icon:"lock",size:"sm"}):null),j.a.createElement(Ve.a,{direction:"horizontal",size:"small"},j.a.createElement(et,{icon:"plus",size:"small",onClick:()=>{h({parentId:e}),b(!0)}},t("slots.add")),j.a.createElement(H.a,{size:"small",onClick:()=>{h({slotId:e}),b(!0)}},t("slots.edit")),j.a.createElement(ft,{top:1===c.length||l+1===c.length?"-115px":"10px",left:"calc(-100% - 175px)"},j.a.createElement(H.a,{size:"small",type:"danger",ghost:!0,onClick:()=>w(e)},t("slots.delete")),y===e&&j.a.createElement(ti,{onConfirm:()=>T(e),onCancel:()=>w(void 0),confirm:t("slots.dialog.confirm"),cancel:t("slots.dialog.cancel"),text:t("slots.dialog.text")})))),n&&I(n))),[y,c.length,T,t]),A=Object(O.useCallback)(e=>{_(),b(!1),h({parentId:void 0,slotId:void 0}),"new"===e?ct.a.success({message:t("slots.create-success")}):ct.a.success({message:t("slots.update-success")})},[_,t]);return Object(O.useEffect)(()=>{_()},[_]),Object(O.useEffect)(()=>{const e=C.current;return()=>e.cancel()},[]),o?j.a.createElement(Yn.a,{active:!0,loading:!0,paragraph:{rows:4,width:"100%"}}):c?c.length>0?j.a.createElement(j.a.Fragment,null,j.a.createElement(Ve.a,{direction:"vertical",size:"middle",style:{width:"100%"}},j.a.createElement(et,{size:"middle",type:"primary",icon:"plus",onClick:()=>b(!0)},t("slots.create-new-slot")),j.a.createElement("div",null,I(c))),m&&j.a.createElement(Xl,{view:E.slotId?"detail":"new",layoutId:e,parentId:E.parentId,slotId:E.slotId,onClose:()=>b(!1),onSave:A})):j.a.createElement(j.a.Fragment,null,j.a.createElement(on.a,{type:"warning",message:j.a.createElement(Ve.a,{direction:"vertical",size:"middle"},j.a.createElement("div",null,t("slots.no-slots")),j.a.createElement(et,{size:"middle",type:"primary",icon:"plus",onClick:()=>b(!0)},t("slots.create-new-slot")))}),m&&j.a.createElement(Xl,{view:"new",layoutId:e,onClose:()=>b(!1),onSave:A})):null},li=da.a.Panel;var ii;!function(e){e.FORM="form",e.SLOTS="slots"}(ii||(ii={}));const oi=({layoutId:e,view:t,activeKeys:a=[ii.SLOTS]})=>{const n=Object(g.b)("layout-detail").t,c=Object(O.useContext)(Pe).setSceneTitle,r=Object(O.useState)(a),l=Object(v.a)(r,2),i=l[0],o=l[1];return Object(O.useEffect)(()=>{c(j.a.createElement(Ze,{title:n("detail"===t?"scene-title.detail":"scene-title.new"),extraContent:j.a.createElement(cn,{title:n("scene-title.back-to-layouts"),to:"/content/layouts"})}))},[c,n,t]),"new"===t?j.a.createElement(Bl,{layoutId:e,view:t}):"detail"===t&&e?j.a.createElement(da.a,{defaultActiveKey:i,onChange:e=>o(e)},j.a.createElement(li,{header:n("form.title"),key:ii.FORM},j.a.createElement(Bl,{layoutId:e,view:t})),j.a.createElement(li,{header:n("slots.title"),key:ii.SLOTS},j.a.createElement(ri,{layoutId:e}))):null},si=e=>{let t=e.template_pages,a=Object(Je.a)(e,["template_pages"]);return Object(X.a)({},a,{template_pages:t.reduce((e,{id:t})=>(e.push(t),e),[])})};class ui{static getTemplatePages(e,t,a){return q()(Object(X.a)({},a,{method:"GET",url:"/template-pages",params:{page:e,per_page:t}}))}static getAllTemplatePages(e,t){return q()(Object(X.a)({},t,{method:"GET",url:"/template-pages/all",params:{layout_id:e}}))}static getTemplatePage(e,t){return q()(Object(X.a)({},t,{method:"GET",url:"/template-pages/".concat(e)}))}static createTemplatePage(e,t){return q()(Object(X.a)({},t,{method:"POST",url:"/template-pages",data:e}))}static updateTemplatePage(e,t,a){return q()(Object(X.a)({},a,{method:"PUT",url:"/template-pages/".concat(e),data:t}))}static deleteTemplatePage(e,t){return q()(Object(X.a)({},t,{method:"DELETE",url:"/template-pages/".concat(e)}))}}const di=ha.a.Item,mi=Oa.a.TextArea,bi=Fa.a.Option,pi=Ya.e().shape({layout_id:Ya.d().required(),view_id:Ya.d().required(),name:Ya.g().required(),html_head_end:Ya.g().notRequired(),html_body_start:Ya.g().notRequired(),html_body_end:Ya.g().notRequired(),template_pages:Ya.a().of(Ya.d())}),gi=({templateId:e,view:t})=>{const a=Object(g.b)("template-detail").t,n=Object(O.useState)(),c=Object(v.a)(n,2),r=c[0],l=c[1],i=Object(O.useState)([]),o=Object(v.a)(i,2),s=o[0],u=o[1],d=Object(O.useState)([]),m=Object(v.a)(d,2),b=m[0],p=m[1],f=Object(O.useState)([]),E=Object(v.a)(f,2),h=E[0],k=E[1],x=Object(O.useState)(!1),y=Object(v.a)(x,2),w=y[0],C=y[1],_=Object(O.useRef)(q.a.CancelToken.source()),T=r||{name:void 0,view_id:void 0,layout_id:void 0,html_head_end:"",html_body_start:"",html_body_end:"",template_pages:void 0},I=Object(O.useCallback)(function(){var e=Object(Z.a)(Q.a.mark((function e(a,n){var c,r;return Q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("detail"!==t){e.next=14;break}return e.prev=1,C(!0),e.next=5,ui.getAllTemplatePages(a,{cancelToken:n});case 5:c=e.sent,r=c.data,k(r),C(!1),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),C(!1);case 14:case"end":return e.stop()}}),e,null,[[1,11]])})));return function(t,a){return e.apply(this,arguments)}}(),[t]),A=Object(O.useCallback)(function(){var a=Object(Z.a)(Q.a.mark((function a(n){var c,r;return Q.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if("detail"!==t||!e){a.next=16;break}return a.prev=1,C(!0),a.next=5,Sl.getTemplate(e,{cancelToken:n});case 5:return c=a.sent,r=c.data,a.next=9,I(r.layout_id,n);case 9:l(si(r)),C(!1),a.next=16;break;case 13:a.prev=13,a.t0=a.catch(1),C(!1);case 16:case"end":return a.stop()}}),a,null,[[1,13]])})));return function(e){return a.apply(this,arguments)}}(),[t,e,I]),S=Object(O.useCallback)(function(){var e=Object(Z.a)(Q.a.mark((function e(t){var a,n;return Q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,C(!0),e.next=4,Ha.getAllViews({cancelToken:t});case 4:a=e.sent,n=a.data,u(n),C(!1),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),C(!1);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t){return e.apply(this,arguments)}}(),[]),L=Object(O.useCallback)(function(){var e=Object(Z.a)(Q.a.mark((function e(t){var a,n;return Q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,C(!0),e.next=4,Ml.getAllLayouts({cancelToken:t});case 4:a=e.sent,n=a.data,p(n),C(!1),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),C(!1);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t){return e.apply(this,arguments)}}(),[]),R=Object(O.useCallback)(function(){var n=Object(Z.a)(Q.a.mark((function n({name:c,view_id:r,layout_id:l,html_head_end:i,html_body_end:o,html_body_start:s,template_pages:u}){var d,m,b,p;return Q.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,C(!0),(d=new FormData).append("name",c),d.append("view_id",String(r)),d.append("layout_id",String(l)),d.append("html_head_end",i),d.append("html_body_end",o),d.append("html_body_start",s),"new"!==t){n.next=18;break}return n.next=12,Sl.createTemplate(d,{cancelToken:_.current.token});case 12:m=n.sent,b=m.data.id,ct.a.success({message:a("form.create-success")}),Object(W.e)("/admin/content/templates/"+b),n.next=25;break;case 18:if("detail"!==t||!e){n.next=25;break}return u.forEach(e=>{d.append("template_pages[]",String(e))}),n.next=22,Sl.updateTemplate(e,d,{cancelToken:_.current.token});case 22:ct.a.success({message:a("form.update-success")}),p="/admin/content/templates/"+e,Object(W.e)("/admin/redirect-to",{state:{to:p}});case 25:n.next=30;break;case 27:n.prev=27,n.t0=n.catch(0),C(!1);case 30:case"end":return n.stop()}}),n,null,[[0,27]])})));return function(e){return n.apply(this,arguments)}}(),["/admin",t,a,e]),D=Object(O.useCallback)(()=>j.a.createElement(va.a,{layout:"vertical"},j.a.createElement(wa,{label:a("form.layout-id"),name:"layout_id"},j.a.createElement(Fa.a,{name:"layout_id"},b.map(({id:e,name:t})=>j.a.createElement(bi,{key:e,value:e},t)))),j.a.createElement(wa,{label:a("form.view-id"),name:"view_id"},j.a.createElement(Fa.a,{name:"view_id"},s.map(({id:e,name:t})=>j.a.createElement(bi,{key:e,value:e},t)))),j.a.createElement(wa,{label:a("form.name"),name:"name"},j.a.createElement(Oa.a,{name:"name"})),j.a.createElement(wa,{label:a("form.html-head-end"),name:"html_head_end"},j.a.createElement(mi,{name:"html_head_end",rows:3})),j.a.createElement(wa,{label:a("form.html-body-start"),name:"html_body_start"},j.a.createElement(mi,{name:"html_body_start",rows:3})),j.a.createElement(wa,{label:a("form.html-body-end"),name:"html_body_end"},j.a.createElement(mi,{name:"html_body_end",rows:3})),"detail"===t&&j.a.createElement(wa,{label:a("form.template-pages"),name:"template_pages"},j.a.createElement(Fa.a,{name:"template_pages",mode:"multiple"},h.map(({id:e,name:t})=>j.a.createElement(bi,{key:e,value:e},t)))),j.a.createElement(di,null,j.a.createElement(H.a,{htmlType:"submit",type:"primary",size:"large",disabled:w},a("new"===t?"form.submit.new":"form.submit.detail")))),[a,t,s,b,h,w]);return Object(O.useEffect)(()=>{const e=q.a.CancelToken.source();return A(e.token),S(e.token),L(e.token),()=>e.cancel()},[A,S,L]),Object(O.useEffect)(()=>{const e=_.current;return()=>e.cancel()},[]),j.a.createElement(ma.c,{initialValues:T,enableReinitialize:!0,validate:e=>Ba(e,pi),onSubmit:R},()=>D())},fi=({templateId:e,view:t})=>{const a=Object(g.b)("template-detail").t,n=Object(O.useContext)(Pe).setSceneTitle;return Object(O.useEffect)(()=>{n(j.a.createElement(Ze,{title:a("detail"===t?"scene-title.detail":"scene-title.new"),extraContent:j.a.createElement(cn,{title:a("scene-title.back-to-templates"),to:"/content/templates"})}))},[n,a,t]),j.a.createElement(gi,{templateId:e,view:t})},Oi=e=>ga()(e,(e,t)=>{switch(e){case"identifier":return["value",t];case"name":return["title",t];case"children":default:return[e,t]}},{deep:!0}),ji=()=>{const e=Object(O.useState)(),t=Object(v.a)(e,2),a=t[0],n=t[1],c=Object(O.useState)([]),r=Object(v.a)(c,2),l=r[0],i=r[1],o=Object(O.useState)(!1),s=Object(v.a)(o,2),u=s[0],d=s[1],m=Object(O.useCallback)(function(){var e=Object(Z.a)(Q.a.mark((function e(t){var a,n;return Q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,d(!0),e.next=4,Sl.getAllTemplates({cancelToken:t});case 4:a=e.sent,n=a.data,i(n),d(!1),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),d(!1);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t){return e.apply(this,arguments)}}(),[]),b=Object(O.useCallback)(function(){var e=Object(Z.a)(Q.a.mark((function e(t){var a,c;return Q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,d(!0),e.next=4,nt.getAllPages({cancelToken:t});case 4:a=e.sent,c=a.data,n(Oi(c)),d(!1),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),d(!1);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t){return e.apply(this,arguments)}}(),[]);return Object(O.useEffect)(()=>{const e=q.a.CancelToken.source();return m(e.token),b(e.token),()=>e.cancel()},[m,b]),{pages:a,templates:l,loading:u}},Ei=ha.a.Item,vi=Fa.a.Option,hi=Ya.e().shape({parent:Ya.g().notRequired(),name:Ya.g().required(),template_id:Ya.d().required(),path:Ya.g().required()}),ki=({parent:e,view:t})=>{const a=Object(g.b)("content-detail").t,n=ji(),c=n.pages,r=n.templates,l=n.loading,i=Object(O.useState)(!1),o=Object(v.a)(i,2),s=o[0],u=o[1],d=Object(O.useRef)(q.a.CancelToken.source()),m={parent:e||"",name:void 0,template_id:void 0,path:void 0},b=Object(O.useCallback)(function(){var e=Object(Z.a)(Q.a.mark((function e({name:n,parent:c,path:r,template_id:l}){var i,o,s;return Q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(u(!0),(i=new FormData).append("name",n),i.append("parent",c),i.append("path",r),i.append("template_id",String(l)),"new"!==t){e.next=14;break}return e.next=9,nt.createPage(i,{cancelToken:d.current.token});case 9:o=e.sent,s=o.data.identifier,u(!1),ct.a.success({message:a("form.create-success")}),Object(W.e)("/admin/content/"+s);case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),["/admin",t,a]),p=Object(O.useCallback)(()=>j.a.createElement(va.a,{layout:"vertical"},j.a.createElement(wa,{label:a("form.tempalte-id"),name:"template_id"},j.a.createElement(Fa.a,{name:"template_id",loading:s||l},r.map(({id:e,name:t})=>j.a.createElement(vi,{value:e,key:e},t)))),j.a.createElement(wa,{label:a("form.parent"),name:"parent"},c?j.a.createElement(ja.a,{treeData:c,name:"parent",allowClear:!0,showArrow:!0,showSearch:!0,filterTreeNode:!0,treeDefaultExpandAll:!0,treeNodeFilterProp:"title"}):j.a.createElement(Oa.a,{name:"parent",disabled:!0})),j.a.createElement(wa,{label:a("form.name"),name:"name"},j.a.createElement(Oa.a,{name:"name"})),j.a.createElement(wa,{label:a("form.path"),name:"path"},j.a.createElement(Oa.a,{name:"path"})),j.a.createElement(Ei,null,j.a.createElement(H.a,{htmlType:"submit",type:"primary",size:"large",disabled:s},a("form.submit.new")))),[a,r,c,s,l]);return Object(O.useEffect)(()=>{const e=d.current;return()=>e.cancel()},[]),j.a.createElement(ma.c,{initialValues:m,enableReinitialize:!0,validate:e=>Ba(e,hi),onSubmit:b},()=>p())};class xi{static getModules(e,t,a,n,c){return q()(Object(X.a)({},c,{method:"GET",url:"/modules",params:{page_identifier:e,page_version:t,layout_id:a,template_page_ids:n}}))}}var yi=a(227),wi=a.n(yi);let Ci,_i;!function(e){e.TEXT="TEXT",e.GALLERY="GALLERY",e.IMAGE="IMAGE",e.HEADING="HEADING",e.NAVIGATION="NAVIGATION",e.LOGO="LOGO",e.CATALOG_CATEGORY_TREE="CATALOG_CATEGORY_TREE",e.CATALOG_CATEGORY="CATALOG_CATEGORY",e.CATALOG_LISTING="CATALOG_LISTING",e.CATALOG_SEARCH="CATALOG_SEARCH",e.CATALOG_DETAIL="CATALOG_DETAIL",e.CATALOG_ITEM="CATALOG_ITEM",e.CAROUSEL="CAROUSEL",e.FORM="FORM",e.HTML="HTML",e.BUTTON="BUTTON",e.GRID="GRID",e.PRICE="PRICE",e.PAGE_LISTING="PAGE_LISTING",e.PAGE_TAG_TREE="PAGE_TAG_TREE",e.PAGE_SEARCH="PAGE_SEARCH"}(Ci||(Ci={}));class Ti{static getTextModule(e,t){return q()(Object(X.a)({},t,{method:"GET",url:"/text-modules/".concat(e)}))}}class Ii{static getCatalogListingModule(e,t){return q()(Object(X.a)({},t,{method:"GET",url:"/catalog-listing-modules/".concat(e)}))}}class Ai{static getNavigationModule(e,t){return q()(Object(X.a)({},t,{method:"GET",url:"/navigation-modules/".concat(e)}))}}class Si{static getButtonModule(e,t){return q()(Object(X.a)({},t,{method:"GET",url:"/button-modules/".concat(e)}))}}class Li{static getImageModule(e,t){return q()(Object(X.a)({},t,{method:"GET",url:"/image-modules/".concat(e)}))}}class Ri{static getHeadingModule(e,t){return q()(Object(X.a)({},t,{method:"GET",url:"/heading-modules/".concat(e)}))}}class Di{static getCatalogItemModule(e,t){return q()(Object(X.a)({},t,{method:"GET",url:"/catalog-item-modules/".concat(e)}))}}class Gi{static getCatalogCategoryTreeModule(e,t){return q()(Object(X.a)({},t,{method:"GET",url:"/catalog-category-tree-modules/".concat(e)}))}}class Ni{static getCatalogCategoryModule(e,t){return q()(Object(X.a)({},t,{method:"GET",url:"/catalog-category-modules/".concat(e)}))}}class Mi{static getCatalogDetailModule(e,t){return q()(Object(X.a)({},t,{method:"GET",url:"/catalog-detail-modules/".concat(e)}))}}class Pi{static getCatalogSearchModule(e,t){return q()(Object(X.a)({},t,{method:"GET",url:"/catalog-search-modules/".concat(e)}))}}!function(e){e.PAGE="PAGE",e.TEMPLATE_PAGE="TEMPLATE_PAGE"}(_i||(_i={}));const zi=({view:e,identifier:t})=>{const a=Object(O.useRef)(q.a.CancelToken.source()),n=Object(O.useState)(!1),c=Object(v.a)(n,2),r=c[0],l=c[1],i=Object(O.useState)(),o=Object(v.a)(i,2),s=o[0],u=o[1],d=Object(O.useState)(),m=Object(v.a)(d,2),b=m[0],p=m[1],g=Object(O.useState)(),f=Object(v.a)(g,2),j=f[0],E=f[1],h=Object(O.useState)(),k=Object(v.a)(h,2),x=k[0],y=k[1],w=Object(O.useState)(),C=Object(v.a)(w,2),_=C[0],T=C[1],I=Object(O.useState)({}),A=Object(v.a)(I,2),S=A[0],L=A[1],R=Object(O.useCallback)(function(){var n=Object(Z.a)(Q.a.mark((function n(c){var r,i;return Q.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if("detail"!==e||!t){n.next=14;break}return n.prev=1,l(!0),n.next=5,Hl.getLayoutSlots(c,{cancelToken:a.current.token});case 5:r=n.sent,i=r.data,u(i),l(!1),n.next=14;break;case 11:n.prev=11,n.t0=n.catch(1),l(!1);case 14:case"end":return n.stop()}}),n,null,[[1,11]])})));return function(e){return n.apply(this,arguments)}}(),[t,e]),D=Object(O.useCallback)(function(){var n=Object(Z.a)(Q.a.mark((function n(c){var r,i;return Q.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if("detail"!==e||!t){n.next=14;break}return n.prev=1,l(!0),n.next=5,Ml.getLayout(c,{cancelToken:a.current.token});case 5:r=n.sent,i=r.data,T(i),l(!1),n.next=14;break;case 11:n.prev=11,n.t0=n.catch(1),l(!1);case 14:case"end":return n.stop()}}),n,null,[[1,11]])})));return function(e){return n.apply(this,arguments)}}(),[t,e]),G=Object(O.useCallback)(function(){var n=Object(Z.a)(Q.a.mark((function n(c){var r,i;return Q.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if("detail"!==e||!t){n.next=14;break}return n.prev=1,l(!0),n.next=5,Ha.getView(c,{cancelToken:a.current.token});case 5:r=n.sent,i=r.data,y(i),l(!1),n.next=14;break;case 11:n.prev=11,n.t0=n.catch(1),l(!1);case 14:case"end":return n.stop()}}),n,null,[[1,11]])})));return function(e){return n.apply(this,arguments)}}(),[t,e]),N=Object(O.useCallback)(function(){var e=Object(Z.a)(Q.a.mark((function e(t,n,c,r){var i,o,s;return Q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l(!0),e.next=3,xi.getModules(t,n,c,r,{cancelToken:a.current.token});case 3:return i=e.sent,o=i.data,s={},e.next=8,Promise.all(o.map(function(){var e=Object(Z.a)(Q.a.mark((function e(t){var a,n,c,r,l,i,o,u,d,m,b,p,g;return Q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a={isNew:!1,isTouched:!1,moduleType:t.module_type,uuid:wi()(),slotId:t.slot_id,weight:t.weight,moduleId:t.id,data:{},locked:t.page_type===_i.TEMPLATE_PAGE,isTemplatePageModule:t.page_type===_i.TEMPLATE_PAGE},e.t0=t.module_type,e.next=e.t0===Ci.HEADING?4:e.t0===Ci.TEXT?15:e.t0===Ci.IMAGE?26:e.t0===Ci.BUTTON?37:e.t0===Ci.NAVIGATION?48:e.t0===Ci.CATALOG_LISTING?59:e.t0===Ci.CATALOG_ITEM?70:e.t0===Ci.CATALOG_DETAIL?81:e.t0===Ci.CATALOG_SEARCH?92:e.t0===Ci.CATALOG_CATEGORY_TREE?103:e.t0===Ci.CATALOG_CATEGORY?114:125;break;case 4:return e.prev=4,e.next=7,Ri.getHeadingModule(t.id);case 7:n=e.sent,c=n.data,a.data={level:c.level,content:c.content},e.next=14;break;case 12:e.prev=12,e.t1=e.catch(4);case 14:return e.abrupt("break",125);case 15:return e.prev=15,e.next=18,Ti.getTextModule(t.id);case 18:r=e.sent,c=r.data,a.data={content:c.content},e.next=25;break;case 23:e.prev=23,e.t2=e.catch(15);case 25:return e.abrupt("break",125);case 26:return e.prev=26,e.next=29,Li.getImageModule(t.id);case 29:l=e.sent,c=l.data,a.data={file_name:c.file_name,image_alt:c.image_alt},e.next=36;break;case 34:e.prev=34,e.t3=e.catch(26);case 36:return e.abrupt("break",125);case 37:return e.prev=37,e.next=40,Si.getButtonModule(t.id);case 40:i=e.sent,c=i.data,a.data={text:c.text,path:c.path,target:c.target,button_id:c.button_id},e.next=47;break;case 45:e.prev=45,e.t4=e.catch(37);case 47:return e.abrupt("break",125);case 48:return e.prev=48,e.next=51,Ai.getNavigationModule(t.id);case 51:o=e.sent,c=o.data,a.data={navigation_id:c.navigation_id},e.next=58;break;case 56:e.prev=56,e.t5=e.catch(48);case 58:return e.abrupt("break",125);case 59:return e.prev=59,e.next=62,Ii.getCatalogListingModule(t.id);case 62:u=e.sent,c=u.data,a.data={language_code:c.language_code,category_id:c.category_id,category_id_variable_name:c.category_id_variable_name},e.next=69;break;case 67:e.prev=67,e.t6=e.catch(59);case 69:return e.abrupt("break",125);case 70:return e.prev=70,e.next=73,Di.getCatalogItemModule(t.id);case 73:d=e.sent,c=d.data,a.data={language_code:c.language_code,catalog_item_id:c.catalog_item_id},e.next=80;break;case 78:e.prev=78,e.t7=e.catch(70);case 80:return e.abrupt("break",125);case 81:return e.prev=81,e.next=84,Mi.getCatalogDetailModule(t.id);case 84:m=e.sent,c=m.data,a.data={language_code:c.language_code,catalog_item_id:c.catalog_item_id,catalog_item_id_variable_name:c.catalog_item_id_variable_name,load_from_global_context:c.load_from_global_context},e.next=91;break;case 89:e.prev=89,e.t8=e.catch(81);case 91:return e.abrupt("break",125);case 92:return e.prev=92,e.next=95,Pi.getCatalogSearchModule(t.id);case 95:b=e.sent,c=b.data,a.data={search_placeholder:c.search_placeholder,submit_label:c.submit_label},e.next=102;break;case 100:e.prev=100,e.t9=e.catch(92);case 102:return e.abrupt("break",125);case 103:return e.prev=103,e.next=106,Gi.getCatalogCategoryTreeModule(t.id);case 106:p=e.sent,c=p.data,a.data={parent_category_id:c.parent_category_id,display_if_parent_category_id:c.display_if_parent_category_id,language_code:c.language_code,link_pattern:c.link_pattern},e.next=113;break;case 111:e.prev=111,e.t10=e.catch(103);case 113:return e.abrupt("break",125);case 114:return e.prev=114,e.next=117,Ni.getCatalogCategoryModule(t.id);case 117:g=e.sent,c=g.data,a.data={category_id:c.category_id,language_code:c.language_code,category_id_variable_name:c.category_id_variable_name,load_from_global_context:!!c.load_from_global_context},e.next=124;break;case 122:e.prev=122,e.t11=e.catch(114);case 124:return e.abrupt("break",125);case 125:s[t.slot_id]||(s[t.slot_id]=[]),s[t.slot_id].push(a);case 127:case"end":return e.stop()}}),e,null,[[4,12],[15,23],[26,34],[37,45],[48,56],[59,67],[70,78],[81,89],[92,100],[103,111],[114,122]])})));return function(t){return e.apply(this,arguments)}}()));case 8:L(s),l(!1);case 10:case"end":return e.stop()}}),e)})));return function(t,a,n,c){return e.apply(this,arguments)}}(),[]),M=Object(O.useCallback)(function(){var n=Object(Z.a)(Q.a.mark((function n({template_id:c,version:r}){var i,o,s;return Q.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if("detail"!==e||!t){n.next=21;break}return n.prev=1,l(!0),n.next=5,Sl.getTemplate(c,{cancelToken:a.current.token});case 5:return i=n.sent,o=i.data,s=[],o.template_pages.forEach(({id:e})=>{s.push(e)}),D(o.layout_id),R(o.layout_id),G(o.view_id),n.next=14,N(t,r,o.layout_id,s);case 14:E(o),l(!1),n.next=21;break;case 18:n.prev=18,n.t0=n.catch(1),l(!1);case 21:case"end":return n.stop()}}),n,null,[[1,18]])})));return function(e){return n.apply(this,arguments)}}(),[D,R,G,N,t,e]),P=Object(O.useCallback)(Object(Z.a)(Q.a.mark((function n(){var c,r;return Q.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if("detail"!==e||!t){n.next=16;break}return n.prev=1,l(!0),n.next=5,nt.getPage(t,{cancelToken:a.current.token});case 5:return c=n.sent,r=c.data,n.next=9,M(r);case 9:p(r),l(!1),n.next=16;break;case 13:n.prev=13,n.t0=n.catch(1),l(!1);case 16:case"end":return n.stop()}}),n,null,[[1,13]])}))),[M,t,e]);return Object(O.useEffect)(()=>{P()},[P]),Object(O.useEffect)(()=>{const e=a.current;return()=>e.cancel()},[]),{page:b,template:j,layout:_,layoutSlots:s,view:x,modules:S,setModules:L,loading:r,setLoading:l}};function Fi(){const e=Object(r.a)(["\n  padding: 2px 8px 3px;\n  color: ",";\n  font-size: 12px;\n  background: ",";\n"]);return Fi=function(){return e},e}function Yi(){const e=Object(r.a)(["\n  position: absolute;\n  top: 0;\n  right: 0;\n"]);return Yi=function(){return e},e}const Vi=l.c.div(Yi()),Bi=l.c.div(Fi(),k,N),Hi=({name:e})=>j.a.createElement(Vi,null,j.a.createElement(Bi,null,e));function Wi(){const e=Object(r.a)(["\n    opacity: 0.8;\n  "]);return Wi=function(){return e},e}function Ui(){const e=Object(r.a)(["\n    border: 2px dotted ",";\n  "]);return Ui=function(){return e},e}function Qi(){const e=Object(r.a)(["\n  position: relative;\n  min-width: 64px;\n  margin: 12px;\n\n  ","\n\n  cursor: ",";\n\n  :hover {\n    "," {\n      display: grid;\n      grid-gap: 24px;\n      grid-template-columns: max-content max-content;\n    }\n  }\n"]);return Qi=function(){return e},e}function Zi(){const e=Object(r.a)(["\n  position: absolute;\n  bottom: -40px;\n  left: 0;\n  z-index: 200;\n  display: none;\n  min-width: 100%;\n  padding: 6px;\n  background: ",";\n  border: 1px solid ",";\n"]);return Zi=function(){return e},e}const Ji=l.c.div(Zi(),k,w),Xi=l.c.div(Qi(),({locked:e})=>e?Object(l.b)(Wi()):Object(l.b)(Ui(),Object(lt.a)(D,.5)),({locked:e})=>e?"not-allowed":"move",Ji);var Ki=a(348),qi=a.n(Ki);const $i=e=>e(),eo=(e,t)=>e.map(e=>t(e,t)),to=e=>{let t=e.bindings,a=Object(Je.a)(e,["bindings"]);return j.a.createElement(qi.a,Object.assign({bindings:Object(X.a)({},t,{iterator:eo,JSON:JSON,Object:Object,Array:Array,Number:Number,String:String,console:console,block:$i})},a))};function ao(){const e=Object(r.a)(["\n  white-space: nowrap;\n"]);return ao=function(){return e},e}const no=H.a.Group,co=Object(l.c)(no)(ao()),ro=({moduleType:e,hasEdit:t=!0,hasConfiguration:a=!0,onEdit:n,onConfigure:c,onDelete:r,className:l,style:i})=>{const o=Object(g.b)("content-detail").t;return j.a.createElement(Ji,{className:l,style:i},o("module-type-enum.".concat(e.toLowerCase())),j.a.createElement(co,null,t&&j.a.createElement(H.a,{size:"small",onClick:n},"Edit"),a&&j.a.createElement(H.a,{size:"small",onClick:c},"Configuration"),j.a.createElement(H.a,{size:"small",type:"danger",onClick:r},"Delete")))},lo=({value:e="",onChange:t,onFocus:a,onBlur:n,init:c=wc,inline:r=!1})=>j.a.createElement(xc.a,{initialValue:e,onEditorChange:t,onBlur:n,onFocus:a,tinymceScriptSrc:yc,init:c,inline:r});var io=a(668);const oo="new_module",so="module",uo=(e,t,a)=>{const n=e[t].find(e=>e.uuid===a);return{module:n,index:e[t].indexOf(n)}},mo=({slotId:e,uuid:t,onMove:a,locked:n})=>{const c=Object(O.useContext)(du).modules,r=Object(O.useRef)(null),l=Object(xe.a)({accept:so,hover(n,l){if(!r.current)return;const i=uo(c,e,n.uuid).index,o=uo(c,e,t).index;if(n.uuid===t)return;const s=r.current.getBoundingClientRect(),u=(s.bottom-s.top)/2,d=l.getClientOffset().y-s.top;i<o&&d<u||i>o&&d>u||e===n.slotId&&a(e,i,o)}}),i=Object(v.a)(l,2)[1],o=Object(io.a)({item:{type:so,uuid:t,slotId:e,locked:n},canDrag:()=>!n,collect:e=>({isDragging:e.isDragging()})}),s=Object(v.a)(o,2),u=s[0].isDragging;return{drag:s[1],drop:i,isDragging:u,ref:r}},bo=({uuid:e,slotId:t,onUpdate:a})=>{const n=Object(O.useContext)(du),c=n.setModules,r=n.setIsTouched;return{update:Object(O.useCallback)((n,l=!1)=>{c(a=>{const c=l?Object(X.a)({},a):a,r=c[t].find(t=>t.uuid===e),i=c[t].findIndex(t=>t.uuid===e);return r?(c[t][i].isTouched=!0,c[t][i].data=Object(X.a)({},r.data,{},n),c):a}),r(!0),a&&a()},[c,r,a,t,e])}};let po;!function(e){e[e.LEVEL_1=1]="LEVEL_1",e[e.LEVEL_2=2]="LEVEL_2",e[e.LEVEL_3=3]="LEVEL_3",e[e.LEVEL_4=4]="LEVEL_4",e[e.LEVEL_5=5]="LEVEL_5",e[e.LEVEL_6=6]="LEVEL_6"}(po||(po={}));const go=gc.a.Option,fo=ha.a.Item,Oo=({data:e,onConfirm:t,onCancel:a})=>{const n=Object(g.b)("content-detail").t,c=Object(O.useState)(e),r=Object(v.a)(c,2),l=r[0],i=r[1],o=Object(O.useCallback)(()=>{t(l)},[t,l]),s=Object(O.useCallback)(e=>{i(t=>Object(X.a)({},t,{level:e}))},[]);return j.a.createElement(Wl.a,{visible:!0,width:600,onOk:o,onCancel:a,title:n("heading-configuration.title")},j.a.createElement(ha.a,{layout:"vertical"},j.a.createElement(fo,{label:n("heading-configuration.level")},j.a.createElement(gc.a,{defaultValue:l.level,onChange:s},Object.values((e=>Object.keys(e).reduce((t,a)=>Object.defineProperty(t,a,{value:e[a],enumerable:!isFinite(+a)}),{}))(po)).map(e=>j.a.createElement(go,{value:e,kex:e},e))))))},jo=()=>{const e=Object(le.c)(e=>e.templates).previews;return{getTemplatePreview:Object(O.useCallback)((t,a)=>{if(e[t]&&e[t][a])return e[t][a]},[e])}},Eo=({isNew:e,uuid:t,moduleId:a,slotId:n})=>{const c=Object(O.useContext)(du),r=c.setModules,l=c.setDeletedModules;return Object(O.useCallback)(()=>{!e&&a&&l(e=>(e.push(a),e)),r(e=>Object(X.a)({},e,{[n]:e[n].filter(e=>e.uuid!==t)}))},[r,l,e,n,t,a])},vo={menubar:!1,forced_root_block:!1,valid_elements:"strong,em,span[style],a[href]",toolbar:"undo redo\n   | bold italic backcolor | alignleft aligncenter \n   alignright alignjustify",plugins:["link"]},ho=({uuid:e,moduleType:t,isNew:a,moduleId:n,data:{content:c,level:r},onMove:l,slotId:i,locked:o})=>{const s=Object(O.useContext)(du).view,u=Object(O.useState)(!1),d=Object(v.a)(u,2),m=d[0],b=d[1],p=jo().getTemplatePreview,g=mo({uuid:e,slotId:i,onMove:l,locked:o}),f=g.drag,E=g.drop,h=g.isDragging,k=g.ref,x=bo({uuid:e,slotId:i}).update,y=Eo({isNew:a,slotId:i,uuid:e,moduleId:n}),w=s&&p(s.path,Ci.HEADING),C=Object(O.useCallback)((e,t=!1)=>{x({content:e},t)},[x]),_=Object(O.useCallback)(({level:e})=>{x({level:e},!0),b(!1)},[x]);if(w){const e=w.template,a="h".concat(r),n=h?0:1;return f(E(k)),j.a.createElement(j.a.Fragment,null,j.a.createElement("div",{ref:k,style:{opacity:n}},j.a.createElement(Xi,{locked:o},!o&&j.a.createElement(ro,{moduleType:t,hasEdit:!1,onConfigure:()=>b(!0),onDelete:y}),c&&j.a.createElement(to,{jsx:e,components:{Level:a},bindings:{content:j.a.createElement(lo,{init:vo,value:c,onBlur:(e,t)=>{C(t.save(),!0)},onChange:e=>C(e,!1),inline:!0}),level:r},renderInWrapper:!1}))),m&&j.a.createElement(Oo,{data:{level:r},onConfirm:_,onCancel:()=>b(!1)}))}return null},ko={menubar:!1,forced_root_block:!1,toolbar:"undo redo | formatselect | image \n   | bold italic backcolor | alignleft aligncenter \n   alignright alignjustify | bullist numlist outdent indent | removeformat ",plugins:["image imagetools","lists link","searchreplace visualblocks code fullscreen","insertdatetime media table paste code help wordcount"]},xo=({uuid:e,isNew:t,moduleId:a,moduleType:n,data:{content:c=""},onMove:r,slotId:l,locked:i})=>{const o=Object(O.useContext)(du).view,s=jo().getTemplatePreview,u=mo({uuid:e,slotId:l,onMove:r,locked:i}),d=u.drag,m=u.drop,b=u.isDragging,p=u.ref,g=bo({uuid:e,slotId:l}).update,f=Eo({isNew:t,slotId:l,uuid:e,moduleId:a}),E=o&&s(o.path,Ci.TEXT),v=Object(O.useCallback)((e,t=!1)=>{g({content:e},t)},[g]);if(E){const e=E.template,t=b?0:1;return d(m(p)),j.a.createElement(j.a.Fragment,null,j.a.createElement("div",{ref:p,style:{opacity:t}},j.a.createElement(Xi,{locked:i},!i&&j.a.createElement(ro,{moduleType:n,hasEdit:!1,hasConfiguration:!1,onDelete:f}),j.a.createElement(to,{jsx:e,bindings:{content:j.a.createElement(lo,{init:ko,value:c,onBlur:(e,t)=>{v(t.save(),!0)},onChange:e=>v(e,!1),inline:!0})},renderInWrapper:!1}))))}return null};class yo{static getButtons(e,t,a){return q()(Object(X.a)({},a,{method:"GET",url:"/buttons",params:{page:e,per_page:t}}))}static getAllButtons(e){return q()(Object(X.a)({},e,{method:"GET",url:"/buttons/all"}))}static getButton(e,t){return q()(Object(X.a)({},t,{method:"GET",url:"/buttons/".concat(e)}))}static createButton(e,t){return q()(Object(X.a)({},t,{method:"POST",url:"/buttons",data:e}))}static updateButton(e,t,a){return q()(Object(X.a)({},a,{method:"PUT",url:"/buttons/".concat(e),data:t}))}static deleteButton(e,t){return q()(Object(X.a)({},t,{method:"DELETE",url:"/buttons/".concat(e)}))}}let wo;!function(e){e.BLANK="BLANK",e.SELF="SELF",e.TOP="TOP",e.PARENT="PARENT"}(wo||(wo={}));const Co=gc.a.Option,_o=ha.a.Item,To=({data:e,onConfirm:t,onCancel:a})=>{const n=Object(g.b)("content-detail").t,c=Object(O.useState)(e),r=Object(v.a)(c,2),l=r[0],i=r[1],o=Object(O.useState)([]),s=Object(v.a)(o,2),u=s[0],d=s[1],m=Object(O.useCallback)(function(){var e=Object(Z.a)(Q.a.mark((function e(t){var a,n;return Q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,yo.getAllButtons({cancelToken:t});case 2:a=e.sent,n=a.data,d(n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[]),b=Object(O.useCallback)(()=>{t(l)},[t,l]),p=Object(O.useCallback)(e=>{e.persist(),i(t=>Object(X.a)({},t,{text:e.target.value}))},[]),f=Object(O.useCallback)(e=>{e.persist(),i(t=>Object(X.a)({},t,{path:e.target.value}))},[]),E=Object(O.useCallback)(e=>{i(t=>Object(X.a)({},t,{target:e}))},[]),h=Object(O.useCallback)(e=>{i(t=>Object(X.a)({},t,{button_id:e}))},[]);return Object(O.useEffect)(()=>{const e=q.a.CancelToken.source();return m(e.token),()=>e.cancel()},[m]),j.a.createElement(Wl.a,{visible:!0,width:600,onOk:b,onCancel:a,title:n("button-configuration.title")},j.a.createElement(ha.a,{layout:"vertical"},j.a.createElement(_o,{label:n("button-configuration.text")},j.a.createElement(fc.a,{defaultValue:l.text,onChange:p})),j.a.createElement(_o,{label:n("button-configuration.path")},j.a.createElement(fc.a,{defaultValue:l.path,onChange:f})),j.a.createElement(_o,{label:n("button-configuration.button-id")},j.a.createElement(gc.a,{defaultValue:l.target,onChange:E},Object.values(wo).map(e=>j.a.createElement(Co,{value:e},e)))),j.a.createElement(_o,{label:n("button-configuration.button-id")},j.a.createElement(gc.a,{defaultValue:l.button_id,onChange:h},u.map(({id:e,name:t})=>j.a.createElement(Co,{value:e},t))))))},Io=({uuid:e,isNew:t,moduleId:a,moduleType:n,data:{text:c,path:r,target:l,button_id:i},onMove:o,slotId:s,locked:u})=>{const d=Object(g.b)("content-detial").t,m=Object(O.useContext)(du).view,b=Object(O.useState)(),p=Object(v.a)(b,2),f=p[0],E=p[1],h=Object(O.useState)(!1),k=Object(v.a)(h,2),x=k[0],y=k[1],w=jo().getTemplatePreview,C=mo({uuid:e,slotId:s,onMove:o,locked:u}),_=C.drag,T=C.drop,I=C.isDragging,A=C.ref,S=bo({uuid:e,slotId:s}).update,L=Eo({isNew:t,slotId:s,uuid:e,moduleId:a}),R=m&&w(m.path,Ci.BUTTON),D=Object(O.useCallback)(({text:e,path:t,target:a,button_id:n})=>{S({text:e,path:t,target:a,button_id:n},!0),y(!1)},[S]),G=Object(O.useCallback)(function(){var e=Object(Z.a)(Q.a.mark((function e(t){var a,n;return Q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!i){e.next=6;break}return e.next=3,yo.getButton(i,{cancelToken:t});case 3:a=e.sent,n=a.data,E(n);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[i]);if(Object(O.useEffect)(()=>{const e=q.a.CancelToken.source();return G(e.token),()=>e.cancel()},[G]),R){const e=R.template,t=I?0:1;return _(T(A)),j.a.createElement(j.a.Fragment,null,j.a.createElement("div",{ref:A,style:{opacity:t}},j.a.createElement(Xi,{locked:u},!u&&j.a.createElement(ro,{moduleType:n,hasEdit:!1,onConfigure:()=>y(!0),onDelete:L}),f?j.a.createElement(to,{jsx:e,bindings:{button:f,text:c,path:r,target:l},renderInWrapper:!1}):j.a.createElement(on.a,{message:d("this-module-needs-to-be-configured-first"),type:"info"}))),x&&j.a.createElement(To,{data:{text:c,path:r,target:l,button_id:i},onConfirm:D,onCancel:()=>y(!1)}))}return null},Ao=({data:e})=>{const t=jo().getTemplatePreview;return j.a.createElement(j.a.Fragment,null,e.map(e=>{const a=e.id,n=e.data,c=n.view_path,r=n.template_path,l=n.template_name,i="".concat(c,"/").concat(r),o=t(i,l);if(o){const t=o.template;return j.a.createElement(to,{key:a,jsx:t,bindings:{data:e},components:{List:Ao},renderInWrapper:!1,onError:e=>console.log(e)})}return null}))},So=gc.a.Option,Lo=ha.a.Item,Ro=({data:e,onConfirm:t,onCancel:a})=>{const n=Object(g.b)("content-detail").t,c=Object(O.useState)(e),r=Object(v.a)(c,2),l=r[0],i=r[1],o=Object(O.useState)([]),s=Object(v.a)(o,2),u=s[0],d=s[1],m=Object(O.useState)(),b=Object(v.a)(m,2),p=b[0],f=b[1],E=Object(O.useCallback)(function(){var e=Object(Z.a)(Q.a.mark((function e(t){var a,n;return Q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,yn.getAllCatalogLanguages({cancelToken:t});case 2:a=e.sent,n=a.data,d(n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[]),h=Object(O.useCallback)(function(){var e=Object(Z.a)(Q.a.mark((function e(t){var a,c;return Q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ba.getCatalogCategories(void 0,void 0,void 0,void 0,{cancelToken:t});case 2:a=e.sent,c=a.data,f(fa(c,n));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[n]),k=Object(O.useCallback)(e=>{i(t=>Object(X.a)({},t,{language_code:""===e?null:e}))},[]),x=Object(O.useCallback)(e=>{i(t=>Object(X.a)({},t,{category_id:0===Number(e)?null:e}))},[]),y=Object(O.useCallback)(({target:{value:e}})=>{i(t=>Object(X.a)({},t,{category_id_variable_name:""===e?null:e}))},[]),w=Object(O.useCallback)(()=>{t(l)},[t,l]);return Object(O.useEffect)(()=>{const e=q.a.CancelToken.source();return E(e.token),h(e.token),()=>e.cancel()},[E,h]),j.a.createElement(Wl.a,{visible:!0,width:600,onOk:w,onCancel:a,title:n("catalog-listing-configuration.title")},j.a.createElement(ha.a,{layout:"vertical"},j.a.createElement(Lo,{label:n("catalog-listing-configuration.language")},j.a.createElement(gc.a,{onChange:k,defaultValue:e.language_code,allowClear:!0},u.map(({code:e,name:t})=>j.a.createElement(So,{key:e,value:e},t)))),j.a.createElement(Lo,{label:n("catalog-listing-configuration.category-id")},p?j.a.createElement(Ea.a,{style:{width:"100%"},onChange:x,defaultValue:e.category_id,defaultActiveFirstOption:!0,allowClear:!0,dropdownStyle:{maxHeight:400,overflow:"auto"},treeData:p,placeholder:"Please select",treeDefaultExpandAll:!0}):j.a.createElement(fc.a,{disabled:!0})),j.a.createElement(Lo,{label:n("catalog-listing-configuration.category-id-variable-name")},j.a.createElement(fc.a,{onChange:y,defaultValue:e.category_id_variable_name}))))},Do=({uuid:e,isNew:t,moduleId:a,moduleType:n,data:{language_code:c,category_id:r,category_id_variable_name:l},onMove:i,slotId:o,locked:s})=>{const u=Object(O.useContext)(du).view,d=Object(O.useState)(!1),m=Object(v.a)(d,2),b=m[0],p=m[1],g=Object(O.useState)(),f=Object(v.a)(g,2),E=f[0],h=f[1],k=jo().getTemplatePreview,x=mo({uuid:e,slotId:o,onMove:i,locked:s}),y=x.drag,w=x.drop,C=x.isDragging,_=x.ref,T=bo({uuid:e,slotId:o}).update,I=Eo({isNew:t,slotId:o,uuid:e,moduleId:a}),A=u&&k(u.path,Ci.CATALOG_LISTING),S=Object(O.useCallback)(({category_id:e,language_code:t,category_id_variable_name:a})=>{T({category_id:e,language_code:t,category_id_variable_name:a},!0),p(!1)},[T]),L=Object(O.useCallback)(function(){var e=Object(Z.a)(Q.a.mark((function e(t){var a,n;return Q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,la.getPublicCatalogItems(void 0,void 0,c,r,{cancelToken:t});case 2:a=e.sent,n=a.data,h(n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[c,r]);if(Object(O.useEffect)(()=>{const e=q.a.CancelToken.source();return L(e.token),()=>e.cancel()},[L]),A){const e=A.template,t=C?0:1;return y(w(_)),j.a.createElement(j.a.Fragment,null,j.a.createElement("div",{ref:_,style:{opacity:t}},j.a.createElement(Xi,{locked:s},!s&&j.a.createElement(ro,{moduleType:n,hasEdit:!1,hasConfiguration:!0,onConfigure:()=>p(!0),onDelete:I}),!!E&&j.a.createElement(to,{jsx:e,bindings:{data:E},components:{List:Ao},renderInWrapper:!1,onError:e=>console.log(e)}))),b&&j.a.createElement(Ro,{data:{language_code:c,category_id:r,category_id_variable_name:l},onConfirm:S,onCancel:()=>p(!1)}))}return null},Go=gc.a.Option,No=ha.a.Item,Mo=({data:e,onConfirm:t,onCancel:a})=>{const n=Object(g.b)("content-detail").t,c=Object(O.useState)(e),r=Object(v.a)(c,2),l=r[0],i=r[1],o=Object(O.useState)([]),s=Object(v.a)(o,2),u=s[0],d=s[1],m=Object(O.useCallback)(function(){var e=Object(Z.a)(Q.a.mark((function e(t){var a,n;return Q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,yn.getAllCatalogLanguages({cancelToken:t});case 2:a=e.sent,n=a.data,d(n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[]),b=Object(O.useCallback)(()=>{t(l)},[t,l]),p=Object(O.useCallback)(e=>{e.persist(),i(t=>Object(X.a)({},t,{catalog_item_id:Number(e.target.value)}))},[]),f=Object(O.useCallback)(e=>{i(t=>Object(X.a)({},t,{language_code:""===e?null:e}))},[]);return Object(O.useEffect)(()=>{const e=q.a.CancelToken.source();return m(e.token),()=>e.cancel()},[m]),j.a.createElement(Wl.a,{visible:!0,width:600,onOk:b,onCancel:a,title:n("catalog-item-configuration.title")},j.a.createElement(ha.a,{layout:"vertical"},j.a.createElement(No,{label:n("catalog-item-configuration.catalog-item-id")},j.a.createElement(fc.a,{type:"number",defaultValue:l.catalog_item_id,onChange:p})),j.a.createElement(No,{label:n("catalog-item-configuration.language-code")},j.a.createElement(gc.a,{onChange:f,defaultValue:e.language_code,allowClear:!0},u.map(({code:e,name:t})=>j.a.createElement(Go,{key:e,value:e},t))))))},Po=({uuid:e,isNew:t,moduleId:a,moduleType:n,data:{catalog_item_id:c,language_code:r},onMove:l,slotId:i,locked:o})=>{const s=Object(g.b)("content-detail").t,u=Object(O.useContext)(du).view,d=Object(O.useState)(),m=Object(v.a)(d,2),b=m[0],p=m[1],f=Object(O.useState)(!1),E=Object(v.a)(f,2),h=E[0],k=E[1],x=jo().getTemplatePreview,y=mo({uuid:e,slotId:i,onMove:l,locked:o}),w=y.drag,C=y.drop,_=y.isDragging,T=y.ref,I=bo({uuid:e,slotId:i}).update,A=Eo({isNew:t,slotId:i,uuid:e,moduleId:a}),S=Object(O.useState)(),L=Object(v.a)(S,2),R=L[0],D=L[1],G=Object(O.useCallback)(({catalog_item_id:e,language_code:t})=>{I({catalog_item_id:e,language_code:t},!0),k(!1)},[I]),N=Object(O.useCallback)(function(){var e=Object(Z.a)(Q.a.mark((function e(t){var a,n;return Q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!c){e.next=16;break}return e.prev=1,e.next=4,la.getPublicCatalogItem(c,r,!0,{cancelToken:t});case 4:a=e.sent,n=a.data,p(n),D(x(u.path,n.data.template_path)),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(1),p(void 0),D(void 0);case 14:e.next=18;break;case 16:p(void 0),D(void 0);case 18:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(t){return e.apply(this,arguments)}}(),[c,u,x,r]);Object(O.useEffect)(()=>{const e=q.a.CancelToken.source();return N(e.token),()=>e.cancel()},[N]);const M=_?0:1;return w(C(T)),j.a.createElement(j.a.Fragment,null,j.a.createElement("div",{ref:T,style:{opacity:M}},j.a.createElement(Xi,{locked:o},!o&&j.a.createElement(ro,{moduleType:n,hasEdit:!1,onConfigure:()=>k(!0),onDelete:A}),R&&b?j.a.createElement(to,{jsx:R.template,bindings:{data:b},renderInWrapper:!1}):j.a.createElement(on.a,{message:s("this-module-needs-to-be-configured-first"),type:"info"}))),h&&j.a.createElement(Mo,{data:{catalog_item_id:c,language_code:r},onConfirm:G,onCancel:()=>k(!1)}))};var zo=a(640);const Fo=gc.a.Option,Yo=ha.a.Item,Vo=({data:e,onConfirm:t,onCancel:a})=>{const n=Object(g.b)("content-detail").t,c=Object(O.useState)(e),r=Object(v.a)(c,2),l=r[0],i=r[1],o=Object(O.useState)(),s=Object(v.a)(o,2),u=s[0],d=s[1],m=Object(O.useState)(!1),b=Object(v.a)(m,2)[1],p=Object(O.useCallback)(function(){var e=Object(Z.a)(Q.a.mark((function e(t){var a,n;return Q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,b(!0),e.next=4,yn.getAllCatalogLanguages({cancelToken:t});case 4:a=e.sent,n=a.data,d(n),b(!1),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),b(!1);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t){return e.apply(this,arguments)}}(),[]),f=Object(O.useCallback)(()=>{t(l)},[t,l]),E=Object(O.useCallback)(({target:{value:e}})=>{i(t=>Object(X.a)({},t,{catalog_item_id:""===e?null:Number(e)}))},[]),h=Object(O.useCallback)(e=>{i(t=>Object(X.a)({},t,{language_code:e}))},[]),k=Object(O.useCallback)(({target:{value:e}})=>{i(t=>Object(X.a)({},t,{catalog_item_id_variable_name:""===e?null:e}))},[]),x=Object(O.useCallback)(e=>{i(t=>Object(X.a)({},t,{load_from_global_context:e}))},[]);return Object(O.useEffect)(()=>{const e=q.a.CancelToken.source();return p(e.token),()=>e.cancel()},[p]),j.a.createElement(Wl.a,{visible:!0,width:600,onOk:f,onCancel:a,title:n("catalog-detail-configuration.title")},j.a.createElement(ha.a,{layout:"vertical"},j.a.createElement(Yo,{label:n("catalog-detail-configuration.catalog-item-id")},j.a.createElement(fc.a,{allowClear:!0,type:"number",value:l.catalog_item_id,onChange:E})),j.a.createElement(Yo,{label:n("catalog-detail-configuration.language-code")},j.a.createElement(gc.a,{defaultValue:l.language_code,onChange:h,allowClear:!0},u&&u.map(({code:e,name:t})=>j.a.createElement(Fo,{value:e},t)))),j.a.createElement(Yo,{label:n("catalog-detail-configuration.catalog-item-id-variable-name")},j.a.createElement(fc.a,{onChange:k,defaultValue:e.catalog_item_id_variable_name})),j.a.createElement(Yo,{label:n("catalog-detail-configuration.load-from-global-context")},j.a.createElement(zo.a,{onChange:x,checked:l.load_from_global_context,defaultChecked:e.load_from_global_context}))))},Bo=({uuid:e,isNew:t,moduleId:a,moduleType:n,data:{catalog_item_id:c,language_code:r,catalog_item_id_variable_name:l,load_from_global_context:i},onMove:o,slotId:s,locked:u})=>{const d=Object(g.b)("content-detail").t,m=Object(O.useContext)(du).view,b=Object(O.useState)(),p=Object(v.a)(b,2),f=p[0],E=p[1],h=Object(O.useState)(!1),k=Object(v.a)(h,2),x=k[0],y=k[1],w=jo().getTemplatePreview,C=mo({uuid:e,slotId:s,onMove:o,locked:u}),_=C.drag,T=C.drop,I=C.isDragging,A=C.ref,S=bo({uuid:e,slotId:s}).update,L=Eo({isNew:t,slotId:s,uuid:e,moduleId:a}),R=Object(O.useState)(),D=Object(v.a)(R,2),G=D[0],N=D[1],M=Object(O.useCallback)(({catalog_item_id:e,language_code:t,catalog_item_id_variable_name:a,load_from_global_context:n})=>{S({catalog_item_id:e,language_code:t,catalog_item_id_variable_name:a,load_from_global_context:n},!0),y(!1)},[S]),P=Object(O.useCallback)(function(){var e=Object(Z.a)(Q.a.mark((function e(t){var a,n;return Q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!c){e.next=16;break}return e.prev=1,e.next=4,la.getPublicCatalogItem(c,r||null,!1,{cancelToken:t});case 4:a=e.sent,n=a.data,E(n),N(w(m.path,n.data.template_path)),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(1),E(void 0),N(void 0);case 14:e.next=18;break;case 16:E(void 0),N(void 0);case 18:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(t){return e.apply(this,arguments)}}(),[c,r,w,m.path]);Object(O.useEffect)(()=>{const e=q.a.CancelToken.source();return P(e.token),()=>e.cancel()},[P]);const z=I?0:1;return _(T(A)),j.a.createElement(j.a.Fragment,null,j.a.createElement("div",{ref:A,style:{opacity:z}},j.a.createElement(Xi,{locked:u},!u&&j.a.createElement(ro,{moduleType:n,hasEdit:!1,onConfigure:()=>y(!0),onDelete:L}),G?j.a.createElement(to,{jsx:G.template,bindings:{data:f,language_code:r,catalog_item_id_variable_name:l,load_from_global_context:i},renderInWrapper:!1}):j.a.createElement(on.a,{message:d("this-module-needs-to-be-configured-first"),type:"info"}))),x&&j.a.createElement(Vo,{data:{catalog_item_id:c,language_code:r,catalog_item_id_variable_name:l,load_from_global_context:i},onConfirm:M,onCancel:()=>y(!1)}))},Ho=ha.a.Item,Wo=({data:e,onConfirm:t,onCancel:a})=>{const n=Object(g.b)("content-detail").t,c=Object(O.useState)(e),r=Object(v.a)(c,2),l=r[0],i=r[1],o=Object(O.useCallback)(()=>{t(l)},[t,l]),s=Object(O.useCallback)(({target:{value:e}})=>{i(t=>Object(X.a)({},t,{search_placeholder:e}))},[]),u=Object(O.useCallback)(({target:{value:e}})=>{i(t=>Object(X.a)({},t,{submit_label:e}))},[]);return j.a.createElement(Wl.a,{visible:!0,width:600,onOk:o,onCancel:a,title:n("catalog-search-configuration.title")},j.a.createElement(ha.a,{layout:"vertical"},j.a.createElement(Ho,{label:n("catalog-search-configuration.search-placeholder")},j.a.createElement(fc.a,{defaultValue:l.search_placeholder,onChange:s})),j.a.createElement(Ho,{label:n("catalog-search-configuration.submit-label")},j.a.createElement(fc.a,{defaultValue:l.submit_label,onChange:u}))))},Uo=({uuid:e,moduleType:t,isNew:a,moduleId:n,data:{search_placeholder:c,submit_label:r},onMove:l,slotId:i,locked:o})=>{const s=Object(O.useContext)(du).view,u=Object(O.useState)(!1),d=Object(v.a)(u,2),m=d[0],b=d[1],p=jo().getTemplatePreview,g=mo({uuid:e,slotId:i,onMove:l,locked:o}),f=g.drag,E=g.drop,h=g.isDragging,k=g.ref,x=bo({uuid:e,slotId:i}).update,y=Eo({isNew:a,slotId:i,uuid:e,moduleId:n}),w=s&&p(s.path,Ci.CATALOG_SEARCH),C=Object(O.useCallback)(({search_placeholder:e,submit_label:t})=>{x({search_placeholder:e,submit_label:t},!0),b(!1)},[x]);if(w){const e=h?0:1;return f(E(k)),j.a.createElement(j.a.Fragment,null,j.a.createElement("div",{ref:k,style:{opacity:e}},j.a.createElement(Xi,{locked:o},!o&&j.a.createElement(ro,{moduleType:t,hasEdit:!1,onConfigure:()=>b(!0),onDelete:y}),j.a.createElement(to,{jsx:w.template,bindings:{search_placeholder:c,submit_label:r},renderInWrapper:!1}))),m&&j.a.createElement(Wo,{data:{search_placeholder:c,submit_label:r},onConfirm:C,onCancel:()=>b(!1)}))}return null};class Qo{static getNavigations(e,t,a){return q()(Object(X.a)({},a,{method:"GET",url:"/navigations",params:{page:e,per_page:t}}))}static getAllNavigations(e){return q()(Object(X.a)({},e,{method:"GET",url:"/navigations/all"}))}static getNavigation(e,t){return q()(Object(X.a)({},t,{method:"GET",url:"/navigations/".concat(e)}))}static createNavigation(e,t){return q()(Object(X.a)({},t,{method:"POST",url:"/navigations",data:e}))}static updateNavigation(e,t,a){return q()(Object(X.a)({},a,{method:"PUT",url:"/navigations/".concat(e),data:t}))}static deleteNavigation(e,t){return q()(Object(X.a)({},t,{method:"DELETE",url:"/navigations/".concat(e)}))}}const Zo=gc.a.Option,Jo=ha.a.Item,Xo=({data:e,onConfirm:t,onCancel:a})=>{const n=Object(g.b)("content-detail").t,c=Object(O.useState)(e),r=Object(v.a)(c,2),l=r[0],i=r[1],o=Object(O.useState)([]),s=Object(v.a)(o,2),u=s[0],d=s[1],m=Object(O.useCallback)(function(){var e=Object(Z.a)(Q.a.mark((function e(t){var a,n;return Q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Qo.getAllNavigations({cancelToken:t});case 2:a=e.sent,n=a.data,d(n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[]),b=Object(O.useCallback)(()=>{t(l)},[t,l]),p=Object(O.useCallback)(e=>{i(t=>Object(X.a)({},t,{navigation_id:e}))},[]);return Object(O.useEffect)(()=>{const e=q.a.CancelToken.source();return m(e.token),()=>e.cancel()},[m]),j.a.createElement(Wl.a,{visible:!0,width:600,onOk:b,onCancel:a,title:n("navigation-configuration.title")},j.a.createElement(ha.a,{layout:"vertical"},j.a.createElement(Jo,{label:n("navigation-configuration.navigation")},j.a.createElement(gc.a,{defaultValue:l.navigation_id,onChange:p},u.map(({id:e,name:t})=>j.a.createElement(Zo,{value:e},t))))))},Ko=({uuid:e,isNew:t,moduleId:a,moduleType:n,data:{navigation_id:c},onMove:r,slotId:l,locked:i})=>{const o=Object(g.b)("content-detail").t,s=Object(O.useContext)(du).view,u=Object(O.useState)(),d=Object(v.a)(u,2),m=d[0],b=d[1],p=Object(O.useState)(!1),f=Object(v.a)(p,2),E=f[0],h=f[1],k=jo().getTemplatePreview,x=mo({uuid:e,slotId:l,locked:i,onMove:r}),y=x.drag,w=x.drop,C=x.isDragging,_=x.ref,T=bo({uuid:e,slotId:l}).update,I=Eo({isNew:t,slotId:l,uuid:e,moduleId:a}),A=m?s&&k("".concat(s.path,"/").concat(m.path),Ci.NAVIGATION):{template:""},S=Object(O.useCallback)(({navigation_id:e})=>{T({navigation_id:e},!0),h(!1)},[T]),L=Object(O.useCallback)(function(){var e=Object(Z.a)(Q.a.mark((function e(t){var a,n;return Q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!c){e.next=6;break}return e.next=3,Qo.getNavigation(c,{cancelToken:t});case 3:a=e.sent,n=a.data,b(n);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[c]);if(Object(O.useEffect)(()=>{const e=q.a.CancelToken.source();return L(e.token),()=>e.cancel()},[L]),A){const e=A.template,t=C?0:1;return y(w(_)),j.a.createElement(j.a.Fragment,null,j.a.createElement("div",{ref:_,style:{opacity:t}},j.a.createElement(Xi,{locked:i},!i&&j.a.createElement(ro,{moduleType:n,hasEdit:!1,onConfigure:()=>h(!0),onDelete:I}),m?j.a.createElement(to,{jsx:e,bindings:{items:m.items},renderInWrapper:!1}):j.a.createElement(on.a,{message:o("this-module-needs-to-be-configured-first"),type:"info"}))),E&&j.a.createElement(Xo,{data:{navigation_id:c},onConfirm:S,onCancel:()=>h(!1)}))}return null};function qo(){const e=Object(r.a)(["\n  display: flex;\n  flex-direction: row;\n  justify-content: flex-end;\n  width: 240px;\n  height: 240px;\n  margin-top: 24px;\n  padding: 12px;\n  overflow: hidden;\n  background-repeat: no-repeat;\n  background-position: 50% 50%;\n  background-size: cover;\n  border: 1px solid ",";\n  border-radius: 2px;\n"]);return qo=function(){return e},e}const $o=window._envConfig.CMS_STATIC_URL+"/images/",es=l.c.div(qo(),w),ts=Tc.a.Dragger,as=ha.a.Item,ns=({data:e,onConfirm:t,onCancel:a})=>{const n=Object(g.b)("content-detail").t,c=Object(O.useState)(e),r=Object(v.a)(c,2),l=r[0],i=r[1],o=Object(O.useState)(),s=Object(v.a)(o,2),u=s[0],d=s[1],m=Object(O.useCallback)(()=>{t(l)},[t,l]),b=Object(O.useCallback)(e=>{e.persist(),i(t=>Object(X.a)({},t,{image_alt:e.target.value}))},[]),p=Object(O.useCallback)(function(){var e=Object(Z.a)(Q.a.mark((function e(t){return Q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=6;break}return e.t0=d,e.next=4,Jc(t.originFileObj);case 4:e.t1=e.sent,(0,e.t0)(e.t1);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[]),f=Object(O.useCallback)(function(){var e=Object(Z.a)(Q.a.mark((function e({fileList:t,file:{uid:a}}){var n;return Q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t.find(e=>e.uid===a),p(n),i(e=>Object(X.a)({},e,{image:n}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[p]);Object(O.useEffect)(()=>{e.image&&p(e.image)},[e,p]);const E=u||""!==e.file_name;return j.a.createElement(Wl.a,{visible:!0,width:600,onOk:m,onCancel:a,title:n("image-configuration.title")},j.a.createElement(ha.a,{layout:"vertical"},j.a.createElement(as,{label:n("image-configuration.image")},j.a.createElement(ts,{multiple:!1,beforeUpload:()=>!1,showUploadList:!1,accept:"image/*",onChange:f},j.a.createElement(Ke,{icon:"cloud-upload-alt",size:"2x"}),j.a.createElement("p",null,n("image-configuration.image-upload"))),E&&j.a.createElement(es,{style:{backgroundImage:"url(".concat(u||$o+e.file_name,")")}})),j.a.createElement(as,{label:n("image-configuration.image-title")},j.a.createElement(fc.a,{onChange:b,defaultValue:e.image_alt}))))},cs=window._envConfig.CMS_STATIC_URL+"/images/",rs=({uuid:e,moduleType:t,isNew:a,moduleId:n,data:{file_name:c,image:r,image_alt:l},onMove:i,slotId:o,locked:s})=>{const u=Object(g.b)("content-detail").t,d=Object(O.useContext)(du),m=d.view,b=d.setFiles,p=Object(O.useState)(!1),f=Object(v.a)(p,2),E=f[0],h=f[1],k=jo().getTemplatePreview,x=mo({uuid:e,slotId:o,onMove:i,locked:s}),y=x.drag,w=x.drop,C=x.isDragging,_=x.ref,T=bo({uuid:e,slotId:o}).update,I=Eo({isNew:a,slotId:o,uuid:e,moduleId:n}),A=Object(O.useState)(),S=Object(v.a)(A,2),L=S[0],R=S[1],D=m&&k(m.path,Ci.IMAGE),G=Object(O.useCallback)(({file_name:e,image:t,image_alt:a})=>{T({file_name:e,image:t,image_alt:a},!0),h(!1)},[T]),N=Object(O.useCallback)(Object(Z.a)(Q.a.mark((function t(){return Q.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!r){t.next=7;break}return t.t0=R,t.next=4,Jc(r.originFileObj);case 4:t.t1=t.sent,(0,t.t0)(t.t1),b(t=>Object(X.a)({},t,{[e]:[r]}));case 7:case"end":return t.stop()}}),t)}))),[r,e,b]);if(Object(O.useEffect)(()=>{N()},[N]),D){console.log(L);const e=D.template,a=L||c,n=L||cs+c,i=C?0:1;return y(w(_)),j.a.createElement(j.a.Fragment,null,j.a.createElement("div",{ref:_,style:{opacity:i}},j.a.createElement(Xi,{locked:s},!s&&j.a.createElement(ro,{moduleType:t,hasEdit:!1,onConfigure:()=>h(!0),onDelete:I}),a?j.a.createElement(to,{jsx:e,bindings:{file_name:n,image_alt:l},renderInWrapper:!1}):j.a.createElement(on.a,{message:u("this-module-needs-to-be-configured-first"),type:"info"}))),E&&j.a.createElement(ns,{data:{file_name:c,image:r,image_alt:l},onConfirm:G,onCancel:()=>h(!1)}))}return null},ls=gc.a.Option,is=ha.a.Item,os=({data:e,onConfirm:t,onCancel:a})=>{const n=Object(g.b)("content-detail").t,c=Object(O.useState)(e),r=Object(v.a)(c,2),l=r[0],i=r[1],o=Object(O.useState)(),s=Object(v.a)(o,2),u=s[0],d=s[1],m=Object(O.useState)(),b=Object(v.a)(m,2),p=b[0],f=b[1],E=Object(O.useState)(!1),h=Object(v.a)(E,2),k=h[0],x=h[1],y=Object(O.useCallback)(function(){var e=Object(Z.a)(Q.a.mark((function e(t){var a,c;return Q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,x(!0),e.next=4,ba.getCatalogCategories(void 0,void 0,void 0,void 0,{cancelToken:t});case 4:a=e.sent,c=a.data,f(fa(c,n,!1)),x(!1),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),x(!1);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t){return e.apply(this,arguments)}}(),[n]),w=Object(O.useCallback)(function(){var e=Object(Z.a)(Q.a.mark((function e(t){var a,n;return Q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,x(!0),e.next=4,yn.getAllCatalogLanguages({cancelToken:t});case 4:a=e.sent,n=a.data,d(n),x(!1),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),x(!1);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t){return e.apply(this,arguments)}}(),[]),C=Object(O.useCallback)(()=>{t(l)},[t,l]),_=Object(O.useCallback)(e=>{i(t=>Object(X.a)({},t,{parent_category_id:e}))},[]),T=Object(O.useCallback)(e=>{i(t=>Object(X.a)({},t,{display_if_parent_category_id:e}))},[]),I=Object(O.useCallback)(e=>{i(t=>Object(X.a)({},t,{language_code:e}))},[]),A=Object(O.useCallback)(e=>{e.persist(),i(t=>Object(X.a)({},t,{link_pattern:e.target.value}))},[]);return Object(O.useEffect)(()=>{const e=q.a.CancelToken.source();return w(e.token),y(e.token),()=>e.cancel()},[w,y]),j.a.createElement(Wl.a,{visible:!0,width:600,onOk:C,onCancel:a,title:n("catalog-category-tree-configuration.title")},j.a.createElement(ha.a,{layout:"vertical"},j.a.createElement(is,{label:n("catalog-category-tree-configuration.parent-category-id")},p?j.a.createElement(Ea.a,{style:{width:"100%"},defaultActiveFirstOption:!0,allowClear:!0,dropdownStyle:{maxHeight:400,overflow:"auto"},defaultValue:l.parent_category_id,treeData:p,onChange:_,placeholder:"Please select",treeDefaultExpandAll:!0}):j.a.createElement(fc.a,{disabled:k})),j.a.createElement(is,{label:n("catalog-category-tree-configuration.display-if-parent-category-id")},p?j.a.createElement(Ea.a,{style:{width:"100%"},defaultActiveFirstOption:!0,allowClear:!0,dropdownStyle:{maxHeight:400,overflow:"auto"},defaultValue:l.display_if_parent_category_id,treeData:p,onChange:T,placeholder:"Please select",treeDefaultExpandAll:!0}):j.a.createElement(fc.a,{disabled:k})),j.a.createElement(is,{label:n("catalog-category-tree-configuration.language-code")},j.a.createElement(gc.a,{defaultValue:l.language_code,onChange:I,allowClear:!0},u&&u.map(({code:e,name:t})=>j.a.createElement(ls,{value:e},t)))),j.a.createElement(is,{label:n("catalog-category-tree-configuration.link-pattern")},j.a.createElement(Ve.a,{size:"middle",direction:"vertical"},j.a.createElement(fc.a,{value:l.link_pattern,onChange:A}),j.a.createElement(on.a,{type:"info",message:n("catalog-category-tree-configuration.link-pattern-info")})))))},ss=({uuid:e,isNew:t,moduleId:a,moduleType:n,data:{parent_category_id:c,display_if_parent_category_id:r,language_code:l,link_pattern:i},onMove:o,slotId:s,locked:u})=>{const d=Object(g.b)("content-detail").t,m=Object(O.useContext)(du).view,b=Object(O.useState)(),p=Object(v.a)(b,2),f=p[0],E=p[1],h=Object(O.useState)(!1),k=Object(v.a)(h,2),x=k[0],y=k[1],w=jo().getTemplatePreview,C=mo({uuid:e,slotId:s,onMove:o,locked:u}),_=C.drag,T=C.drop,I=C.isDragging,A=C.ref,S=bo({uuid:e,slotId:s}).update,L=Eo({isNew:t,slotId:s,uuid:e,moduleId:a}),R=m&&w(m.path,Ci.CATALOG_CATEGORY_TREE),D=Object(O.useCallback)(({parent_category_id:e,display_if_parent_category_id:t,language_code:a,link_pattern:n})=>{S({parent_category_id:e,display_if_parent_category_id:t,language_code:a,link_pattern:n},!0),y(!1)},[S]),G=Object(O.useCallback)(function(){var e=Object(Z.a)(Q.a.mark((function e(t){var a,n;return Q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ba.getCatalogCategories(c||void 0,!0,!0,l,{cancelToken:t});case 2:a=e.sent,n=a.data,E(n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[c,l]);if(Object(O.useEffect)(()=>{const e=q.a.CancelToken.source();return G(e.token),()=>e.cancel()},[G]),R){const e=I?0:1;return _(T(A)),j.a.createElement(j.a.Fragment,null,j.a.createElement("div",{ref:A,style:{opacity:e}},j.a.createElement(Xi,{locked:u},!u&&j.a.createElement(ro,{moduleType:n,hasEdit:!1,onConfigure:()=>y(!0),onDelete:L}),j.a.createElement(to,{jsx:R.template,bindings:{items:f,link_pattern:i},renderInWrapper:!1}))),x&&j.a.createElement(os,{data:{parent_category_id:c,display_if_parent_category_id:r,language_code:l,link_pattern:i},onConfirm:D,onCancel:()=>y(!1)}))}return j.a.createElement(on.a,{message:d("this-module-needs-to-be-configured-first"),type:"info"})},us=gc.a.Option,ds=ha.a.Item,ms=({data:e,onConfirm:t,onCancel:a})=>{const n=Object(g.b)("content-detail").t,c=Object(O.useState)(e),r=Object(v.a)(c,2),l=r[0],i=r[1],o=Object(O.useState)(),s=Object(v.a)(o,2),u=s[0],d=s[1],m=Object(O.useState)(),b=Object(v.a)(m,2),p=b[0],f=b[1],E=Object(O.useState)(!1),h=Object(v.a)(E,2),k=h[0],x=h[1],y=Object(O.useCallback)(function(){var e=Object(Z.a)(Q.a.mark((function e(t){var a,c;return Q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,x(!0),e.next=4,ba.getCatalogCategories(void 0,void 0,void 0,void 0,{cancelToken:t});case 4:a=e.sent,c=a.data,f(fa(c,n,!1)),x(!1),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),x(!1);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t){return e.apply(this,arguments)}}(),[n]),w=Object(O.useCallback)(function(){var e=Object(Z.a)(Q.a.mark((function e(t){var a,n;return Q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,x(!0),e.next=4,yn.getAllCatalogLanguages({cancelToken:t});case 4:a=e.sent,n=a.data,d(n),x(!1),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),x(!1);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t){return e.apply(this,arguments)}}(),[]),C=Object(O.useCallback)(()=>{t(l)},[t,l]),_=Object(O.useCallback)(e=>{i(t=>Object(X.a)({},t,{category_id:e}))},[]),T=Object(O.useCallback)(e=>{i(t=>Object(X.a)({},t,{language_code:e}))},[]),I=Object(O.useCallback)(({target:{value:e}})=>{i(t=>Object(X.a)({},t,{category_id_variable_name:""===e?null:e}))},[]),A=Object(O.useCallback)(e=>{i(t=>Object(X.a)({},t,{load_from_global_context:e}))},[]);return Object(O.useEffect)(()=>{const e=q.a.CancelToken.source();return w(e.token),y(e.token),()=>e.cancel()},[w,y]),j.a.createElement(Wl.a,{visible:!0,width:600,onOk:C,onCancel:a,title:n("catalog-category-configuration.title")},j.a.createElement(ha.a,{layout:"vertical"},j.a.createElement(ds,{label:n("catalog-category-configuration.category-id")},p?j.a.createElement(Ea.a,{style:{width:"100%"},defaultActiveFirstOption:!0,dropdownStyle:{maxHeight:400,overflow:"auto"},defaultValue:l.category_id,treeData:p,onChange:_,placeholder:"Please select",treeDefaultExpandAll:!0}):j.a.createElement(fc.a,{disabled:k})),j.a.createElement(ds,{label:n("catalog-category-configuration.language-code")},j.a.createElement(gc.a,{defaultValue:l.language_code,onChange:T,allowClear:!0},u&&u.map(({code:e,name:t})=>j.a.createElement(us,{value:e},t)))),j.a.createElement(ds,{label:n("catalog-category-configuration.category-id-variable-name")},j.a.createElement(fc.a,{onChange:I,defaultValue:e.category_id_variable_name})),j.a.createElement(ds,{label:n("catalog-category-configuration.load-from-global-context")},j.a.createElement(zo.a,{onChange:A,checked:l.load_from_global_context,defaultChecked:e.load_from_global_context}))))},bs=({uuid:e,isNew:t,moduleId:a,moduleType:n,data:{category_id:c,language_code:r,category_id_variable_name:l,load_from_global_context:i},onMove:o,slotId:s,locked:u})=>{const d=Object(g.b)("content-detail").t,m=Object(O.useContext)(du).view,b=Object(O.useState)(),p=Object(v.a)(b,2),f=p[0],E=p[1],h=Object(O.useState)(!1),k=Object(v.a)(h,2),x=k[0],y=k[1],w=jo().getTemplatePreview,C=mo({uuid:e,slotId:s,onMove:o,locked:u}),_=C.drag,T=C.drop,I=C.isDragging,A=C.ref,S=bo({uuid:e,slotId:s}).update,L=Eo({isNew:t,slotId:s,uuid:e,moduleId:a}),R=m&&w(m.path,Ci.CATALOG_CATEGORY),D=Object(O.useCallback)(({category_id:e,language_code:t,category_id_variable_name:a,load_from_global_context:n})=>{S({category_id:e,language_code:t,category_id_variable_name:a,load_from_global_context:n},!0),y(!1)},[S]),G=Object(O.useCallback)(function(){var e=Object(Z.a)(Q.a.mark((function e(t){var a,n;return Q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!c){e.next=6;break}return e.next=3,ba.getCatalogCategory(c,!0,{cancelToken:t});case 3:a=e.sent,n=a.data,E(n);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[c]);if(Object(O.useEffect)(()=>{const e=q.a.CancelToken.source();return G(e.token),()=>e.cancel()},[G]),R){const e=I?0:1;return _(T(A)),j.a.createElement(j.a.Fragment,null,j.a.createElement("div",{ref:A,style:{opacity:e}},j.a.createElement(Xi,{locked:u},!u&&j.a.createElement(ro,{moduleType:n,hasEdit:!1,onConfigure:()=>y(!0),onDelete:L}),f||l||i?j.a.createElement(to,{jsx:R.template,bindings:{data:f,language_code:r,category_id_variable_name:l,load_from_global_context:i},renderInWrapper:!1}):j.a.createElement(on.a,{message:d("this-module-needs-to-be-configured-first"),type:"info"}))),x&&j.a.createElement(ms,{data:{category_id:c,language_code:r,category_id_variable_name:l,load_from_global_context:i},onConfirm:D,onCancel:()=>y(!1)}))}return j.a.createElement(on.a,{message:d("this-module-needs-to-be-configured-first"),type:"info"})},ps=({slotId:e})=>{const t=Object(O.useContext)(du),a=t.modules,n=t.setModules,c=Object(O.useCallback)((t,a,c)=>{n(n=>Object(X.a)({},n,{[t]:ir()(n[t],{$splice:[[a,1],[c,0,n[e][a]]]})}))},[n,e]);return Object(O.useMemo)(()=>a[e]?j.a.createElement(j.a.Fragment,null,a[e].map(e=>{let t=e.moduleType,a=e.uuid,n=Object(Je.a)(e,["moduleType","uuid"]);switch(t){case Ci.HEADING:return j.a.createElement(ho,Object.assign({moduleType:t,uuid:a,onMove:c},n,{key:a}));case Ci.TEXT:return j.a.createElement(xo,Object.assign({moduleType:t,uuid:a,onMove:c},n,{key:a}));case Ci.BUTTON:return j.a.createElement(Io,Object.assign({moduleType:t,uuid:a,onMove:c},n,{key:a}));case Ci.IMAGE:return j.a.createElement(rs,Object.assign({moduleType:t,uuid:a,onMove:c},n,{key:a}));case Ci.NAVIGATION:return j.a.createElement(Ko,Object.assign({moduleType:t,uuid:a,onMove:c},n,{key:a}));case Ci.CATALOG_LISTING:return j.a.createElement(Do,Object.assign({moduleType:t,uuid:a,onMove:c},n,{key:a}));case Ci.CATALOG_ITEM:return j.a.createElement(Po,Object.assign({moduleType:t,uuid:a,onMove:c},n,{key:a}));case Ci.CATALOG_DETAIL:return j.a.createElement(Bo,Object.assign({moduleType:t,uuid:a,onMove:c},n,{key:a}));case Ci.CATALOG_CATEGORY_TREE:return j.a.createElement(ss,Object.assign({moduleType:t,uuid:a,onMove:c},n,{key:a}));case Ci.CATALOG_CATEGORY:return j.a.createElement(bs,Object.assign({moduleType:t,uuid:a,onMove:c},n,{key:a}));case Ci.CATALOG_SEARCH:return j.a.createElement(Uo,Object.assign({moduleType:t,uuid:a,onMove:c},n,{key:a}));default:return null}})):null,[a,c,e])};function gs(){const e=Object(r.a)(["\n  position: absolute;\n  top: 0;\n  left: 0;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  width: 100%;\n  height: 100%;\n  background-color: ",";\n  user-select: none;\n"]);return gs=function(){return e},e}const fs=l.c.div(gs(),Object(lt.a)(C,.5)),Os=({data:{name:e,html_class_name:t,html_id:a,children:n,locked:c,id:r}})=>{const l=(({slotId:e,locked:t})=>{const a=Object(O.useContext)(du),n=a.setIsTouched,c=a.setModules,r=Object(xe.a)({accept:[oo,so],canDrop:(e,a)=>!t||!a.getItem().locked,collect:t=>({isActive:t.canDrop()&&t.isOver({shallow:!0})&&t.getItem().slotId!==e}),drop:(t,a)=>{if(!t.locked&&e!==t.slotId&&!a.didDrop())if(n(!0),t.type===oo)c(a=>{const n={uuid:wi()(),slotId:e,isNew:!0,isTouched:!0,moduleType:t.moduleType,weight:50,data:{},locked:!1,isTemplatePageModule:!1};switch(t.moduleType){case Ci.TEXT:{const e={content:"Text..."};n.data=e}break;case Ci.HEADING:{const e={content:"Heading...",level:po.LEVEL_1};n.data=e}break;case Ci.CATALOG_ITEM:{const e={catalog_item_id:void 0,language_code:null};n.data=e}break;case Ci.CATALOG_DETAIL:{const e={catalog_item_id:null,language_code:null,catalog_item_id_variable_name:null,load_from_global_context:!1};n.data=e}break;case Ci.CATALOG_LISTING:{const e={category_id:null,language_code:null,category_id_variable_name:null};n.data=e}break;case Ci.CATALOG_CATEGORY_TREE:{const e={parent_category_id:null,display_if_parent_category_id:null,language_code:null,link_pattern:""};n.data=e}break;case Ci.CATALOG_CATEGORY:{const e={category_id:null,language_code:null,category_id_variable_name:null,load_from_global_context:!1};n.data=e}break;case Ci.IMAGE:{const e={file_name:"",image:void 0,image_alt:""};n.data=e}break;case Ci.BUTTON:{const e={button_id:void 0,text:"Button",target:wo.SELF,path:"#"};n.data=e}}return void 0!==a[e]?Object(X.a)({},a,{[e]:[...a[e],n]}):Object(X.a)({},a,{[e]:[n]})});else{if(t.type!==so)return;if(e===t.slotId)return;c(a=>{const n=Object(X.a)({},a)[t.slotId].find(e=>e.uuid===t.uuid);return a[e]||(a[e]=[]),a[e].push(Object(X.a)({},n,{slotId:e})),Object(X.a)({},a,{[t.slotId]:a[t.slotId].filter(e=>e.uuid!==t.uuid)})})}}}),l=Object(v.a)(r,2),i=l[0].isActive;return{drop:l[1],isActive:i}})({slotId:r,locked:c}),i=l.drop,o=l.isActive;return Object(O.useMemo)(()=>j.a.createElement("div",{ref:i,className:t+" cms__slot"+(o?" cms__slot--active":""),id:a},c?j.a.createElement(fs,null,j.a.createElement(Ke,{icon:"lock",size:"lg"})):j.a.createElement(Hi,{name:e}),j.a.createElement(ps,{slotId:r}),n&&n.map(e=>j.a.createElement(Os,{data:e,key:e.id}))),[i,o,t,a,n,r,e,c])};function js(){const e=Object(r.a)(["\n  width: 100%;\n\n  * {\n    a,\n    button,\n    input,\n    select,\n    textarea {\n      pointer-events: none;\n    }\n\n    "," {\n      pointer-events: initial;\n\n      * {\n        pointer-events: initial;\n      }\n    }\n  }\n\n  *::after:not(.mce-content-body) {\n    display: table;\n    clear: both;\n    content: '';\n  }\n\n  .cms__slot {\n    position: relative;\n    width: 100%;\n    height: 100%;\n    min-height: 64px;\n    padding: 6px;\n    padding-top: 34px !important;\n    background: ",";\n    border: 1px solid "," !important;\n\n    &--active {\n      box-shadow: 0px 0px 11px 0 ",";\n    }\n  }\n\n  ","\n"]);return js=function(){return e},e}const Es=l.c.div(js(),Ji,k,G,G,({styles:e})=>e);class vs{static getStyles(e,t="main.css",a){return q.a.create()(Object(X.a)({},a,{method:"GET",url:"/storage/themes/".concat(e,"/").concat(t)}))}}function hs(){const e=Object(r.a)(["\n  margin-top: 2px;\n  font-size: 12px;\n"]);return hs=function(){return e},e}function ks(){const e=Object(r.a)(["\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  height: 64px;\n  background-color: ",";\n  cursor: move;\n\n  &:hover {\n    color: ",";\n    background-color: ",";\n  }\n"]);return ks=function(){return e},e}const xs=l.c.div(ks(),y,k,I),ys=l.c.div(hs()),ws=({moduleType:e,icon:t,label:a})=>{const n=Object(io.a)({item:{type:oo,moduleType:e},collect:e=>({opacity:e.isDragging()?.5:1})}),c=Object(v.a)(n,2),r=c[0].opacity,l=c[1];return j.a.createElement(xs,{ref:l,style:{opacity:r}},j.a.createElement(Ke,{icon:t}),j.a.createElement(ys,null,a))};function Cs(){const e=Object(r.a)(["\n  display: grid;\n  grid-auto-rows: min-content;\n  grid-gap: 1px;\n"]);return Cs=function(){return e},e}function _s(){const e=Object(r.a)(["\n  margin: 0 0 6px;\n  font-weight: bold;\n"]);return _s=function(){return e},e}function Ts(){const e=Object(r.a)(["\n  padding: 6px;\n"]);return Ts=function(){return e},e}function Is(){const e=Object(r.a)(["\n  max-height: 270px;\n  overflow-y: auto;\n"]);return Is=function(){return e},e}function As(){const e=Object(r.a)(["\n  position: fixed;\n  z-index: 100;\n  width: 164px;\n  background: ",";\n  border: 1px solid ",";\n  border-radius: 2px;\n  box-shadow: 0px 0px 11px 0 rgba(0, 0, 0, 0.2);\n  cursor: move;\n"]);return As=function(){return e},e}const Ss=l.c.div(As(),k,C),Ls=l.c.div(Is()),Rs=l.c.div(Ts()),Ds=l.c.div(_s()),Gs=l.c.div(Cs()),Ns=()=>{const e=Object(g.b)("content-detail").t,t=Object(le.c)(e=>e.user.contentSidePanel),a=t.left,n=t.top,c=[{moduleType:Ci.TEXT,icon:"align-left",label:e("editor.side-panel.text")},{moduleType:Ci.HEADING,icon:"heading",label:e("editor.side-panel.heading")},{moduleType:Ci.NAVIGATION,icon:"bars",label:e("editor.side-panel.navigation")},{moduleType:Ci.BUTTON,icon:"square",label:e("editor.side-panel.button")},{moduleType:Ci.IMAGE,icon:"image",label:e("editor.side-panel.image")},{moduleType:Ci.GALLERY,icon:"images",label:e("editor.side-panel.gallery")},{moduleType:Ci.HTML,icon:"code",label:e("editor.side-panel.html")},{moduleType:Ci.CATALOG_LISTING,icon:"list",label:e("editor.side-panel.catalog-listing")},{moduleType:Ci.CATALOG_ITEM,icon:"list",label:e("editor.side-panel.catalog-item")},{moduleType:Ci.CATALOG_DETAIL,icon:"list",label:e("editor.side-panel.catalog-detail")},{moduleType:Ci.CATALOG_CATEGORY_TREE,icon:"tags",label:e("editor.side-panel.catalog-category-tree")},{moduleType:Ci.CATALOG_CATEGORY,icon:"tag",label:e("editor.side-panel.catalog-category")},{moduleType:Ci.CATALOG_SEARCH,icon:"search",label:e("editor.side-panel.catalog-search")}],r=Object(io.a)({item:{left:a,top:n,type:we},collect:e=>({isDragging:e.isDragging()})}),l=Object(v.a)(r,2),i=l[0].isDragging,o=l[1];return i?j.a.createElement("div",{ref:o}):j.a.createElement(Ss,{ref:o,style:{left:a,top:n}},j.a.createElement("div",null,j.a.createElement(Rs,null,j.a.createElement(Ds,null,e("editor.side-panel.modules")),j.a.createElement(Ls,null,j.a.createElement(Gs,null,c.map(e=>{let t=e.moduleType,a=Object(Je.a)(e,["moduleType"]);return j.a.createElement(ws,Object.assign({key:t,moduleType:t},a))}))))))};function Ms(){const e=Object(r.a)(["\n  position: relative;\n  margin: 6px;\n"]);return Ms=function(){return e},e}const Ps=l.c.div(Ms()),zs=()=>{const e=Object(O.useContext)(du),t=e.layoutSlots,a=e.view,n=e.loading,c=Object(O.useState)(""),r=Object(v.a)(c,2),l=r[0],i=r[1],o=Object(O.useCallback)(function(){var e=Object(Z.a)(Q.a.mark((function e(t){var n,c;return Q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!a){e.next=6;break}return e.next=3,vs.getStyles(a.name,"main.css",{cancelToken:t});case 3:n=e.sent,c=n.data,i(c);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[a]);return Object(O.useEffect)(()=>{const e=q.a.CancelToken.source();return o(e.token),()=>e.cancel()},[o]),Object(O.useMemo)(()=>n?j.a.createElement(Yn.a,{paragraph:{rows:4,width:"100%"}}):j.a.createElement(Ps,null,j.a.createElement(Ns,null),j.a.createElement("div",{className:"cms__editor"},j.a.createElement(Es,{styles:l},t&&t.map(e=>j.a.createElement(Os,{data:e,key:e.id}))))),[n,l,t])},Fs=Fa.a.Option,Ys=()=>{const e=Object(g.b)("content-detail").t,t=Object(O.useContext)(du).loading,a=ji(),n=a.templates,c=a.pages,r=a.loading,l=t||r;return j.a.createElement(j.a.Fragment,null,j.a.createElement(wa,{label:e("properties.general.template-id"),name:"template_id"},j.a.createElement(Fa.a,{name:"template_id",loading:l},n.map(({id:e,name:t})=>j.a.createElement(Fs,{value:e,key:e},t)))),j.a.createElement(wa,{label:e("properties.general.parent"),name:"parent"},c&&!r?j.a.createElement(ja.a,{treeData:c,name:"parent",allowClear:!0,showArrow:!0,showSearch:!0,filterTreeNode:!0,treeDefaultExpandAll:!0,treeNodeFilterProp:"title"}):j.a.createElement(Oa.a,{name:"parent",disabled:!0})),j.a.createElement(wa,{label:e("properties.general.name"),name:"name"},j.a.createElement(Oa.a,{name:"name"})),j.a.createElement(wa,{label:e("properties.general.path"),name:"path"},j.a.createElement(Oa.a,{name:"path"})))};let Vs;function Bs(){const e=Object(r.a)(["\n  display: flex;\n  flex-direction: row;\n  justify-content: flex-end;\n  width: 240px;\n  height: 240px;\n  margin-top: 24px;\n  padding: 12px;\n  overflow: hidden;\n  background-repeat: no-repeat;\n  background-position: 50% 50%;\n  background-size: cover;\n  border: 1px solid ",";\n  border-radius: 2px;\n"]);return Bs=function(){return e},e}!function(e){e.ALL="ALL",e.NOINDEX="NOINDEX",e.NOINDEX_NOFOLLOW="NOINDEX_NOFOLLOW",e.INDEX_NOFOLLOW="INDEX_NOFOLLOW",e.INDEX_FOLLOW="INDEX_FOLLOW"}(Vs||(Vs={}));const Hs=Tc.a.Dragger,Ws=Oa.a.TextArea,Us=Fa.a.Option,Qs=l.c.div(Bs(),w),Zs=window._envConfig.CMS_STATIC_URL+"/images/",Js=()=>{const e=Object(O.useContext)(du).page,t=Object(g.b)("content-detail").t,a=Object(O.useState)(),n=Object(v.a)(a,2),c=n[0],r=n[1],l=Object(ma.g)().setFieldValue,i=e&&e.meta_image?"".concat(Zs).concat(e.meta_image):void 0,o=Object(O.useState)(i),s=Object(v.a)(o,2),u=s[0],d=s[1],m=Object(O.useCallback)(({fileList:e,file:{uid:t}})=>{const a=e.find(e=>e.uid===t);d(a),l("meta_image",a)},[l]),b=Object(O.useCallback)(()=>{d(void 0),r(void 0),l("meta_image",void 0)},[l]),p=Object(O.useCallback)(Object(Z.a)(Q.a.mark((function e(){var t;return Q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!u){e.next=9;break}if("string"===typeof u){e.next=8;break}return e.next=4,Jc(u.originFileObj);case 4:t=e.sent,r(t),e.next=9;break;case 8:r(u);case 9:case"end":return e.stop()}}),e)}))),[u]);return Object(O.useEffect)(()=>{p()},[p]),j.a.createElement(j.a.Fragment,null,j.a.createElement(wa,{label:t("properties.meta.meta-title"),name:"meta_title"},j.a.createElement(Oa.a,{name:"meta_title"})),j.a.createElement(wa,{label:t("properties.meta.meta-description"),name:"meta_description"},j.a.createElement(Ws,{name:"meta_description",rows:3})),j.a.createElement(wa,{label:t("properties.meta.meta-keywords"),name:"meta_keywords"},j.a.createElement(Ws,{name:"meta_keywords",rows:2})),j.a.createElement(wa,{label:t("properties.meta.meta-robots.label"),name:"meta_robots"},j.a.createElement(Fa.a,{name:"meta_robots"},Object.values(Vs).map(e=>j.a.createElement(Us,{key:e,value:e},t("properties.meta.meta-robots.options.".concat(e)))))),j.a.createElement(wa,{label:t("properties.meta.meta-canonical"),name:"meta_canonical"},j.a.createElement(Oa.a,{name:"meta_canonical"})),j.a.createElement(wa,{label:t("properties.meta.meta-image.label"),name:"meta_image"},j.a.createElement(Hs,{multiple:!1,beforeUpload:()=>!1,showUploadList:!1,accept:"image/*",onChange:e=>m(e)},j.a.createElement(Ke,{icon:"cloud-upload-alt",size:"2x"}),j.a.createElement("p",null,t("properties.meta.meta-image.upload-file-text"))),c&&j.a.createElement(Qs,{style:{backgroundImage:"url(".concat(c,")")}},j.a.createElement(et,{size:"small",icon:"trash-alt",onClick:b},t("properties.meta.meta-image.delete")))))},Xs=Oa.a.TextArea,Ks=()=>{const e=Object(g.b)("content-detail").t;return j.a.createElement(j.a.Fragment,null,j.a.createElement(wa,{label:e("properties.advanced.html-head-end"),name:"html_head_end"},j.a.createElement(Xs,{name:"html_head_end",rows:5})),j.a.createElement(wa,{label:e("properties.advanced.html-body-start"),name:"html_body_start"},j.a.createElement(Xs,{name:"html_body_start",rows:5})),j.a.createElement(wa,{label:e("properties.advanced.html-body-end"),name:"html_body_end"},j.a.createElement(Xs,{name:"html_body_end",rows:5})))},qs=Ir.a.TabPane;let $s;!function(e){e.GENERAL="GENERAL",e.META="META",e.ADVANCED="ADVANCED"}($s||($s={}));const eu=()=>{const e=Object(ma.g)().dirty,t=Object(g.b)("content-detail").t,a=Object(O.useContext)(du),n=a.setIsPropertiesTouched,c=a.loading;return Object(O.useEffect)(()=>{n(e)},[e,n]),c?j.a.createElement(Yn.a,{paragraph:{rows:4,width:"100%"}}):j.a.createElement(Ir.a,{defaultActiveKey:$s.GENERAL,tabPosition:"left"},j.a.createElement(qs,{tab:t("properties.tabs.general"),key:$s.GENERAL},j.a.createElement(Ys,null)),j.a.createElement(qs,{tab:t("properties.tabs.meta"),key:$s.META},j.a.createElement(Js,null)),j.a.createElement(qs,{tab:t("properties.tabs.advanced"),key:$s.ADVANCED},j.a.createElement(Ks,null)))},tu=()=>{const e=Object(O.useContext)(du),t=e.page,a=e.modules,n=e.files,c=e.setIsTouched,r=e.setIsPropertiesTouched,l=e.pageVersions.getPageVersions,i=Object(g.b)("content-detail").t,o=Object(O.useRef)(q.a.CancelToken.source());return Object(O.useEffect)(()=>{const e=o.current;return()=>e.cancel()},[]),Object(O.useCallback)(function(){var e=Object(Z.a)(Q.a.mark((function e(s,{resetForm:u}){var d,m,b,p,g,f,O,j,E,v,h,k,x,y,w,C,_;return Q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return d=s.html_body_end,m=s.html_body_start,b=s.html_head_end,p=s.meta_canonical,g=s.meta_description,f=s.meta_keywords,O=s.meta_robots,j=s.meta_title,E=s.name,v=s.parent,h=s.path,k=s.template_id,x=s.meta_image,(y=new FormData).append("html_body_end",d),y.append("html_body_start",m),y.append("html_head_end",b),y.append("meta_description",g),y.append("meta_keywords",f),y.append("meta_robots",O),y.append("meta_title",j),y.append("name",E),y.append("parent",v),y.append("path",h),y.append("template_id",String(k)),p&&""!==p?y.append("meta_canonical",p):y.append("meta_canonical",""),x&&"string"!==typeof x?y.append("meta_image",x.originFileObj):y.append("meta_image",""),e.prev=15,e.next=18,nt.updatePage(t.identifier,y,{cancelToken:o.current.token});case 18:if(w=e.sent,C=w.data.version,!(Object.keys(a).length>0)){e.next=32;break}return e.prev=21,_=new FormData,n&&Object.keys(n).length>0&&Object.keys(n).forEach(e=>{n[e].forEach(t=>{_.append("files_".concat(e),t.originFileObj)})}),y=Object(ac.a)({version:C,modules:JSON.stringify(a)},{nullsAsUndefineds:!0,booleansAsIntegers:!0},_),e.next=27,nt.setPageModules(t.identifier,y,{cancelToken:o.current.token});case 27:e.next=32;break;case 29:e.prev=29,e.t0=e.catch(21),ct.a.error({message:i("save-error")});case 32:r(!1),c(!1),u({values:s}),l(),ct.a.success({message:i("save-success")}),e.next=42;break;case 39:e.prev=39,e.t1=e.catch(15),ct.a.error({message:i("save-error")});case 42:case"end":return e.stop()}}),e,null,[[15,39],[21,29]])})));return function(t,a){return e.apply(this,arguments)}}(),[a,n,t,l,r,c,i])},au=({onClick:e})=>{const t=Object(g.b)("content-detail").t,a=t=>{e(t)},n=[{children:t("versions.table.context-menu.preview"),onClick:()=>a("preview"),icon:"eye"},{children:t("versions.table.context-menu.revert"),onClick:()=>a("revert"),icon:"arrow-left",dialog:{text:t("versions.table.context-menu.delete-dialog.text"),cancel:t("versions.table.context-menu.delete-dialog.cancel"),confirm:t("versions.table.context-menu.delete-dialog.confirm")}}];return j.a.createElement("div",null,j.a.createElement(St,{items:n,"data-test":"Dropdown"},j.a.createElement(Yt,{size:"small"})))},nu=(e,t)=>[{dataIndex:"version",title:e("versions.table.columns.version"),width:150},{key:"status",dataIndex:"status",title:e("versions.table.columns.status"),width:220,render:e=>j.a.createElement(Ut.a,{color:F[e]},e)},{key:"modified_at",dataIndex:"modified_at",title:e("versions.table.columns.modified-at"),render:e=>e?Object(s.a)(e,Bt):"-"},{key:"context_menu",dataIndex:"context_menu",width:60,render:(e,{identifier:a})=>j.a.createElement(au,{onClick:e=>t&&t(e,a)})}],cu=()=>{const e=Object(g.b)("content-detail").t,t=Object(O.useContext)(du).pageVersions,a=t.data,n=t.loading,c=t.page,r=t.setPage,l=t.pageSize,i=t.total,o=t.getPageVersions,s=Object(O.useCallback)(function(){var e=Object(Z.a)(Q.a.mark((function e(t,a){return Q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=t,e.next="preview"===e.t0?3:"revert"===e.t0?4:5;break;case 3:case 4:case 5:return e.abrupt("break",6);case 6:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),[]),u=Object(O.useCallback)(e=>{r(e)},[r]);return Object(O.useEffect)(()=>{o()},[o]),Object(O.useMemo)(()=>j.a.createElement(at,{columns:nu(e,s),dataSource:a,loading:n,isScrollable:!0,pagination:{current:c,pageSize:l,total:i,onChange:u}}),[a,n,c,l,i,e,s,u])},ru=Ir.a.TabPane,lu=H.a.Group;let iu;!function(e){e.EDITOR="Editor",e.PROPERTIES="Properties",e.VERSIONS="Versions"}(iu||(iu={}));const ou=Ya.e().shape({name:Ya.g().required(),path:Ya.g().required(),parent:Ya.g().notRequired(),template_id:Ya.d().required(),meta_image:Ya.c().notRequired(),meta_title:Ya.g().notRequired(),meta_robots:Ya.c().required(),html_body_end:Ya.g().notRequired(),html_body_start:Ya.g().notRequired(),html_head_end:Ya.g().notRequired(),meta_canonical:Ya.g().nullable().notRequired(),meta_description:Ya.g().notRequired(),meta_keywords:Ya.g().notRequired()}),su=()=>{const e=Object(g.b)("content-detail").t,t=(()=>{const e=Object(O.useContext)(du).page;return e?{name:e.name,path:e.path,parent:e.parent,template_id:e.template_id,meta_title:e.meta_title,meta_robots:e.meta_robots,meta_keywords:e.meta_keywords,meta_description:e.meta_description,meta_canonical:e.meta_canonical?e.meta_canonical:void 0,meta_image:e.meta_image,html_head_end:e.html_head_end,html_body_start:e.html_body_start,html_body_end:e.html_body_end}:{name:void 0,path:void 0,parent:"",template_id:void 0,meta_title:void 0,meta_robots:void 0,meta_keywords:void 0,meta_description:void 0,meta_canonical:void 0,meta_image:null,html_head_end:void 0,html_body_start:void 0,html_body_end:void 0}})(),a=Object(O.useContext)(du),n=a.isTouched,c=a.isPropertiesTouched,r=a.page,l=a.loading,i=tu();return j.a.createElement(ma.c,{initialValues:t,enableReinitialize:!0,validate:e=>Ba(e,ou),onSubmit:i},t=>j.a.createElement(va.a,{layout:"vertical"},j.a.createElement(Ir.a,{defaultActiveKey:iu.EDITOR,tabBarExtraContent:j.a.createElement(lu,null,j.a.createElement(et,{size:"middle",icon:"save",disabled:!n&&!c||t.isSubmitting,type:"primary",color:P,htmlType:"submit"},e("save")),j.a.createElement(et,{size:"middle",icon:"cloud-upload-alt",htmlType:"button",disabled:r&&r.status===Qt.PUBLISHED},e("publish")))},j.a.createElement(ru,{key:iu.EDITOR,tab:e("tabs.editor"),disabled:l},j.a.createElement(zs,null)),j.a.createElement(ru,{key:iu.PROPERTIES,tab:e("tabs.properties"),disabled:l},j.a.createElement(eu,null)),j.a.createElement(ru,{key:iu.VERSIONS,tab:e("tabs.versions"),disabled:l},j.a.createElement(cu,null)))))},uu=e=>e.map(({identifier:e,modified_at:t,modified_by:a,status:n,version:c})=>({key:String(e),identifier:e,modified_at:t?new Date(t):null,modified_by:a,status:n,version:c})),du=Object(O.createContext)({}),mu=({identifier:e,view:t,location:a})=>{const n=Object(g.b)("content-detail").t,c=Object(O.useContext)(Pe).setSceneTitle,r=zi({view:t,identifier:e}),l=r.page,i=r.template,o=r.layout,s=r.layoutSlots,u=r.view,d=r.modules,m=r.setModules,b=r.loading,p=(({view:e,identifier:t})=>{const a=Object(O.useState)(!1),n=Object(v.a)(a,2),c=n[0],r=n[1],l=Object(O.useState)(0),i=Object(v.a)(l,2),o=i[0],s=i[1],u=Object(O.useState)(1),d=Object(v.a)(u,2),m=d[0],b=d[1],p=Object(O.useState)(0),g=Object(v.a)(p,2),f=g[0],j=g[1],E=Object(O.useState)(),h=Object(v.a)(E,2),k=h[0],x=h[1],y=Object(O.useRef)(q.a.CancelToken.source()),w=Object(O.useCallback)(Object(Z.a)(Q.a.mark((function a(){var n,c,l,i,o;return Q.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if("detail"!==e){a.next=13;break}return r(!0),a.next=4,nt.getPageVersions(t,m,f,{cancelToken:y.current.token});case 4:n=a.sent,c=n.data,l=c.data,i=c.total,o=c.per_page,x(uu(l)),s(i),j(o),r(!1);case 13:case"end":return a.stop()}}),a)}))),[t,e,m,f]);return Object(O.useEffect)(()=>{const e=y.current;return()=>e.cancel()},[]),{pageVersions:k,getPageVersions:w,loading:c,page:m,setPage:b,total:o,pageSize:f,setPageSize:j}})({view:t,identifier:e}),f=p.getPageVersions,E=p.loading,h=p.page,k=p.pageSize,x=p.pageVersions,y=p.setPage,w=p.setPageSize,C=p.total,_=Object(O.useState)([]),T=Object(v.a)(_,2),I=T[0],A=T[1],S=Object(O.useState)(),L=Object(v.a)(S,2),R=L[0],D=L[1],G=Object(O.useState)(!1),N=Object(v.a)(G,2),M=N[0],P=N[1],z=Object(O.useState)(!1),F=Object(v.a)(z,2),Y=F[0],V=F[1],B=Object(ta.parse)(a.search).parent;return console.log(M,Y),Object(O.useEffect)(()=>{c(j.a.createElement(Ze,{title:n("detail"===t?"scene-title.detail":"scene-title.new"),extraContent:j.a.createElement(cn,{title:n("scene-title.back-to-pages"),to:"/content"})}))},[c,n,t]),"new"===t?j.a.createElement(ki,{parent:B?String(B):"",view:t}):"detail"===t&&e?j.a.createElement(du.Provider,{value:{page:l,pageVersions:{data:x,getPageVersions:f,page:h,setPage:y,pageSize:k,setPageSize:w,total:C,loading:E},template:i,layout:o,layoutSlots:s,view:u,modules:d,deletedModules:I,setDeletedModules:A,setModules:m,files:R,setFiles:D,isTouched:M,setIsTouched:P,isPropertiesTouched:Y,setIsPropertiesTouched:V,loading:b}},j.a.createElement(su,null)):null};class bu{static getTemplatePreview(e,t,a){return q()(Object(X.a)({},a,{method:"GET",url:"/template-preview",params:{view_name:e,template_name:t}}))}}const pu=Object(J.a)("SET_TEMPLATE_PREVIEW"),gu=Object(J.a)("CLEAR_TEMPLATE_PREVIEWS"),fu=()=>function(){var e=Object(Z.a)(Q.a.mark((function e(t,a){var n,c,r,l,i,o,s,u;return Q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=a(),c=n.templates.previews,e.next=3,Ha.getAllViews();case 3:return r=e.sent,l=r.data,e.next=7,Da.getAllCatalogItemTemplates();case 7:return i=e.sent,o=i.data,e.next=11,Qo.getAllNavigations();case 11:s=e.sent,u=s.data,o.forEach(({path:e,view_id:a})=>{const n=l.find(e=>e.id===a).path,r="".concat(n),i=e,o="".concat(e,"_detail");c[r]&&c[r][i]||bu.getTemplatePreview(r,i).then(({data:e})=>{t(pu({path:r,moduleName:i,data:e}))}).catch(()=>{}),c[r]&&c[r][o]||bu.getTemplatePreview(r,o).then(({data:e})=>{t(pu({path:r,moduleName:o,data:e}))}).catch(()=>{})}),l.forEach(({path:e})=>{Object.keys(Ci).forEach(a=>{a===Ci.NAVIGATION?u.forEach(({path:n})=>{const r="".concat(e,"/").concat(n);c[r]&&c[r][a]||bu.getTemplatePreview(r,a.toLowerCase()).then(({data:e})=>{t(pu({path:r,moduleName:a,data:e}))}).catch(()=>{})}):c[e]&&c[e][a]||bu.getTemplatePreview(e,a.toLowerCase()).then(({data:n})=>{t(pu({path:e,moduleName:a,data:n}))}).catch(()=>{})})});case 15:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}();class Ou{static getVariableNameActions(e,t,a){return q()(Object(X.a)({},a,{method:"GET",url:"/variable-name-actions",params:{page:e,per_page:t}}))}static getVariableNameAction(e,t){return q()(Object(X.a)({},t,{method:"GET",url:"/variable-name-actions/".concat(e)}))}static createVariableNameAction(e,t){return q()(Object(X.a)({},t,{method:"POST",url:"/variable-name-actions",data:e}))}static updateVariableNameAction(e,t,a){return q()(Object(X.a)({},a,{method:"PUT",url:"/variable-name-actions/".concat(e),data:t}))}static deleteVariableNameAction(e,t){return q()(Object(X.a)({},t,{method:"DELETE",url:"/variable-name-actions/".concat(e)}))}}const ju=e=>e.map(({id:e,variable_name:t,path:a,action:n})=>({key:String(e),id:e,variable_name:t,path:a,action:n})),Eu=({onClick:e})=>{const t=Object(g.b)("variable-name-actions").t,a=Object(O.useCallback)(t=>{e(t)},[e]),n=[{children:t("table.context-menu.edit"),onClick:()=>a("edit"),icon:"pen"},{children:t("table.context-menu.delete"),onClick:()=>a("delete"),icon:"trash-alt",dialog:{text:t("table.context-menu.delete-dialog.text"),cancel:t("table.context-menu.delete-dialog.cancel"),confirm:t("table.context-menu.delete-dialog.confirm")}}];return j.a.createElement("div",null,j.a.createElement(St,{items:n,"data-test":"Dropdown"},j.a.createElement(Yt,{size:"small"})))},vu=(e,t)=>[{key:"id",dataIndex:"id",title:e("table.columns.id"),width:100},{key:"variable_name",dataIndex:"variable_name",title:e("table.columns.variable-name"),width:200},{key:"path",dataIndex:"path",width:300,title:e("table.columns.path")},{key:"action",dataIndex:"action",title:e("table.columns.action")},{key:"context_menu",dataIndex:"context_menu",width:60,render:(e,{id:a})=>j.a.createElement(Eu,{onClick:e=>t&&t(e,a)}),fixed:"right"}],hu=()=>{const e=Object(g.b)("variable-name-actions").t,t=Object(O.useState)([]),a=Object(v.a)(t,2),n=a[0],c=a[1],r=Object(O.useState)(!1),l=Object(v.a)(r,2),i=l[0],o=l[1],s=Object(O.useState)(0),u=Object(v.a)(s,2),d=u[0],m=u[1],b=Object(O.useState)(1),p=Object(v.a)(b,2),f=p[0],E=p[1],h=Object(O.useState)(0),k=Object(v.a)(h,2),x=k[0],y=k[1],w=Object(O.useRef)(q.a.CancelToken.source()),C=Object(O.useCallback)(Object(Z.a)(Q.a.mark((function e(){var t,a,n,r,l;return Q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o(!0),e.next=3,Ou.getVariableNameActions(f,x,{cancelToken:w.current.token});case 3:t=e.sent,a=t.data,n=a.data,r=a.total,l=a.per_page,c(ju(n)),m(r),y(l),o(!1);case 12:case"end":return e.stop()}}),e)}))),[f,x]),_=Object(O.useCallback)(function(){var t=Object(Z.a)(Q.a.mark((function t(a,n){return Q.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:t.t0=a,t.next="edit"===t.t0?3:"delete"===t.t0?5:15;break;case 3:return Object(W.e)("/admin/content/variable-name-actions/"+n),t.abrupt("break",16);case 5:return t.prev=5,t.next=8,Ou.deleteVariableNameAction(n,{cancelToken:w.current.token});case 8:ct.a.success({message:e("table.delete-success")}),C(),t.next=14;break;case 12:t.prev=12,t.t1=t.catch(5);case 14:case 15:return t.abrupt("break",16);case 16:case"end":return t.stop()}}),t,null,[[5,12]])})));return function(e,a){return t.apply(this,arguments)}}(),["/admin",C,e]),T=Object(O.useCallback)(e=>{E(e)},[]);return Object(O.useEffect)(()=>{C()},[C]),Object(O.useEffect)(()=>{const e=w.current;return()=>e.cancel()},[]),j.a.createElement(at,{columns:vu(e,_),dataSource:n,loading:i,pagination:{current:f,pageSize:x,total:d,onChange:T}})},ku=()=>{const e=Object(g.b)("variable-name-actions").t,t=Object(O.useContext)(Pe).setSceneTitle,a=Object(O.useCallback)(()=>{Object(W.e)("/admin/content/variable-name-actions/new")},["/admin"]);return Object(O.useEffect)(()=>{t(j.a.createElement(Ze,{title:e("scene-title")}))},[t,e]),j.a.createElement(Ve.a,{size:"large",direction:"vertical",style:{width:"100%"}},j.a.createElement(et,{size:"middle",type:"primary",icon:"plus",onClick:a},e("create-new-variable-action")),j.a.createElement(on.a,{type:"info",message:e("variable-name-actions-info")}),j.a.createElement(hu,null))};let xu;!function(e){e.GET_CATALOG_ITEM="GET_CATALOG_ITEM",e.GET_CATALOG_CATEGORY="GET_CATALOG_CATEGORY",e.GET_PAGE_TAG="GET_PAGE_TAG"}(xu||(xu={}));const yu=ha.a.Item,wu=Fa.a.Option,Cu=Ya.e().shape({variable_name:Ya.g().required(),path:Ya.g().required(),action:Ya.g().required()}),_u=({variableNameActionId:e,view:t})=>{const a=Object(g.b)("variable-name-action-detail").t,n=Object(O.useState)(),c=Object(v.a)(n,2),r=c[0],l=c[1],i=Object(O.useState)(!1),o=Object(v.a)(i,2),s=o[0],u=o[1],d=Object(O.useRef)(q.a.CancelToken.source()),m=r||{variable_name:void 0,path:void 0,action:void 0},b=Object(O.useCallback)(function(){var a=Object(Z.a)(Q.a.mark((function a(n){var c,r;return Q.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if("detail"!==t||!e){a.next=14;break}return a.prev=1,u(!0),a.next=5,Ou.getVariableNameAction(e,{cancelToken:n});case 5:c=a.sent,r=c.data,l(r),u(!1),a.next=14;break;case 11:a.prev=11,a.t0=a.catch(1),u(!1);case 14:case"end":return a.stop()}}),a,null,[[1,11]])})));return function(e){return a.apply(this,arguments)}}(),[t,e]),p=Object(O.useCallback)(function(){var n=Object(Z.a)(Q.a.mark((function n({variable_name:c,path:r,action:l}){var i;return Q.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,u(!0),(i=new FormData).append("variable_name",c),i.append("path",r),i.append("action",l),"new"!==t){n.next=13;break}return n.next=9,Ou.createVariableNameAction(i,{cancelToken:d.current.token});case 9:ct.a.success({message:a("create-success")}),Object(W.e)("/admin/content/variable-name-actions"),n.next=18;break;case 13:if("detail"!==t||!e){n.next=18;break}return n.next=16,Ou.updateVariableNameAction(e,i,{cancelToken:d.current.token});case 16:ct.a.success({message:a("update-success")}),Object(W.e)("/admin/content/variable-name-actions");case 18:n.next=23;break;case 20:n.prev=20,n.t0=n.catch(0),u(!1);case 23:case"end":return n.stop()}}),n,null,[[0,20]])})));return function(e){return n.apply(this,arguments)}}(),["/admin",t,a,e]),f=Object(O.useCallback)(()=>j.a.createElement(va.a,{layout:"vertical"},j.a.createElement(wa,{label:a("form.variable-name"),name:"variable_name"},j.a.createElement(Oa.a,{name:"variable_name"})),j.a.createElement(wa,{label:a("form.path"),name:"path"},j.a.createElement(Oa.a,{name:"path"})),j.a.createElement(wa,{label:a("form.action"),name:"action"},j.a.createElement(Fa.a,{name:"action"},Object.values(xu).map(e=>j.a.createElement(wu,{value:e,key:e},e)))),j.a.createElement(yu,null,j.a.createElement(H.a,{htmlType:"submit",type:"primary",size:"large",disabled:s},a("new"===t?"form.submit.new":"form.submit.detail")))),[a,t,s]);return Object(O.useEffect)(()=>{const e=q.a.CancelToken.source();return b(e.token),()=>e.cancel()},[b]),Object(O.useEffect)(()=>{const e=d.current;return()=>e.cancel()},[]),j.a.createElement(ma.c,{initialValues:m,enableReinitialize:!0,validate:e=>Ba(e,Cu),onSubmit:p},()=>f())},Tu=({variableNameActionId:e,view:t})=>{const a=Object(g.b)("variable-name-action-detail").t,n=Object(O.useContext)(Pe).setSceneTitle;return Object(O.useEffect)(()=>{n(j.a.createElement(Ze,{title:a("detail"===t?"scene-title.detail":"scene-title.new"),extraContent:j.a.createElement(cn,{title:a("scene-title.back-to-variable-name-actions"),to:"/content/variable-name-actions"})}))},[n,a,t]),j.a.createElement(_u,{variableNameActionId:e,view:t})},Iu=({onClick:e})=>{const t=Object(g.b)("navigations").t,a=Object(O.useCallback)(t=>{e(t)},[e]),n=[{children:t("table.context-menu.edit"),onClick:()=>a("edit"),icon:"pen"},{children:t("table.context-menu.delete"),onClick:()=>a("delete"),icon:"trash-alt",dialog:{text:t("table.context-menu.delete-dialog.text"),cancel:t("table.context-menu.delete-dialog.cancel"),confirm:t("table.context-menu.delete-dialog.confirm")}}];return j.a.createElement("div",null,j.a.createElement(St,{items:n,"data-test":"Dropdown"},j.a.createElement(Yt,{size:"small"})))},Au=(e,t)=>[{key:"id",dataIndex:"id",title:e("table.columns.id"),width:100},{key:"name",dataIndex:"name",title:e("table.columns.name"),width:200},{key:"path",dataIndex:"path",title:e("table.columns.path")},{key:"context_menu",dataIndex:"context_menu",width:60,render:(e,{id:a})=>j.a.createElement(Iu,{onClick:e=>t&&t(e,a)}),fixed:"right"}],Su=e=>e.map(({id:e,name:t,path:a})=>({key:String(e),id:e,name:t,path:a})),Lu=()=>{const e=Object(g.b)("navigations").t,t=Object(O.useState)([]),a=Object(v.a)(t,2),n=a[0],c=a[1],r=Object(O.useState)(!1),l=Object(v.a)(r,2),i=l[0],o=l[1],s=Object(O.useState)(0),u=Object(v.a)(s,2),d=u[0],m=u[1],b=Object(O.useState)(1),p=Object(v.a)(b,2),f=p[0],E=p[1],h=Object(O.useState)(0),k=Object(v.a)(h,2),x=k[0],y=k[1],w=Object(O.useRef)(q.a.CancelToken.source()),C=Object(O.useCallback)(Object(Z.a)(Q.a.mark((function e(){var t,a,n,r,l;return Q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o(!0),e.next=3,Qo.getNavigations(f,x,{cancelToken:w.current.token});case 3:t=e.sent,a=t.data,n=a.data,r=a.total,l=a.per_page,c(Su(n)),m(r),y(l),o(!1);case 12:case"end":return e.stop()}}),e)}))),[f,x]),_=Object(O.useCallback)(function(){var t=Object(Z.a)(Q.a.mark((function t(a,n){return Q.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:t.t0=a,t.next="edit"===t.t0?3:"delete"===t.t0?5:15;break;case 3:return Object(W.e)("/admin/content/modules/navigations/"+n),t.abrupt("break",16);case 5:return t.prev=5,t.next=8,Qo.deleteNavigation(n,{cancelToken:w.current.token});case 8:ct.a.success({message:e("table.delete-success")}),C(),t.next=14;break;case 12:t.prev=12,t.t1=t.catch(5);case 14:case 15:return t.abrupt("break",16);case 16:case"end":return t.stop()}}),t,null,[[5,12]])})));return function(e,a){return t.apply(this,arguments)}}(),["/admin",C,e]),T=Object(O.useCallback)(e=>{E(e)},[]);return Object(O.useEffect)(()=>{C()},[C]),Object(O.useEffect)(()=>{const e=w.current;return()=>e.cancel()},[]),j.a.createElement(at,{columns:Au(e,_),dataSource:n,loading:i,pagination:{current:f,pageSize:x,total:d,onChange:T}})},Ru=()=>{const e=Object(g.b)("navigations").t,t=Object(O.useContext)(Pe).setSceneTitle,a=Object(O.useCallback)(()=>{Object(W.e)("/admin/content/modules/navigations/new")},["/admin"]);return Object(O.useEffect)(()=>{t(j.a.createElement(Ze,{title:e("scene-title")}))},[t,e]),j.a.createElement(Ve.a,{size:"large",direction:"vertical",style:{width:"100%"}},j.a.createElement(et,{size:"middle",type:"primary",icon:"plus",onClick:a},e("create-new-navigation")),j.a.createElement(Lu,null))},Du=ha.a.Item,Gu=Ya.e().shape({name:Ya.g().required(),path:Ya.g().required()}),Nu=()=>{const e=Object(g.b)("navigation-detail").t,t=Object(O.useRef)(q.a.CancelToken.source()),a=Object(O.useContext)(rd),n=a.view,c=a.navigationId,r=a.navigation,l=a.loading,i=a.setLoading,o=r||{name:void 0,path:void 0},s=Object(O.useCallback)(function(){var a=Object(Z.a)(Q.a.mark((function a({name:r,path:l}){var o,s,u;return Q.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(a.prev=0,i(!0),(o=new FormData).append("name",r),o.append("path",l),"new"!==n){a.next=14;break}return a.next=8,Qo.createNavigation(o,{cancelToken:t.current.token});case 8:s=a.sent,u=s.data.id,ct.a.success({message:e("create-success")}),Object(W.e)("/admin/content/modules/navigations/"+u),a.next=19;break;case 14:if("detail"!==n||!c){a.next=19;break}return a.next=17,Qo.updateNavigation(c,o,{cancelToken:t.current.token});case 17:ct.a.success({message:e("update-success")}),Object(W.e)("/admin/content/modules/navigations/"+c);case 19:a.next=24;break;case 21:a.prev=21,a.t0=a.catch(0),i(!1);case 24:case"end":return a.stop()}}),a,null,[[0,21]])})));return function(e){return a.apply(this,arguments)}}(),["/admin",n,e,c,i]),u=Object(O.useCallback)(()=>j.a.createElement(va.a,{layout:"vertical"},j.a.createElement(wa,{label:e("form.name"),name:"name"},j.a.createElement(Oa.a,{name:"name"})),j.a.createElement(wa,{label:e("form.path"),name:"path"},j.a.createElement(Oa.a,{name:"path"})),j.a.createElement(Du,null,j.a.createElement(H.a,{htmlType:"submit",type:"primary",size:"large",disabled:l},e("new"===n?"form.submit.new":"form.submit.detail")))),[e,n,l]);return Object(O.useEffect)(()=>{const e=t.current;return()=>e.cancel()},[]),j.a.createElement(ma.c,{initialValues:o,enableReinitialize:!0,validate:e=>Ba(e,Gu),onSubmit:s},()=>u())};function Mu(){const e=Object(r.a)(["\n      display: flex;\n    "]);return Mu=function(){return e},e}function Pu(){const e=Object(r.a)(["\n  ","\n\n  > span.ant-tag:last-child {\n    margin-right: 0;\n  }\n"]);return Pu=function(){return e},e}function zu(){const e=Object(r.a)(["\n  display: grid;\n  grid-gap: 12px;\n  grid-template-columns: max-content max-content max-content max-content;\n  width: 100%;\n  margin: 12px 0 6px;\n  padding: 6px 12px;\n  background: ",";\n  border: 1px solid ",";\n  border-radius: 3px;\n"]);return zu=function(){return e},e}function Fu(){const e=Object(r.a)(["\n  justify-self: end;\n"]);return Fu=function(){return e},e}function Yu(){const e=Object(r.a)(["\n  background: ",";\n  border: 1px solid ",";\n"]);return Yu=function(){return e},e}function Vu(){const e=Object(r.a)(["\n  display: inline-block;\n  padding: 1px 8px 3px;\n  font-size: 12px;\n  background: ",";\n  border: 1px solid ",";\n  border-radius: 4px;\n"]);return Vu=function(){return e},e}function Bu(){const e=Object(r.a)(["\n  white-space: nowrap;\n"]);return Bu=function(){return e},e}function Hu(){const e=Object(r.a)(["\n  display: grid;\n  grid-gap: 12px;\n  grid-template-columns: auto min-content;\n  align-items: center;\n"]);return Hu=function(){return e},e}function Wu(){const e=Object(r.a)(["\n  margin-bottom: 6px;\n  margin-left: ","px;\n  padding: 8px 24px;\n  border: 1px solid ",";\n  border-radius: 2px;\n"]);return Wu=function(){return e},e}const Uu=l.c.div(Wu(),({depth:e})=>e>0?24*e:0,w),Qu=l.c.div(Hu()),Zu=l.c.div(Bu()),Ju=l.c.div(Vu(),({isPage:e})=>e?k:y,w),Xu=Object(l.c)(Ju)(Yu(),({isPage:e})=>e?k:M,P),Ku=Object(l.c)(({onClick:e,className:t,disabledActions:a})=>{const n=Object(g.b)("navigation-detail").t,c=Object(O.useCallback)(t=>{e(t)},[e]),r=[{children:n("items.tree.context-menu.edit"),onClick:()=>c("edit"),icon:"pen"},{children:n("items.tree.context-menu.edit-mapping"),onClick:()=>c("edit-mapping"),icon:"map-signs",disabled:a&&a.includes("edit-mapping")},{children:n("items.tree.context-menu.create"),onClick:()=>c("create"),icon:"plus-square"},{children:n("items.tree.context-menu.delete"),onClick:()=>c("delete"),icon:"trash-alt",dialog:{text:n("items.tree.context-menu.delete-dialog.text"),cancel:n("items.tree.context-menu.delete-dialog.cancel"),confirm:n("items.tree.context-menu.delete-dialog.confirm")}}];return j.a.createElement("div",{className:t},j.a.createElement(St,{items:r,"data-test":"Dropdown"},j.a.createElement(Yt,{size:"small"})))})(Fu()),qu=l.c.div(zu(),y,w),$u=l.c.div(Pu(),({isPublished:e})=>e&&Object(l.b)(Mu())),ed=()=>{const e=Object(O.useContext)(rd),t=e.navigation,a=e.navigationId,n=Object(O.useCallback)((e,t)=>{switch(e){case"edit":Object(W.e)("/admin/content/modules/navigations/"+a+"/items/"+t);break;case"edit-mapping":Object(W.e)("/admin/content/modules/navigations/"+a+"/items/"+t+"/mappings");break;case"create":Object(W.e)("/admin/content/modules/navigations/"+a+"/items/new?parentId="+t)}},["/admin",a]),c=Object(O.useCallback)((e,t)=>e.map(({id:e,title:a,children:r,path:l,page:i})=>j.a.createElement(j.a.Fragment,null,j.a.createElement(Uu,{key:e,depth:t},j.a.createElement(Qu,null,j.a.createElement(Zu,null,a),j.a.createElement(Ku,{onClick:t=>n(t,e),disabledActions:!i&&["edit-mapping"]})),i?j.a.createElement(j.a.Fragment,null,j.a.createElement(qu,null,j.a.createElement("div",null,i.name),j.a.createElement($u,{isPublished:!!i.is_published},j.a.createElement(Ut.a,{color:F[i.status]},i.status),!!i.is_published&&i.status!==Qt.PUBLISHED&&j.a.createElement(Ut.a,{color:F[Qt.PUBLISHED]},Qt.PUBLISHED)),i.status!==Qt.PUBLISHED&&j.a.createElement(Ju,{isPage:!0},i.path),i.published_path&&j.a.createElement(Xu,{isPage:!0},i.published_path))):l&&j.a.createElement(Ju,null,l)),r&&j.a.createElement("div",{key:e+"_children"},c(r,t+1)))),[n]);return t?t.items?j.a.createElement(j.a.Fragment,null,c(t.items,0)):null:j.a.createElement(Yn.a,{paragraph:{rows:4,width:"100%"}})};function td(){const e=Object(r.a)(["\n  display: flex;\n  flex-direction: row;\n  justify-content: space-between;\n"]);return td=function(){return e},e}const ad=l.c.div(td()),nd=Ye.a.Title,cd=()=>{const e=Object(g.b)("navigation-detail").t,t=Object(O.useContext)(rd).navigationId,a=Object(O.useCallback)(()=>{Object(W.e)("/admin/content/modules/navigations/"+t+"/items/new")},["/admin",t]);return j.a.createElement(j.a.Fragment,null,j.a.createElement(Ja.a,null),j.a.createElement(Ve.a,{size:"large",direction:"vertical",style:{width:"100%"}},j.a.createElement(ad,null,j.a.createElement(nd,{level:3},e("items.title")),j.a.createElement(et,{size:"middle",type:"primary",icon:"plus",onClick:a},e("items.create-new-item"))),j.a.createElement(on.a,{message:e("items-info"),type:"info"}),j.a.createElement(on.a,{message:e("items-warning"),type:"warning"}),j.a.createElement(ed,null)))},rd=Object(O.createContext)({}),ld=({navigationId:e,view:t})=>{const a=Object(g.b)("navigation-detail").t,n=Object(O.useContext)(Pe).setSceneTitle,c=Object(O.useState)(),r=Object(v.a)(c,2),l=r[0],i=r[1],o=Object(O.useState)(!1),s=Object(v.a)(o,2),u=s[0],d=s[1],m=Object(O.useCallback)(function(){var a=Object(Z.a)(Q.a.mark((function a(n){var c,r;return Q.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if("detail"!==t||!e){a.next=14;break}return a.prev=1,d(!0),a.next=5,Qo.getNavigation(e,{cancelToken:n});case 5:c=a.sent,r=c.data,i(r),d(!1),a.next=14;break;case 11:a.prev=11,a.t0=a.catch(1),d(!1);case 14:case"end":return a.stop()}}),a,null,[[1,11]])})));return function(e){return a.apply(this,arguments)}}(),[t,e]);return Object(O.useEffect)(()=>{const e=q.a.CancelToken.source();return m(e.token),()=>e.cancel()},[m]),Object(O.useEffect)(()=>{n(j.a.createElement(Ze,{title:a("detail"===t?"scene-title.detail":"scene-title.new"),extraContent:j.a.createElement(cn,{title:a("scene-title.back-to-navigations"),to:"/content/modules/navigations"})}))},[n,a,t]),j.a.createElement(rd.Provider,{value:{view:t,navigationId:e,navigation:l,loading:u,setLoading:d}},j.a.createElement(Nu,null),"detail"===t&&j.a.createElement(cd,null))};let id;!function(e){e.BLANK="BLANK",e.SELF="SELF",e.TOP="TOP",e.PARENT="PARENT"}(id||(id={}));class od{static getNavigationItem(e,t,a){return q()(Object(X.a)({},a,{method:"GET",url:"/navigations/".concat(e,"/items/").concat(t)}))}static createNavigationItem(e,t,a){return q()(Object(X.a)({},a,{method:"POST",url:"/navigations/".concat(e,"/items"),data:t}))}static updateNavigationItem(e,t,a,n){return q()(Object(X.a)({},n,{method:"PUT",url:"/navigations/".concat(e,"/items/").concat(t),data:a}))}static deleteNavigationItem(e,t,a){return q()(Object(X.a)({},a,{method:"DELETE",url:"/navigations/".concat(e,"/items/").concat(t)}))}}const sd=e=>ga()(e,(e,t)=>{switch(e){case"id":return["value",t];case"children":default:return[e,t]}},{deep:!0}),ud=(e,t,a,n,c,r,l)=>e.map(e=>{let i=e;return(i[a]===n||l)&&(i=Object(X.a)({},i,{},c)),i[t]?Object(X.a)({},i,{[t]:ud(i[t],t,a,n,c,r,l||i[a]===n)}):i}),dd=ha.a.Item,md=Fa.a.Option,bd=Ya.e().shape({parent_id:Ya.d().nullable().notRequired(),title:Ya.g().required(),page_identifier:Ya.g().nullable().notRequired(),path:Ya.g().nullable().notRequired(),target:Ya.c().required(),html_class_name:Ya.g().nullable().notRequired(),html_id:Ya.g().nullable().notRequired(),weight:Ya.d().required()}),pd=({parentId:e,navigationId:t,navigationItemId:a,view:n})=>{const c=Object(g.b)("view-detail").t,r=Object(O.useState)(),l=Object(v.a)(r,2),i=l[0],o=l[1],s=Object(O.useState)([]),u=Object(v.a)(s,2),d=u[0],m=u[1],b=Object(O.useState)([]),p=Object(v.a)(b,2),f=p[0],E=p[1],h=Object(O.useState)(!1),k=Object(v.a)(h,2),x=k[0],y=k[1],w=Object(O.useRef)(q.a.CancelToken.source()),C=i||{parent_id:e||void 0,title:void 0,page_identifier:void 0,path:void 0,target:id.SELF,html_class_name:void 0,html_id:void 0,weight:50},_=Object(O.useCallback)(function(){var e=Object(Z.a)(Q.a.mark((function e(c){var r,l,i,o;return Q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return y(!0),e.next=3,Qo.getNavigation(t,{cancelToken:c});case 3:r=e.sent,(l=r.data.items)&&("detail"===n?(i=sd(l),o=ud(i,"children","value",Number(a),{disabled:!0},!0),E(o)):E(sd(l))),y(!1);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[t,n,a]),T=Object(O.useCallback)(function(){var e=Object(Z.a)(Q.a.mark((function e(t){var a,n;return Q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return y(!0),e.next=3,nt.getAllPages({cancelToken:t});case 3:a=e.sent,n=a.data,m(Oi(n)),y(!1);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[]),I=Object(O.useCallback)(function(){var e=Object(Z.a)(Q.a.mark((function e(c){var r,l;return Q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("detail"!==n||!t||!a){e.next=14;break}return e.prev=1,y(!0),e.next=5,od.getNavigationItem(t,a,{cancelToken:c});case 5:r=e.sent,l=r.data,o(l),y(!1),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),y(!1);case 14:case"end":return e.stop()}}),e,null,[[1,11]])})));return function(t){return e.apply(this,arguments)}}(),[n,t,a]),A=Object(O.useCallback)(function(){var e=Object(Z.a)(Q.a.mark((function e({parent_id:r,title:l,page_identifier:i,path:o,target:s,html_class_name:u,html_id:d,weight:m}){var b;return Q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,y(!0),(b=new FormData).append("parent_id",r&&0!==r?String(r):""),b.append("title",l),b.append("page_identifier",i||""),b.append("path",o||""),b.append("target",s),b.append("html_class_name",u||""),b.append("html_id",d||""),b.append("weight",String(m)),"new"!==n){e.next=18;break}return e.next=14,od.createNavigationItem(t,b,{cancelToken:w.current.token});case 14:ct.a.success({message:c("create-success")}),Object(W.e)("/admin/content/modules/navigations/"+t),e.next=23;break;case 18:if("detail"!==n||!a){e.next=23;break}return e.next=21,od.updateNavigationItem(t,a,b,{cancelToken:w.current.token});case 21:ct.a.success({message:c("update-success")}),Object(W.e)("/admin/content/modules/navigations/"+t);case 23:e.next=28;break;case 25:e.prev=25,e.t0=e.catch(0),y(!1);case 28:case"end":return e.stop()}}),e,null,[[0,25]])})));return function(t){return e.apply(this,arguments)}}(),["/admin",n,c,t,a]),S=Object(O.useCallback)(()=>j.a.createElement(va.a,{layout:"vertical"},j.a.createElement(wa,{label:c("form.parent-id"),name:"parent_id"},f&&!x?j.a.createElement(ja.a,{treeData:f,name:"parent_id",allowClear:!0,showArrow:!0,showSearch:!0,filterTreeNode:!0,treeDefaultExpandAll:!0,treeNodeFilterProp:"title"}):j.a.createElement(Oa.a,{name:"parent_id",disabled:!0})),j.a.createElement(wa,{label:c("form.title"),name:"title"},j.a.createElement(Oa.a,{name:"title"})),j.a.createElement(wa,{label:c("form.page-identifier"),name:"page_identifier"},d&&!x?j.a.createElement(ja.a,{treeData:d,name:"page_identifier",allowClear:!0,showArrow:!0,showSearch:!0,filterTreeNode:!0,treeDefaultExpandAll:!0,treeNodeFilterProp:"title"}):j.a.createElement(Oa.a,{name:"page_identifier",disabled:!0})),j.a.createElement(wa,{label:c("form.path"),name:"path"},j.a.createElement(Oa.a,{name:"path"})),j.a.createElement(wa,{label:c("form.target"),name:"target"},j.a.createElement(Fa.a,{name:"target"},Object.values(id).map(e=>j.a.createElement(md,{value:e,key:e},e)))),j.a.createElement(wa,{label:c("form.html-class-name"),name:"html_class_name"},j.a.createElement(Oa.a,{name:"html_class_name"})),j.a.createElement(wa,{label:c("form.html-id"),name:"html_id"},j.a.createElement(Oa.a,{name:"html_id"})),j.a.createElement(wa,{label:c("form.weight"),name:"weight"},j.a.createElement(Oa.a,{name:"weight",type:"number"})),j.a.createElement(dd,null,j.a.createElement(H.a,{htmlType:"submit",type:"primary",size:"large",disabled:x},c("new"===n?"form.submit.new":"form.submit.detail")))),[c,n,x,f,d]);return Object(O.useEffect)(()=>{const e=q.a.CancelToken.source();return I(e.token),_(e.token),T(e.token),()=>e.cancel()},[I,_,T]),Object(O.useEffect)(()=>{const e=w.current;return()=>e.cancel()},[]),j.a.createElement(ma.c,{initialValues:C,enableReinitialize:!0,validate:e=>Ba(e,bd),onSubmit:A},()=>S())},gd=({navigationId:e,navigationItemId:t,view:a,location:n})=>{const c=Object(g.b)("navigation-item-detail").t,r=Object(O.useContext)(Pe).setSceneTitle,l=Object(ta.parse)(n.search).parentId;return Object(O.useEffect)(()=>{r(j.a.createElement(Ze,{title:c("detail"===a?"scene-title.detail":"scene-title.new"),extraContent:j.a.createElement(cn,{title:c("scene-title.back-to-views"),to:"/content/modules/navigations/".concat(e)})}))},[r,c,a,e]),j.a.createElement(pd,{parentId:l?Number(l):void 0,navigationId:e,navigationItemId:t,view:a})},fd=({onClick:e})=>{const t=Object(g.b)("navigation-item-variable-mapping").t,a=Object(O.useCallback)(t=>{e(t)},[e]),n=[{children:t("table.context-menu.edit"),onClick:()=>a("edit"),icon:"pen"},{children:t("table.context-menu.delete"),onClick:()=>a("delete"),icon:"trash-alt",dialog:{text:t("table.context-menu.delete-dialog.text"),cancel:t("table.context-menu.delete-dialog.cancel"),confirm:t("table.context-menu.delete-dialog.confirm")}}];return j.a.createElement("div",null,j.a.createElement(St,{items:n,"data-test":"Dropdown"},j.a.createElement(Yt,{size:"small"})))},Od=(e,t)=>[{key:"id",dataIndex:"id",title:e("table.columns.id"),width:100},{key:"variable_name",dataIndex:"variable_name",title:e("table.columns.variable-name"),width:200},{key:"value",dataIndex:"value",title:e("table.columns.value")},{key:"context_menu",dataIndex:"context_menu",width:60,render:(e,{id:a})=>j.a.createElement(fd,{onClick:e=>t&&t(e,a)}),fixed:"right"}],jd=e=>e.map(({id:e,variable_name:t,value:a})=>({key:String(e),id:e,variable_name:t,value:a}));class Ed{static getNavigationItemVariableMappings(e,t,a,n,c){return q()(Object(X.a)({},c,{method:"GET",url:"/navigations/".concat(e,"/items/").concat(t,"/mappings"),params:{page:a,per_page:n}}))}static getNavigationItemVariableMapping(e,t,a,n){return q()(Object(X.a)({},n,{method:"GET",url:"/navigations/".concat(e,"/items/").concat(t,"/mappings/").concat(a)}))}static createNavigationItemVariableMapping(e,t,a,n){return q()(Object(X.a)({},n,{method:"POST",url:"/navigations/".concat(e,"/items/").concat(t,"/mappings"),data:a}))}static updateNavigationItemVariableMapping(e,t,a,n,c){return q()(Object(X.a)({},c,{method:"PUT",url:"/navigations/".concat(e,"/items/").concat(t,"/mappings/").concat(a),data:n}))}static deleteNavigationItemVariableMapping(e,t,a,n){return q()(Object(X.a)({},n,{method:"DELETE",url:"/navigations/".concat(e,"/items/").concat(t,"/mappings/").concat(a)}))}}const vd=({navigationId:e,navigationItemId:t})=>{const a=Object(g.b)("views").t,n=Object(O.useState)([]),c=Object(v.a)(n,2),r=c[0],l=c[1],i=Object(O.useState)(!1),o=Object(v.a)(i,2),s=o[0],u=o[1],d=Object(O.useState)(0),m=Object(v.a)(d,2),b=m[0],p=m[1],f=Object(O.useState)(1),E=Object(v.a)(f,2),h=E[0],k=E[1],x=Object(O.useState)(0),y=Object(v.a)(x,2),w=y[0],C=y[1],_=Object(O.useRef)(q.a.CancelToken.source()),T=Object(O.useCallback)(Object(Z.a)(Q.a.mark((function a(){var n,c,r,i,o;return Q.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return u(!0),a.next=3,Ed.getNavigationItemVariableMappings(e,t,h,w,{cancelToken:_.current.token});case 3:n=a.sent,c=n.data,r=c.data,i=c.total,o=c.per_page,l(jd(r)),p(i),C(o),u(!1);case 12:case"end":return a.stop()}}),a)}))),[h,w,e,t]),I=Object(O.useCallback)(function(){var n=Object(Z.a)(Q.a.mark((function n(c,r){return Q.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:n.t0=c,n.next="edit"===n.t0?3:"delete"===n.t0?5:15;break;case 3:return Object(W.e)("/admin/content/modules/navigations/"+e+"/items/"+t+"/mappings/"+r),n.abrupt("break",16);case 5:return n.prev=5,n.next=8,Ed.deleteNavigationItemVariableMapping(e,t,r,{cancelToken:_.current.token});case 8:ct.a.success({message:a("table.delete-success")}),T(),n.next=14;break;case 12:n.prev=12,n.t1=n.catch(5);case 14:case 15:return n.abrupt("break",16);case 16:case"end":return n.stop()}}),n,null,[[5,12]])})));return function(e,t){return n.apply(this,arguments)}}(),["/admin",T,a,e,t]),A=Object(O.useCallback)(e=>{k(e)},[]);return Object(O.useEffect)(()=>{T()},[T]),Object(O.useEffect)(()=>{const e=_.current;return()=>e.cancel()},[]),j.a.createElement(at,{columns:Od(a,I),dataSource:r,loading:s,pagination:{current:h,pageSize:w,total:b,onChange:A}})};function hd(){const e=Object(r.a)(["\n  margin-bottom: 24px;\n"]);return hd=function(){return e},e}const kd=Object(l.c)(Zn)(hd()),xd=({navigationId:e,navigationItemId:t})=>{const a=Object(g.b)("navigation-item-variable-mappings").t,n=Object(O.useState)(),c=Object(v.a)(n,2),r=c[0],l=c[1],i=Object(O.useCallback)(function(){var a=Object(Z.a)(Q.a.mark((function a(n){var c,r;return Q.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,od.getNavigationItem(e,t,{cancelToken:n});case 2:c=a.sent,r=c.data,l(r);case 5:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}(),[e,t]),o=Object(O.useCallback)(()=>{if(r){const e=r.title,t=r.path,n=r.page;return[{key:"title",label:a("info.title"),value:e},{key:"path",label:a("info.path"),value:t||"-"},{key:"page",label:a("info.page"),value:n?n.name:"-"},{key:"page-status",label:a("info.page-status"),value:n?j.a.createElement(j.a.Fragment,null,j.a.createElement(Ut.a,{color:F[n.status]},n.status),n.is_published&&n.status!==Qt.PUBLISHED&&j.a.createElement(Ut.a,{color:F[Qt.PUBLISHED]},Qt.PUBLISHED)):"-"},{key:"page-path",label:a("info.page-path"),value:n?n.path:"-"},{key:"page-published-path",label:a("info.page-published-path"),value:n?n.published_path:"-"}]}return[]},[r,a]);return Object(O.useEffect)(()=>{const e=q.a.CancelToken.source();return i(e.token),()=>e.cancel()},[i]),j.a.createElement(kd,{loading:!r,items:o()})},yd=({navigationId:e,navigationItemId:t})=>{const a=Object(g.b)("navigation-item-variable-mappings").t,n=Object(O.useContext)(Pe).setSceneTitle,c=Object(O.useCallback)(()=>{Object(W.e)("/admin/content/modules/navigations/"+e+"/items/"+t+"/mappings/new")},["/admin",e,t]);return Object(O.useEffect)(()=>{n(j.a.createElement(Ze,{title:a("scene-title"),extraContent:j.a.createElement(cn,{title:a("scene-title.back-to-navigation-detail"),to:"/content/modules/navigations/".concat(e)})}))},[n,a,e]),j.a.createElement(Ve.a,{size:"large",direction:"vertical",style:{width:"100%"}},j.a.createElement(et,{size:"middle",type:"primary",icon:"plus",onClick:c},a("create-new-variable-mapping")),j.a.createElement(xd,{navigationId:e,navigationItemId:t}),j.a.createElement(vd,{navigationId:e,navigationItemId:t}))},wd=ha.a.Item,Cd=Ya.e().shape({variable_name:Ya.g().required(),value:Ya.g().required()}),_d=({navigationId:e,navigationItemId:t,navigationItemVariableMappingId:a,view:n})=>{const c=Object(g.b)("navigation-item-variable-item-mapping-detail").t,r=Object(O.useState)(),l=Object(v.a)(r,2),i=l[0],o=l[1],s=Object(O.useState)(!1),u=Object(v.a)(s,2),d=u[0],m=u[1],b=Object(O.useRef)(q.a.CancelToken.source()),p=i||{variable_name:void 0,value:void 0},f=Object(O.useCallback)(function(){var c=Object(Z.a)(Q.a.mark((function c(r){var l,i;return Q.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:if("detail"!==n||!a){c.next=14;break}return c.prev=1,m(!0),c.next=5,Ed.getNavigationItemVariableMapping(e,t,a,{cancelToken:r});case 5:l=c.sent,i=l.data,o(i),m(!1),c.next=14;break;case 11:c.prev=11,c.t0=c.catch(1),m(!1);case 14:case"end":return c.stop()}}),c,null,[[1,11]])})));return function(e){return c.apply(this,arguments)}}(),[n,e,t,a]),E=Object(O.useCallback)(function(){var r=Object(Z.a)(Q.a.mark((function r({variable_name:l,value:i}){var o;return Q.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(r.prev=0,m(!0),(o=new FormData).append("variable_name",l),o.append("value",i),"new"!==n){r.next=12;break}return r.next=8,Ed.createNavigationItemVariableMapping(e,t,o,{cancelToken:b.current.token});case 8:ct.a.success({message:c("create-success")}),Object(W.e)("/admin/content/modules/navigations/"+e+"/items/"+t+"/mappings"),r.next=17;break;case 12:if("detail"!==n||!a){r.next=17;break}return r.next=15,Ed.updateNavigationItemVariableMapping(e,t,a,o,{cancelToken:b.current.token});case 15:ct.a.success({message:c("update-success")}),Object(W.e)("/admin/content/modules/navigations/"+e+"/items/"+t+"/mappings");case 17:r.next=22;break;case 19:r.prev=19,r.t0=r.catch(0),m(!1);case 22:case"end":return r.stop()}}),r,null,[[0,19]])})));return function(e){return r.apply(this,arguments)}}(),["/admin",n,c,e,t,a]),h=Object(O.useCallback)(()=>j.a.createElement(va.a,{layout:"vertical"},j.a.createElement(wa,{label:c("form.variable-name"),name:"variable_name"},j.a.createElement(Oa.a,{name:"variable_name"})),j.a.createElement(wa,{label:c("form.value"),name:"value"},j.a.createElement(Oa.a,{name:"value"})),j.a.createElement(wd,null,j.a.createElement(H.a,{htmlType:"submit",type:"primary",size:"large",disabled:d},c("new"===n?"form.submit.new":"form.submit.detail")))),[c,n,d]);return Object(O.useEffect)(()=>{const e=q.a.CancelToken.source();return f(e.token),()=>e.cancel()},[f]),Object(O.useEffect)(()=>{const e=b.current;return()=>e.cancel()},[]),j.a.createElement(ma.c,{initialValues:p,enableReinitialize:!0,validate:e=>Ba(e,Cd),onSubmit:E},()=>h())},Td=({navigationId:e,navigationItemId:t,navigationItemVariableMappingId:a,view:n})=>{const c=Object(g.b)("navigation-item-variable-mapping-detail").t,r=Object(O.useContext)(Pe).setSceneTitle;return Object(O.useEffect)(()=>{r(j.a.createElement(Ze,{title:c("detail"===n?"scene-title.detail":"scene-title.new"),extraContent:j.a.createElement(cn,{title:c("scene-title.back-to-navigation-item-variable-mappings"),to:"/content/modules/navigations/"+e+"/items/"+t+"/mappings"})}))},[r,c,n,e,t]),j.a.createElement(_d,{navigationId:e,navigationItemId:t,navigationItemVariableMappingId:a,view:n})},Id=ha.a.Item,Ad=Ya.e().shape({name:Ya.g().required(),class_name:Ya.g().required()}),Sd=({buttonId:e,view:t})=>{const a=Object(g.b)("button-detail").t,n=Object(O.useState)(),c=Object(v.a)(n,2),r=c[0],l=c[1],i=Object(O.useState)(!1),o=Object(v.a)(i,2),s=o[0],u=o[1],d=Object(O.useRef)(q.a.CancelToken.source()),m=r||{name:void 0,class_name:void 0},b=Object(O.useCallback)(function(){var a=Object(Z.a)(Q.a.mark((function a(n){var c,r;return Q.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if("detail"!==t||!e){a.next=14;break}return a.prev=1,u(!0),a.next=5,yo.getButton(e,{cancelToken:n});case 5:c=a.sent,r=c.data,l(r),u(!1),a.next=14;break;case 11:a.prev=11,a.t0=a.catch(1),u(!1);case 14:case"end":return a.stop()}}),a,null,[[1,11]])})));return function(e){return a.apply(this,arguments)}}(),[t,e]),p=Object(O.useCallback)(function(){var n=Object(Z.a)(Q.a.mark((function n({name:c,class_name:r}){var l;return Q.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,u(!0),(l=new FormData).append("name",c),l.append("class_name",r),"new"!==t){n.next=12;break}return n.next=8,yo.createButton(l,{cancelToken:d.current.token});case 8:ct.a.success({message:a("create-success")}),Object(W.e)("/admin/content/modules/buttons"),n.next=17;break;case 12:if("detail"!==t||!e){n.next=17;break}return n.next=15,yo.updateButton(e,l,{cancelToken:d.current.token});case 15:ct.a.success({message:a("update-success")}),Object(W.e)("/admin/content/modules/buttons");case 17:n.next=22;break;case 19:n.prev=19,n.t0=n.catch(0),u(!1);case 22:case"end":return n.stop()}}),n,null,[[0,19]])})));return function(e){return n.apply(this,arguments)}}(),["/admin",t,a,e]),f=Object(O.useCallback)(()=>j.a.createElement(va.a,{layout:"vertical"},j.a.createElement(wa,{label:a("form.name"),name:"name"},j.a.createElement(Oa.a,{name:"name"})),j.a.createElement(wa,{label:a("form.class-name"),name:"class_name"},j.a.createElement(Oa.a,{name:"class_name"})),j.a.createElement(Id,null,j.a.createElement(H.a,{htmlType:"submit",type:"primary",size:"large",disabled:s},a("new"===t?"form.submit.new":"form.submit.detail")))),[a,t,s]);return Object(O.useEffect)(()=>{const e=q.a.CancelToken.source();return b(e.token),()=>e.cancel()},[b]),Object(O.useEffect)(()=>{const e=d.current;return()=>e.cancel()},[]),j.a.createElement(ma.c,{initialValues:m,enableReinitialize:!0,validate:e=>Ba(e,Ad),onSubmit:p},()=>f())},Ld=({buttonId:e,view:t})=>{const a=Object(g.b)("button-detail").t,n=Object(O.useContext)(Pe).setSceneTitle;return Object(O.useEffect)(()=>{n(j.a.createElement(Ze,{title:a("detail"===t?"scene-title.detail":"scene-title.new"),extraContent:j.a.createElement(cn,{title:a("scene-title.back-to-buttons"),to:"/content/modules/buttons"})}))},[n,a,t]),j.a.createElement(Sd,{buttonId:e,view:t})},Rd=({onClick:e})=>{const t=Object(g.b)("buttons").t,a=Object(O.useCallback)(t=>{e(t)},[e]),n=[{children:t("table.context-menu.edit"),onClick:()=>a("edit"),icon:"pen"},{children:t("table.context-menu.delete"),onClick:()=>a("delete"),icon:"trash-alt",dialog:{text:t("table.context-menu.delete-dialog.text"),cancel:t("table.context-menu.delete-dialog.cancel"),confirm:t("table.context-menu.delete-dialog.confirm")}}];return j.a.createElement("div",null,j.a.createElement(St,{items:n,"data-test":"Dropdown"},j.a.createElement(Yt,{size:"small"})))},Dd=(e,t)=>[{key:"id",dataIndex:"id",title:e("table.columns.id"),width:100},{key:"name",dataIndex:"name",title:e("table.columns.name")},{key:"context_menu",dataIndex:"context_menu",width:60,render:(e,{id:a})=>j.a.createElement(Rd,{onClick:e=>t&&t(e,a)}),fixed:"right"}],Gd=e=>e.map(({id:e,name:t})=>({key:String(e),id:e,name:t})),Nd=()=>{const e=Object(g.b)("buttons").t,t=Object(O.useState)([]),a=Object(v.a)(t,2),n=a[0],c=a[1],r=Object(O.useState)(!1),l=Object(v.a)(r,2),i=l[0],o=l[1],s=Object(O.useState)(0),u=Object(v.a)(s,2),d=u[0],m=u[1],b=Object(O.useState)(1),p=Object(v.a)(b,2),f=p[0],E=p[1],h=Object(O.useState)(0),k=Object(v.a)(h,2),x=k[0],y=k[1],w=Object(O.useRef)(q.a.CancelToken.source()),C=Object(O.useCallback)(Object(Z.a)(Q.a.mark((function e(){var t,a,n,r,l;return Q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o(!0),e.next=3,yo.getButtons(f,x,{cancelToken:w.current.token});case 3:t=e.sent,a=t.data,n=a.data,r=a.total,l=a.per_page,c(Gd(n)),m(r),y(l),o(!1);case 12:case"end":return e.stop()}}),e)}))),[f,x]),_=Object(O.useCallback)(function(){var t=Object(Z.a)(Q.a.mark((function t(a,n){return Q.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:t.t0=a,t.next="edit"===t.t0?3:"delete"===t.t0?5:15;break;case 3:return Object(W.e)("/admin/content/modules/buttons/"+n),t.abrupt("break",16);case 5:return t.prev=5,t.next=8,yo.deleteButton(n,{cancelToken:w.current.token});case 8:ct.a.success({message:e("table.delete-success")}),C(),t.next=14;break;case 12:t.prev=12,t.t1=t.catch(5);case 14:case 15:return t.abrupt("break",16);case 16:case"end":return t.stop()}}),t,null,[[5,12]])})));return function(e,a){return t.apply(this,arguments)}}(),["/admin",C,e]),T=Object(O.useCallback)(e=>{E(e)},[]);return Object(O.useEffect)(()=>{C()},[C]),Object(O.useEffect)(()=>{const e=w.current;return()=>e.cancel()},[]),j.a.createElement(at,{columns:Dd(e,_),dataSource:n,loading:i,pagination:{current:f,pageSize:x,total:d,onChange:T}})},Md=()=>{const e=Object(g.b)("buttons").t,t=Object(O.useContext)(Pe).setSceneTitle,a=Object(O.useCallback)(()=>{Object(W.e)("/admin/content/modules/buttons/new")},["/admin"]);return Object(O.useEffect)(()=>{t(j.a.createElement(Ze,{title:e("scene-title")}))},[t,e]),j.a.createElement(Ve.a,{size:"large",direction:"vertical",style:{width:"100%"}},j.a.createElement(et,{size:"middle",type:"primary",icon:"plus",onClick:a},e("create-new-button")),j.a.createElement(Nd,null))},Pd=()=>{const e=ie();return Object(O.useEffect)(()=>{e(fu())},[e]),j.a.createElement(W.c,{primary:!1},j.a.createElement(qr,{path:"/admin/"},j.a.createElement(ze,{path:"/"},j.a.createElement(Fe,{path:"/"}),j.a.createElement(ra,{path:"/content"}),j.a.createElement(mu,{path:"/content/new",view:"new",key:"content-new"}),j.a.createElement(mu,{path:"/content/:identifier",view:"detail",key:"content-detail"}),j.a.createElement(yl,{path:"/content/views"}),j.a.createElement(Tl,{path:"/content/views/new",view:"new",key:"view-new"}),j.a.createElement(Tl,{path:"/content/views/:viewId",view:"detail",key:"view-detail"}),j.a.createElement(Fl,{path:"content/layouts"}),j.a.createElement(oi,{path:"content/layouts/new",view:"new",key:"layout-new"}),j.a.createElement(oi,{path:"content/layouts/:layoutId",view:"detail",key:"layout-detail"}),j.a.createElement(Dl,{path:"/content/templates"}),j.a.createElement(fi,{path:"/content/templates/new",view:"new",key:"template-new"}),j.a.createElement(fi,{path:"/content/templates/:templateId",view:"detail",key:"template-detail"}),j.a.createElement(ku,{path:"/content/variable-name-actions"}),j.a.createElement(Tu,{path:"/content/variable-name-actions/new",view:"new",key:"variable-name-action-new"}),j.a.createElement(Tu,{path:"/content/variable-name-actions/:variableNameActionId",view:"detail",key:"variable-name-action-detail"}),j.a.createElement(Md,{path:"/content/modules/buttons"}),j.a.createElement(Ld,{path:"/content/modules/buttons/new",view:"new",key:"button-new"}),j.a.createElement(Ld,{path:"/content/modules/buttons/:buttonId",view:"detail",key:"button-detail"}),j.a.createElement(Ru,{path:"/content/modules/navigations"}),j.a.createElement(ld,{path:"/content/modules/navigations/new",view:"new",key:"navigation-new"}),j.a.createElement(ld,{path:"/content/modules/navigations/:navigationId",view:"detail",key:"navigation-detail"}),j.a.createElement(gd,{path:"/content/modules/navigations/:navigationId/items/new",view:"new",key:"navigation-item-new"}),j.a.createElement(gd,{path:"/content/modules/navigations/:navigationId/items/:navigationItemId",view:"detail",key:"navigation-item-detail"}),j.a.createElement(yd,{path:"/content/modules/navigations/:navigationId/items/:navigationItemId/mappings"}),j.a.createElement(Td,{path:"/content/modules/navigations/:navigationId/items/:navigationItemId/mappings/new",key:"navigation-item-variable-mapping-new",view:"new"}),j.a.createElement(Td,{path:"/content/modules/navigations/:navigationId/items/:navigationItemId/mappings/:navigationItemVariableMappingId",key:"navigation-item-variable-mapping-detail",view:"detail"}),j.a.createElement(Sa,{path:"/catalog"}),j.a.createElement(zr,{path:"/catalog/new",view:"new",key:"catalog-new"}),j.a.createElement(zr,{path:"/catalog/:catalogItemId",view:"detail",key:"catalog-detail"}),j.a.createElement(za,{path:"/catalog/templates"}),j.a.createElement(rn,{path:"/catalog/templates/new",view:"new",key:"catalog-template-new"}),j.a.createElement(rn,{path:"/catalog/templates/:catalogItemTemplateId",view:"detail",key:"catalog-template-detail"}),j.a.createElement(gn,{path:"/catalog/templates/:catalogItemTemplateId/fields/new",view:"new",key:"catalog-template-field-new"}),j.a.createElement(gn,{path:"/catalog/templates/:catalogItemTemplateId/fields/:catalogItemTemplateFieldId",view:"detail",key:"catalog-template-field-detail"}),j.a.createElement(Qr,{path:"/catalog/categories"}),j.a.createElement(Kr,{path:"/catalog/categories/new",view:"new",key:"catlaog-category-new"}),j.a.createElement(Kr,{path:"/catalog/categories/:catalogCategoryId",view:"detail",key:"catlaog-category-detail"}),j.a.createElement(In,{path:"/catalog/languages"}),j.a.createElement(Gn,{path:"/catalog/languages/new",view:"new",key:"catalog-language-new"}),j.a.createElement(Gn,{path:"/catalog/languages/:code",view:"detail",key:"catalog-language-detail"}),j.a.createElement(nl,{path:"/catalog/currencies"}),j.a.createElement(gl,{path:"/catalog/currencies/new",view:"new",key:"catalog-currency-new"}),j.a.createElement(gl,{path:"/catalog/currencies/:catalogCurrencyId",view:"detail",key:"catalog-currency-detail"}),j.a.createElement(El,{view:"new",path:"/catalog/currencies/:catalogCurrencyId/tax-rates/new",key:"catalog-currency-tax-rate-new"}),j.a.createElement(El,{view:"detail",path:"/catalog/currencies/:catalogCurrencyId/tax-rates/:catalogCurrencyTaxRateId",key:"catalog-currency-tax-rate-detail"}),j.a.createElement(La,{path:"/forms"}),j.a.createElement(Ra,{path:"/settings"}),j.a.createElement(xn,{path:"/redirect-to"}),j.a.createElement(W.b,{noThrow:!0,from:"/*",to:"/admin/status/page-not-found"})),j.a.createElement(hn,{path:"/status/"},j.a.createElement(On,{path:"/internal-server-error"}),j.a.createElement(kn,{path:"/page-not-found"}))))},zd=()=>{const e=(()=>{const e={location:W.d.location,navigate:W.d.navigate},t=Object(O.useState)(e),a=Object(v.a)(t,2),n=a[0],c=a[1];return Object(O.useEffect)(()=>{const t=W.d.listen(({location:t})=>{c(Object(X.a)({},e,{},{location:t}))});return()=>{t()}},[e]),n})(),t=e.location,a=e.location,c=a.pathname,r=a.href;return{location:t,setTrackPageView:()=>{n.a.send({page:c,location:r,hitType:"pageview"})}}};var Fd=a(349),Yd=a.n(Fd);function Vd(){const e=Object(r.a)(["\n  width: 170px;\n  height: auto;\n  margin-bottom: 24px;\n"]);return Vd=function(){return e},e}function Bd(){const e=Object(r.a)(["\n  display: flex;\n  flex-direction: column;\n"]);return Bd=function(){return e},e}function Hd(){const e=Object(r.a)(["\n  width: 400px;\n  min-height: initial;\n"]);return Hd=function(){return e},e}const Wd=ha.a.Item,Ud=Object(l.c)(V)(Hd()),Qd=l.c.div(Bd()),Zd=l.c.img(Vd()),Jd=Ya.e().shape({email:Ya.g().required(),password:Ya.g().required()}),Xd=()=>{const e=Object(g.b)("login").t,t=Object(le.c)(e=>e.session).isLoggingIn,a=ie(),n={email:void 0,password:void 0},c=Object(O.useCallback)(({email:e,password:t})=>{a(ne(e,t))},[a]),r=Object(O.useCallback)(()=>j.a.createElement(va.a,{layout:"vertical"},j.a.createElement(wa,{label:e("form.email"),name:"email"},j.a.createElement(Oa.a,{name:"email",disabled:t})),j.a.createElement(wa,{label:e("form.password"),name:"password"},j.a.createElement(Oa.a,{name:"password",type:"password",disabled:t})),j.a.createElement(Wd,null,j.a.createElement(H.a,{htmlType:"submit",type:"primary",size:"large",disabled:t},e("form.submit")))),[e,t]);return j.a.createElement(Qd,null,j.a.createElement(Zd,{src:Yd.a}),j.a.createElement(Ud,null,j.a.createElement(ma.c,{initialValues:n,validate:e=>Ba(e,Jd),onSubmit:c},()=>r())))};function Kd(){const e=Object(r.a)(["\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  min-height: 100vh;\n  background: ",";\n"]);return Kd=function(){return e},e}const qd=h.a.Content,$d=Object(l.c)(qd)(Kd(),A),em=({children:e})=>j.a.createElement(h.a,null,j.a.createElement($d,null,e)),tm=()=>{const e=ie();return Object(O.useEffect)(()=>{e(gu())},[e]),j.a.createElement(W.c,{primary:!1},j.a.createElement(em,{path:"/admin/"},j.a.createElement(Xd,{path:"/*"})))};var am=()=>{const e=Object(g.b)().t,t=zd(),a=t.location,n=t.setTrackPageView,c=Object(le.c)(e=>e.session).isLoggedIn;return Object(O.useEffect)(()=>{n()},[a,n]),j.a.createElement(j.a.Fragment,null,j.a.createElement(E.Helmet,null,j.a.createElement("title",null,e("html-title"))),c?j.a.createElement(Pd,null):j.a.createElement(tm,null))},nm=a(21),cm=a.n(nm),rm=a(228),lm=a.n(rm);var im=a(182),om=a(20),sm=a(350);function um(){const e=Object(r.a)(["\n  && {\n    background: ",";\n  }\n"]);return um=function(){return e},e}function dm(){const e=Object(r.a)(["\n  && {\n    background-color: ",";\n  }\n"]);return dm=function(){return e},e}const mm=h.a.Content,bm=h.a.Footer,pm=Object(l.c)(Me)(dm(),C),gm=Object(l.c)(Yn.a)(um(),y),fm=()=>j.a.createElement(Ne,null,j.a.createElement(pm,null),j.a.createElement(Ge,null,j.a.createElement(gm,{active:!0,title:{width:250},paragraph:!1})),j.a.createElement(De,null,j.a.createElement(mm,null,j.a.createElement(V,null,j.a.createElement(Yn.a,{active:!0,paragraph:{rows:4,width:550}})))),j.a.createElement(bm,null));var Om=a(186),jm=a(351),Em=a(70),vm=a(655);const hm={isLoggedIn:!!lm.a.get("AUTH_USER"),isLoggingIn:!1},km=Object(vm.a)({REQUEST_LOGIN:e=>Object(X.a)({},e,{isLoggingIn:!0}),RECEIVE_LOGIN:(e,t)=>Object(X.a)({},e,{isLoggedIn:t.payload,isLoggingIn:!1}),LOGOUT_CLEAR_STATE:e=>Object(X.a)({},e,{isLoggedIn:!1})},hm),xm={contentSidePanel:{top:20,left:20}},ym=Object(vm.a)({SET_CONTENT_SIDE_PANEL_POSITION:(e,t)=>Object(X.a)({},e,{contentSidePanel:t.payload})},xm),wm={previews:{}},Cm=Object(vm.a)({SET_TEMPLATE_PREVIEW:(e,t)=>Object(X.a)({},e,{previews:Object(X.a)({},e.previews,{[t.payload.path]:Object(X.a)({},e.previews[t.payload.path],{[t.payload.moduleName]:t.payload.data})})}),CLEAR_TEMPLATE_PREVIEWS:e=>Object(X.a)({},e,{previews:{}})},wm),_m={session:hm,user:xm,templates:wm},Tm=Object(Em.combineReducers)({session:km,user:ym,templates:Cm});var Im=a(352),Am=a(353),Sm=a.n(Am),Lm=a(354),Rm=a(355),Dm=a.n(Rm);const Gm={1:e=>{if(e)return Object(X.a)({},e,{session:hm,user:xm,templates:wm})}},Nm={key:"root",version:1,storage:Sm.a,whitelist:["user","templates"],migrate:Object(Om.a)(Gm,{debug:!1})},Mm=Object(Em.createStore)(Object(Om.b)(Nm,Tm),_m,Object(Im.composeWithDevTools)(Object(Em.applyMiddleware)(Dm()(),Lm.a)));var Pm,zm=a(649),Fm=a(356);(()=>{const e=window._envConfig.CMS_BASE_URL;q.a.interceptors.request.use(t=>Object(X.a)({},t,{baseURL:e,headers:{Authorization:"Bearer ".concat(lm.a.get("AUTH_USER")),Credentials:"same-origin"}}))})(),Pm=Mm,q.a.interceptors.response.use(e=>e,e=>((e,t)=>{if(e.response&&!q.a.isCancel(e)){if((a=e.config)&&a.errorHandlerDisabled)return Promise.reject(Object(X.a)({},e));if(e.response)if(500===e.response.status)Object(W.e)("/admin/status/internal-server-error");else if(405===e.response.status)ct.a.error({message:j.a.createElement(j.a.Fragment,null,"405 Method not allowed"),duration:10});else if(401===e.response.status)t.dispatch(ae());else if("object"===typeof e.response.data){const t=[],a=e.response.data;return Object.keys(a).forEach(e=>{a[e].forEach(e=>{t.push(e)})}),ct.a.error({message:j.a.createElement(j.a.Fragment,null,t.map((e,t)=>j.a.createElement("div",{key:t},e))),duration:10}),Promise.reject(Object(X.a)({},e))}}var a;throw e})(e,Pm)),im.b.add(om.a,om.i,om.j,sm.a,om.r,om.s,om.t,om.u,om.v,om.w,om.x,om.z,om.B,om.k,om.I,om.J,om.K,om.L,om.L,om.M,om.N,om.Q,om.R,om.S,om.T,om.W,om.X,om.Y,om.Z,om.ab,om.n,om.p,om.o,om.f,om.e,om.m,om.l,om.c,om.d,om.g,om.A,om.y,om.h,om.b,om.C,om.D,om.E,om.q,om.O,om.G,om.F,om.H,om.V,om.U,om.P),c(),cm.a.render(j.a.createElement(zm.a,{backend:Fm.a},j.a.createElement(le.a,{store:Mm},j.a.createElement(jm.a,{loading:null,persistor:Object(Om.c)(Mm)},j.a.createElement(O.Suspense,{fallback:j.a.createElement(fm,null)},j.a.createElement(am,null),j.a.createElement(o,null))))),document.getElementById("root"))}},[[364,1,2]]]);
//# sourceMappingURL=main.a1b55a4b.chunk.js.map