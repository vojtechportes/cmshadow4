{"version":3,"sources":["assets/images/logo.png","assets/images/logo_lg.png","tracking.ts","GlobalStyle.ts","i18n/index.ts","i18n/format.ts","constants/colors.tsx","components/Paper.tsx","api/User.ts","state/actions/session.ts","hooks/useThunkDispatch.ts","components/Navigation.tsx","components/Logo.tsx","components/Sidebar.tsx","state/actions/user.ts","components/SidepanelDragProvider.tsx","components/Layout/AuthenticatedLayout/index.tsx","scenes/Dashboard/index.tsx","components/SceneTitle.tsx","components/Icon.tsx","components/IconButton.tsx","components/Table.tsx","api/Pages.ts","components/Backdrop.tsx","components/Dialog.tsx","components/Dropdown.tsx","assets/images/icon-context-menu.svg","components/IconContextMenu.tsx","components/DropdownButton.tsx","scenes/Content/components/Dropdown.tsx","constants/date.tsx","model/api/PageStatusEnum.ts","scenes/Content/utils/getPagesColumns.tsx","scenes/Content/utils/mapPages.ts","scenes/Content/components/Table.tsx","scenes/Content/index.tsx","api/CatalogItems.ts","scenes/Catalog/components/Dropdown.tsx","scenes/Catalog/utils/getCatalogItemsColumns.tsx","scenes/Catalog/utils/mapCatalogItems.tsx","scenes/Catalog/components/Table.tsx","api/CatalogCategories.ts","mappers/mapCatalogCategories.ts","components/CustomErrorMessage.tsx","components/FormikFormItem.tsx","scenes/Catalog/components/Filters.tsx","scenes/Catalog/index.tsx","scenes/Forms/index.tsx","scenes/Settings/index.tsx","api/CatalogItemTemplates.ts","scenes/CatalogTemplates/components/Dropdown.tsx","scenes/CatalogTemplates/utils/getCatalogTemplatesColumns.tsx","scenes/CatalogTemplates/utils/mapCatalogTemplates.tsx","scenes/CatalogTemplates/components/Table.tsx","scenes/CatalogTemplates/index.tsx","config/yup/index.ts","api/Views.ts","scenes/CatalogTemplateDetail/components/Form.tsx","api/CatalogItemTemplateFields.ts","scenes/CatalogTemplateDetail/utils/mapCatalogTemplateFields.tsx","scenes/CatalogTemplateDetail/components/Dropdown.tsx","scenes/CatalogTemplateDetail/utils/getCatalogTemplateFieldsColumns.tsx","scenes/CatalogTemplateDetail/components/Fields.tsx","components/BackButton.tsx","scenes/CatalogTemplateDetail/index.tsx","model/api/CatalogItemTemplateFieldTypeEnum.ts","scenes/CatalogTemplateFieldDetail/utils/mapCatalogTemplateField.ts","scenes/CatalogTemplateFieldDetail/components/Form.tsx","scenes/CatalogTemplateFieldDetail/index.tsx","scenes/InternalServerError/index.tsx","components/Layout/AuthenticatedErrorLayout/index.tsx","scenes/PageNotFound/index.tsx","scenes/RedirectTo/index.tsx","api/CatalogLanguages.ts","scenes/CatalogLanguages/components/Dropdown.tsx","scenes/CatalogLanguages/utils/getCatalogLanguagesColumns.tsx","scenes/CatalogLanguages/utils/mapCatalogLanguages.ts","scenes/CatalogLanguages/components/Table.tsx","scenes/CatalogLanguages/index.tsx","api/CatalogCurrencies.ts","scenes/CatalogLanguageDetail/components/Form.tsx","scenes/CatalogLanguageDetail/index.tsx","api/CatalogItemTemplateFieldValues.ts","scenes/CatalogDetail/components/CreateForm.tsx","components/Info.tsx","scenes/CatalogDetail/components/DetailInfo.tsx","types/isFieldValueMultilingual.ts","scenes/CatalogDetail/components/Fields/utils/render.tsx","scenes/CatalogDetail/components/Fields/styles.ts","scenes/CatalogDetail/components/Fields/String.tsx","scenes/CatalogDetail/components/Fields/Boolean.tsx","scenes/CatalogDetail/components/Fields/Date.tsx","scenes/CatalogDetail/components/Fields/DateTime.tsx","scenes/CatalogDetail/components/Fields/Integer.tsx","scenes/CatalogDetail/components/Fields/utils/getExtraContentFieldValue.ts","scenes/CatalogDetail/components/Fields/utils/getExtraContentFieldName.ts","scenes/CatalogDetail/components/Fields/Link.tsx","scenes/CatalogDetail/components/Fields/Text.tsx","constants/tinymce.tsx","components/RichTextFormik.tsx","scenes/CatalogDetail/components/Fields/RichText.tsx","components/Header.tsx","scenes/CatalogDetail/components/Fields/utils/getFieldName.ts","scenes/CatalogDetail/components/Fields/types/GalleryTypes.ts","scenes/CatalogDetail/components/Fields/components/GalleryImage.tsx","utils/getBase64.ts","scenes/CatalogDetail/components/Fields/components/UploadedGalleryImage.tsx","scenes/CatalogDetail/components/Fields/utils/getFieldValue.ts","scenes/CatalogDetail/components/Fields/Gallery.tsx","scenes/CatalogDetail/components/Fields/Price.tsx","scenes/CatalogDetail/components/Fields/TaxRate.tsx","api/CatalogCurrencyTaxRates.ts","scenes/CatalogDetail/components/Fields/components/UploadedImage.tsx","scenes/CatalogDetail/components/Fields/Image.tsx","scenes/CatalogDetail/components/Data.tsx","scenes/CatalogDetail/components/Categories.tsx","api/CatalogItemCategories.ts","scenes/CatalogDetail/components/Form.tsx","scenes/CatalogDetail/hooks/useGetInitialValues.ts","scenes/CatalogDetail/index.tsx","scenes/CatalogCategories/components/Tree.tsx","scenes/CatalogCategories/components/Dropdown.tsx","scenes/CatalogCategories/index.tsx","scenes/CatalogCategoryDetail/components/Form.tsx","scenes/CatalogCategoryDetail/index.tsx","components/ScrollToTop.tsx","scenes/CatalogCurrencies/components/Dropdown.tsx","scenes/CatalogCurrencies/utils/getCatalogCurrenciesColumns.tsx","scenes/CatalogCurrencies/utils/mapCatalogCurrencies.ts","scenes/CatalogCurrencies/components/Table.tsx","scenes/CatalogCurrencies/index.tsx","scenes/CatalogCurrencyDetail/utils/mapCatalogCurrency.ts","scenes/CatalogCurrencyDetail/components/Form.tsx","scenes/CatalogCurrencyDetail/components/Dropdown.tsx","scenes/CatalogCurrencyDetail/utils/getCatalogTaxRatesColumns.tsx","scenes/CatalogCurrencyDetail/utils/mapCatalogTaxRates.ts","scenes/CatalogCurrencyDetail/components/TaxRates.tsx","scenes/CatalogCurrencyDetail/index.tsx","scenes/CatalogCurrencyTaxRateDetail/components/Form.tsx","scenes/CatalogCurrencyTaxRateDetail/index.tsx","scenes/Views/components/Dropdown.tsx","scenes/Views/utils/getViewsColumns.tsx","scenes/Views/utils/mapViews.ts","scenes/Views/components/Table.tsx","scenes/Views/index.tsx","scenes/ViewDetail/components/Form.tsx","scenes/ViewDetail/index.tsx","scenes/Templates/components/Dropdown.tsx","scenes/Templates/utils/getTemplatesColumns.tsx","api/Templates.ts","scenes/Templates/utils/mapTemplates.ts","scenes/Templates/components/Table.tsx","scenes/Templates/index.tsx","scenes/Layouts/components/Dropdown.tsx","scenes/Layouts/utils/getLayoutsColumns.tsx","api/Layouts.ts","scenes/Layouts/utils/mapLayouts.ts","scenes/Layouts/components/Table.tsx","scenes/Layouts/index.tsx","scenes/LayoutDetail/components/Form.tsx","api/LayoutSlots.ts","scenes/LayoutDetail/utils/mapLayoutSlot.ts","scenes/LayoutDetail/components/SlotModal.tsx","scenes/LayoutDetail/components/Slots.tsx","scenes/LayoutDetail/index.tsx","scenes/TemplateDetail/utils/mapTemplateDetail.ts","api/TemplatePages.ts","scenes/TemplateDetail/components/Form.tsx","scenes/TemplateDetail/index.tsx","mappers/mapPages.ts","scenes/ContentDetail/hooks/useGetPropertiesData.ts","scenes/ContentDetail/components/Form.tsx","api/Modules.ts","model/api/ModuleTypeEnum.ts","model/api/PageTypeEnum.ts","api/TextModules.ts","api/CatalogListingModules.ts","api/NavigationModules.ts","api/ButtonModules.ts","api/ImageModules.ts","api/HeadingModules.ts","api/CatalogItemModules.ts","api/CatalogCategoryTreeModules.ts","api/CatalogCategoryModules.ts","api/CatalogDetailModules.ts","api/CatalogSearchModules.ts","scenes/ContentDetail/hooks/useGetPageData.ts","scenes/ContentDetail/components/SlotControls.tsx","scenes/ContentDetail/components/Modules/styles.tsx","components/JSXParser.tsx","scenes/ContentDetail/components/Modules/Controls.tsx","components/RichText.tsx","scenes/ContentDetail/types/ItemTypes.ts","scenes/ContentDetail/utils/findModule.ts","scenes/ContentDetail/hooks/useModuleSort.ts","scenes/ContentDetail/hooks/useModuleUpdate.ts","model/api/HeadingModuleLevelEnum.ts","utils/iterableEnum.ts","scenes/ContentDetail/components/Modules/Heading/Configuration.tsx","scenes/ContentDetail/hooks/useGetTemplatePreview.ts","scenes/ContentDetail/hooks/useDeleteModule.ts","scenes/ContentDetail/components/Modules/Heading/index.tsx","scenes/ContentDetail/components/Modules/Text/index.tsx","api/Buttons.ts","model/api/ButtonModuleTargetEnum.ts","scenes/ContentDetail/components/Modules/Button/Configuration.tsx","scenes/ContentDetail/components/Modules/Button/index.tsx","scenes/ContentDetail/components/Modules/CatalogListing/List.tsx","scenes/ContentDetail/components/Modules/CatalogListing/Configuration.tsx","scenes/ContentDetail/components/Modules/CatalogListing/index.tsx","scenes/ContentDetail/components/Modules/CatalogItem/Configuration.tsx","scenes/ContentDetail/components/Modules/CatalogItem/index.tsx","scenes/ContentDetail/components/Modules/CatalogDetail/Configuration.tsx","scenes/ContentDetail/components/Modules/CatalogDetail/index.tsx","scenes/ContentDetail/components/Modules/CatalogSearch/Configuration.tsx","scenes/ContentDetail/components/Modules/CatalogSearch/index.tsx","api/Navigations.ts","scenes/ContentDetail/components/Modules/Navigation/Configuration.tsx","scenes/ContentDetail/components/Modules/Navigation/index.tsx","scenes/ContentDetail/components/Modules/Image/Configuration.tsx","scenes/ContentDetail/components/Modules/Image/index.tsx","scenes/ContentDetail/components/Modules/CatalogCategoryTree/Configuration.tsx","scenes/ContentDetail/components/Modules/CatalogCategoryTree/index.tsx","scenes/ContentDetail/components/Modules/CatalogCategory/Configuration.tsx","scenes/ContentDetail/components/Modules/CatalogCategory/index.tsx","scenes/ContentDetail/components/SlotModules.tsx","scenes/ContentDetail/components/Slot.tsx","scenes/ContentDetail/hooks/useModuleMove.ts","scenes/ContentDetail/components/Styles.tsx","api/Styles.ts","scenes/ContentDetail/components/SidePanelItem.tsx","scenes/ContentDetail/components/SidePanel.tsx","scenes/ContentDetail/components/Editor.tsx","scenes/ContentDetail/components/Properties/General.tsx","model/api/PageMetaRobotsEnum.ts","scenes/ContentDetail/components/Properties/Meta.tsx","scenes/ContentDetail/components/Properties/Advanced.tsx","scenes/ContentDetail/components/Properties/index.tsx","scenes/ContentDetail/hooks/useSave.ts","scenes/ContentDetail/components/Versions/Dropdown.tsx","scenes/ContentDetail/utils/getPageVersionsColumns.tsx","scenes/ContentDetail/components/Versions/index.tsx","scenes/ContentDetail/components/DetailForm.tsx","scenes/ContentDetail/hooks/useGetPropertiesInitialValues.ts","scenes/ContentDetail/utils/mapPageVersions.ts","scenes/ContentDetail/index.tsx","scenes/ContentDetail/hooks/useGetPageVersions.ts","api/TemplatePreview.ts","state/actions/templates.ts","api/VariableNameActions.ts","scenes/VariableNameActions/utils/mapVariableNameActions.ts","scenes/VariableNameActions/components/Dropdown.tsx","scenes/VariableNameActions/utils/getVariableNameActionsColumns.tsx","scenes/VariableNameActions/components/Table.tsx","scenes/VariableNameActions/index.tsx","model/api/VariableNameActionActionEnum.ts","scenes/VariableNameActionDetail/components/Form.tsx","scenes/VariableNameActionDetail/index.tsx","scenes/Navigations/components/Dropdown.tsx","scenes/Navigations/utils/getNavigationColumns.tsx","scenes/Navigations/utils/mapNavigations.ts","scenes/Navigations/components/Table.tsx","scenes/Navigations/index.tsx","scenes/NavigationDetail/components/Form.tsx","scenes/NavigationDetail/components/Tree.tsx","scenes/NavigationDetail/components/Dropdown.tsx","scenes/NavigationDetail/components/Items.tsx","scenes/NavigationDetail/index.tsx","model/api/NavigationItemTargetEnum.ts","api/NavigationItems.ts","mappers/mapNavigationItems.ts","utils/expandTree.ts","scenes/NavigationItemDetail/components/Form.tsx","scenes/NavigationItemDetail/index.tsx","scenes/NavigationItemVariableMappings/components/Dropdown.tsx","scenes/NavigationItemVariableMappings/utils/getNavigationItemVariableMappingsColumns.tsx","scenes/NavigationItemVariableMappings/utils/mapNavigationItemVariableMappings.ts","api/NavigationItemVariableMappings.ts","scenes/NavigationItemVariableMappings/components/Table.tsx","scenes/NavigationItemVariableMappings/components/DetailInfo.tsx","scenes/NavigationItemVariableMappings/index.tsx","scenes/NavigationItemVariableMappingDetail/components/Form.tsx","scenes/NavigationItemVariableMappingDetail/index.tsx","scenes/ButtonDetail/components/Form.tsx","scenes/ButtonDetail/index.tsx","scenes/Buttons/components/Dropdown.tsx","scenes/Buttons/utils/getButtonsColumns.tsx","scenes/Buttons/utils/mapButtons.ts","scenes/Buttons/components/Table.tsx","scenes/Buttons/index.tsx","components/Router/AuthenticatedRouter/index.tsx","hooks/useTrackPageView.ts","hooks/useLocation.ts","scenes/Login/index.tsx","components/Layout/AnonymousLayout/index.tsx","components/Router/AnonymousRouter/index.tsx","App.tsx","components/Layout/AuthenticatedLoadingLayout/index.tsx","state/reducers/session.ts","state/reducers/user.ts","state/reducers/templates.ts","state/rootReducer.ts","state/store.ts","axiosConfig.tsx","index.tsx","constants/icons.tsx"],"names":["module","exports","initializeTracking","ReactGA","initialize","String","window","_envConfig","GA_TRACKING_CODE","GlobalStyle","createGlobalStyle","options","load","ns","fallbackLng","defaultNS","backend","loadPath","process","detection","order","caches","lookupLocalStorage","interpolation","format","value","Date","dateFormat","escapeValue","react","bindI18n","i18n","use","LanguageDetector","xhr","initReactI18next","init","COLORS","CATALOG_FIELD_TYPE_COLORS","TEXT","BOOLEAN","DATE","DATE_TIME","GALLERY","IMAGE","INTEGER","LINK","RICH_TEXT","STRING","PRICE","TAX_RATE","PAGE_STATUS_COLORS","PUBLISHED","DELETED","UNPUBLISHED","DRAFT","Paper","styled","div","UserApi","data","config","axios","method","url","requestLogin","createAction","receiveLogin","logoutClearState","login","email","password","dispatch","a","FormData","append","logout","PUBLIC_URL","forceLogout","navigate","useThunkDispatch","useDispatch","Item","Menu","LogoutButton","Button","Navigation","t","useTranslation","matchedPath","useLocation","pathname","replace","getSelectedKeys","useCallback","activeKey","startsWith","handleClick","key","to","handleLogout","theme","mode","selectedKeys","onClick","type","shape","size","StyledLogo","logo","Logo","SubMenu","Sider","Layout","StyledMenu","Sidebar","renderMenu","includes","defaultSelectedKeys","disabled","title","width","setContentSidePanelPosition","SidePanelTypes","SidePanelDragProvider","children","useDrop","accept","drop","item","monitor","delta","getDifferenceFromInitialOffset","left","Math","round","x","top","y","moveSidePanel","ref","Content","Header","Footer","Main","Container","StyledLayout","StyledHeader","AuthenticatedLayoutContext","createContext","AuthenticatedLayout","useState","sceneTitle","setSceneTitle","Provider","getFullYear","Dashboard","Title","Typography","StyledTitle","ExtraContentContainer","SceneTitle","extraContent","Helmet","direction","level","style","fontSize","Icon","icon","color","className","transform","StyledIcon","IconButton","rest","iconSize","Table","columns","dataSource","loading","pagination","isScrollable","scrollableWidth","reduce","accumulator","currentValue","parseInt","scroll","undefined","tableLayout","PagesApi","parent","page","pageSize","params","per_page","identifier","version","Backdrop","background","show","Buttons","Text","DialogContainer","Dialog","showBackdrop","text","confirm","cancel","onConfirm","onCancel","keyDownComponent","handleCancel","event","KeyboardEvent","keyCode","target","currentTarget","useEffect","addEventListener","removeEventListener","MenuBase","Divider","StyledItem","Wrapper","StyledDialog","ICON_COLOR","rgba","ICON_COLOR_DISABLED","itemBuilder","closeOnClick","dialog","index","handleDialogToggle","isDialogOpen","itemContent","data-test","Dropdown","items","trigger","visible","setVisible","setIsDialogOpen","overlayItems","i","hasDivider","push","renderOverlay","overlay","onVisibleChange","flag","_extends","Object","assign","arguments","length","source","prototype","hasOwnProperty","call","apply","this","_objectWithoutProperties","excluded","sourceKeys","keys","indexOf","_objectWithoutPropertiesLoose","getOwnPropertySymbols","sourceSymbolKeys","propertyIsEnumerable","createElement","id","d","SvgIconContextMenu","_ref","svgRef","props","height","viewBox","ForwardRef","forwardRef","GRAY","IconContextMenu","fill","StyledButton","DropdownButton","action","DATE_TIME_FORMAT","DATEPICKER_DATE_FORMAT","DATEPICKER_DATE_TIME_FORMAT","PageStatusEnum","Name","TagGroup","isPublished","css","getPagesColumns","dataIndex","render","has_children","name","is_published","_","mapPages","map","path","created_at","created_by","modified_at","modified_by","status","StyledTable","TableBase","location","setData","setLoading","total","setTotal","setPage","parentPage","setParentPage","setPageSize","cancelTokenRef","useRef","CancelToken","parse","search","getData","getPages","cancelToken","current","token","getParentPage","getPage","handleActionClick","publishPage","notification","success","message","unpublishPage","deletePage","handlePageChange","handleLevelUp","onChange","useContext","handleCreatePage","CatalogItemsApi","categories","sku","category","languageCode","categoryId","language_code","category_id","catalogItemId","language","isListing","is_listing","disabledActions","getCatalogItemsColumns","fixed","record","published","mapCatalogItems","field_name_value","field_sku_value","published_at","filters","getCatalogItems","publishCatalogItem","unpublishCatalogItem","deleteCatalogItem","CatalogCategoriesApi","parentCategoryId","publishedOnly","withDetail","parent_category_id","published_only","with_detail","catalogCategoryId","mapCatalogCategories","noCategoryOption","mappedCategorires","mapObject","deep","unshift","parent_id","weight","StyledErrorMessage","CustomErrorMessage","error","FormikFormItem","showValidateSuccess","showInitialErrorAfterTouched","validate","restProps","form","errors","touched","initialErrors","getIn","initialError","isTouched","Array","isArray","acc","hasError","hasInitialError","isValid","showHelp","validateStatus","hasFeedback","help","SHOW_ALL","TreeSelectAntd","ItemAntd","FormAntd","Panel","Collapse","filtersInitialValues","Filters","onSubmit","setCategories","handleSubmit","categoryIds","forEach","getCatalogCategories","renderForm","layout","label","treeData","showCheckedStrategy","treeCheckable","treeCheckStrictly","treeDefaultExpandAll","showArrow","allowClear","filterTreeNode","treeNodeFilterProp","htmlType","cancelTokenSource","header","initialValues","Catalog","setFilters","handleCreateCatalogItem","values","Forms","Settings","CatalogItemTemplatesApi","catalogItemTemplateId","getCatalogTemplatesColumns","mapCatalogTemplates","view_id","getCatalogItemTemplates","deleteCatalogItemTemplate","CatalogTemplates","handleCreateTemplate","Yup","mixed","default","required","string","min","max","number","lessThan","moreThan","integer","date","emptyErrors","validateSchema","validationSchema","abortEarly","then","Promise","resolve","catch","filteredErrors","inner","setIn","reject","ViewsApi","viewId","Option","Select","FormSchema","Form","view","views","setViews","formInitialValues","view_id_name","getCatalogItemTemplate","getView","getViews","getAllViews","createCatalogItemTemplate","updateCatalogItemTemplate","enableReinitialize","CatalogItemTemplateFieldsApi","catalogItemTemplateFieldId","mapCatalogTemplateFields","field_key","default_value","is_multilingual","is_searchable","is_sortable","template_group_id","template_id","use_in_listing","getCatalogTemplateFieldsColumns","TitleContainer","Fields","catalogItemTempalteId","getCatalogItemTemplateFields","deleteCatalogItemTemplateField","handleCreateField","BackButton","handleButtonClick","ghost","CatalogTemplateDetail","CatalogItemTemplateFieldTypeEnum","mapCatalogTemplateField","nullable","notRequired","matches","submitFormSource","getCatalogItemTemplateField","createCatalogItemTemplateField","state","updateCatalogItemTemplateField","handleSubmitForm","submitForm","CatalogTemplateFieldDetail","InternalServerError","subTitle","extra","AuthenticatedErrorLayout","PageNotFound","console","log","RedirectTo","CatalogLanguagesApi","code","getCatalogLanguagesColumns","mapCatalogLanguages","getCatalogLanguages","deleteCatalogLanguage","CatalogLanguages","CatalogCurrenciesApi","catalogCurrencyId","default_currency_id","currencies","setCurrencies","getCatalogLanguage","getCurrencies","getAllCatalogCurrencies","createCatalogLanguage","updateCatalogLanguage","CatalogLanguageDetail","CatalogItemTemplateFieldValuesApi","CreateForm","templates","setTemplates","getTemplates","getAllCatalogItemTemplates","itemData","createCatalogItem","itemId","valuesData","updateCatalogItemTemplateFieldValues","span","Label","Info","active","paragraph","rows","Group","StyledInfo","DetailInfo","CatalogDetailContext","handlePublish","handleUnpublish","isFieldValueMultilingual","field","renderChildren","fieldName","FieldGroup","MultiLingual","languages","Boolean","DateTime","timeFormat","showTime","Integer","getExtraContentFieldValue","fields","fieldId","match","find","fieldValues","extra_content","getExtraContentFieldName","Link","useFormikContext","setFieldValue","handleFormatChange","handleTargetChange","handleRelChange","rel","renderInput","defaultValue","TextArea","Input","TINYMCE_SCRIPT_PATH","initValues","toolbar","plugins","images_upload_url","CMS_BASE_URL","RichTextFormik","setFieldTouched","useField","handleEditorChange","content","initialValue","onEditorChange","tinymceScriptSrc","RichText","Line","getFieldName","GalleryTypes","ImageContainer","GalleryImage","React","imagePath","onDelete","titleValue","onTitleChange","onDescriptionChange","descriptionValue","isDragging","connectDragSource","connectDropTarget","elementRef","opacity","useImperativeHandle","getNode","backgroundImage","GalleryImageDraggable","DropTarget","hover","component","node","dragIndex","getItem","hoverIndex","hoverBoundingRect","getBoundingClientRect","hoverMiddleY","bottom","hoverClientY","getClientOffset","onMove","connect","dropTarget","DragSource","beginDrag","dragSource","getBase64","file","reader","FileReader","readAsDataURL","onload","result","onerror","UploadedGalleryImage","image","setImage","getImage","originFileObj","img","getFieldValue","Number","Dragger","Upload","catalogUrl","CMS_STATIC_URL","GalleryImages","Gallery","fileList","setFileList","getImages","images","handleUploadedImageTitleChange","handleUploadedImageDescriptionChange","handleUploadedImageDelete","imageFieldName","newFileList","filter","uid","handleImageTitleChange","newImages","currentIndex","handleImageDescriptionChange","description","handleImageDelete","handleChange","handleMove","dragGalleryImages","dragGalleryImage","update","$splice","files","multiple","beforeUpload","showUploadList","info","thumbnail","valueIndex","Price","currency","addonBefore","mainCurrency","is_main","otherCurrencies","fieldValue","rate","toFixed","decimal_places","AntdInput","StyledSelect","TaxRate","taxRates","renderTaxRateSelect","currencyTaxRates","currency_id","mainCurrencyTaxRates","CatalogCurrencyTaxRatesApi","catalogCurrencyTaxRateId","UploadedImage","Image","setFile","filteredFile","handleDelete","previewFile","Data","setLanguages","setCurrencyTaxRates","getLanguages","getAllCatalogLanguages","getCurrencyTaxRates","getAllCatalogCurrencyTaxRates","Categories","CatalogItemCategoriesApi","TabPane","Tabs","CatalogTabsEnum","fieldData","useGetInitialValues","transformedValues","newValue","JSON","stringify","formData","objectToFormData","nullsAsUndefineds","booleansAsIntegers","categoriesFormData","setCatalogItemCategories","updateCatalogItem","defaultActiveKey","DATA","tab","CATEGORIES","CatalogDetail","getCatalogItem","depth","StyledDropdown","Tree","response","handleDropdownClick","deleteCatalogCategory","publishCatalogCategory","unpublishCatalogCategory","renderTree","items_count","itemsCount","CatalogCategories","handleCreateCatalogCategory","parentId","getInitialValues","languageValues","getCatalogCategory","createCatalogCategory","updateCatalogCategory","defaultActiveFirstOption","dropdownStyle","maxHeight","overflow","placeholder","CatalogCategoryDetail","ScrollToTop","scrollTo","getCatalogCurrenciesColumns","mapCatalogCurrencies","symbol","getCatalogCurrencies","e","CatalogCurrencies","mapCatalogCurrency","inherits_tax_rate","fetch_currency_rate","getCatalogCurrency","createCatalogCurrency","updateCatalogCurrency","getCatalogTaxRatesColumns","mapCatalogTaxRates","TaxRates","getCatalogCurrencyTaxRates","deleteCatalogCurrencyTaxRate","handleCreateTaxRate","CatalogCurrencyDetail","no_rate","getFormInitialValues","getCatalogCurrencyTaxRate","createCatalogCurrencyTaxRate","updateCatalogCurrencyTaxRate","formatter","parser","CatalogCurrencyTaxRateDetail","getViewsColumns","mapViews","deleteView","Views","handleCreateView","createView","updateView","ViewDetail","getTemplatesColumns","TemplatesApi","templateId","mapTemplates","deleteTemplate","Templates","getLayoutsColumns","LayoutsApi","layoutId","mapLayouts","getLayouts","deleteLayout","Layouts","handleCreateLayout","getLayout","createLayout","updateLayout","LayoutSlotsApi","layout_id","layoutSlotId","mapLayoutSlot","writeable","locked","html_class_name","html_id","SlotModal","slotId","onClose","onSave","layoutSlots","setLayoutSlots","getLayoutSlots","getAllLayoutSlots","getLayoutSlot","createLayoutSlot","updateLayoutSlot","footer","closable","Slot","hasChildren","Slots","isModalOpen","setIsModalOpen","modalData","setModalData","dialogActiveItem","setDialogActiveItem","deleteLayoutSlot","renderSlots","slots","handleSave","PanelEnum","LayoutDetail","activeKeys","SLOTS","currentActiveKeys","setCurrentActiveKeys","FORM","mapTemplateDetail","template_pages","TemplatePagesApi","templatePageId","html_head_end","html_body_start","html_body_end","of","layouts","setLayouts","templatePages","setTemplatePages","getTemplatePages","getAllTemplatePages","getTemplate","getAllLayouts","createTemplate","updateTemplate","TemplateDetail","useGetPropertiesData","pages","setPages","getAllTemplates","getAllPages","propsDataLoading","parentIdentifier","createPage","showSearch","ModulesApi","pageIdentifier","pageVersion","templatePageIds","page_identifier","page_version","template_page_ids","ModuleTypeEnum","PageTypeEnum","TextModulesApi","moduleId","CatalogListingModulesApi","NavigationModulesApi","ButtonModulesApi","ImageModulesApi","HeadingModulesApi","CatalogItemModulesApi","CatalogCategoryTreeModulesApi","CatalogCategoryModulesApi","CatalogDetailModulesApi","CatalogSearchModulesApi","useGetPageData","cancelTokenSourceRef","template","setTemplate","templateView","setTemplateView","setLayout","modules","setModules","getModules","templatePageIDs","currentValues","all","currentModule","newModule","isNew","moduleType","module_type","uuid","slot_id","page_type","TEMPLATE_PAGE","isTemplatePageModule","HEADING","BUTTON","NAVIGATION","CATALOG_LISTING","CATALOG_ITEM","CATALOG_DETAIL","CATALOG_SEARCH","CATALOG_CATEGORY_TREE","CATALOG_CATEGORY","getHeadingModule","moduleData","getTextModule","getImageModule","file_name","image_alt","getButtonModule","button_id","getNavigationModule","navigation_id","getCatalogListingModule","category_id_variable_name","getCatalogItemModule","catalog_item_id","getCatalogDetailModule","catalog_item_id_variable_name","load_from_global_context","getCatalogSearchModule","search_placeholder","submit_label","getCatalogCategoryTreeModule","display_if_parent_category_id","link_pattern","getCatalogCategoryModule","SlotControls","Controls","block","cb","iterator","renderItem","JSXParser","bindings","StyledGroup","hasEdit","hasConfiguration","onEdit","onConfigure","toLowerCase","onFocus","onBlur","inline","ItemTypes","findModule","useModuleSort","ContentDetailContext","useDrag","canDrag","collect","drag","useModuleUpdate","onUpdate","setIsTouched","mutate","currentModuleIndex","findIndex","HeadingModuleLevelEnum","Configuration","configuration","setConfiguration","handleConfirm","handleLevelChange","onOk","agg","defineProperty","enumerable","isFinite","iterableEnum","kex","useGetTemplatePreview","previews","useSelector","getTemplatePreview","moduleName","useDeleteModule","setDeletedModules","richTextInitValues","menubar","forced_root_block","valid_elements","Heading","isConfigurationOpen","setIsConfigurationOpen","templatePreview","handleConfigurationChange","headingLevel","Level","jsx","components","editor","save","renderInWrapper","ButtonsApi","buttonId","ButtonModuleTargetEnum","buttons","setButtons","getButtons","getAllButtons","handleTextChange","persist","handlePathChange","handleButtonChange","button","setButton","getButton","List","view_path","template_path","template_name","templatePreviewPath","onError","catalogLanguages","setCatalogLanguages","catalogCategories","setCatalogCategories","handleLanguageChange","handleCategoryIdChange","handleCategoryIdVariableNameChange","CatalogListing","listingData","setListingData","getListingData","getPublicCatalogItems","handleCatalogItemIdChange","CatalogItem","catalogItem","setCatalogItem","setTemplatePreview","getPublicCatalogItem","handleLanguageCodeChange","handleCatalogItemIdVariableNameChange","handleLoadFromGlobalContextChange","checked","defaultChecked","catalogItemDetail","setCatalogItemDetail","getCatalogItemDetail","handleSearchPlaceholderChange","handleSubmitLabelChange","CatalogSearch","NavigationsApi","navigationId","navigations","setNavigations","getNavigations","getAllNavigations","handleNavigationChange","navigationData","setNavigationData","getNavigationData","getNavigation","imageUrl","handleImageAltChange","handleImageChange","filteredImage","hasImage","setFiles","uploadedImage","setUploadedImage","setUploadedImagePreview","currentImage","handleParentCategoryChange","handleDisplayIfParentCategoryChange","handleLinkPatternChange","CatalogCategoryTree","handleCategoryChange","CatalogCategory","catalogCategory","setCatalogCategory","SlotModules","currentSlotId","useMemo","LockedOverlay","canDrop","isActive","isOver","shallow","didDrop","LEVEL_1","SELF","draggedItem","currentItem","useModuleMove","Styles","styles","StylesApi","create","axiosInstance","SidePanelItem","Scrollable","Grid","SidePanel","user","contentSidePanel","HTML","Editor","setStyles","getStyles","General","contentDetailLoading","PageMetaRobotsEnum","Meta","metaImage","meta_image","option","Advanced","PropertiesTabsEnum","Properties","dirty","setIsPropertiesTouched","GENERAL","tabPosition","META","ADVANCED","useSave","getPageVersions","pageVersions","resetForm","meta_canonical","meta_description","meta_keywords","meta_robots","meta_title","updatePage","filesData","setPageModules","getPageVersionsColumns","Versions","_identifier","ContentTabsEnum","DetailForm","useGetPropertiesInitialValues","isPropertiesTouched","EDITOR","tabBarExtraContent","isSubmitting","PROPERTIES","VERSIONS","mapPageVersions","ContentDetail","setPageVersions","useGetPageVersions","pageVersionsLoading","pageVersionsPage","deletedModules","TemplatePreviewApi","viewName","templateName","view_name","clearTemplatePreviews","fetchTemplatePreviews","getState","catalogViews","viewPath","catalogViewPath","nameListing","nameDetail","templatePreviewData","navigationPath","currentPath","VariableNameActionsApi","variableNameActionId","mapVariableNameActions","variable_name","getVariableNameActionsColumns","getVariableNameActions","deleteVariableNameAction","VariableNameActions","handleCreateVariable","VariableNameActionActionEnm","getVariableNameAction","createVariableNameAction","updateVariableNameAction","VariableNameActionDetail","getNavigationsColumns","mapNavigations","deleteNavigation","Navigations","handleCreateNavigation","NavigationDetailContext","navigation","createNavigation","updateNavigation","URL","isPage","PublishedURL","Page","published_path","Items","handleCreateItem","NavigationDetail","setNavigation","NavigationItemTargetEnum","NavigationsItemsApi","navigationItemId","mapNavigationItems","expandTree","childrenProperty","property","expandBy","expandSubTree","subTreeExpandable","newItem","navigationItems","setNavigationItems","getNavigationItems","mappedNavigationItems","expandedItems","getNavigationItem","createNavigationItem","updateNavigationItem","NavigationItemDetail","getNavigationItemVariableMappingsColumns","mapNavigationItemVariableMapping","NavigationsItemVariableMappingsApi","navigationItemVariableMappingId","getNavigationItemVariableMappings","variableMappindId","deleteNavigationItemVariableMapping","navigationItem","setNavigationItem","getItems","NavigationItemsVariableMappings","handleCreateMapping","getNavigationItemVariableMapping","createNavigationItemVariableMapping","updateNavigationItemVariableMapping","NavigationItemVariableMappingDetail","class_name","createButton","updateButton","ButtonDetail","getButtonsColumns","mapButtons","deleteButton","handleCreateButton","AuthenticatedRouter","primary","noThrow","from","useTrackPageView","initialState","globalHistory","setState","removeListener","listen","href","setTrackPageView","send","hitType","Login","isLoggingIn","session","src","StyledContent","AnonymousLayout","AnonymousRouter","App","isLoggedIn","StyledSkeleton","Skeleton","AuthenticatedLoadingLayout","sessionInitialState","Cookies","get","sessionReducer","handleActions","payload","userInitialState","userReducer","templatesInitialState","templatesReducer","rootReducer","combineReducers","migrations","1","persistConfig","storage","whitelist","migrate","createMigrate","debug","store","createStore","persistReducer","composeWithDevTools","applyMiddleware","createDebounce","thunk","interceptors","request","baseURL","headers","Credentials","configureAxiosInterceptors","isCancel","errorHandlerDisabled","duration","extractedErrors","errorHandler","library","add","faAlignJustify","faArrowsAltV","faBars","faBuilding","faCog","faCogs","faCopy","faDatabase","faDownload","faExchangeAlt","faEye","faFileSignature","faGlobeAmericas","faCheck","faMinusSquare","faPaperPlane","faPen","faPlus","faPlusSquare","faRedoAlt","faSignOutAlt","faSquare","faSyncAlt","faTable","faTasks","faTimes","faTimesCircle","faTrashAlt","faUser","faClone","faCloudUploadAlt","faCloudDownloadAlt","faArrowCircleUp","faArrowCircleDown","faChevronCircleUp","faChevronCircleDown","faAngleDown","faAngleRight","faArrowLeft","faFolder","faFile","faArrowUp","faAlignLeft","faHeading","faImage","faImages","faCode","faSave","faLock","faList","faMapSigns","faTags","faTag","faSearch","ReactDOM","DndProvider","Backend","persistor","persistStore","fallback","document","getElementById"],"mappings":"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EAAO5S,GAAKwU,QAASnC,IACnB49B,EAAgB5mC,KAAKgJ,OAIzBtD,KAAasD,MAAM,CACjBpD,QACE,oCACGghC,EAAgBljC,IAAI,CAACsF,EAAOrS,IAC3B,yBAAKA,IAAKA,GAAMqS,KAItB29B,SAAU,KAGLt4B,QAAQM,OAAR,eAAoB3F,KA5CL1U,MAkD9B,MAAM0U,GAuBK69B,CAAa79B,EAAO48B,KEiC/BkB,KAAQC,IACNC,KACAC,KACAC,KACAC,KACAC,KACAC,KACAC,KACAC,KACAC,KACAC,KACAC,KACAC,KACAC,KACAC,KACAC,KACAC,KACAC,KACAC,KACAA,KACAC,KACAC,KACAC,KACAC,KACAC,KACAC,KACAC,KACAC,KACAC,KACAC,KACAC,MACAC,KACAC,KACAC,KACAC,KACAC,KACAC,KACAC,KACAC,KACAC,KACAC,KACAC,KACAC,KACAC,KACAC,KACAC,KACAC,KACAC,KACAC,KACAC,KACAC,KACAC,KACAC,KACAC,KACAC,KACAC,MDrJJ15C,IAEA25C,KAASlnC,OACP,kBAACmnC,GAAA,EAAD,CAAa94C,QAAS+4C,MACpB,kBAAC,KAAD,CAAU5E,MAAOA,IACf,kBAAC,KAAD,CAAa/pC,QAAS,KAAM4uC,UAAWC,aAAa9E,KAClD,kBAAC,WAAD,CAAU+E,SAAU,kBAACpG,GAAD,OAClB,kBAAC,GAAD,MACA,kBAAC,EAAD,UAKRqG,SAASC,eAAe,W","file":"static/js/main.a1b55a4b.chunk.js","sourcesContent":["module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAQQAAAAjCAYAAABy1nQwAAAACXBIWXMAAAsTAAALEwEAmpwYAAAF8WlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNS42LWMxNDggNzkuMTY0MDM2LCAyMDE5LzA4LzEzLTAxOjA2OjU3ICAgICAgICAiPiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPiA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtbG5zOnhtcE1NPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvbW0vIiB4bWxuczpzdEV2dD0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL3NUeXBlL1Jlc291cmNlRXZlbnQjIiB4bWxuczpkYz0iaHR0cDovL3B1cmwub3JnL2RjL2VsZW1lbnRzLzEuMS8iIHhtbG5zOnBob3Rvc2hvcD0iaHR0cDovL25zLmFkb2JlLmNvbS9waG90b3Nob3AvMS4wLyIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgMjEuMCAoV2luZG93cykiIHhtcDpDcmVhdGVEYXRlPSIyMDIwLTA0LTIyVDIyOjQwOjU3KzAyOjAwIiB4bXA6TWV0YWRhdGFEYXRlPSIyMDIwLTA0LTIyVDIyOjQwOjU3KzAyOjAwIiB4bXA6TW9kaWZ5RGF0ZT0iMjAyMC0wNC0yMlQyMjo0MDo1NyswMjowMCIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDoxYzExYjBkNy01ZmQ3LTNlNGMtOGViNS05MWM3OWM2NzQyMzIiIHhtcE1NOkRvY3VtZW50SUQ9ImFkb2JlOmRvY2lkOnBob3Rvc2hvcDpmNTVlM2E4ZS00YzdiLWZmNDItOTBlNC0wZDk4NTg5ZWE0YTAiIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDo1ZTRhNmZjMy00ODc1LWM3NGYtYTg3Ny05MTM2NTc0MDg2YTgiIGRjOmZvcm1hdD0iaW1hZ2UvcG5nIiBwaG90b3Nob3A6Q29sb3JNb2RlPSIzIiBwaG90b3Nob3A6SUNDUHJvZmlsZT0ic1JHQiBJRUM2MTk2Ni0yLjEiPiA8eG1wTU06SGlzdG9yeT4gPHJkZjpTZXE+IDxyZGY6bGkgc3RFdnQ6YWN0aW9uPSJjcmVhdGVkIiBzdEV2dDppbnN0YW5jZUlEPSJ4bXAuaWlkOjVlNGE2ZmMzLTQ4NzUtYzc0Zi1hODc3LTkxMzY1NzQwODZhOCIgc3RFdnQ6d2hlbj0iMjAyMC0wNC0yMlQyMjo0MDo1NyswMjowMCIgc3RFdnQ6c29mdHdhcmVBZ2VudD0iQWRvYmUgUGhvdG9zaG9wIDIxLjAgKFdpbmRvd3MpIi8+IDxyZGY6bGkgc3RFdnQ6YWN0aW9uPSJzYXZlZCIgc3RFdnQ6aW5zdGFuY2VJRD0ieG1wLmlpZDoxYzExYjBkNy01ZmQ3LTNlNGMtOGViNS05MWM3OWM2NzQyMzIiIHN0RXZ0OndoZW49IjIwMjAtMDQtMjJUMjI6NDA6NTcrMDI6MDAiIHN0RXZ0OnNvZnR3YXJlQWdlbnQ9IkFkb2JlIFBob3Rvc2hvcCAyMS4wIChXaW5kb3dzKSIgc3RFdnQ6Y2hhbmdlZD0iLyIvPiA8L3JkZjpTZXE+IDwveG1wTU06SGlzdG9yeT4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz7UrMDbAAAUi0lEQVR4nO2deZidVX3HPzNzM9km22SBJATCTsCyJSwBQkJcajFQwxKo1eLSTVrs0xZaQVtFURCrrRYsaosP1goWhKZoCggKDUIkkCCYsIRFCEsiSybbTGbL6R/fc3rOfe957z3vncnM8DDf53mfe+/7vue85z3nd377ObfBGMMwhjGMXLQAHwcWA2OABmAX8CjwFWDzoLVsD6A02A0YxjCGOD4MXB05/26gEbh4QFuzh1GEIRwMzAT2A2YBoxGnfBX4tf18Guiusy1NwAHAKMCp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\"","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAUAAAAArCAYAAAAJ1FGHAAAACXBIWXMAAAsTAAALEwEAmpwYAAAF8WlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNS42LWMxNDggNzkuMTY0MDM2LCAyMDE5LzA4LzEzLTAxOjA2OjU3ICAgICAgICAiPiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPiA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtbG5zOnhtcE1NPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvbW0vIiB4bWxuczpzdEV2dD0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL3NUeXBlL1Jlc291cmNlRXZlbnQjIiB4bWxuczpkYz0iaHR0cDovL3B1cmwub3JnL2RjL2VsZW1lbnRzLzEuMS8iIHhtbG5zOnBob3Rvc2hvcD0iaHR0cDovL25zLmFkb2JlLmNvbS9waG90b3Nob3AvMS4wLyIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgMjEuMCAoV2luZG93cykiIHhtcDpDcmVhdGVEYXRlPSIyMDIwLTA0LTIyVDIyOjQzOjMzKzAyOjAwIiB4bXA6TWV0YWRhdGFEYXRlPSIyMDIwLTA0LTIyVDIyOjQzOjMzKzAyOjAwIiB4bXA6TW9kaWZ5RGF0ZT0iMjAyMC0wNC0yMlQyMjo0MzozMyswMjowMCIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDo0ZTEzNjkzZi1lNjRhLTIwNDUtODljYy03ZGI3MWNkNjJkMDMiIHhtcE1NOkRvY3VtZW50SUQ9ImFkb2JlOmRvY2lkOnBob3Rvc2hvcDo3MGY4MjE2ZC05M2M3LTE1NGItYTk3NC05ZjRiZDU0YzkzZDIiIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDo3MWMxNzM5NS00ZGExLTdmNDQtYjEzMi03MmFhNjAyMmZiYWEiIGRjOmZvcm1hdD0iaW1hZ2UvcG5nIiBwaG90b3Nob3A6Q29sb3JNb2RlPSIzIiBwaG90b3Nob3A6SUNDUHJvZmlsZT0ic1JHQiBJRUM2MTk2Ni0yLjEiPiA8eG1wTU06SGlzdG9yeT4gPHJkZjpTZXE+IDxyZGY6bGkgc3RFdnQ6YWN0aW9uPSJjcmVhdGVkIiBzdEV2dDppbnN0YW5jZUlEPSJ4bXAuaWlkOjcxYzE3Mzk1LTRkYTEtN2Y0NC1iMTMyLTcyYWE2MDIyZmJhYSIgc3RFdnQ6d2hlbj0iMjAyMC0wNC0yMlQyMjo0MzozMyswMjowMCIgc3RFdnQ6c29mdHdhcmVBZ2VudD0iQWRvYmUgUGhvdG9zaG9wIDIxLjAgKFdpbmRvd3MpIi8+IDxyZGY6bGkgc3RFdnQ6YWN0aW9uPSJzYXZlZCIgc3RFdnQ6aW5zdGFuY2VJRD0ieG1wLmlpZDo0ZTEzNjkzZi1lNjRhLTIwNDUtODljYy03ZGI3MWNkNjJkMDMiIHN0RXZ0OndoZW49IjIwMjAtMDQtMjJUMjI6NDM6MzMrMDI6MDAiIHN0RXZ0OnNvZnR3YXJlQWdlbnQ9IkFkb2JlIFBob3Rvc2hvcCAyMS4wIChXaW5kb3dzKSIgc3RFdnQ6Y2hhbmdlZD0iLyIvPiA8L3JkZjpTZXE+IDwveG1wTU06SGlzdG9yeT4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz5l9ombAAAZw0lEQVR4nO2deZRdRZ3HP6/TCdnT2SCEQBIEhARICCSYoBARZUcyuKCCCh6dkVl0FFxHFEYUxlkc3AcVD24jozODwAiGwaBIEhJIMgkistiEsIWQhSxNJ91d88f3FlX3dt31vU6eSX/PqfPuu+/euvXqVv3qt1fNGEM/+tGPvRJvAN4LTAD2i851Ay8Bi4BvAh17omHNgtY93YB+9KMffYKpwA8Q8QvhPKAG/PNua1ETol4COBQYAQwBDLAD2Aq8XGe9+wr2A9pQP/ag/tsM7Npz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\"","import ReactGA from 'react-ga'\r\n\r\nconst initializeTracking = () => {\r\n  ReactGA.initialize(String(window._envConfig.GA_TRACKING_CODE))\r\n}\r\n\r\nexport default initializeTracking\r\n","import { createGlobalStyle } from 'styled-components'\r\nimport 'antd/dist/antd.css'\r\n\r\nconst GlobalStyle = createGlobalStyle``\r\n\r\nexport default GlobalStyle\r\n","import { format } from './format'\r\nimport i18n from 'i18next'\r\nimport LanguageDetector from 'i18next-browser-languagedetector'\r\nimport xhr from 'i18next-xhr-backend'\r\nimport { initReactI18next } from 'react-i18next'\r\n\r\nconst options: i18n.InitOptions = {\r\n  load: 'languageOnly',\r\n  ns: ['form-validation'],\r\n  fallbackLng: 'en',\r\n  defaultNS: 'global',\r\n  backend: {\r\n    loadPath: process.env.PUBLIC_URL + '/locales/{{lng}}/{{ns}}.json',\r\n  },\r\n  detection: {\r\n    order: ['localStorage', 'navigator'],\r\n    caches: ['localStorage'],\r\n    lookupLocalStorage: 'i18nextLng',\r\n  },\r\n  interpolation: {\r\n    format,\r\n    escapeValue: false,\r\n  },\r\n  react: {\r\n    bindI18n: 'languageChanged',\r\n  },\r\n}\r\n\r\nexport default i18n\r\n  .use(LanguageDetector)\r\n  .use(xhr)\r\n  .use(initReactI18next)\r\n  .init(options)\r\n","import { format as dateFormat } from 'date-fns'\r\n\r\nexport const format = (value: any, format: any) => {\r\n  if (value instanceof Date) {\r\n    return dateFormat(value, String(format))\r\n  }\r\n  return value\r\n}\r\n","import { CatalogItemTemplateFieldTypeEnum } from 'model/api/CatalogItemTemplateFieldTypeEnum'\r\nimport { PageStatusEnum } from 'model/api/PageStatusEnum'\r\n\r\nexport const COLORS = {\r\n  white: '#FFF',\r\n  gray0: '#FAFAFA',\r\n  gray1: '#F5F5F5',\r\n  gray2: '#D9D9D9',\r\n  gray3: '#BFBFBF',\r\n  gray4: '#8C8C8C',\r\n  black: '#000',\r\n  blue1: '#1890FF',\r\n  blue2: '#0050B3',\r\n  blue3: '#003A8C',\r\n  blue5: '#00122F',\r\n  red1: '#FF4D4F',\r\n  red2: '#CF1322',\r\n  orange1: '#FFBB96',\r\n  orange2: '#FA541C',\r\n  orange3: '#AD2102',\r\n  orange4: '#FA8C16',\r\n  orange5: '#AD4E00',\r\n  yellow1: '#FADB14',\r\n  yellow2: '#AD8B00',\r\n  yellow3: '#614700',\r\n  cyan1: '#5CDBD3',\r\n  cyan2: '#08979C',\r\n  purple1: '#9254DE',\r\n  purple2: '#531DAB',\r\n  magenta1: '#F759AB',\r\n  magenta2: '#c41d7f',\r\n  green1: '#95dE64',\r\n  green2: '#52C41A',\r\n  green3: '#135200',\r\n}\r\n\r\nexport const CATALOG_FIELD_TYPE_COLORS: {\r\n  [key in keyof typeof CatalogItemTemplateFieldTypeEnum]: string\r\n} = {\r\n  TEXT: COLORS.yellow2,\r\n  BOOLEAN: COLORS.red2,\r\n  DATE: COLORS.purple1,\r\n  DATE_TIME: COLORS.purple2,\r\n  GALLERY: COLORS.blue2,\r\n  IMAGE: COLORS.blue3,\r\n  INTEGER: COLORS.green2,\r\n  LINK: COLORS.blue1,\r\n  RICH_TEXT: COLORS.yellow3,\r\n  STRING: COLORS.gray4,\r\n  PRICE: COLORS.cyan1,\r\n  TAX_RATE: COLORS.cyan2,\r\n}\r\n\r\nexport const PAGE_STATUS_COLORS: {\r\n  [key in keyof typeof PageStatusEnum]: string\r\n} = {\r\n  PUBLISHED: COLORS.green1,\r\n  DELETED: COLORS.red1,\r\n  UNPUBLISHED: COLORS.gray2,\r\n  DRAFT: COLORS.gray4\r\n}","import styled from 'styled-components'\r\nimport { COLORS } from 'constants/colors'\r\n\r\nexport const Paper = styled.div`\r\n  min-height: calc(100vh - 234px);\r\n  padding: 25px;\r\n  background: ${COLORS.white};\r\n  border-bottom: 1px solid ${COLORS.gray2};\r\n`","import axios, { AxiosPromise } from 'axios'\r\nimport { RequestConfig } from './requestConfig'\r\nimport { Login } from 'model/api/Login'\r\n\r\nexport class UserApi {\r\n  /**\r\n   * Login\r\n   */\r\n  static login(\r\n    data: FormData,\r\n    config?: RequestConfig\r\n  ): AxiosPromise<Login> {\r\n    return axios({\r\n      ...config,\r\n      method: 'POST',\r\n      url: `/login`,\r\n      data\r\n    })\r\n  }\r\n\r\n  /**\r\n   * Logout\r\n   */\r\n  static logout(\r\n    config?: RequestConfig\r\n  ): AxiosPromise {\r\n    return axios({\r\n      ...config,\r\n      method: 'GET',\r\n      url: `/logout`\r\n    })\r\n  }\r\n}","import { createAction } from 'redux-actions'\r\nimport { ThunkDispatch } from 'redux-thunk'\r\nimport { AnyAction } from 'redux'\r\nimport { UserApi } from 'api/User'\r\nimport { SessionState } from 'state/reducers/session'\r\nimport { navigate } from '@reach/router'\r\n\r\nexport const REQUEST_LOGIN = 'REQUEST_LOGIN'\r\nexport const RECEIVE_LOGIN = 'RECEIVE_LOGIN'\r\nexport const LOGOUT_CLEAR_STATE = 'LOGOUT_CLEAR_STATE'\r\n\r\nexport const requestLogin = createAction(REQUEST_LOGIN)\r\nexport const receiveLogin = createAction<boolean>(RECEIVE_LOGIN)\r\nexport const logoutClearState = createAction(LOGOUT_CLEAR_STATE)\r\n\r\nexport const login = (email: string, password: string) => async (\r\n  dispatch: ThunkDispatch<SessionState, void, AnyAction>\r\n) => {\r\n  dispatch(requestLogin())\r\n  try {\r\n    const data = new FormData()\r\n    data.append('email', email)\r\n    data.append('password', password)\r\n\r\n    await UserApi.login(data)\r\n\r\n    dispatch(receiveLogin(true))\r\n  } catch (e) {\r\n    dispatch(receiveLogin(false))\r\n    throw e\r\n  }\r\n}\r\n\r\nexport const logout = () => async (\r\n  dispatch: ThunkDispatch<SessionState, void, AnyAction>\r\n) => {\r\n  const { PUBLIC_URL } = process.env\r\n\r\n  await dispatch(forceLogout())\r\n  navigate(PUBLIC_URL + '/')\r\n}\r\n\r\nexport const forceLogout = () => async (\r\n  dispatch: ThunkDispatch<SessionState, void, AnyAction>\r\n) => {\r\n  await UserApi.logout()\r\n\r\n  dispatch(logoutClearState())\r\n}\r\n","import { AnyAction } from 'redux'\r\nimport { useDispatch } from 'react-redux'\r\nimport { ThunkDispatch } from 'redux-thunk'\r\nimport { State } from 'state/rootReducer'\r\n\r\nexport const useThunkDispatch = () =>\r\n  useDispatch<ThunkDispatch<State, void, AnyAction>>()\r\n","import React, { useCallback } from 'react'\r\nimport { Menu, Button } from 'antd'\r\nimport { ClickParam } from 'antd/es/menu'\r\nimport { useTranslation } from 'react-i18next'\r\nimport { navigate, useLocation } from '@reach/router'\r\nimport { logout } from 'state/actions/session'\r\nimport { useThunkDispatch } from 'hooks/useThunkDispatch'\r\nimport styled from 'styled-components'\r\n\r\nconst { Item } = Menu\r\n\r\nconst LogoutButton = styled(Button)`\r\n  margin-left: 24px;\r\n`\r\n\r\nexport const Navigation: React.FC = () => {\r\n  const { t } = useTranslation()\r\n  const { PUBLIC_URL } = process.env\r\n  const { pathname } = useLocation()\r\n  const matchedPath = pathname.replace(PUBLIC_URL, '')\r\n  const dispatch = useThunkDispatch()\r\n\r\n  const getSelectedKeys = useCallback(() => {\r\n    let activeKey\r\n\r\n    if (matchedPath === '/') {\r\n      activeKey = '/'\r\n    } else if (matchedPath.startsWith('/pages')) {\r\n      activeKey = '/pages'\r\n    } else if (matchedPath.startsWith('/catalog')) {\r\n      activeKey = '/catalog'\r\n    } else if (matchedPath.startsWith('/forms')) {\r\n      activeKey = '/forms'\r\n    } else if (matchedPath.startsWith('/settings')) {\r\n      activeKey = '/settings'\r\n    }\r\n\r\n    return [activeKey]\r\n  }, [matchedPath])\r\n\r\n  const handleClick = useCallback(\r\n    ({ key: to }: ClickParam) => {\r\n      navigate(PUBLIC_URL + to)\r\n    },\r\n    [PUBLIC_URL]\r\n  )\r\n\r\n  const handleLogout = useCallback(() => {\r\n    dispatch(logout())\r\n  }, [dispatch])\r\n\r\n  return (\r\n    <Menu theme=\"dark\" mode=\"horizontal\" selectedKeys={getSelectedKeys()}>\r\n      <Item onClick={handleClick} key=\"/\">\r\n        {t('navigation.dashboard')}\r\n      </Item>\r\n      <Item onClick={handleClick} key=\"/content\">\r\n        {t('navigation.content')}\r\n      </Item>\r\n      <Item onClick={handleClick} key=\"/catalog\">\r\n        {t('navigation.catalog')}\r\n      </Item>\r\n      <Item onClick={handleClick} key=\"/forms\">\r\n        {t('navigation.forms')}\r\n      </Item>\r\n      <Item onClick={handleClick} key=\"/settings\">\r\n        {t('navigation.settings')}\r\n      </Item>\r\n      <LogoutButton\r\n        onClick={handleLogout}\r\n        type=\"primary\"\r\n        shape=\"round\"\r\n        // ghost\r\n        size=\"small\"\r\n      >\r\n        {t('navigation.logout')}\r\n      </LogoutButton>\r\n    </Menu>\r\n  )\r\n}\r\n","import React from 'react'\r\nimport styled from 'styled-components'\r\nimport logo from 'assets/images/logo.png'\r\n\r\nconst StyledLogo = styled.div`\r\n  width: 130px;\r\n  height: 31px;\r\n  margin: 16px 24px 16px 0;\r\n  background-image: url(${logo});\r\n  background-repeat: no-repeat;\r\n  background-position: 50% 50%;\r\n  background-size: contain;\r\n`\r\n\r\nexport const Logo: React.FC = () => <StyledLogo />\r\n","import React, { useCallback } from 'react'\r\nimport { Layout } from 'antd'\r\nimport { useTranslation } from 'react-i18next'\r\nimport { Menu } from 'antd'\r\nimport { useLocation, navigate } from '@reach/router'\r\nimport styled from 'styled-components'\r\nimport { ClickParam } from 'antd/es/menu'\r\n\r\nconst { Item, SubMenu } = Menu\r\nconst { Sider } = Layout\r\n\r\nconst StyledMenu = styled(Menu)`\r\n  height: 100%;\r\n`\r\n\r\nexport const Sidebar: React.FC = () => {\r\n  const { PUBLIC_URL } = process.env\r\n\r\n  const { t } = useTranslation()\r\n  const { pathname } = useLocation()\r\n  const matchedPath = pathname.replace(PUBLIC_URL, '')\r\n\r\n  const handleClick = useCallback(\r\n    ({ key: to }: ClickParam) => {\r\n      navigate(PUBLIC_URL + to)\r\n    },\r\n    [PUBLIC_URL]\r\n  )\r\n\r\n  const renderMenu = useCallback(() => {\r\n    if (matchedPath.startsWith('/catalog')) {\r\n      let activeKey\r\n\r\n      if (\r\n        matchedPath.startsWith('/catalog') &&\r\n        !matchedPath.includes('/templates') &&\r\n        !matchedPath.includes('/languages') &&\r\n        !matchedPath.includes('/categories') &&\r\n        !matchedPath.includes('/currencies')\r\n      ) {\r\n        activeKey = '/catalog'\r\n      } else if (matchedPath.startsWith('/catalog/templates')) {\r\n        activeKey = '/catalog/templates'\r\n      } else if (matchedPath.startsWith('/catalog/languages')) {\r\n        activeKey = '/catalog/languages'\r\n      } else if (matchedPath.startsWith('/catalog/categories')) {\r\n        activeKey = '/catalog/categories'\r\n      } else if (matchedPath.startsWith('/catalog/currencies')) {\r\n        activeKey = '/catalog/currencies'\r\n      }\r\n\r\n      return (\r\n        <StyledMenu mode=\"inline\" defaultSelectedKeys={[activeKey]}>\r\n          <Item onClick={handleClick} key=\"/catalog\">\r\n            {t('sidebar.catalog.items')}\r\n          </Item>\r\n          <Item onClick={handleClick} key=\"/catalog/templates\">\r\n            {t('sidebar.catalog.templates')}\r\n          </Item>\r\n          <Item onClick={handleClick} key=\"/catalog/languages\">\r\n            {t('sidebar.catalog.languages')}\r\n          </Item>\r\n          <Item onClick={handleClick} key=\"/catalog/categories\">\r\n            {t('sidebar.catalog.categories')}\r\n          </Item>\r\n          <Item onClick={handleClick} key=\"/catalog/currencies\">\r\n            {t('sidebar.catalog.currencies')}\r\n          </Item>\r\n        </StyledMenu>\r\n      )\r\n    } else if (matchedPath.startsWith('/content')) {\r\n      let activeKey\r\n\r\n      if (\r\n        matchedPath.startsWith('/content') &&\r\n        !matchedPath.includes('/pages') &&\r\n        !matchedPath.includes('/layouts') &&\r\n        !matchedPath.includes('/templates') &&\r\n        !matchedPath.includes('/template-pages') &&\r\n        !matchedPath.includes('/views') &&\r\n        !matchedPath.includes('/variable-name-actions') &&\r\n        !matchedPath.includes('/modules')\r\n      ) {\r\n        activeKey = '/content'\r\n      } else if (matchedPath.startsWith('/content/views')) {\r\n        activeKey = '/content/views'\r\n      } else if (matchedPath.startsWith('/content/layouts')) {\r\n        activeKey = '/content/layouts'\r\n      } else if (matchedPath.startsWith('/content/templates')) {\r\n        activeKey = '/content/templates'\r\n      } else if (matchedPath.startsWith('/content/template-pages')) {\r\n        activeKey = '/content/template-pages'\r\n      } else if (matchedPath.startsWith('/content/views')) {\r\n        activeKey = '/content/views'\r\n      } else if (matchedPath.startsWith('/content/variable-name-actions')) {\r\n        activeKey = '/content/variable-name-actions'\r\n      } else if (matchedPath.startsWith('/content/modules')) {\r\n        activeKey = '/content/modules'\r\n      }\r\n\r\n      return (\r\n        <StyledMenu mode=\"inline\" defaultSelectedKeys={[activeKey]}>\r\n          <Item onClick={handleClick} key=\"/content\">\r\n            {t('sidebar.content.pages')}\r\n          </Item>\r\n          <Item onClick={handleClick} key=\"/content/layouts\">\r\n            {t('sidebar.content.layouts')}\r\n          </Item>\r\n          <Item onClick={handleClick} key=\"/content/templates\">\r\n            {t('sidebar.content.templates')}\r\n          </Item>\r\n          <Item onClick={handleClick} key=\"/content/template-pages\" disabled>\r\n            {t('sidebar.content.template-pages')}\r\n          </Item>\r\n          <Item onClick={handleClick} key=\"/content/views\">\r\n            {t('sidebar.content.views')}\r\n          </Item>\r\n          <Item onClick={handleClick} key=\"/content/variable-name-actions\">\r\n            {t('sidebar.content.variable-name-actions')}\r\n          </Item>\r\n          <SubMenu key=\"/content/modules\" title={t('sidebar.content.modules.title')}>\r\n            <Item onClick={handleClick} key=\"/content/modules/navigations\">\r\n              {t('sidebar.content.modules.navigations')}\r\n            </Item>\r\n            <Item onClick={handleClick} key=\"/content/modules/buttons\">\r\n              {t('sidebar.content.modules.buttons')}\r\n            </Item>\r\n          </SubMenu>\r\n        </StyledMenu>\r\n      )\r\n    }\r\n  }, [handleClick, matchedPath, t])\r\n\r\n  if (matchedPath === '/') {\r\n    return null\r\n  } else {\r\n    return (\r\n      <Sider theme=\"light\" width={200}>\r\n        {renderMenu()}\r\n      </Sider>\r\n    )\r\n  }\r\n}\r\n","import { createAction } from 'redux-actions'\r\n\r\nexport interface SetContentSidePanelPositionPayload {\r\n  top: number\r\n  left: number\r\n}\r\n\r\nexport const SET_CONTENT_SIDE_PANEL_POSITION = 'SET_CONTENT_SIDE_PANEL_POSITION'\r\nexport const setContentSidePanelPosition = createAction<\r\n  SetContentSidePanelPositionPayload\r\n>(SET_CONTENT_SIDE_PANEL_POSITION)\r\n","import React, { useCallback } from 'react'\r\nimport { useDrop, XYCoord } from 'react-dnd'\r\nimport { useThunkDispatch } from 'hooks/useThunkDispatch'\r\nimport { setContentSidePanelPosition } from 'state/actions/user'\r\n\r\nexport const SidePanelTypes = {\r\n  SIDE_PANEL: 'side_panel',\r\n}\r\n\r\nexport interface ContainerProps {\r\n  children: React.ReactNode | React.ReactNodeArray\r\n}\r\n\r\nexport interface SidePanelProps {\r\n  type: string\r\n  top: number\r\n  left: number\r\n}\r\n\r\nexport const SidePanelDragProvider: React.FC<ContainerProps> = ({\r\n  children,\r\n}) => {\r\n  const dispatch = useThunkDispatch()\r\n\r\n  const [, drop] = useDrop({\r\n    accept: SidePanelTypes.SIDE_PANEL,\r\n    drop(item: SidePanelProps, monitor) {\r\n      const delta = monitor.getDifferenceFromInitialOffset() as XYCoord\r\n      const left = Math.round(item.left + delta.x)\r\n      const top = Math.round(item.top + delta.y)\r\n      moveSidePanel(left, top)\r\n      return undefined\r\n    },\r\n  })\r\n\r\n  const moveSidePanel = useCallback(\r\n    (left: number, top: number) => {\r\n      dispatch(setContentSidePanelPosition({ top, left }))\r\n    },\r\n    [dispatch]\r\n  )\r\n\r\n  return <div ref={drop}>{children}</div>\r\n}\r\n","import React, { createContext, useState } from 'react'\r\nimport { Layout } from 'antd'\r\nimport { Paper } from 'components/Paper'\r\nimport { Navigation } from 'components/Navigation'\r\nimport styled from 'styled-components'\r\nimport { COLORS } from 'constants/colors'\r\nimport { RouteComponentProps } from '@reach/router'\r\nimport { Logo } from 'components/Logo'\r\nimport { Sidebar } from 'components/Sidebar'\r\nimport { SidePanelDragProvider } from 'components/SidepanelDragProvider'\r\n\r\nconst { Content, Header, Footer } = Layout\r\n\r\nexport const Main = styled(Layout)`\r\n  && {\r\n    margin: 0 50px 50px;\r\n    background: ${COLORS.white};\r\n  }\r\n`\r\n\r\nexport const Container = styled.div`\r\n  margin: 25px 50px;\r\n`\r\n\r\nexport const StyledLayout = styled(Layout)`\r\n  && {\r\n    background: ${COLORS.gray1};\r\n  }\r\n`\r\n\r\nexport const StyledHeader = styled(Header)`\r\n  && {\r\n    display: grid;\r\n    grid-template-columns: min-content min-content;\r\n  }\r\n`\r\n\r\nexport interface AuthenticatedLayoutContextProps {\r\n  sceneTitle: React.ReactNode | React.ReactNodeArray\r\n  setSceneTitle: React.Dispatch<React.SetStateAction<React.ReactNode>>\r\n}\r\n\r\nexport const AuthenticatedLayoutContext = createContext(\r\n  {} as AuthenticatedLayoutContextProps\r\n)\r\n\r\nexport interface AuthenticatedLayoutProps extends RouteComponentProps {\r\n  children: React.ReactNode | React.ReactNodeArray\r\n}\r\n\r\nexport const AuthenticatedLayout: React.FC<AuthenticatedLayoutProps> = ({\r\n  children,\r\n}) => {\r\n  const [sceneTitle, setSceneTitle] = useState<\r\n    React.ReactNode | React.ReactNodeArray\r\n  >(null)\r\n\r\n  return (\r\n    <SidePanelDragProvider>\r\n      <AuthenticatedLayoutContext.Provider\r\n        value={{ sceneTitle, setSceneTitle }}\r\n      >\r\n        <StyledLayout>\r\n          <StyledHeader>\r\n            <Logo />\r\n            <Navigation />\r\n          </StyledHeader>\r\n          <Container>{sceneTitle}</Container>\r\n          <Main>\r\n            <Sidebar />\r\n            <Content>\r\n              <Paper>{children}</Paper>\r\n            </Content>\r\n          </Main>\r\n          <Footer>\r\n            &copy; Shadow Systems 2019 - {new Date().getFullYear()}\r\n          </Footer>\r\n        </StyledLayout>\r\n      </AuthenticatedLayoutContext.Provider>\r\n    </SidePanelDragProvider>\r\n  )\r\n}\r\n","import React from 'react'\r\nimport { RouteComponentProps } from '@reach/router'\r\n\r\nexport const Dashboard: React.FC<RouteComponentProps> = () => (\r\n  <>Dashboard</>\r\n)","import React from 'react'\r\nimport { Typography, Space } from 'antd'\r\nimport { Helmet } from 'react-helmet'\r\nimport styled from 'styled-components'\r\n\r\nconst { Title } = Typography\r\n\r\nconst StyledTitle = styled(Title)`\r\n  && {\r\n    margin: 0;\r\n    font-size: 28px;\r\n  }\r\n`\r\n\r\nconst ExtraContentContainer = styled.div`\r\n  margin-top: 2px;\r\n`\r\n\r\nexport interface SceneTitleProps {\r\n  title: string\r\n  extraContent?: React.ReactNode | React.ReactNodeArray\r\n}\r\n\r\nexport const SceneTitle: React.FC<SceneTitleProps> = ({\r\n  title,\r\n  extraContent,\r\n}) => (\r\n  <>\r\n    <Helmet>\r\n      <title>{title}</title>\r\n    </Helmet>\r\n    <Space direction=\"horizontal\" size=\"middle\">\r\n      <StyledTitle level={1} style={{ fontSize: 28 }}>\r\n        {title}\r\n      </StyledTitle>\r\n      {extraContent && (\r\n        <ExtraContentContainer>{extraContent}</ExtraContentContainer>\r\n      )}\r\n    </Space>\r\n  </>\r\n)\r\n","import { IconName } from 'constants/icons'\r\nimport {\r\n  FontAwesomeIcon,\r\n  FontAwesomeIconProps,\r\n} from '@fortawesome/react-fontawesome'\r\nimport React from 'react'\r\n\r\nexport interface IconProps\r\n  extends Pick<\r\n    FontAwesomeIconProps,\r\n    'color' | 'size' | 'className' | 'transform'\r\n  > {\r\n  icon: IconName\r\n}\r\n\r\nexport const Icon: React.FC<IconProps> = ({\r\n  icon,\r\n  color,\r\n  size,\r\n  className,\r\n  transform,\r\n}) => (\r\n  <FontAwesomeIcon\r\n    icon={icon}\r\n    color={color}\r\n    size={size}\r\n    transform={transform}\r\n    className={className}\r\n  />\r\n)\r\n","import React from 'react'\r\nimport { Button } from 'antd'\r\nimport { ButtonProps } from 'antd/es/button'\r\nimport { Icon } from 'components/Icon'\r\nimport { IconName } from 'constants/icons'\r\nimport styled from 'styled-components'\r\nimport { SizeProp } from '@fortawesome/fontawesome-svg-core'\r\n\r\nconst StyledIcon = styled(Icon)<{ size: 'sm' | 'xs' }>`\r\n  margin-right: ${({ size }) => size === 'sm' ? '12px' : '7px'};\r\n`\r\n\r\nexport interface IconButtonProps extends Omit<ButtonProps, 'icon'> {\r\n  icon: IconName\r\n  children: React.ReactNode | React.ReactNodeArray\r\n}\r\n\r\nexport const IconButton: React.FC<IconButtonProps> = ({\r\n  icon,\r\n  children,\r\n  size,\r\n  ...rest\r\n}) => {\r\n  const iconSize: SizeProp = size === 'large' ? 'sm' : 'xs'\r\n\r\n  return (\r\n    <Button size={size} {...rest}>\r\n      <>\r\n        <StyledIcon icon={icon} size={iconSize} />\r\n        {children}\r\n      </>\r\n    </Button>\r\n  )\r\n}\r\n","import React from 'react'\r\nimport { Table as TableBase } from 'antd'\r\nimport { TableProps as TablePropsBase } from 'antd/es/table'\r\n\r\nexport interface TableProps<T> extends TablePropsBase<T> {\r\n  isScrollable?: boolean\r\n}\r\n\r\nexport const Table: React.FC<TableProps<any>> = ({\r\n  columns,\r\n  dataSource,\r\n  loading,\r\n  pagination,\r\n  isScrollable = false,\r\n  ...rest\r\n}) => {\r\n  const scrollableWidth = columns.reduce(\r\n    (accumulator: number, currentValue) =>\r\n      accumulator + parseInt(String(currentValue.width), 10),\r\n    0\r\n  )\r\n\r\n  return (\r\n    <TableBase\r\n      columns={columns}\r\n      dataSource={dataSource}\r\n      loading={loading}\r\n      pagination={pagination}\r\n      scroll={{ x: isScrollable ? scrollableWidth : undefined }}\r\n      tableLayout=\"fixed\"\r\n      {...rest}\r\n    />\r\n  )\r\n}\r\n","import axios, { AxiosPromise } from 'axios'\r\nimport { RequestConfig } from './requestConfig'\r\nimport { PaginatedList } from 'model/api/PaginatedList'\r\nimport { Page } from 'model/api/Page'\r\n\r\nexport class PagesApi {\r\n  /**\r\n   * Get Pages\r\n   *\r\n   * @param parent\r\n   * @param page\r\n   * @param pageSize\r\n   */\r\n  static getPages(\r\n    parent?: string,\r\n    page?: number,\r\n    pageSize?: number,\r\n    config?: RequestConfig\r\n  ): AxiosPromise<PaginatedList<Page>> {\r\n    return axios({\r\n      ...config,\r\n      method: 'GET',\r\n      url: `/pages`,\r\n      params: {\r\n        parent,\r\n        page,\r\n        per_page: pageSize\r\n      },\r\n    })\r\n  }\r\n\r\n  /**\r\n   * Get All Pages\r\n   */\r\n  static getAllPages(\r\n    config?: RequestConfig\r\n  ): AxiosPromise<Page[]> {\r\n    return axios({\r\n      ...config,\r\n      method: 'GET',\r\n      url: `/pages/all`,\r\n    })\r\n  }\r\n\r\n  /**\r\n   * Get Page\r\n   *\r\n   */\r\n  static getPage(\r\n    identifier: string,\r\n    config?: RequestConfig\r\n  ): AxiosPromise<Page> {\r\n    return axios({\r\n      ...config,\r\n      method: 'GET',\r\n      url: `/pages/${identifier}`,\r\n    })\r\n  }\r\n\r\n  /**\r\n   * Create Page\r\n   *\r\n   * @param data\r\n   */\r\n  static createPage(\r\n    data: FormData,\r\n    config?: RequestConfig\r\n  ): AxiosPromise<{ identifier: string }> {\r\n    return axios({\r\n      ...config,\r\n      method: 'POST',\r\n      url: `/pages`,\r\n      data\r\n    })\r\n  }\r\n\r\n  /**\r\n   * Update Page\r\n   *\r\n   * @param identifier\r\n   * @param data\r\n   */\r\n  static updatePage(\r\n    identifier: string,\r\n    data: FormData,\r\n    config?: RequestConfig\r\n  ): AxiosPromise<{ identifier: string, version: number }> {\r\n    return axios({\r\n      ...config,\r\n      method: 'PUT',\r\n      url: `/pages/${identifier}`,\r\n      data\r\n    })\r\n  }\r\n\r\n  /**\r\n   * Update Page\r\n   *\r\n   * @param data\r\n   */\r\n  static setPageModules(\r\n    identifier: string,\r\n    data: FormData,\r\n    config?: RequestConfig,\r\n  ): AxiosPromise {\r\n\r\n    return axios({\r\n      ...config,\r\n      method: 'PUT',\r\n      url: `/pages/${identifier}/modules`,\r\n      data,\r\n    })\r\n  }\r\n\r\n  /**\r\n   * Get Page Versions\r\n   *\r\n   * @param page\r\n   * @param pageSize\r\n   * @param identifier\r\n   */\r\n  static getPageVersions(\r\n    identifier: string,\r\n    page?: number,\r\n    pageSize?: number,\r\n    config?: RequestConfig\r\n  ): AxiosPromise {\r\n    return axios({\r\n      ...config,\r\n      method: 'GET',\r\n      url: `/pages/${identifier}/versions`,\r\n      params: {\r\n        page,\r\n        per_page: pageSize\r\n      },\r\n    })\r\n  }\r\n\r\n  /**\r\n   * Publish Page\r\n   *\r\n   * @param identifier\r\n   */\r\n  static publishPage(\r\n    identifier: string,\r\n    config?: RequestConfig\r\n  ): AxiosPromise {\r\n    return axios({\r\n      ...config,\r\n      method: 'PUT',\r\n      url: `/pages/${identifier}/publish`,\r\n    })\r\n  }\r\n\r\n  /**\r\n   * Unpublish Page\r\n   *\r\n   * @param identifier\r\n   */\r\n  static unpublishPage(\r\n    identifier: string,\r\n    config?: RequestConfig\r\n  ): AxiosPromise {\r\n    return axios({\r\n      ...config,\r\n      method: 'PUT',\r\n      url: `/pages/${identifier}/unpublish`,\r\n    })\r\n  }\r\n\r\n  /**\r\n   * Delete Page\r\n   *\r\n   * @param identifier\r\n   */\r\n  static deletePage(\r\n    identifier: string,\r\n    config?: RequestConfig\r\n  ): AxiosPromise {\r\n    return axios({\r\n      ...config,\r\n      method: 'DELETE',\r\n      url: `/pages/${identifier}/delete`,\r\n    })\r\n  }\r\n\r\n  /**\r\n   * Revert Page to Version\r\n   *\r\n   * @param identifier\r\n   * @param version\r\n   */\r\n  static revertPage(\r\n    identifier: string,\r\n    version: number,\r\n    config?: RequestConfig\r\n  ): AxiosPromise {\r\n    return axios({\r\n      ...config,\r\n      method: 'DELETE',\r\n      url: `/pages/${identifier}/revert/${version}`,\r\n    })\r\n  }\r\n}","import styled from 'styled-components'\r\n\r\nexport interface BackdropProps {\r\n  show: boolean\r\n  background?: string\r\n  isScrollable?: boolean\r\n}\r\n\r\nexport const Backdrop = styled.div<BackdropProps>`\r\n  position: absolute;\r\n  top: 0;\r\n  left: 0;\r\n  width: 100vw;\r\n  height: ${({ isScrollable }) => (isScrollable ? '100%' : '100vh')};\r\n  min-height: 100vh;\r\n  background: ${({ background }) => background};\r\n  visibility: ${({ show }) => (show ? 'visible' : 'hidden')};\r\n  opacity: ${({ show }) => (show ? 0.2 : 0)};\r\n  transition: all 0.2s ease-out;\r\n`\r\n\r\nexport default Backdrop\r\n","import { Button } from 'antd'\r\nimport { Backdrop } from 'components/Backdrop'\r\nimport styled from 'styled-components'\r\nimport React, { useCallback, useEffect } from 'react'\r\nimport { COLORS } from 'constants/colors'\r\n\r\nconst Container = styled.div<ContainerProps>`\r\n  width: ${({ width }) => width};\r\n  padding: 25px;\r\n  background-color: ${COLORS.white};\r\n  border: 1px solid ${COLORS.gray2};\r\n  border-radius: 4px;\r\n`\r\n\r\nconst Buttons = styled.div`\r\n  display: grid;\r\n  grid-gap: 12px;\r\n  grid-template-columns: min-content min-content;\r\n  justify-content: end;\r\n`\r\n\r\nconst Text = styled.div`\r\n  margin-bottom: 25px;\r\n  white-space: initial;\r\n`\r\n\r\nexport const DialogContainer = styled.div<{ top?: string; left?: string }>`\r\n  position: relative;\r\n\r\n  ${Container} {\r\n    position: fixed;\r\n    z-index: 200;\r\n    margin-top: ${({ top }) => (top ? top : '0')};\r\n    margin-left: ${({ left }) => (left ? left : '0')};\r\n  }\r\n`\r\n\r\nexport interface DialogProps {\r\n  width?: string\r\n  showBackdrop?: boolean\r\n  text?: React.ReactNode | React.ReactNodeArray\r\n  confirm?: React.ReactNode | React.ReactNodeArray\r\n  cancel?: React.ReactNode | React.ReactNodeArray\r\n  onConfirm?: () => void\r\n  onCancel?: () => void\r\n  className?: string\r\n}\r\n\r\nexport type ContainerProps = Pick<DialogProps, 'width'>\r\n\r\nexport const Dialog: React.FC<DialogProps> = ({\r\n  width = '18rem',\r\n  showBackdrop = false,\r\n  text,\r\n  confirm,\r\n  cancel,\r\n  onConfirm,\r\n  onCancel,\r\n  className,\r\n}) => {\r\n  const keyDownComponent = () => window\r\n\r\n  const handleCancel = useCallback(\r\n    (event: any) => {\r\n      if (onCancel) {\r\n        if (event instanceof KeyboardEvent) {\r\n          //  Call onClose prop on ESC key down\r\n          if (event.keyCode === 27) {\r\n            onCancel()\r\n          }\r\n        } else {\r\n          if (event.target === event.currentTarget) {\r\n            onCancel()\r\n          }\r\n        }\r\n      }\r\n    },\r\n    [onCancel]\r\n  )\r\n\r\n  useEffect(() => {\r\n    if (onCancel) {\r\n      keyDownComponent().addEventListener('keydown', handleCancel, true)\r\n    }\r\n\r\n    return () => {\r\n      if (onCancel) {\r\n        keyDownComponent().removeEventListener('keydown', handleCancel, true)\r\n      }\r\n    }\r\n  }, [onCancel, handleCancel])\r\n\r\n  return (\r\n    <>\r\n      <Container width={width} className={className}>\r\n        <Text>{text}</Text>\r\n        <Buttons>\r\n          <Button onClick={onConfirm} size=\"small\" type=\"primary\">\r\n            {confirm}\r\n          </Button>\r\n          <Button onClick={handleCancel} size=\"small\">\r\n            {cancel}\r\n          </Button>\r\n        </Buttons>\r\n      </Container>\r\n\r\n      {showBackdrop && <Backdrop show onClick={handleCancel} />}\r\n    </>\r\n  )\r\n}\r\n","import { IconName } from 'constants/icons'\r\nimport { Dropdown as DropdownBase, Menu as MenuBase } from 'antd'\r\nimport React, { useState } from 'react'\r\nimport { rgba } from 'polished'\r\nimport { Icon } from 'components/Icon'\r\nimport { Dialog, DialogContainer, DialogProps } from 'components/Dialog'\r\nimport styled from 'styled-components'\r\nimport { COLORS } from 'constants/colors'\r\n\r\nconst { Item, Divider } = MenuBase\r\n\r\nexport const StyledItem = styled(Item)`\r\n  width: 180px;\r\n\r\n  svg {\r\n    margin-right: 20px;\r\n  }\r\n`\r\n\r\nexport const StyledMenu = styled(MenuBase)`\r\n  && {\r\n    border: 1px solid ${COLORS.gray2};\r\n  }\r\n`\r\n\r\nconst Wrapper = styled.div`\r\n  display: grid;\r\n  grid-template-columns: 28px auto;\r\n  align-items: center;\r\n`\r\n\r\nconst StyledDialog = styled(Dialog)`\r\n  cursor: initial;\r\n`\r\n\r\nconst ICON_COLOR = rgba(COLORS.black, 0.51)\r\nconst ICON_COLOR_DISABLED = rgba(COLORS.black, 0.25)\r\n\r\nexport interface DropdownProps {\r\n  children: React.ReactNode | React.ReactNodeArray\r\n  items: DropdownItemProps[]\r\n  trigger?: Array<'click' | 'hover' | 'contextMenu'>\r\n}\r\n\r\nexport interface DropdownItemProps {\r\n  children: React.ReactNode | React.ReactNodeArray\r\n  icon?: IconName\r\n  onClick?: () => void\r\n  closeOnClick?: boolean\r\n  key?: React.ReactText\r\n  hasDivider?: boolean\r\n  disabled?: boolean\r\n  dialog?: Omit<DialogProps, 'onConfirm' | 'onCancel'>\r\n}\r\n\r\nconst itemBuilder = (\r\n  {\r\n    children,\r\n    onClick,\r\n    closeOnClick = true,\r\n    icon,\r\n    key,\r\n    disabled = false,\r\n    dialog,\r\n  }: DropdownItemProps,\r\n  index: number,\r\n  handleClick: (onClick: () => void, closeOnClick: boolean) => void,\r\n  handleDialogToggle: () => void,\r\n  isDialogOpen?: boolean\r\n) => {\r\n  const itemContent = icon ? (\r\n    <Wrapper>\r\n      <Icon\r\n        icon={icon}\r\n        size=\"sm\"\r\n        color={disabled ? ICON_COLOR_DISABLED : ICON_COLOR}\r\n      />\r\n      {children}\r\n    </Wrapper>\r\n  ) : (\r\n    children\r\n  )\r\n\r\n  return (\r\n    <StyledItem\r\n      onClick={() =>\r\n        onClick &&\r\n        (dialog\r\n          ? !isDialogOpen && handleDialogToggle()\r\n          : handleClick(onClick, closeOnClick))\r\n      }\r\n      key={key ? key : index}\r\n      disabled={disabled}\r\n      data-test=\"DropdownItem\"\r\n    >\r\n      {dialog ? (\r\n        <DialogContainer top=\"-25px\" left={`calc(-100% - 130px)`}>\r\n          {itemContent}\r\n          {isDialogOpen && (\r\n            <StyledDialog\r\n              {...dialog}\r\n              onConfirm={() => onClick && handleClick(onClick, closeOnClick)}\r\n              onCancel={() => handleDialogToggle()}\r\n            />\r\n          )}\r\n        </DialogContainer>\r\n      ) : (\r\n        itemContent\r\n      )}\r\n    </StyledItem>\r\n  )\r\n}\r\n\r\nexport const Dropdown: React.FC<DropdownProps> = ({\r\n  children,\r\n  items,\r\n  trigger = ['click'],\r\n}) => {\r\n  const [visible, setVisible] = useState(false)\r\n  const [isDialogOpen, setIsDialogOpen] = useState(false)\r\n\r\n  const handleVisibleChange = (flag: boolean) => {\r\n    if (visible) {\r\n      setIsDialogOpen(false)\r\n    }\r\n\r\n    setVisible(flag)\r\n  }\r\n\r\n  const handleDialogToggle = () => {\r\n    setIsDialogOpen(!isDialogOpen)\r\n  }\r\n\r\n  const handleClick = (onClick: () => void, closeOnClick: boolean) => {\r\n    if (onClick) {\r\n      onClick()\r\n    }\r\n\r\n    if (closeOnClick) {\r\n      setIsDialogOpen(false)\r\n      setVisible(false)\r\n    }\r\n  }\r\n\r\n  const overlayItems = []\r\n\r\n  for (let item, i = 0; (item = items[i]); i++) {\r\n    if (item.hasDivider) {\r\n      overlayItems.push(<Divider key={'separator-' + i} />)\r\n    }\r\n\r\n    overlayItems.push(\r\n      itemBuilder(item, i, handleClick, handleDialogToggle, isDialogOpen)\r\n    )\r\n  }\r\n\r\n  const renderOverlay = <StyledMenu>{overlayItems}</StyledMenu>\r\n\r\n  return (\r\n    <DropdownBase\r\n      overlay={renderOverlay}\r\n      trigger={trigger}\r\n      onVisibleChange={handleVisibleChange}\r\n      visible={visible}\r\n    >\r\n      {children}\r\n    </DropdownBase>\r\n  )\r\n}\r\n","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React from \"react\";\n\nvar _ref2 = /*#__PURE__*/React.createElement(\"path\", {\n  transform: \"rotate(90 511.99999999999994,512.0000000000001)\",\n  id: \"svg_1\",\n  d: \"m128,512q0,-27 18.5,-45.5t45.5,-18.5t45.5,18.5t18.5,45.5t-18.5,45.5t-45.5,18.5t-45.5,-18.5t-18.5,-45.5zm320,0q0,-27 18.5,-45.5t45.5,-18.5t45.5,18.5t18.5,45.5t-18.5,45.5t-45.5,18.5t-45.5,-18.5t-18.5,-45.5zm320,0q0,-27 18.5,-45.5t45.5,-18.5t45.5,18.5t18.5,45.5t-18.5,45.5t-45.5,18.5t-45.5,-18.5t-18.5,-45.5z\"\n});\n\nconst SvgIconContextMenu = (_ref) => {\n  let svgRef = _ref.svgRef,\n      title = _ref.title,\n      props = _objectWithoutProperties(_ref, [\"svgRef\", \"title\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    width: 1024,\n    height: 1024,\n    viewBox: \"0 0 1024 1024\",\n    className: \"icon\",\n    ref: svgRef\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", null, title) : null, _ref2);\n};\n\nconst ForwardRef = React.forwardRef((props, ref) => /*#__PURE__*/React.createElement(SvgIconContextMenu, _extends({\n  svgRef: ref\n}, props)));\nexport default __webpack_public_path__ + \"static/media/icon-context-menu.e08e3f80.svg\";\nexport { ForwardRef as ReactComponent };","import { ReactComponent as IconContextMenuSvg } from 'assets/images/icon-context-menu.svg'\r\nimport { rgba } from 'polished'\r\nimport React from 'react'\r\nimport { COLORS } from 'constants/colors'\r\n\r\nconst GRAY = rgba(COLORS.black, 0.65)\r\n\r\ninterface IconContextMenuProps {\r\n  size?: number\r\n  fill?: string\r\n}\r\n\r\nexport const IconContextMenu: React.FC<IconContextMenuProps> = ({\r\n  size = 32,\r\n  fill = GRAY,\r\n}) => <IconContextMenuSvg fill={fill} width={size} height={size} />\r\n","import { Button } from 'antd'\r\nimport { IconContextMenu } from 'components/IconContextMenu'\r\nimport styled from 'styled-components'\r\nimport React from 'react'\r\nimport { COLORS } from 'constants/colors'\r\n\r\nexport const StyledButton = styled(Button)<{ size: 'small' | 'large' }>`\r\n  && {\r\n    display: flex;\r\n    align-content: center;\r\n    align-items: center;\r\n    justify-content: center;\r\n    width: ${({ size }) => (size === 'small' ? '25px' : '38px')};\r\n    height: ${({ size }) => (size === 'small' ? '25px' : '38px')};\r\n    padding: 0;\r\n\r\n    :hover,\r\n    :focus,\r\n    :active {\r\n      svg {\r\n        transition: fill 0.3s;\r\n        fill: ${COLORS.blue1};\r\n      }\r\n    }\r\n  }\r\n`\r\nexport interface DropdownButtonProps {\r\n  onClick?: () => void\r\n  size?: 'small' | 'large'\r\n}\r\n\r\nexport const DropdownButton: React.FC<DropdownButtonProps> = ({\r\n  onClick,\r\n  size = 'large',\r\n}) => (\r\n  <StyledButton onClick={onClick} size={size}>\r\n    <IconContextMenu size={size === 'small' ? 14 : 18} />\r\n  </StyledButton>\r\n)\r\n","import {\r\n  Dropdown as DropdownBase,\r\n  DropdownItemProps,\r\n} from 'components/Dropdown'\r\nimport { DropdownButton } from 'components/DropdownButton'\r\nimport React from 'react'\r\nimport { useTranslation } from 'react-i18next'\r\n\r\nexport type DropdownAction = 'edit' | 'add' | 'publish' | 'unpublish' | 'delete'\r\n\r\nexport interface DropdownProps {\r\n  onClick: (action: DropdownAction) => void\r\n  disabledActions?: DropdownAction[]\r\n}\r\n\r\nexport const Dropdown: React.FC<DropdownProps> = ({ onClick }) => {\r\n  const { t } = useTranslation('content')\r\n\r\n  const handleClick = (action: DropdownAction) => {\r\n    onClick(action)\r\n  }\r\n\r\n  const items: DropdownItemProps[] = [\r\n    {\r\n      children: t('table.context-menu.edit'),\r\n      onClick: () => handleClick('edit'),\r\n      icon: 'pen',\r\n    },\r\n    {\r\n      children: t('table.context-menu.add'),\r\n      onClick: () => handleClick('add'),\r\n      icon: 'plus-square',\r\n    },\r\n    {\r\n      children: t('table.context-menu.publish'),\r\n      onClick: () => handleClick('publish'),\r\n      icon: 'cloud-upload-alt',\r\n    },\r\n    {\r\n      children: t('table.context-menu.unpublish'),\r\n      onClick: () => handleClick('unpublish'),\r\n      icon: 'cloud-download-alt',\r\n    },\r\n    {\r\n      children: t('table.context-menu.delete'),\r\n      onClick: () => handleClick('delete'),\r\n      icon: 'trash-alt',\r\n      dialog: {\r\n        text: t('table.context-menu.delete-dialog.text'),\r\n        cancel: t('table.context-menu.delete-dialog.cancel'),\r\n        confirm: t('table.context-menu.delete-dialog.confirm'),\r\n      },\r\n    },\r\n  ]\r\n\r\n  return (\r\n    <div>\r\n      <DropdownBase items={items} data-test=\"Dropdown\">\r\n        <DropdownButton size=\"small\" />\r\n      </DropdownBase>\r\n    </div>\r\n  )\r\n}\r\n","export const DATE_FORMAT = 'dd. MM. yyyy'\r\nexport const DATE_TIME_FORMAT = 'dd. MM. yyyy HH:mm'\r\n\r\nexport const DATEPICKER_DATE_FORMAT = [\r\n  'DD. MM. YYYY',\r\n  'DD.MM.YYYY',\r\n  'DD/MM/YYYY',\r\n  'D. M. YYYY',\r\n  'D.M.YYYY',\r\n  'D/M/YYYY',\r\n]\r\n\r\nexport const DATEPICKER_DATE_TIME_FORMAT = [\r\n  'DD. MM. YYYY HH:mm:ss',\r\n  'DD.MM.YYYY HH:mm:ss',\r\n  'DD/MM/YYYY HH:mm:ss',\r\n  'D. M. YYYY H:m:s',\r\n  'D.M.YYYY H:m:s',\r\n  'D/M/YYYY H:m:s',\r\n]","export enum PageStatusEnum {\r\n  'DRAFT' = 'DRAFT',\r\n  'PUBLISHED' = 'PUBLISHED',\r\n  'UNPUBLISHED' = 'UNPUBLISHED',\r\n  'DELETED' = 'DELETED',\r\n}\r\n","import React from 'react'\r\nimport { ColumnProps } from 'antd/es/table'\r\nimport { MappedPage } from './mapPages'\r\nimport i18next from 'i18next'\r\nimport { DropdownAction, Dropdown } from '../components/Dropdown'\r\nimport { Icon } from 'components/Icon'\r\nimport { COLORS, PAGE_STATUS_COLORS } from 'constants/colors'\r\nimport styled, { css } from 'styled-components'\r\nimport { Link } from '@reach/router'\r\nimport { format } from 'date-fns'\r\nimport { DATE_TIME_FORMAT } from 'constants/date'\r\nimport { Tag } from 'antd'\r\nimport { PageStatusEnum } from 'model/api/PageStatusEnum'\r\n\r\nconst Name = styled.div`\r\n  display: grid;\r\n  grid-gap: 6px;\r\n  grid-template-columns: 24px max-content;\r\n  align-items: center;\r\n`\r\n\r\nconst TagGroup = styled.div<{ isPublished: boolean }>`\r\n  ${({ isPublished }) => isPublished && css`\r\n    display: flex;\r\n  `}\r\n`\r\n\r\nconst { PUBLIC_URL } = process.env\r\n\r\nexport const getPagesColumns = (\r\n  t: i18next.TFunction,\r\n  onClick?: (action: DropdownAction, identifier: string) => void\r\n): ColumnProps<any>[] => [\r\n  {\r\n    key: 'name',\r\n    dataIndex: 'name',\r\n    title: t('table.columns.name'),\r\n    width: 250,\r\n    render: (value: string, { has_children, identifier }: MappedPage) => {\r\n      const name = (\r\n        <Name>\r\n          <Icon\r\n            icon={has_children ? 'folder' : 'file'}\r\n            color={has_children ? COLORS.orange2 : COLORS.blue1}\r\n          />\r\n          {value}\r\n        </Name>\r\n      )\r\n\r\n      if (has_children) {\r\n        return (\r\n          <Link to={PUBLIC_URL + '/content?parent=' + identifier}>{name}</Link>\r\n        )\r\n      } else {\r\n        return name\r\n      }\r\n    },\r\n  },\r\n  {\r\n    key: 'path',\r\n    dataIndex: 'path',\r\n    title: t('table.columns.path'),\r\n    width: 250,\r\n    render: (value: string) => (\r\n      <Link to={value} target=\"_blank\">\r\n        {value}\r\n      </Link>\r\n    ),\r\n  },\r\n  {\r\n    key: 'status',\r\n    dataIndex: 'status',\r\n    title: t('table.columns.status'),\r\n    width: 140,\r\n    render: (value: PageStatusEnum, { is_published }: MappedPage) => {\r\n      const isPublished = is_published && value !== PageStatusEnum.PUBLISHED\r\n\r\n      return (\r\n        <TagGroup isPublished={isPublished}>\r\n          <Tag color={PAGE_STATUS_COLORS[value]}>{value}</Tag>\r\n          {isPublished && (\r\n            <Tag color={PAGE_STATUS_COLORS[PageStatusEnum.PUBLISHED]}>\r\n              {PageStatusEnum.PUBLISHED}\r\n            </Tag>\r\n          )}\r\n        </TagGroup>\r\n      )\r\n    },\r\n  },\r\n  {\r\n    key: 'version',\r\n    dataIndex: 'version',\r\n    title: t('table.columns.version'),\r\n    width: 110,\r\n  },\r\n  {\r\n    key: 'created_at',\r\n    dataIndex: 'created_at',\r\n    title: t('table.columns.created-at'),\r\n    render: (value: Date) => format(value, DATE_TIME_FORMAT),\r\n    width: 180,\r\n  },\r\n  {\r\n    key: 'modified_at',\r\n    dataIndex: 'modified_at',\r\n    title: t('table.columns.modified-at'),\r\n    render: (value: Date | null) =>\r\n      value ? format(value, DATE_TIME_FORMAT) : '-',\r\n    width: 180,\r\n  },\r\n  {\r\n    key: 'context_menu',\r\n    dataIndex: 'context_menu',\r\n    width: 60,\r\n    render: (_, { identifier }: MappedPage) => (\r\n      <Dropdown\r\n        onClick={(action: DropdownAction) =>\r\n          onClick && onClick(action, identifier)\r\n        }\r\n      />\r\n    ),\r\n  },\r\n]\r\n","import { Page } from 'model/api/Page'\r\nimport { PageStatusEnum } from 'model/api/PageStatusEnum'\r\n\r\nexport interface MappedPage {\r\n  key: string\r\n  identifier: string\r\n  parent: string\r\n  name: string | React.ReactElement\r\n  path: string\r\n  created_at: Date\r\n  created_by: number | null\r\n  modified_at: Date | null\r\n  modified_by: number | null\r\n  status: PageStatusEnum\r\n  version: number\r\n  has_children: boolean\r\n  is_published: boolean\r\n}\r\n\r\nexport const mapPages = (data: Page[]): MappedPage[] =>\r\n  data.map(\r\n    ({\r\n      identifier,\r\n      parent,\r\n      name,\r\n      path,\r\n      created_at,\r\n      created_by,\r\n      modified_at,\r\n      modified_by,\r\n      status,\r\n      version,\r\n      has_children,\r\n      is_published,\r\n    }) => ({\r\n      key: String(identifier),\r\n      identifier,\r\n      parent,\r\n      name,\r\n      path,\r\n      created_at: new Date(created_at),\r\n      created_by,\r\n      modified_at: modified_at ? new Date(modified_at) : null,\r\n      modified_by,\r\n      status,\r\n      version,\r\n      has_children: !!has_children,\r\n      is_published: !!is_published,\r\n    })\r\n  )\r\n","import React, { useCallback, useState, useEffect, useRef } from 'react'\r\nimport { Table as TableBase } from 'components/Table'\r\nimport { PagesApi } from 'api/Pages'\r\nimport axios, { CancelTokenSource } from 'axios'\r\nimport { useTranslation } from 'react-i18next'\r\nimport { DropdownAction } from './Dropdown'\r\nimport { navigate, WindowLocation } from '@reach/router'\r\nimport { notification } from 'antd'\r\nimport { getPagesColumns } from '../utils/getPagesColumns'\r\nimport { mapPages, MappedPage } from '../utils/mapPages'\r\nimport { parse } from 'query-string'\r\nimport { Page } from 'model/api/Page'\r\nimport { IconButton } from 'components/IconButton'\r\nimport styled from 'styled-components'\r\nimport { COLORS } from 'constants/colors'\r\n\r\nconst StyledTable = styled(TableBase)`\r\n  && {\r\n    .ant-table-title {\r\n      background: ${COLORS.gray0};\r\n      border-bottom: 1px solid #f0f0f0;\r\n    }\r\n  }\r\n`\r\n\r\nexport interface TableProps {\r\n  location: WindowLocation\r\n}\r\n\r\nexport const Table: React.FC<TableProps> = ({ location }) => {\r\n  const { PUBLIC_URL } = process.env\r\n  const { t } = useTranslation('content')\r\n  const [data, setData] = useState<MappedPage[]>([])\r\n  const [loading, setLoading] = useState(false)\r\n  const [total, setTotal] = useState(0)\r\n  const [page, setPage] = useState(1)\r\n  const [parentPage, setParentPage] = useState<Page>()\r\n  const [pageSize, setPageSize] = useState(0)\r\n  const cancelTokenRef = useRef<CancelTokenSource>(axios.CancelToken.source())\r\n  const { parent } = parse(location.search)\r\n\r\n  const getData = useCallback(async () => {\r\n    setLoading(true)\r\n\r\n    const {\r\n      data: { data, total, per_page },\r\n    } = await PagesApi.getPages(\r\n      parent ? String(parent) : undefined,\r\n      page,\r\n      pageSize,\r\n      {\r\n        cancelToken: cancelTokenRef.current.token,\r\n      }\r\n    )\r\n\r\n    setData(mapPages(data))\r\n    setTotal(total)\r\n    setPageSize(per_page)\r\n    setLoading(false)\r\n  }, [page, pageSize, parent])\r\n\r\n  const getParentPage = useCallback(async () => {\r\n    if (parent) {\r\n      try {\r\n        setLoading(true)\r\n\r\n        const { data } = await PagesApi.getPage(String(parent), {\r\n          cancelToken: cancelTokenRef.current.token,\r\n        })\r\n        setParentPage(data)\r\n        setLoading(false)\r\n      } catch (e) {\r\n        setLoading(false)\r\n      }\r\n    } else {\r\n      setParentPage(undefined)\r\n    }\r\n  }, [parent])\r\n\r\n  const handleActionClick = useCallback(\r\n    async (action: DropdownAction, identifier: string) => {\r\n      switch (action) {\r\n        case 'edit':\r\n          navigate(PUBLIC_URL + '/content/' + identifier)\r\n          break\r\n        case 'add':\r\n          navigate(PUBLIC_URL + '/content/new?parent=' + identifier)\r\n          break\r\n        case 'publish':\r\n          try {\r\n            await PagesApi.publishPage(identifier, {\r\n              cancelToken: cancelTokenRef.current.token,\r\n            })\r\n\r\n            notification.success({\r\n              message: t('table.publish-success'),\r\n            })\r\n\r\n            getData()\r\n          } catch (e) {}\r\n          break\r\n        case 'unpublish':\r\n          try {\r\n            await PagesApi.unpublishPage(identifier, {\r\n              cancelToken: cancelTokenRef.current.token,\r\n            })\r\n\r\n            notification.success({\r\n              message: t('table.unpublish-success'),\r\n            })\r\n\r\n            getData()\r\n          } catch (e) {}\r\n          break\r\n        case 'delete':\r\n          try {\r\n            await PagesApi.deletePage(identifier, {\r\n              cancelToken: cancelTokenRef.current.token,\r\n            })\r\n\r\n            notification.success({\r\n              message: t('table.delete-success'),\r\n            })\r\n\r\n            getData()\r\n          } catch (e) {}\r\n          break\r\n        default:\r\n          break\r\n      }\r\n    },\r\n    [PUBLIC_URL, getData, t]\r\n  )\r\n\r\n  const handlePageChange = useCallback((page: number) => {\r\n    setPage(page)\r\n  }, [])\r\n\r\n  const handleLevelUp = useCallback(() => {\r\n    navigate(PUBLIC_URL + '/content?parent=' + parentPage.parent)\r\n  }, [parentPage, PUBLIC_URL])\r\n\r\n  useEffect(() => {\r\n    getParentPage()\r\n    getData()\r\n  }, [getData, getParentPage])\r\n\r\n  useEffect(() => {\r\n    const cancelToken = cancelTokenRef.current\r\n\r\n    return () => cancelToken.cancel()\r\n  }, [])\r\n\r\n  return (\r\n    <>\r\n      <StyledTable\r\n        isScrollable\r\n        columns={getPagesColumns(t, handleActionClick)}\r\n        dataSource={data}\r\n        loading={loading}\r\n        title={() => (\r\n          <IconButton\r\n            onClick={handleLevelUp}\r\n            icon=\"arrow-up\"\r\n            disabled={!parentPage}\r\n          >\r\n            {t('one-level-up')}\r\n          </IconButton>\r\n        )}\r\n        pagination={{\r\n          current: page,\r\n          pageSize,\r\n          total,\r\n          onChange: handlePageChange,\r\n        }}\r\n      />\r\n    </>\r\n  )\r\n}\r\n","import React, { useContext, useEffect, useCallback } from 'react'\r\nimport { RouteComponentProps, navigate } from '@reach/router'\r\nimport { useTranslation } from 'react-i18next'\r\nimport { SceneTitle } from 'components/SceneTitle'\r\nimport { AuthenticatedLayoutContext } from 'components/Layout/AuthenticatedLayout'\r\nimport { Space } from 'antd'\r\nimport { IconButton } from 'components/IconButton'\r\nimport { Table } from './components/Table'\r\n\r\nexport const Content: React.FC<RouteComponentProps> = ({ location }) => {\r\n  const { PUBLIC_URL } = process.env\r\n  const { t } = useTranslation('content')\r\n  const { setSceneTitle } = useContext(AuthenticatedLayoutContext)\r\n\r\n  const handleCreatePage = useCallback(() => {\r\n    navigate(PUBLIC_URL + '/content/new')\r\n  }, [PUBLIC_URL])\r\n\r\n  useEffect(() => {\r\n    setSceneTitle(<SceneTitle title={t('scene-title')} />)\r\n  }, [setSceneTitle, t])\r\n\r\n  return (\r\n    <Space size=\"large\" direction=\"vertical\" style={{ width: '100%' }}>\r\n      <IconButton\r\n        size=\"middle\"\r\n        type=\"primary\"\r\n        icon=\"plus\"\r\n        onClick={handleCreatePage}\r\n      >\r\n        {t('create-new-page')}\r\n      </IconButton>\r\n      <Table location={location} />\r\n    </Space>\r\n  )\r\n}\r\n","import axios, { AxiosPromise } from 'axios'\r\nimport { RequestConfig } from './requestConfig'\r\nimport { CatalogItem } from 'model/api/CatalogItem'\r\nimport { PaginatedList } from 'model/api/PaginatedList'\r\nimport { CatalogItemDetail } from 'model/api/CatalogItemDetail'\r\nimport { CatalogItemPublic } from 'model/api/CatalogItemPublic'\r\n\r\nexport class CatalogItemsApi {\r\n  /**\r\n   * Get Catalog Items\r\n   *\r\n   * @param page\r\n   * @param pageSize\r\n   * @param categories\r\n   * @param name\r\n   * @param sku\r\n   */\r\n  static getCatalogItems(\r\n    page?: number,\r\n    pageSize?: number,\r\n    categories?: number[],\r\n    name?: string,\r\n    sku?: string,\r\n    config?: RequestConfig\r\n  ): AxiosPromise<PaginatedList<CatalogItem>> {\r\n    return axios({\r\n      ...config,\r\n      method: 'GET',\r\n      url: `/catalog-items`,\r\n      params: {\r\n        page,\r\n        per_page: pageSize,\r\n        category: categories,\r\n        name,\r\n        sku,\r\n      },\r\n    })\r\n  }\r\n\r\n  static getPublicCatalogItems(\r\n    page?: number,\r\n    pageSize?: number,\r\n    languageCode?: string,\r\n    categoryId?: number,\r\n    config?: RequestConfig\r\n  ): AxiosPromise<PaginatedList<CatalogItemPublic>> {\r\n    return axios({\r\n      ...config,\r\n      method: 'GET',\r\n      url: `/catalog-items/public`,\r\n      params: {\r\n        page,\r\n        per_page: pageSize,\r\n        language_code: languageCode,\r\n        category_id: categoryId,\r\n      },\r\n    })\r\n  }\r\n\r\n  static getPublicCatalogItem(\r\n    catalogItemId: number,\r\n    language: string = null,\r\n    isListing: boolean = false,\r\n    config?: RequestConfig\r\n  ): AxiosPromise<CatalogItemPublic> {\r\n    return axios({\r\n      ...config,\r\n      method: 'GET',\r\n      url: `/catalog-items/${catalogItemId}/public`,\r\n      params: {\r\n        language,\r\n        is_listing: +isListing,\r\n      },\r\n    })\r\n  }\r\n\r\n  /**\r\n   * Get Catalog Item\r\n   *\r\n   * @param catalogItemId\r\n   */\r\n  static getCatalogItem(\r\n    catalogItemId: number,\r\n    config?: RequestConfig\r\n  ): AxiosPromise<CatalogItemDetail> {\r\n    return axios({\r\n      ...config,\r\n      method: 'GET',\r\n      url: `/catalog-items/${catalogItemId}`,\r\n    })\r\n  }\r\n\r\n  /**\r\n   * Create Catalog Item\r\n   *\r\n   * @param data\r\n   */\r\n  static createCatalogItem(\r\n    data: FormData,\r\n    config?: RequestConfig\r\n  ): AxiosPromise<{ id: number }> {\r\n    return axios({\r\n      ...config,\r\n      method: 'POST',\r\n      url: `/catalog-items`,\r\n      data,\r\n    })\r\n  }\r\n\r\n  /**\r\n   * Update Catalog Item\r\n   *\r\n   * @param catalogItemId\r\n   * @param data\r\n   */\r\n  static updateCatalogItem(\r\n    catalogItemId: number,\r\n    data: FormData,\r\n    config?: RequestConfig\r\n  ): AxiosPromise {\r\n    return axios({\r\n      ...config,\r\n      method: 'PUT',\r\n      url: `/catalog-items/${catalogItemId}`,\r\n      data,\r\n    })\r\n  }\r\n\r\n  /**\r\n   * Publish Catalog Item\r\n   *\r\n   * @param catalogItemId\r\n   */\r\n  static publishCatalogItem(\r\n    catalogItemId: number,\r\n    config?: RequestConfig\r\n  ): AxiosPromise {\r\n    return axios({\r\n      ...config,\r\n      method: 'PUT',\r\n      url: `/catalog-items/${catalogItemId}/publish`,\r\n    })\r\n  }\r\n\r\n  /**\r\n   * Unpublish Catalog Item\r\n   *\r\n   * @param catalogItemId\r\n   */\r\n  static unpublishCatalogItem(\r\n    catalogItemId: number,\r\n    config?: RequestConfig\r\n  ): AxiosPromise {\r\n    return axios({\r\n      ...config,\r\n      method: 'PUT',\r\n      url: `/catalog-items/${catalogItemId}/unpublish`,\r\n    })\r\n  }\r\n\r\n  /**\r\n   * Delete Catalog Item\r\n   *\r\n   * @param catalogItemId\r\n   */\r\n  static deleteCatalogItem(\r\n    catalogItemId: number,\r\n    config?: RequestConfig\r\n  ): AxiosPromise {\r\n    return axios({\r\n      ...config,\r\n      method: 'DELETE',\r\n      url: `/catalog-items/${catalogItemId}`,\r\n    })\r\n  }\r\n}\r\n","import {\r\n  Dropdown as DropdownBase,\r\n  DropdownItemProps,\r\n} from 'components/Dropdown'\r\nimport { DropdownButton } from 'components/DropdownButton'\r\nimport React from 'react'\r\nimport { useTranslation } from 'react-i18next'\r\n\r\n\r\nexport type DropdownAction = 'edit' | 'publish' | 'unpublish' | 'delete'\r\n\r\nexport interface DropdownProps {\r\n  onClick: (action: DropdownAction) => void\r\n  disabledActions?: DropdownAction[]\r\n}\r\n\r\nexport const Dropdown: React.FC<DropdownProps> = ({ onClick, disabledActions = [] }) => {\r\n  const { t } = useTranslation('catalog')\r\n\r\n  const handleClick = (action: DropdownAction) => {\r\n    onClick(action)\r\n  }\r\n\r\n  const items: DropdownItemProps[] = [\r\n    {\r\n      children: t('table.context-menu.edit'),\r\n      onClick: () => handleClick('edit'),\r\n      icon: 'pen',\r\n    },\r\n    {\r\n      children: t('table.context-menu.publish'),\r\n      onClick: () => handleClick('publish'),\r\n      icon: 'cloud-upload-alt',\r\n      disabled: disabledActions.includes('publish')\r\n    },    \r\n    {\r\n      children: t('table.context-menu.unpublish'),\r\n      onClick: () => handleClick('unpublish'),\r\n      icon: 'cloud-download-alt',\r\n      disabled: disabledActions.includes('unpublish')\r\n    },    \r\n    {\r\n      children: t('table.context-menu.delete'),\r\n      onClick: () => handleClick('delete'),\r\n      icon: 'trash-alt',\r\n      dialog: {\r\n        text: t('table.context-menu.delete-dialog.text'),\r\n        cancel: t('table.context-menu.delete-dialog.cancel'),\r\n        confirm: t('table.context-menu.delete-dialog.confirm')\r\n      }\r\n    },\r\n  ]\r\n\r\n  return (\r\n    <div>\r\n      <DropdownBase items={items} data-test=\"Dropdown\">\r\n        <DropdownButton size=\"small\" />\r\n      </DropdownBase>\r\n    </div>\r\n  )\r\n}\r\n","import React from 'react'\r\nimport { ColumnProps } from 'antd/es/table'\r\nimport { MappedCatalogItem } from './mapCatalogItems'\r\nimport i18next from 'i18next'\r\nimport { DropdownAction, Dropdown } from '../components/Dropdown'\r\nimport { format } from 'date-fns'\r\nimport { DATE_TIME_FORMAT } from 'constants/date'\r\nimport { Tag } from 'antd'\r\nimport { COLORS } from 'constants/colors'\r\nimport { Link } from '@reach/router'\r\n\r\nconst { PUBLIC_URL } = process.env\r\n\r\nexport const getCatalogItemsColumns = (\r\n  t: i18next.TFunction,\r\n  onClick?: (action: DropdownAction, id: number) => void\r\n): ColumnProps<any>[] => [\r\n  {\r\n    key: 'id',\r\n    dataIndex: 'id',\r\n    title: t('table.columns.id'),\r\n    fixed: 'left',\r\n    width: 90,\r\n  },\r\n  {\r\n    key: 'field_name_value',\r\n    dataIndex: 'field_name_value',\r\n    title: t('table.columns.field-name-value'),\r\n    width: 200,\r\n    render: (value: string | null, record: MappedCatalogItem) => (\r\n      <Link to={`${PUBLIC_URL}/catalog/${record.id}`}>\r\n        {value ? value : t('table.n-a')}\r\n      </Link>\r\n    ),\r\n  },\r\n  {\r\n    key: 'field_sku_value',\r\n    dataIndex: 'field_sku_value',\r\n    title: t('table.columns.field-sku-value'),\r\n    width: 200,\r\n    render: (value: string | null) => (value ? value : t('table.n-a')),\r\n  },\r\n  {\r\n    key: 'created_at',\r\n    dataIndex: 'created_at',\r\n    title: t('table.columns.created-at'),\r\n    render: (value: Date) => format(value, DATE_TIME_FORMAT),\r\n    width: 170,\r\n  },\r\n  {\r\n    key: 'modified_at',\r\n    dataIndex: 'modified_at',\r\n    title: t('table.columns.modified-at'),\r\n    render: (value: Date | null) =>\r\n      value ? format(value, DATE_TIME_FORMAT) : '-',\r\n    width: 170,\r\n  },\r\n  {\r\n    key: 'published_at',\r\n    dataIndex: 'published_at',\r\n    title: t('table.columns.published-at'),\r\n    render: (value: Date | null) =>\r\n      value ? format(value, DATE_TIME_FORMAT) : '-',\r\n    width: 170,\r\n  },\r\n  {\r\n    key: 'published',\r\n    dataIndex: 'published',\r\n    title: t('table.columns.status'),\r\n    render: (value: boolean) =>\r\n      value && <Tag color={COLORS.green2}>{t('table.published')}</Tag>,\r\n    width: 120,\r\n  },\r\n  {\r\n    key: 'context_menu',\r\n    dataIndex: 'context_menu',\r\n    width: 60,\r\n    render: (_, { id, published }: MappedCatalogItem) => (\r\n      <Dropdown\r\n        disabledActions={published ? ['publish'] : ['unpublish']}\r\n        onClick={(action: DropdownAction) => onClick && onClick(action, id)}\r\n      />\r\n    ),\r\n    fixed: 'right',\r\n  },\r\n]\r\n","import { CatalogItem } from 'model/api/CatalogItem'\r\n\r\nexport interface MappedCatalogItem {\r\n  key: string\r\n  id: number\r\n  field_name_value: string | null\r\n  field_sku_value: string | null\r\n  created_at: Date\r\n  modified_at: Date | null\r\n  published_at: Date | null\r\n  published: boolean\r\n}\r\n\r\nexport const mapCatalogItems = (data: CatalogItem[]): MappedCatalogItem[] =>\r\n  data.map(\r\n    ({\r\n      id,\r\n      field_name_value,\r\n      field_sku_value,\r\n      created_at,\r\n      modified_at,\r\n      published_at,\r\n      published,\r\n    }) => ({\r\n      key: String(id),\r\n      id,\r\n      field_name_value: field_name_value ? String(field_name_value) : null,\r\n      field_sku_value: field_sku_value ? String(field_sku_value) : null,\r\n      created_at: new Date(created_at),\r\n      modified_at: modified_at ? new Date(modified_at) : null,\r\n      published_at: published_at ? new Date(published_at) : null,\r\n      published: !!published,\r\n    })\r\n  )\r\n","import React, { useCallback, useState, useEffect, useRef } from 'react'\r\nimport { Table as TableBase } from 'components/Table'\r\nimport { CatalogItemsApi } from 'api/CatalogItems'\r\nimport axios, { CancelTokenSource } from 'axios'\r\nimport { useTranslation } from 'react-i18next'\r\nimport { DropdownAction } from './Dropdown'\r\nimport { navigate } from '@reach/router'\r\nimport { notification } from 'antd'\r\nimport { getCatalogItemsColumns } from '../utils/getCatalogItemsColumns'\r\nimport { mapCatalogItems, MappedCatalogItem } from '../utils/mapCatalogItems'\r\nimport { SubmittedFilterValues } from './Filters'\r\n\r\nexport interface TableProps {\r\n  filters: SubmittedFilterValues\r\n}\r\n\r\n\r\nexport const Table: React.FC<TableProps> = ({\r\n  filters: { categories, name, sku },\r\n}) => {\r\n  const { PUBLIC_URL } = process.env\r\n  const { t } = useTranslation('catalog')\r\n  const [data, setData] = useState<MappedCatalogItem[]>([])\r\n  const [loading, setLoading] = useState(false)\r\n  const [total, setTotal] = useState(0)\r\n  const [page, setPage] = useState(1)\r\n  const [pageSize, setPageSize] = useState(0)\r\n  const cancelTokenRef = useRef<CancelTokenSource>(axios.CancelToken.source())\r\n\r\n  const getData = useCallback(async () => {\r\n    setLoading(true)\r\n\r\n    const {\r\n      data: { data, total, per_page },\r\n    } = await CatalogItemsApi.getCatalogItems(\r\n      page,\r\n      pageSize,\r\n      categories,\r\n      name,\r\n      sku,\r\n      {\r\n        cancelToken: cancelTokenRef.current.token,\r\n      }\r\n    )\r\n\r\n    setData(mapCatalogItems(data))\r\n    setTotal(total)\r\n    setPageSize(per_page)\r\n    setLoading(false)\r\n  }, [page, pageSize, categories, name, sku])\r\n\r\n  const handleActionClick = useCallback(\r\n    async (action: DropdownAction, id: number) => {\r\n      switch (action) {\r\n        case 'edit':\r\n          navigate(PUBLIC_URL + '/catalog/' + id)\r\n          break\r\n        case 'publish':\r\n          try {\r\n            await CatalogItemsApi.publishCatalogItem(id, {\r\n              cancelToken: cancelTokenRef.current.token,\r\n            })\r\n\r\n            notification.success({\r\n              message: t('table.publish-success'),\r\n            })\r\n\r\n            getData()\r\n          } catch (e) {}\r\n          break\r\n        case 'unpublish':\r\n          try {\r\n            await CatalogItemsApi.unpublishCatalogItem(id, {\r\n              cancelToken: cancelTokenRef.current.token,\r\n            })\r\n\r\n            notification.success({\r\n              message: t('table.unpublish-success'),\r\n            })\r\n\r\n            getData()\r\n          } catch (e) {}\r\n          break\r\n        case 'delete':\r\n          try {\r\n            await CatalogItemsApi.deleteCatalogItem(id, {\r\n              cancelToken: cancelTokenRef.current.token,\r\n            })\r\n\r\n            notification.success({\r\n              message: t('table.delete-success'),\r\n            })\r\n\r\n            getData()\r\n          } catch (e) {}\r\n          break\r\n        default:\r\n          break\r\n      }\r\n    },\r\n    [PUBLIC_URL, getData, t]\r\n  )\r\n\r\n  const handlePageChange = useCallback((page: number) => {\r\n    setPage(page)\r\n  }, [])\r\n\r\n  useEffect(() => {\r\n    getData()\r\n  }, [getData, categories, name])\r\n\r\n  useEffect(() => {\r\n    const cancelToken = cancelTokenRef.current\r\n\r\n    return () => cancelToken.cancel()\r\n  }, [])\r\n\r\n  return (\r\n    <TableBase\r\n      columns={getCatalogItemsColumns(t, handleActionClick)}\r\n      dataSource={data}\r\n      loading={loading}\r\n      isScrollable\r\n      pagination={{\r\n        current: page,\r\n        pageSize,\r\n        total,\r\n        onChange: handlePageChange,\r\n      }}\r\n    />\r\n  )\r\n}\r\n","import axios, { AxiosPromise } from 'axios'\r\nimport { RequestConfig } from './requestConfig'\r\nimport { CatalogCategory } from 'model/api/CatalogCategory'\r\nimport { CatalogCategoryDetail } from 'model/api/CatalogCategoryDetail'\r\n\r\nexport class CatalogCategoriesApi {\r\n  /**\r\n   * Get Catalog Categories\r\n   */\r\n  static getCatalogCategories(\r\n    parentCategoryId?: number,\r\n    publishedOnly?: boolean,\r\n    withDetail?: boolean,\r\n    languageCode?: string,\r\n    config?: RequestConfig\r\n  ): AxiosPromise<CatalogCategory[]> {\r\n    return axios({\r\n      ...config,\r\n      method: 'GET',\r\n      url: `/catalog-categories`,\r\n      params: {\r\n        parent_category_id: parentCategoryId,\r\n        published_only: publishedOnly ? +publishedOnly : undefined,\r\n        with_detail: withDetail ? +withDetail : undefined,\r\n        language_code: languageCode,\r\n      },\r\n    })\r\n  }\r\n\r\n  /**\r\n   * Get Catalog Category\r\n   *\r\n   * @param catalogCategoryId\r\n   */\r\n  static getCatalogCategory(\r\n    catalogCategoryId: number,\r\n    publishedOnly: true,\r\n    config?: RequestConfig\r\n  ): AxiosPromise<CatalogCategoryDetail> {\r\n    return axios({\r\n      ...config,\r\n      method: 'GET',\r\n      url: `/catalog-categories/${catalogCategoryId}`,\r\n      params: {\r\n        published_only: publishedOnly ? +publishedOnly : undefined,\r\n      },\r\n    })\r\n  }\r\n\r\n  /**\r\n   * Create Catalog Category\r\n   *\r\n   * @param data\r\n   */\r\n  static createCatalogCategory(\r\n    data: FormData,\r\n    config?: RequestConfig\r\n  ): AxiosPromise<{ id: number }> {\r\n    return axios({\r\n      ...config,\r\n      method: 'POST',\r\n      url: `/catalog-categories`,\r\n      data,\r\n    })\r\n  }\r\n\r\n  /**\r\n   * Update Catalog Category\r\n   *\r\n   * @param catalogCategoryId\r\n   * @param data\r\n   */\r\n  static updateCatalogCategory(\r\n    catalogCategoryId: number,\r\n    data: FormData,\r\n    config?: RequestConfig\r\n  ): AxiosPromise {\r\n    return axios({\r\n      ...config,\r\n      method: 'PUT',\r\n      url: `/catalog-categories/${catalogCategoryId}`,\r\n      data,\r\n    })\r\n  }\r\n\r\n  /**\r\n   * Delete Catalog Category\r\n   *\r\n   * @param catalogCategoryId\r\n   */\r\n  static deleteCatalogCategory(\r\n    catalogCategoryId: number,\r\n    config?: RequestConfig\r\n  ): AxiosPromise {\r\n    return axios({\r\n      ...config,\r\n      method: 'DELETE',\r\n      url: `/catalog-categories/${catalogCategoryId}`,\r\n    })\r\n  }\r\n\r\n  /**\r\n   * Publish Catalog Category\r\n   *\r\n   * @param catalogCategoryId\r\n   */\r\n  static publishCatalogCategory(\r\n    catalogCategoryId: number,\r\n    config?: RequestConfig\r\n  ): AxiosPromise {\r\n    return axios({\r\n      ...config,\r\n      method: 'PUT',\r\n      url: `/catalog-categories/${catalogCategoryId}/publish`,\r\n    })\r\n  }\r\n\r\n  /**\r\n   * Unpublish Catalog Category\r\n   *\r\n   * @param catalogCategoryId\r\n   */\r\n  static unpublishCatalogCategory(\r\n    catalogCategoryId: number,\r\n    config?: RequestConfig\r\n  ): AxiosPromise {\r\n    return axios({\r\n      ...config,\r\n      method: 'PUT',\r\n      url: `/catalog-categories/${catalogCategoryId}/unpublish`,\r\n    })\r\n  }\r\n}\r\n","import { CatalogCategory } from 'model/api/CatalogCategory'\r\nimport mapObject from 'map-obj'\r\nimport i18next from 'i18next'\r\n\r\nexport interface MappedCatalogCategory\r\n  extends Omit<CatalogCategory, 'id' | 'name' | 'children'> {\r\n  value: number | null\r\n  title: string\r\n  children?: MappedCatalogCategory[]\r\n}\r\n\r\nexport const mapCatalogCategories = (\r\n  data: CatalogCategory[],\r\n  t: i18next.TFunction,\r\n  noCategoryOption: boolean = true\r\n) => {\r\n  const mappedCategorires = (mapObject(\r\n    data,\r\n    (key: any, value: any) => {\r\n      switch (key) {\r\n        case 'id':\r\n          return ['value', value]\r\n        case 'name':\r\n          return ['title', value]\r\n        case 'children':\r\n        default:\r\n          return [key, value]\r\n      }\r\n    },\r\n    { deep: true }\r\n  ) as unknown) as MappedCatalogCategory[]\r\n\r\n  if (noCategoryOption) {\r\n    mappedCategorires.unshift({\r\n      value: 0,\r\n      title: t('none'),\r\n      parent_id: 0,\r\n      published: 0,\r\n      weight: 0,\r\n    })\r\n  }\r\n\r\n  return mappedCategorires\r\n}\r\n","import React from 'react'\r\nimport { useTranslation } from 'react-i18next'\r\nimport styled from 'styled-components'\r\nimport { COLORS } from 'constants/colors'\r\n\r\nexport const StyledErrorMessage = styled.div`\r\n  margin: 6px 0 12px;\r\n  color: ${COLORS.red1};\r\n`\r\n\r\ninterface CustomErrorMessageProps {\r\n  error: {\r\n    message: string,\r\n    params: any[]\r\n  }\r\n}\r\n\r\nconst CustomErrorMessage: React.FC<CustomErrorMessageProps> = ({ error }) => {\r\n  const { t } = useTranslation('form-validation')\r\n\r\n  return (\r\n    <StyledErrorMessage>\r\n      {t(error.message, error.params)}\r\n    </StyledErrorMessage>\r\n  )\r\n}\r\n\r\nexport default CustomErrorMessage\r\n","import * as React from 'react'\r\nimport { Field, FieldProps, getIn, FieldConfig } from 'formik'\r\nimport { Form } from 'antd'\r\nimport { FormItemProps as $FormItemProps } from 'antd/lib/form/FormItem'\r\nimport CustomErrorMessage from './CustomErrorMessage'\r\n\r\nexport type FormItemProps = {\r\n  showValidateSuccess?: boolean\r\n  showInitialErrorAfterTouched?: boolean\r\n  children: React.ReactNode\r\n} & { name: string } & $FormItemProps &\r\n  Pick<FieldConfig, 'validate'>\r\n\r\nexport const FormikFormItem = ({\r\n  name,\r\n  showValidateSuccess,\r\n  showInitialErrorAfterTouched = false,\r\n  children,\r\n  validate,\r\n  ...restProps\r\n}: FormItemProps) => (\r\n  <Field name={name} validate={validate}>\r\n    {({\r\n      form: { errors = {}, touched = {}, initialErrors = {} },\r\n    }: FieldProps) => {\r\n      const error = getIn(errors, name, undefined)\r\n      const initialError = getIn(initialErrors, name, undefined)\r\n      let isTouched = getIn(touched, name, false) as boolean | boolean[]\r\n      if (Array.isArray(isTouched)) {\r\n        isTouched = isTouched.reduce((acc, value) => acc || value, false)\r\n      }\r\n      const hasError = error !== undefined && isTouched\r\n      const hasInitialError = initialError !== undefined\r\n      const isValid = !error && isTouched\r\n      const showHelp =\r\n        hasError ||\r\n        (hasInitialError && (!isTouched || showInitialErrorAfterTouched))\r\n\r\n      return (\r\n        <Form.Item\r\n          validateStatus={\r\n            hasError || (hasInitialError && !isTouched)\r\n              ? 'error'\r\n              : isValid && showValidateSuccess\r\n              ? 'success'\r\n              : undefined\r\n          }\r\n          hasFeedback={isValid}\r\n          help={\r\n            showHelp && (\r\n              <>\r\n                {hasError && <CustomErrorMessage error={error} />}\r\n                {hasInitialError &&\r\n                  (!isTouched || showInitialErrorAfterTouched) && (\r\n                    <CustomErrorMessage error={initialError} />\r\n                  )}\r\n              </>\r\n            )\r\n          }\r\n          {...restProps}\r\n        >\r\n          {children}\r\n        </Form.Item>\r\n      )\r\n    }}\r\n  </Field>\r\n)\r\n","import React, { useCallback, useState, useEffect } from 'react'\r\nimport { Collapse, Button } from 'antd'\r\nimport { useTranslation } from 'react-i18next'\r\nimport { Formik } from 'formik'\r\nimport { CatalogCategoriesApi } from 'api/CatalogCategories'\r\nimport {\r\n  mapCatalogCategories,\r\n  MappedCatalogCategory,\r\n} from 'mappers/mapCatalogCategories'\r\nimport axios, { CancelToken } from 'axios'\r\nimport { Input, TreeSelect } from 'formik-antd'\r\nimport { TreeSelect as TreeSelectAntd } from 'antd'\r\nimport { Form as FormFormikAntd } from 'formik-antd'\r\nimport { Form as FormAntd } from 'antd'\r\nimport { FormikFormItem as Item } from 'components/FormikFormItem'\r\n\r\nconst { SHOW_ALL } = TreeSelectAntd\r\nconst { Item: ItemAntd } = FormAntd\r\nconst { Panel } = Collapse\r\n\r\nexport interface FiltersValues {\r\n  name?: string\r\n  sku?: string\r\n  categories?: Array<{ value: number; label: string }>\r\n}\r\n\r\nexport interface SubmittedFilterValues {\r\n  name?: string\r\n  sku?: string\r\n  categories?: number[]\r\n}\r\n\r\nexport const filtersInitialValues: FiltersValues = {\r\n  name: undefined,\r\n  sku: undefined,\r\n  categories: undefined,\r\n}\r\n\r\nexport interface FiltersProps {\r\n  onSubmit: (values: SubmittedFilterValues) => void\r\n}\r\n\r\nexport const Filters: React.FC<FiltersProps> = ({ onSubmit }) => {\r\n  const { t } = useTranslation('catalog')\r\n  const [loading, setLoading] = useState(false)\r\n  const [categories, setCategories] = useState<MappedCatalogCategory[]>()\r\n\r\n  const handleSubmit = useCallback(\r\n    ({ name, sku, categories }: FiltersValues) => {\r\n      const categoryIds = []\r\n\r\n      categories &&\r\n        categories.forEach(item => {\r\n          categoryIds.push(item.value)\r\n        })\r\n\r\n      onSubmit({ categories: categoryIds, name, sku })\r\n    },\r\n    [onSubmit]\r\n  )\r\n\r\n  const getCatalogCategories = useCallback(\r\n    async (cancelToken: CancelToken) => {\r\n      try {\r\n        setLoading(true)\r\n        const { data } = await CatalogCategoriesApi.getCatalogCategories(\r\n          undefined,\r\n          undefined,\r\n          undefined,\r\n          undefined,\r\n          {\r\n            cancelToken,\r\n          }\r\n        )\r\n\r\n        setCategories(mapCatalogCategories(data, t, false))\r\n        setLoading(false)\r\n      } catch (e) {\r\n        setLoading(false)\r\n      }\r\n    },\r\n    [t]\r\n  )\r\n\r\n  const renderForm = useCallback(\r\n    () => (\r\n      <FormFormikAntd layout=\"vertical\">\r\n        <Item label={t('filters.name')} name=\"name\">\r\n          <Input name=\"name\" />\r\n        </Item>\r\n        <Item label={t('filters.sku')} name=\"sku\">\r\n          <Input name=\"sku\" />\r\n        </Item>\r\n        <Item label={t('filters.categories')} name=\"categories\">\r\n          {categories ? (\r\n            <TreeSelect\r\n              treeData={categories}\r\n              name=\"categories\"\r\n              showCheckedStrategy={SHOW_ALL}\r\n              treeCheckable\r\n              treeCheckStrictly\r\n              treeDefaultExpandAll\r\n              showArrow\r\n              allowClear\r\n              filterTreeNode\r\n              treeNodeFilterProp=\"title\"\r\n            />\r\n          ) : (\r\n            <Input name=\"categories\" disabled />\r\n          )}\r\n        </Item>\r\n\r\n        <ItemAntd>\r\n          <Button\r\n            htmlType=\"submit\"\r\n            type=\"primary\"\r\n            size=\"large\"\r\n            disabled={loading}\r\n          >\r\n            {t('filters.submit')}\r\n          </Button>\r\n        </ItemAntd>\r\n      </FormFormikAntd>\r\n    ),\r\n    [categories, loading, t]\r\n  )\r\n\r\n  useEffect(() => {\r\n    const cancelTokenSource = axios.CancelToken.source()\r\n    getCatalogCategories(cancelTokenSource.token)\r\n\r\n    return () => cancelTokenSource.cancel()\r\n  }, [getCatalogCategories])\r\n\r\n  return (\r\n    <Collapse>\r\n      <Panel header={t('filters.title')} key=\"filters\">\r\n        <Formik<FiltersValues>\r\n          initialValues={filtersInitialValues}\r\n          onSubmit={handleSubmit}\r\n        >\r\n          {() => renderForm()}\r\n        </Formik>\r\n      </Panel>\r\n    </Collapse>\r\n  )\r\n}\r\n","import React, { useContext, useEffect, useCallback, useState } from 'react'\r\nimport { RouteComponentProps, navigate } from '@reach/router'\r\nimport { useTranslation } from 'react-i18next'\r\nimport { Space } from 'antd'\r\nimport { IconButton } from 'components/IconButton'\r\nimport { SceneTitle } from 'components/SceneTitle'\r\nimport { AuthenticatedLayoutContext } from 'components/Layout/AuthenticatedLayout'\r\nimport { Table } from './components/Table'\r\nimport {\r\n  Filters,\r\n  filtersInitialValues,\r\n  SubmittedFilterValues,\r\n} from './components/Filters'\r\n\r\nexport const Catalog: React.FC<RouteComponentProps> = () => {\r\n  const { PUBLIC_URL } = process.env\r\n  const [filters, setFilters] = useState<SubmittedFilterValues>(\r\n    (filtersInitialValues as unknown) as SubmittedFilterValues\r\n  )\r\n  const { t } = useTranslation('catalog')\r\n  const { setSceneTitle } = useContext(AuthenticatedLayoutContext)\r\n\r\n  const handleCreateCatalogItem = useCallback(() => {\r\n    navigate(PUBLIC_URL + '/catalog/new')\r\n  }, [PUBLIC_URL])\r\n\r\n  useEffect(() => {\r\n    setSceneTitle(<SceneTitle title={t('scene-title')} />)\r\n  }, [setSceneTitle, t])\r\n\r\n  return (\r\n    <Space size=\"large\" direction=\"vertical\" style={{ width: '100%' }}>\r\n      <IconButton\r\n        size=\"middle\"\r\n        type=\"primary\"\r\n        icon=\"plus\"\r\n        onClick={handleCreateCatalogItem}\r\n      >\r\n        {t('create-new-catalog-item')}\r\n      </IconButton>\r\n      <Filters\r\n        onSubmit={values => {\r\n          setFilters(values)\r\n        }}\r\n      />\r\n      <Table filters={filters} />\r\n    </Space>\r\n  )\r\n}\r\n","import React from 'react'\r\nimport { RouteComponentProps } from '@reach/router'\r\n\r\nexport const Forms: React.FC<RouteComponentProps> = () => (\r\n  <>Forms</>\r\n)","import React from 'react'\r\nimport { RouteComponentProps } from '@reach/router'\r\n\r\nexport const Settings: React.FC<RouteComponentProps> = () => (\r\n  <>Settings</>\r\n)","import axios, { AxiosPromise } from 'axios'\r\nimport { RequestConfig } from './requestConfig'\r\nimport { CatalogItemTemplate } from 'model/api/CatalogItemTemplate'\r\nimport { PaginatedList } from 'model/api/PaginatedList'\r\n\r\nexport class CatalogItemTemplatesApi {\r\n  /**\r\n   * Get Catalog Item Templates\r\n   *\r\n   * @param page\r\n   * @param pageSize\r\n   */\r\n  static getCatalogItemTemplates(\r\n    page?: number,\r\n    pageSize?: number,\r\n    config?: RequestConfig\r\n  ): AxiosPromise<PaginatedList<CatalogItemTemplate>> {\r\n    return axios({\r\n      ...config,\r\n      method: 'GET',\r\n      url: `/catalog-item-templates`,\r\n      params: {\r\n        page,\r\n        per_page: pageSize\r\n      },\r\n    })\r\n  }\r\n\r\n  /**\r\n   * Get All Catalog Item Templates\r\n   *\r\n   */\r\n  static getAllCatalogItemTemplates(\r\n    config?: RequestConfig\r\n  ): AxiosPromise<CatalogItemTemplate[]> {\r\n    return axios({\r\n      ...config,\r\n      method: 'GET',\r\n      url: `/catalog-item-templates/all`,\r\n    })\r\n  }\r\n\r\n  /**\r\n   * Get Catalog Item Template\r\n   *\r\n   * @param catalogItemTemplateId\r\n   */\r\n  static getCatalogItemTemplate(\r\n    catalogItemTemplateId: number,\r\n    config?: RequestConfig\r\n  ): AxiosPromise<CatalogItemTemplate> {\r\n    return axios({\r\n      ...config,\r\n      method: 'GET',\r\n      url: `/catalog-item-templates/${catalogItemTemplateId}`,\r\n    })\r\n  }  \r\n\r\n  /**\r\n   * Creates Catalog Item Template\r\n   *\r\n   * @param data\r\n   */\r\n  static createCatalogItemTemplate(\r\n    data: FormData,\r\n    config?: RequestConfig\r\n  ): AxiosPromise<{ id: number }> {\r\n    return axios({\r\n      ...config,\r\n      method: 'POST',\r\n      url: `/catalog-item-templates`,\r\n      data\r\n    })\r\n  }  \r\n\r\n  /**\r\n   * Updates Catalog Item Template\r\n   *\r\n   * @param catalogItemTemplateId\r\n   * @param data\r\n   */\r\n  static updateCatalogItemTemplate(\r\n    catalogItemTemplateId: number,\r\n    data: FormData,\r\n    config?: RequestConfig\r\n  ): AxiosPromise {\r\n    return axios({\r\n      ...config,\r\n      method: 'PUT',\r\n      url: `/catalog-item-templates/${catalogItemTemplateId}`,\r\n      data\r\n    })\r\n  }    \r\n\r\n\r\n  /**\r\n   * Deletes Catalog Item Template\r\n   *\r\n   * @param catalogItemTemplateId\r\n   */\r\n  static deleteCatalogItemTemplate(\r\n    catalogItemTemplateId: number,\r\n    config?: RequestConfig\r\n  ): AxiosPromise {\r\n    return axios({\r\n      ...config,\r\n      method: 'DELETE',\r\n      url: `/catalog-item-templates/${catalogItemTemplateId}`\r\n    })\r\n  }    \r\n}","import {\r\n  Dropdown as DropdownBase,\r\n  DropdownItemProps,\r\n} from 'components/Dropdown'\r\nimport { DropdownButton } from 'components/DropdownButton'\r\nimport React from 'react'\r\nimport { useTranslation } from 'react-i18next'\r\n\r\n\r\nexport type DropdownAction = 'edit' | 'delete'\r\n\r\nexport interface DropdownProps {\r\n  onClick: (action: DropdownAction) => void\r\n  disabledActions?: DropdownAction[]\r\n}\r\n\r\nexport const Dropdown: React.FC<DropdownProps> = ({ onClick }) => {\r\n  const { t } = useTranslation('catalog-templates')\r\n\r\n  const handleClick = (action: DropdownAction) => {\r\n    onClick(action)\r\n  }\r\n\r\n  const items: DropdownItemProps[] = [\r\n    {\r\n      children: t('table.context-menu.edit'),\r\n      onClick: () => handleClick('edit'),\r\n      icon: 'pen',\r\n    },\r\n    {\r\n      children: t('table.context-menu.delete'),\r\n      onClick: () => handleClick('delete'),\r\n      icon: 'trash-alt',\r\n      dialog: {\r\n        text: t('table.context-menu.delete-dialog.text'),\r\n        cancel: t('table.context-menu.delete-dialog.cancel'),\r\n        confirm: t('table.context-menu.delete-dialog.confirm')\r\n      }\r\n    },\r\n  ]\r\n\r\n  return (\r\n    <div>\r\n      <DropdownBase items={items} data-test=\"Dropdown\">\r\n        <DropdownButton size=\"small\" />\r\n      </DropdownBase>\r\n    </div>\r\n  )\r\n}\r\n","import React from 'react'\r\nimport { ColumnProps } from 'antd/es/table'\r\nimport { MappedCatalogTemplate } from './mapCatalogTemplates'\r\nimport i18next from 'i18next'\r\nimport { DropdownAction, Dropdown } from '../components/Dropdown'\r\n\r\nexport const getCatalogTemplatesColumns = (\r\n  t: i18next.TFunction,\r\n  onClick?: (action: DropdownAction, id: number) => void\r\n): ColumnProps<any>[] => [\r\n  {\r\n    key: 'id',\r\n    dataIndex: 'id',\r\n    title: t('table.columns.id'),\r\n  },\r\n  {\r\n    key: 'view_id',\r\n    dataIndex: 'view_id',\r\n    title: t('table.columns.view-id'),\r\n  },\r\n  {\r\n    key: 'name',\r\n    dataIndex: 'name',\r\n    title: t('table.columns.name'),\r\n  },\r\n  {\r\n    key: 'path',\r\n    dataIndex: 'path',\r\n    title: t('table.columns.path'),\r\n  },\r\n  {\r\n    key: 'context_menu',\r\n    dataIndex: 'context_menu',\r\n    width: 60,\r\n    render: (_, { id }: MappedCatalogTemplate) => (\r\n      <Dropdown\r\n        onClick={(action: DropdownAction) => onClick && onClick(action, id)}\r\n      />\r\n    ),\r\n  },\r\n]\r\n","import { CatalogItemTemplate } from 'model/api/CatalogItemTemplate'\r\n\r\nexport interface MappedCatalogTemplate {\r\n  key: string\r\n  id: number\r\n  view_id: number\r\n  name: string\r\n  path: string\r\n}\r\n\r\nexport const mapCatalogTemplates = (\r\n  data: CatalogItemTemplate[],\r\n  \r\n): MappedCatalogTemplate[] =>\r\n  data.map(({ id, name, path, view_id }) => ({\r\n    key: String(id),\r\n    id,\r\n    view_id,\r\n    name,\r\n    path\r\n  }))\r\n","import React, { useCallback, useState, useEffect, useRef } from 'react'\r\nimport { Table as TableBase } from 'components/Table'\r\nimport { CatalogItemTemplatesApi } from 'api/CatalogItemTemplates'\r\nimport axios, { CancelTokenSource } from 'axios'\r\nimport { useTranslation } from 'react-i18next'\r\nimport { DropdownAction } from './Dropdown'\r\nimport { navigate } from '@reach/router'\r\nimport { notification } from 'antd'\r\nimport { getCatalogTemplatesColumns } from '../utils/getCatalogTemplatesColumns'\r\nimport {\r\n  mapCatalogTemplates,\r\n  MappedCatalogTemplate,\r\n} from '../utils/mapCatalogTemplates'\r\n\r\nexport const Table: React.FC = () => {\r\n  const { PUBLIC_URL } = process.env\r\n  const { t } = useTranslation('catalog-templates')\r\n  const [data, setData] = useState<MappedCatalogTemplate[]>([])\r\n  const [loading, setLoading] = useState(false)\r\n  const [total, setTotal] = useState(0)\r\n  const [page, setPage] = useState(1)\r\n  const [pageSize, setPageSize] = useState(0)\r\n  const cancelTokenRef = useRef<CancelTokenSource>(axios.CancelToken.source())\r\n\r\n  const getData = useCallback(async () => {\r\n    setLoading(true)\r\n\r\n    const {\r\n      data: { data, total, per_page },\r\n    } = await CatalogItemTemplatesApi.getCatalogItemTemplates(page, pageSize, {\r\n      cancelToken: cancelTokenRef.current.token,\r\n    })\r\n\r\n    setData(mapCatalogTemplates(data))\r\n    setTotal(total)\r\n    setPageSize(per_page)\r\n    setLoading(false)\r\n  }, [page, pageSize])\r\n\r\n  const handleActionClick = useCallback(\r\n    async (action: DropdownAction, id: number) => {\r\n      switch (action) {\r\n        case 'edit':\r\n          navigate(PUBLIC_URL + '/catalog/templates/' + id)\r\n          break\r\n        case 'delete':\r\n          await CatalogItemTemplatesApi.deleteCatalogItemTemplate(id, {\r\n            cancelToken: cancelTokenRef.current.token,\r\n          })\r\n\r\n          notification.success({\r\n            message: t('table.delete-success'),\r\n          })\r\n\r\n          getData()\r\n          break\r\n        default:\r\n          break\r\n      }\r\n    },\r\n    [PUBLIC_URL, getData, t]\r\n  )\r\n\r\n  const handlePageChange = useCallback((page: number) => {\r\n    setPage(page)\r\n  }, [])\r\n\r\n  useEffect(() => {\r\n    getData()\r\n  }, [getData])\r\n\r\n  useEffect(() => {\r\n    const cancelToken = cancelTokenRef.current\r\n\r\n    return () => cancelToken.cancel()\r\n  }, [])\r\n\r\n  return (\r\n    <TableBase\r\n      columns={getCatalogTemplatesColumns(t, handleActionClick)}\r\n      dataSource={data}\r\n      loading={loading}\r\n      pagination={{\r\n        current: page,\r\n        pageSize,\r\n        total,\r\n        onChange: handlePageChange,\r\n      }}\r\n    />\r\n  )\r\n}\r\n","import React, { useContext, useEffect, useCallback } from 'react'\r\nimport { RouteComponentProps, navigate } from '@reach/router'\r\nimport { useTranslation } from 'react-i18next'\r\nimport { SceneTitle } from 'components/SceneTitle'\r\nimport { AuthenticatedLayoutContext } from 'components/Layout/AuthenticatedLayout'\r\nimport { Table } from './components/Table'\r\nimport { Space } from 'antd'\r\nimport { IconButton } from 'components/IconButton'\r\n\r\nexport const CatalogTemplates: React.FC<RouteComponentProps> = () => {\r\n  const { PUBLIC_URL } = process.env\r\n  const { t } = useTranslation('catalog-templates')\r\n  const { setSceneTitle } = useContext(AuthenticatedLayoutContext)\r\n\r\n  const handleCreateTemplate = useCallback(() => {\r\n    navigate(PUBLIC_URL + '/catalog/templates/new')\r\n  }, [PUBLIC_URL])\r\n\r\n  useEffect(() => {\r\n    setSceneTitle(<SceneTitle title={t('scene-title')} />)\r\n  }, [setSceneTitle, t])\r\n\r\n  return (\r\n    <>\r\n      <Space size=\"large\" direction=\"vertical\" style={{ width: '100%' }}>\r\n        <IconButton\r\n          size=\"middle\"\r\n          type=\"primary\"\r\n          icon=\"plus\"\r\n          onClick={handleCreateTemplate}\r\n        >\r\n          {t('create-new-template')}\r\n        </IconButton>\r\n        <Table />\r\n      </Space>\r\n    </>\r\n  )\r\n}\r\n","import { setIn, FormikErrors } from 'formik'\r\nimport * as Yup from 'yup'\r\n\r\nYup.setLocale({\r\n  mixed: {\r\n    default: 'mixed.default',\r\n    required: 'mixed.required',\r\n  },\r\n  string: {\r\n    length: 'string.length',\r\n    min: 'string.min',\r\n    max: 'string.max',\r\n    email: 'string.email',\r\n  },\r\n  number: {\r\n    min: 'number.min',\r\n    max: 'number.max',\r\n    lessThan: 'number.lessThan',\r\n    moreThan: 'number.moreThan',\r\n    integer: 'number.integer',\r\n  },\r\n  date: {\r\n    min: 'date.min',\r\n    max: 'date.max',\r\n  },\r\n})\r\n\r\nexport const emptyErrors: FormikErrors<unknown> = {}\r\n\r\nexport const validateSchema = async <FormValues>(\r\n  values: FormValues,\r\n  validationSchema: Yup.ObjectSchema<Partial<FormValues>>,\r\n  options: Yup.ValidateOptions = { abortEarly: false }\r\n) =>\r\n  validationSchema\r\n    .validate(values, options)\r\n    .then(() => Promise.resolve(emptyErrors))\r\n    .catch((errors: Yup.ValidationError) => {\r\n      if (errors.name === 'ValidationError') {\r\n        let filteredErrors: any = {}\r\n\r\n        if (errors.inner.length > 0) {\r\n          errors.inner.forEach(error => {\r\n            filteredErrors = setIn(filteredErrors, error.path, {\r\n              message: error.message,\r\n              params: error.params,\r\n            })\r\n          })\r\n        }\r\n\r\n        return Promise.resolve(filteredErrors)\r\n      } else {\r\n        return Promise.reject(errors)\r\n      }\r\n    })\r\n","import axios, { AxiosPromise } from 'axios'\r\nimport { RequestConfig } from './requestConfig'\r\nimport { View } from 'model/api/View'\r\nimport { PaginatedList } from 'model/api/PaginatedList'\r\n\r\nexport class ViewsApi {\r\n  /**\r\n   * Get Views\r\n   *\r\n   * @param page\r\n   * @param pageSize\r\n   */\r\n  static getViews(\r\n    page?: number,\r\n    pageSize?: number,\r\n    config?: RequestConfig\r\n  ): AxiosPromise<PaginatedList<View>> {\r\n    return axios({\r\n      ...config,\r\n      method: 'GET',\r\n      url: `/views`,\r\n      params: {\r\n        page,\r\n        per_page: pageSize\r\n      },\r\n    })\r\n  }\r\n\r\n  /**\r\n   * Get All Views\r\n   *\r\n   */\r\n  static getAllViews(\r\n    config?: RequestConfig\r\n  ): AxiosPromise<View[]> {\r\n    return axios({\r\n      ...config,\r\n      method: 'GET',\r\n      url: `/views/all`,\r\n    })\r\n  }\r\n\r\n  /**\r\n   * Get View\r\n   *\r\n   * @param viewId\r\n   */\r\n  static getView(\r\n    viewId: number,\r\n    config?: RequestConfig\r\n  ): AxiosPromise<View> {\r\n    return axios({\r\n      ...config,\r\n      method: 'GET',\r\n      url: `/views/${viewId}`,\r\n    })\r\n  }\r\n\r\n  /**\r\n   * Create View\r\n   *\r\n   * @param data\r\n   */\r\n  static createView(\r\n    data: FormData,\r\n    config?: RequestConfig\r\n  ): AxiosPromise<{ id: number }> {\r\n    return axios({\r\n      ...config,\r\n      method: 'POST',\r\n      url: `/views`,\r\n      data\r\n    })\r\n  }\r\n\r\n  /**\r\n   * Update View\r\n   *\r\n   * @param viewId\r\n   * @param data\r\n   */\r\n  static updateView(\r\n    viewId: number,\r\n    data: FormData,\r\n    config?: RequestConfig\r\n  ): AxiosPromise {\r\n    return axios({\r\n      ...config,\r\n      method: 'PUT',\r\n      url: `/views/${viewId}`,\r\n      data\r\n    })\r\n  }\r\n\r\n  /**\r\n   * Delete View\r\n   *\r\n   * @param viewId\r\n   */\r\n  static deleteView(\r\n    viewId: number,\r\n    config?: RequestConfig\r\n  ): AxiosPromise {\r\n    return axios({\r\n      ...config,\r\n      method: 'DELETE',\r\n      url: `/views/${viewId}`,\r\n    })\r\n  }\r\n}","import React, { useCallback, useState, useEffect, useRef } from 'react'\r\nimport { Formik } from 'formik'\r\nimport { Input, Select, Form as FormFormikAntd } from 'formik-antd'\r\nimport { FormikFormItem as Item } from 'components/FormikFormItem'\r\nimport { Button, Form as FormAntd, notification } from 'antd'\r\nimport { useTranslation } from 'react-i18next'\r\nimport { validateSchema } from 'config/yup'\r\nimport * as Yup from 'yup'\r\nimport { ViewsApi } from 'api/Views'\r\nimport axios, { CancelToken, CancelTokenSource } from 'axios'\r\nimport { View } from 'model/api/View'\r\nimport { CatalogItemTemplatesApi } from 'api/CatalogItemTemplates'\r\nimport { navigate } from '@reach/router'\r\nimport { CatalogItemTemplate } from 'model/api/CatalogItemTemplate'\r\n\r\nconst { Item: ItemAntd } = FormAntd\r\nconst { Option } = Select\r\n\r\nexport interface FormValues {\r\n  view_id?: number\r\n  view_id_name?: string\r\n  name?: string\r\n  path?: string\r\n}\r\n\r\nexport const FormSchema = Yup.object().shape<FormValues>({\r\n  view_id: Yup.number().required(),\r\n  name: Yup.string().required(),\r\n  path: Yup.string().required(),\r\n})\r\n\r\nexport interface DetailDataProps extends CatalogItemTemplate {\r\n  view_id_name?: string\r\n}\r\n\r\nexport interface FormProps {\r\n  catalogItemTemplateId?: number\r\n  view: 'new' | 'detail'\r\n}\r\n\r\nexport const Form: React.FC<FormProps> = ({ catalogItemTemplateId, view }) => {\r\n  const { PUBLIC_URL } = process.env\r\n  const { t } = useTranslation('catalog-template-detail')\r\n  const [views, setViews] = useState<View[]>([])\r\n  const [data, setData] = useState<DetailDataProps>()\r\n  const [loading, setLoading] = useState(false)\r\n  const cancelTokenRef = useRef<CancelTokenSource>(axios.CancelToken.source())\r\n  const formInitialValues: FormValues = data || {\r\n    view_id: undefined,\r\n    view_id_name: undefined,\r\n    name: undefined,\r\n    path: undefined,\r\n  }\r\n\r\n  const getData = useCallback(\r\n    async (cancelToken: CancelToken) => {\r\n      if (view === 'detail' && catalogItemTemplateId) {\r\n        setLoading(true)\r\n\r\n        const {\r\n          data,\r\n        } = await CatalogItemTemplatesApi.getCatalogItemTemplate(\r\n          catalogItemTemplateId,\r\n          { cancelToken }\r\n        )\r\n\r\n        const {\r\n          data: { name: view_id_name },\r\n        } = await ViewsApi.getView(data.view_id, { cancelToken })\r\n\r\n        setData({ view_id_name, ...data })\r\n        setLoading(false)\r\n      }\r\n    },\r\n    [view, catalogItemTemplateId]\r\n  )\r\n\r\n  const getViews = useCallback(\r\n    async (cancelToken: CancelToken) => {\r\n      if (view === 'new') {\r\n        setLoading(true)\r\n\r\n        const { data } = await ViewsApi.getAllViews({\r\n          cancelToken,\r\n        })\r\n\r\n        setViews(data)\r\n        setLoading(false)\r\n      }\r\n    },\r\n    [view]\r\n  )\r\n\r\n  const handleSubmit = useCallback(\r\n    async ({ view_id, name, path }: Required<FormValues>) => {\r\n      setLoading(true)\r\n      const data = new FormData()\r\n\r\n      if (view === 'new') {\r\n        data.append('view_id', String(view_id))\r\n      }\r\n\r\n      data.append('name', name)\r\n      data.append('path', path)\r\n\r\n      if (view === 'new') {\r\n        const {\r\n          data: { id },\r\n        } = await CatalogItemTemplatesApi.createCatalogItemTemplate(data, {\r\n          cancelToken: cancelTokenRef.current.token,\r\n        })\r\n\r\n        setLoading(false)\r\n\r\n        notification.success({\r\n          message: t('form.create-success')\r\n        })\r\n\r\n        navigate(PUBLIC_URL + '/catalog/templates/' + id)\r\n      } else if (view === 'detail') {\r\n        await CatalogItemTemplatesApi.updateCatalogItemTemplate(\r\n          catalogItemTemplateId,\r\n          data,\r\n          {\r\n            cancelToken: cancelTokenRef.current.token,\r\n          }\r\n        )\r\n\r\n        notification.success({\r\n          message: t('form.update-success')\r\n        })\r\n\r\n        setLoading(false)\r\n      }\r\n    },\r\n    [PUBLIC_URL, view, catalogItemTemplateId, t]\r\n  )\r\n\r\n  const renderForm = useCallback(\r\n    () => (\r\n      <FormFormikAntd layout=\"vertical\">\r\n        <Item label={t('form.view-id')} name=\"view_id\">\r\n          {view === 'new' ? (\r\n            <Select name=\"view_id\" loading={loading}>\r\n              {views.map(({ id, name }) => (\r\n                <Option value={id} key={id}>\r\n                  {name}\r\n                </Option>\r\n              ))}\r\n            </Select>\r\n          ) : (\r\n            <Input name=\"view_id_name\" disabled />\r\n          )}\r\n        </Item>\r\n        <Item label={t('form.name')} name=\"name\">\r\n          <Input name=\"name\" />\r\n        </Item>\r\n        <Item label={t('form.path')} name=\"path\">\r\n          <Input name=\"path\" />\r\n        </Item>\r\n        <div />\r\n        <ItemAntd>\r\n          <Button\r\n            htmlType=\"submit\"\r\n            type=\"primary\"\r\n            size=\"large\"\r\n            disabled={loading}\r\n          >\r\n            {t(view === 'new' ? 'form.submit.new' : 'form.submit.detail')}\r\n          </Button>\r\n        </ItemAntd>\r\n      </FormFormikAntd>\r\n    ),\r\n    [t, view, views, loading]\r\n  )\r\n\r\n  useEffect(() => {\r\n    const cancelTokenSource = axios.CancelToken.source()\r\n\r\n    getViews(cancelTokenSource.token)\r\n    getData(cancelTokenSource.token)\r\n\r\n    return () => cancelTokenSource.cancel()\r\n  }, [getViews, getData])\r\n\r\n  useEffect(() => {\r\n    const cancelToken = cancelTokenRef.current\r\n\r\n    return () => cancelToken.cancel()\r\n  }, [])  \r\n\r\n  return (\r\n    <Formik<FormValues>\r\n      initialValues={formInitialValues}\r\n      enableReinitialize\r\n      validate={values => validateSchema(values, FormSchema)}\r\n      onSubmit={handleSubmit}\r\n    >\r\n      {() => renderForm()}\r\n    </Formik>\r\n  )\r\n}\r\n","import axios, { AxiosPromise } from 'axios'\r\nimport { RequestConfig } from './requestConfig'\r\nimport { CatalogItemTemplateField } from 'model/api/CatalogItemTemplateField'\r\nimport { PaginatedList } from 'model/api/PaginatedList'\r\n\r\nexport class CatalogItemTemplateFieldsApi {\r\n  /**\r\n   * Get Catalog Item Template Fields\r\n   *\r\n   * @param catalogItemTemplateId\r\n   * @param page\r\n   * @param pageSize\r\n   */\r\n  static getCatalogItemTemplateFields(\r\n    catalogItemTemplateId: number,\r\n    page?: number,\r\n    pageSize?: number,\r\n    config?: RequestConfig\r\n  ): AxiosPromise<PaginatedList<CatalogItemTemplateField>> {\r\n    return axios({\r\n      ...config,\r\n      method: 'GET',\r\n      url: `/catalog-item-templates/${catalogItemTemplateId}/fields`,\r\n      params: {\r\n        page,\r\n        per_page: pageSize,\r\n      },\r\n    })\r\n  }\r\n\r\n  /**\r\n   * Get Catalog Item Template Field\r\n   *\r\n   * @param catalogItemTemplateId\r\n   * @param catalogItemTemplateFieldId\r\n   */\r\n  static getCatalogItemTemplateField(\r\n    catalogItemTemplateId: number,\r\n    catalogItemTemplateFieldId: number,\r\n    config?: RequestConfig\r\n  ): AxiosPromise<CatalogItemTemplateField> {\r\n    return axios({\r\n      ...config,\r\n      method: 'GET',\r\n      url: `/catalog-item-templates/${catalogItemTemplateId}/fields/${catalogItemTemplateFieldId}`,\r\n    })\r\n  }\r\n\r\n  /**\r\n   * Create Catalog Item Template Field\r\n   *\r\n   * @param catalogItemTemplateId\r\n   * @param data\r\n   */\r\n  static createCatalogItemTemplateField(\r\n    catalogItemTemplateId: number,\r\n    data: FormData,\r\n    config?: RequestConfig\r\n  ): AxiosPromise<CatalogItemTemplateField> {\r\n    return axios({\r\n      ...config,\r\n      method: 'POST',\r\n      url: `/catalog-item-templates/${catalogItemTemplateId}/fields`,\r\n      data,\r\n    })\r\n  }\r\n\r\n  /**\r\n   * Update Catalog Item Template Field\r\n   *\r\n   * @param catalogItemTemplateId\r\n   * @param catalogItemTemplateFieldId\r\n   * @param data\r\n   */\r\n  static updateCatalogItemTemplateField(\r\n    catalogItemTemplateId: number,\r\n    catalogItemTemplateFieldId: number,\r\n    data: FormData,\r\n    config?: RequestConfig\r\n  ): AxiosPromise {\r\n    return axios({\r\n      ...config,\r\n      method: 'PUT',\r\n      url: `/catalog-item-templates/${catalogItemTemplateId}/fields/${catalogItemTemplateFieldId}`,\r\n      data,\r\n    })\r\n  }\r\n\r\n  /**\r\n   * Create Catalog Item Template Field\r\n   *\r\n   * @param catalogItemTemplateId\r\n   * @param catalogItemTemplateFieldId\r\n   */\r\n  static deleteCatalogItemTemplateField(\r\n    catalogItemTemplateId: number,\r\n    catalogItemTemplateFieldId: number,\r\n    config?: RequestConfig\r\n  ): AxiosPromise {\r\n    return axios({\r\n      ...config,\r\n      method: 'DELETE',\r\n      url: `/catalog-item-templates/${catalogItemTemplateId}/fields/${catalogItemTemplateFieldId}`,\r\n    })\r\n  }\r\n}\r\n","import { CatalogItemTemplateField } from 'model/api/CatalogItemTemplateField'\r\nimport { CatalogItemTemplateFieldTypeEnum } from 'model/api/CatalogItemTemplateFieldTypeEnum'\r\n\r\nexport interface MappedCatalogTemplateField {\r\n  key: string\r\n  id: number\r\n  template_id: number\r\n  template_group_id: number\r\n  is_multilingual: boolean\r\n  name: string\r\n  field_key: string\r\n  type: CatalogItemTemplateFieldTypeEnum\r\n  default_value: string\r\n  is_searchable: boolean\r\n  is_sortable: boolean\r\n  use_in_listing: boolean\r\n  weight: number\r\n}\r\n\r\nexport const mapCatalogTemplateFields = (\r\n  data: CatalogItemTemplateField[]\r\n): MappedCatalogTemplateField[] =>\r\n  data.map(\r\n    ({\r\n      id,\r\n      name,\r\n      key: field_key,\r\n      default_value,\r\n      is_multilingual,\r\n      is_searchable,\r\n      is_sortable,\r\n      template_group_id,\r\n      template_id,\r\n      type,\r\n      use_in_listing,\r\n      weight,\r\n    }) => ({\r\n      key: String(id),\r\n      id,\r\n      template_id,\r\n      template_group_id,\r\n      is_multilingual: !!is_multilingual,\r\n      name,\r\n      field_key,\r\n      type,\r\n      default_value,\r\n      is_searchable: !!is_searchable,\r\n      is_sortable: !!is_sortable,\r\n      use_in_listing: !!use_in_listing,\r\n      weight,\r\n    })\r\n  )\r\n","import {\r\n  Dropdown as DropdownBase,\r\n  DropdownItemProps,\r\n} from 'components/Dropdown'\r\nimport { DropdownButton } from 'components/DropdownButton'\r\nimport React from 'react'\r\nimport { useTranslation } from 'react-i18next'\r\n\r\nexport type DropdownAction = 'edit' | 'delete'\r\n\r\nexport interface DropdownProps {\r\n  onClick: (action: DropdownAction) => void\r\n  disabledActions?: DropdownAction[]\r\n}\r\n\r\nexport const Dropdown: React.FC<DropdownProps> = ({ onClick }) => {\r\n  const { t } = useTranslation('catalog-template-detail')\r\n\r\n  const handleClick = (action: DropdownAction) => {\r\n    onClick(action)\r\n  }\r\n\r\n  const items: DropdownItemProps[] = [\r\n    {\r\n      children: t('fields.table.context-menu.edit'),\r\n      onClick: () => handleClick('edit'),\r\n      icon: 'pen',\r\n    },\r\n    {\r\n      children: t('fields.table.context-menu.delete'),\r\n      onClick: () => handleClick('delete'),\r\n      icon: 'trash-alt',\r\n      dialog: {\r\n        text: t('fields.table.context-menu.delete-dialog.text'),\r\n        cancel: t('fields.table.context-menu.delete-dialog.cancel'),\r\n        confirm: t('fields.table.context-menu.delete-dialog.confirm'),\r\n      },\r\n    },\r\n  ]\r\n\r\n  return (\r\n    <div>\r\n      <DropdownBase items={items} data-test=\"Dropdown\">\r\n        <DropdownButton size=\"small\" />\r\n      </DropdownBase>\r\n    </div>\r\n  )\r\n}\r\n","import React from 'react'\r\nimport { ColumnProps } from 'antd/es/table'\r\nimport { MappedCatalogTemplateField } from './mapCatalogTemplateFields'\r\nimport i18next from 'i18next'\r\nimport { DropdownAction, Dropdown } from '../components/Dropdown'\r\nimport { CatalogItemTemplateFieldTypeEnum } from 'model/api/CatalogItemTemplateFieldTypeEnum'\r\nimport { CATALOG_FIELD_TYPE_COLORS } from 'constants/colors'\r\nimport { Tag } from 'antd'\r\n\r\nexport const getCatalogTemplateFieldsColumns = (\r\n  t: i18next.TFunction,\r\n  onClick?: (action: DropdownAction, id: number) => void\r\n): ColumnProps<any>[] => [\r\n  {\r\n    key: 'id',\r\n    dataIndex: 'id',\r\n    title: t('fields.table.columns.id'),\r\n    width: 90,\r\n    fixed: 'left',\r\n  },\r\n  {\r\n    key: 'type',\r\n    dataIndex: 'type',\r\n    title: t('fields.table.columns.type'),\r\n    width: 100,\r\n    render: (value: CatalogItemTemplateFieldTypeEnum) => (\r\n      <Tag color={CATALOG_FIELD_TYPE_COLORS[value]}>{t(`enum:${value}`)}</Tag>\r\n    ),\r\n  },\r\n  {\r\n    key: 'name',\r\n    dataIndex: 'name',\r\n    title: t('fields.table.columns.name'),\r\n    width: 220,\r\n  },\r\n  {\r\n    key: 'field_key',\r\n    dataIndex: 'field_key',\r\n    title: t('fields.table.columns.key'),\r\n    width: 180 ,\r\n  },\r\n  {\r\n    key: 'use_in_listing',\r\n    dataIndex: 'use_in_listing',\r\n    title: t('fields.table.columns.use-in-listing'),\r\n    width: 120,\r\n    render: (value: boolean) =>\r\n      value ? t('fields.table.yes') : t('fields.table.no'),\r\n  },\r\n  {\r\n    key: 'is_multilingual',\r\n    dataIndex: 'is_multilingual',\r\n    title: t('fields.table.columns.is-multilingual'),\r\n    width: 130,\r\n    render: (value: boolean) =>\r\n      value ? t('fields.table.yes') : t('fields.table.no'),\r\n  },\r\n  {\r\n    key: 'is_sortable',\r\n    dataIndex: 'is_sortable',\r\n    title: t('fields.table.columns.is-sortable'),\r\n    width: 120,\r\n    render: (value: boolean) =>\r\n      value ? t('fields.table.yes') : t('fields.table.no'),\r\n  },\r\n  {\r\n    key: 'is_searchable',\r\n    dataIndex: 'is_searchable',\r\n    title: t('fields.table.columns.is-searchable'),\r\n    width: 120,\r\n    render: (value: boolean) =>\r\n      value ? t('fields.table.yes') : t('fields.table.no'),\r\n  },\r\n  {\r\n    fixed: 'right',\r\n    key: 'context_menu',\r\n    dataIndex: 'context_menu',\r\n    width: 60,\r\n    render: (_, { id }: MappedCatalogTemplateField) => (\r\n      <Dropdown\r\n        onClick={(action: DropdownAction) => onClick && onClick(action, id)}\r\n      />\r\n    ),\r\n  },\r\n]\r\n","import React, { useRef, useState, useCallback, useEffect } from 'react'\r\nimport { Divider, Typography, notification, Space } from 'antd'\r\nimport { useTranslation } from 'react-i18next'\r\nimport { Table } from 'components/Table'\r\nimport axios, { CancelTokenSource } from 'axios'\r\nimport { CatalogItemTemplateFieldsApi } from 'api/CatalogItemTemplateFields'\r\nimport { navigate } from '@reach/router'\r\nimport { IconButton } from 'components/IconButton'\r\nimport styled from 'styled-components'\r\nimport { DropdownAction } from './Dropdown'\r\nimport {\r\n  mapCatalogTemplateFields,\r\n  MappedCatalogTemplateField,\r\n} from '../utils/mapCatalogTemplateFields'\r\nimport { getCatalogTemplateFieldsColumns } from '../utils/getCatalogTemplateFieldsColumns'\r\n\r\nconst TitleContainer = styled.div`\r\n  display: flex;\r\n  flex-direction: row;\r\n  justify-content: space-between;\r\n`\r\n\r\nconst { Title } = Typography\r\n\r\nexport interface FieldsProps {\r\n  catalogItemTempalteId: number\r\n}\r\n\r\nexport const Fields: React.FC<FieldsProps> = ({ catalogItemTempalteId }) => {\r\n  const { PUBLIC_URL } = process.env\r\n  const { t } = useTranslation('catalog-template-detail')\r\n  const [data, setData] = useState<MappedCatalogTemplateField[]>([])\r\n  const [loading, setLoading] = useState(false)\r\n  const [total, setTotal] = useState(0)\r\n  const [page, setPage] = useState(1)\r\n  const [pageSize, setPageSize] = useState(0)\r\n  const cancelTokenRef = useRef<CancelTokenSource>(axios.CancelToken.source())\r\n\r\n  const getData = useCallback(async () => {\r\n    setLoading(true)\r\n\r\n    const {\r\n      data: { data, total, per_page },\r\n    } = await CatalogItemTemplateFieldsApi.getCatalogItemTemplateFields(\r\n      catalogItemTempalteId,\r\n      page,\r\n      pageSize,\r\n      {\r\n        cancelToken: cancelTokenRef.current.token,\r\n      }\r\n    )\r\n\r\n    setData(mapCatalogTemplateFields(data))\r\n    setTotal(total)\r\n    setPageSize(per_page)\r\n    setLoading(false)\r\n  }, [page, pageSize, catalogItemTempalteId])\r\n\r\n  const handleActionClick = useCallback(\r\n    async (action: DropdownAction, id: number) => {\r\n      switch (action) {\r\n        case 'edit':\r\n          navigate(\r\n            PUBLIC_URL +\r\n              '/catalog/templates/' +\r\n              catalogItemTempalteId +\r\n              '/fields/' +\r\n              id\r\n          )\r\n          break\r\n        case 'delete':\r\n          try {\r\n          await CatalogItemTemplateFieldsApi.deleteCatalogItemTemplateField(\r\n            catalogItemTempalteId,\r\n            id,\r\n            {\r\n              cancelToken: cancelTokenRef.current.token,\r\n            }\r\n          )\r\n\r\n          notification.success({\r\n            message: t('fields.table.delete-success'),\r\n          })\r\n\r\n          getData()\r\n          } catch (e) {}\r\n          break\r\n        default:\r\n          break\r\n      }\r\n    },\r\n    [PUBLIC_URL, getData, t, catalogItemTempalteId]\r\n  )\r\n\r\n  const handlePageChange = useCallback((page: number) => {\r\n    setPage(page)\r\n  }, [])\r\n\r\n  const handleCreateField = useCallback(() => {\r\n    navigate(\r\n      PUBLIC_URL + '/catalog/templates/' + catalogItemTempalteId + '/fields/new'\r\n    )\r\n  }, [PUBLIC_URL, catalogItemTempalteId])\r\n\r\n  useEffect(() => {\r\n    getData()\r\n  }, [getData])\r\n\r\n  useEffect(() => {\r\n    const cancelToken = cancelTokenRef.current\r\n\r\n    return () => cancelToken.cancel()\r\n  }, [])\r\n\r\n  return (\r\n    <>\r\n      <Divider />\r\n      <Space size=\"large\" direction=\"vertical\" style={{ width: '100%' }}>\r\n        <TitleContainer>\r\n          <Title level={3}>{t('fields.title')}</Title>\r\n          <IconButton\r\n            size=\"middle\"\r\n            type=\"primary\"\r\n            icon=\"plus\"\r\n            onClick={handleCreateField}\r\n          >\r\n            {t('fields.create-new-field')}\r\n          </IconButton>\r\n        </TitleContainer>\r\n        <Table\r\n          columns={getCatalogTemplateFieldsColumns(t, handleActionClick)}\r\n          dataSource={data}\r\n          loading={loading}\r\n          isScrollable={true}\r\n          pagination={{\r\n            current: page,\r\n            pageSize,\r\n            total,\r\n            onChange: handlePageChange,\r\n          }}\r\n        />\r\n      </Space>\r\n    </>\r\n  )\r\n}\r\n","import React, { useCallback } from 'react'\r\nimport { IconButton } from './IconButton'\r\nimport { navigate } from '@reach/router'\r\n\r\nexport interface BackButtonProps {\r\n  title: string\r\n  to: string\r\n}\r\n\r\nexport const BackButton: React.FC<BackButtonProps> = ({ title, to }) => {\r\n  const { PUBLIC_URL } = process.env\r\n\r\n  const handleButtonClick = useCallback(() => {\r\n    navigate(PUBLIC_URL + to)\r\n  }, [to, PUBLIC_URL])\r\n\r\n  return (\r\n    <IconButton\r\n      icon=\"arrow-left\"\r\n      size=\"small\"\r\n      type=\"primary\"\r\n      shape=\"round\"\r\n      ghost\r\n      onClick={handleButtonClick}\r\n    >\r\n      {title}\r\n    </IconButton>\r\n  )\r\n}\r\n","import React, { useContext, useEffect } from 'react'\r\nimport { RouteComponentProps } from '@reach/router'\r\nimport { useTranslation } from 'react-i18next'\r\nimport { SceneTitle } from 'components/SceneTitle'\r\nimport { AuthenticatedLayoutContext } from 'components/Layout/AuthenticatedLayout'\r\nimport { Form } from './components/Form'\r\nimport { Fields } from './components/Fields'\r\nimport { BackButton } from 'components/BackButton'\r\n\r\nexport interface CatalogTemplateDetailProps extends RouteComponentProps {\r\n  catalogItemTemplateId?: number\r\n  view: 'new' | 'detail'\r\n}\r\n\r\nexport const CatalogTemplateDetail: React.FC<CatalogTemplateDetailProps> = ({\r\n  catalogItemTemplateId,\r\n  view,\r\n}) => {\r\n  const { t } = useTranslation('catalog-template-detail')\r\n  const { setSceneTitle } = useContext(AuthenticatedLayoutContext)\r\n\r\n  useEffect(() => {\r\n    setSceneTitle(\r\n      <SceneTitle\r\n        title={t(view === 'detail' ? 'scene-title.detail' : 'scene-title.new')}\r\n        extraContent={\r\n          <BackButton\r\n            title={t('scene-title.back-to-templates')}\r\n            to=\"/catalog/templates\"\r\n          />\r\n        }\r\n      />\r\n    )\r\n  }, [setSceneTitle, t, view])\r\n\r\n  return (\r\n    <>\r\n      <Form catalogItemTemplateId={catalogItemTemplateId} view={view} />\r\n      {view === 'detail' && (\r\n        <Fields catalogItemTempalteId={catalogItemTemplateId} />\r\n      )}\r\n    </>\r\n  )\r\n}\r\n","export enum CatalogItemTemplateFieldTypeEnum {\r\n  'RICH_TEXT' = 'RICH_TEXT',\r\n  'TEXT' = 'TEXT',\r\n  'STRING' = 'STRING',\r\n  'INTEGER' = 'INTEGER',\r\n  'BOOLEAN' = 'BOOLEAN',\r\n  'DATE' = 'DATE',\r\n  'DATE_TIME' = 'DATE_TIME',\r\n  'IMAGE' = 'IMAGE',\r\n  'GALLERY' = 'GALLERY',\r\n  'LINK' = 'LINK',\r\n  'PRICE' = 'PRICE',\r\n  'TAX_RATE' = 'TAX_RATE'\r\n}\r\n","import { CatalogItemTemplateField } from 'model/api/CatalogItemTemplateField'\r\n\r\nexport interface MappedCatalogTemplateField\r\n  extends Omit<\r\n    CatalogItemTemplateField,\r\n    'is_searchable' | 'is_sortable' | 'use_in_listing' | 'is_multilingual'\r\n  > {\r\n  is_multilingual: boolean\r\n  use_in_listing: boolean\r\n  is_sortable: boolean\r\n  is_searchable: boolean\r\n}\r\n\r\nexport const mapCatalogTemplateField = ({\r\n  default_value,\r\n  id,\r\n  is_multilingual,\r\n  is_searchable,\r\n  is_sortable,\r\n  name,\r\n  key,\r\n  template_group_id,\r\n  template_id,\r\n  type,\r\n  use_in_listing,\r\n  weight,\r\n}: CatalogItemTemplateField): MappedCatalogTemplateField => ({\r\n  is_multilingual: !!is_multilingual,\r\n  use_in_listing: !!use_in_listing,\r\n  is_sortable: !!is_sortable,\r\n  is_searchable: !!is_searchable,\r\n  default_value,\r\n  id,\r\n  name,\r\n  key,\r\n  template_group_id,\r\n  template_id,\r\n  type,\r\n  weight,\r\n})\r\n","import React, { useCallback, useState, useEffect, useRef } from 'react'\r\nimport { Formik, FormikProps } from 'formik'\r\nimport { Input, Select, Switch, Form as FormFormikAntd } from 'formik-antd'\r\nimport { FormikFormItem as Item } from 'components/FormikFormItem'\r\nimport { Button, Form as FormAntd, notification, Tag, Space, Alert } from 'antd'\r\nimport { useTranslation } from 'react-i18next'\r\nimport { validateSchema } from 'config/yup'\r\nimport * as Yup from 'yup'\r\nimport axios, { CancelToken, CancelTokenSource } from 'axios'\r\nimport { navigate } from '@reach/router'\r\nimport { CatalogItemTemplateFieldsApi } from 'api/CatalogItemTemplateFields'\r\nimport { CatalogItemTemplateFieldTypeEnum } from 'model/api/CatalogItemTemplateFieldTypeEnum'\r\nimport {\r\n  mapCatalogTemplateField,\r\n  MappedCatalogTemplateField,\r\n} from '../utils/mapCatalogTemplateField'\r\nimport { CATALOG_FIELD_TYPE_COLORS } from 'constants/colors'\r\n\r\nconst { Item: ItemAntd } = FormAntd\r\nconst { Option } = Select\r\n\r\nexport interface FormValues {\r\n  template_group_id?: number | null\r\n  is_multilingual: boolean\r\n  name?: string\r\n  key?: string\r\n  type?: CatalogItemTemplateFieldTypeEnum\r\n  default_value?: string\r\n  use_in_listing: boolean\r\n  is_sortable: boolean\r\n  is_searchable: boolean\r\n  weight: number\r\n}\r\n\r\nexport const FormSchema = Yup.object().shape<FormValues>({\r\n  template_group_id: Yup.number()\r\n    .nullable()\r\n    .notRequired(),\r\n  is_multilingual: Yup.boolean().required(),\r\n  name: Yup.string().required(),\r\n  key: Yup.string().matches(/^[A-Za-z0-9_.]+$/).required(),\r\n  type: Yup.mixed().required(),\r\n  default_value: Yup.string().notRequired(),\r\n  use_in_listing: Yup.boolean().required(),\r\n  is_sortable: Yup.boolean().required(),\r\n  is_searchable: Yup.boolean().required(),\r\n  weight: Yup.number().required(),\r\n})\r\n\r\nexport interface FormProps {\r\n  catalogItemTemplateId?: number\r\n  catalogItemTemplateFieldId?: number\r\n  view: 'new' | 'detail'\r\n}\r\n\r\nexport const Form: React.FC<FormProps> = ({\r\n  catalogItemTemplateId,\r\n  catalogItemTemplateFieldId,\r\n  view,\r\n}) => {\r\n  const { PUBLIC_URL } = process.env\r\n  const { t } = useTranslation('catalog-template-field-detail')\r\n  const [data, setData] = useState<MappedCatalogTemplateField>()\r\n  const [loading, setLoading] = useState(false)\r\n  const cancelTokenRef = useRef<CancelTokenSource>(axios.CancelToken.source())\r\n  const formInitialValues: FormValues = data || {\r\n    template_group_id: null,\r\n    is_multilingual: false,\r\n    name: undefined,\r\n    key: undefined,\r\n    type: undefined,\r\n    default_value: '',\r\n    use_in_listing: false,\r\n    is_sortable: false,\r\n    is_searchable: false,\r\n    weight: 50,\r\n  }\r\n  const submitFormSource = useRef<'create' | 'create-another'>()\r\n\r\n  const getData = useCallback(\r\n    async (cancelToken: CancelToken) => {\r\n      if (\r\n        view === 'detail' &&\r\n        catalogItemTemplateId &&\r\n        catalogItemTemplateFieldId\r\n      ) {\r\n        setLoading(true)\r\n\r\n        const {\r\n          data,\r\n        } = await CatalogItemTemplateFieldsApi.getCatalogItemTemplateField(\r\n          catalogItemTemplateId,\r\n          catalogItemTemplateFieldId,\r\n          { cancelToken }\r\n        )\r\n        setData(mapCatalogTemplateField(data))\r\n        setLoading(false)\r\n      }\r\n    },\r\n    [view, catalogItemTemplateId, catalogItemTemplateFieldId]\r\n  )\r\n\r\n  const handleSubmit = useCallback(\r\n    async ({\r\n      is_multilingual,\r\n      default_value,\r\n      name,\r\n      key,\r\n      type,\r\n      is_searchable,\r\n      is_sortable,\r\n      use_in_listing,\r\n      weight,\r\n    }: FormValues) => {\r\n      setLoading(true)\r\n      const data = new FormData()\r\n\r\n      data.append('type', String(type))\r\n      data.append('name', name)\r\n      data.append('key', key)\r\n      data.append('is_multilingual', String(+is_multilingual))\r\n      data.append('default_value', String(default_value))\r\n      data.append('is_searchable', String(+is_searchable))\r\n      data.append('is_sortable', String(+is_sortable))\r\n      data.append('use_in_listing', String(+use_in_listing))\r\n      data.append('weight', String(weight))\r\n\r\n      if (view === 'new') {\r\n        try {\r\n          await CatalogItemTemplateFieldsApi.createCatalogItemTemplateField(\r\n            catalogItemTemplateId,\r\n            data,\r\n            {\r\n              cancelToken: cancelTokenRef.current.token,\r\n            }\r\n          )\r\n\r\n          if (submitFormSource.current === 'create') {\r\n            navigate(PUBLIC_URL + '/catalog/templates/' + catalogItemTemplateId)\r\n          } else {\r\n            const to =\r\n              PUBLIC_URL +\r\n              '/catalog/templates/' +\r\n              catalogItemTemplateId +\r\n              '/fields/new'\r\n\r\n            navigate(PUBLIC_URL + '/redirect-to', {\r\n              state: {\r\n                to,\r\n              },\r\n            })\r\n          }\r\n\r\n          notification.success({\r\n            message: t('form.create-success'),\r\n          })\r\n        } catch (e) {\r\n          setLoading(false)\r\n        }\r\n      } else if (view === 'detail') {\r\n        try {\r\n          await CatalogItemTemplateFieldsApi.updateCatalogItemTemplateField(\r\n            catalogItemTemplateId,\r\n            catalogItemTemplateFieldId,\r\n            data,\r\n            {\r\n              cancelToken: cancelTokenRef.current.token,\r\n            }\r\n          )\r\n\r\n          notification.success({\r\n            message: t('form.update-success'),\r\n          })\r\n        } catch (e) {}\r\n\r\n        setLoading(false)\r\n      }\r\n    },\r\n    [PUBLIC_URL, view, catalogItemTemplateId, catalogItemTemplateFieldId, t]\r\n  )\r\n\r\n  const handleSubmitForm = useCallback(\r\n    (\r\n      source: 'create' | 'create-another',\r\n      submitForm: (() => Promise<void>) & (() => Promise<any>)\r\n    ) => {\r\n      submitFormSource.current = source\r\n      submitForm()\r\n    },\r\n    []\r\n  )\r\n\r\n  const renderForm = useCallback(\r\n    ({ submitForm }: FormikProps<FormValues>) => (\r\n      <FormFormikAntd layout=\"vertical\">\r\n        <Item label={t('form.type')} name=\"type\">\r\n          <Space size=\"middle\" direction=\"vertical\" style={{ width: '100%' }}>\r\n            <Select name=\"type\">\r\n              {Object.keys(CatalogItemTemplateFieldTypeEnum).map(\r\n                (item: string) => (\r\n                  <Option value={item} key={item}>\r\n                    <Tag color={CATALOG_FIELD_TYPE_COLORS[item]}>\r\n                      {t(`enum:${item}`)}\r\n                    </Tag>\r\n                  </Option>\r\n                )\r\n              )}\r\n            </Select>\r\n            {view === 'detail' && (\r\n              <Alert type=\"warning\" message={t('form.type-warning')} />\r\n            )}\r\n          </Space>\r\n        </Item>\r\n\r\n        <Item label={t('form.name')} name=\"name\">\r\n          <Input name=\"name\" />\r\n        </Item>\r\n        <Item label={t('form.key')} name=\"key\">\r\n          <Input name=\"key\" />\r\n        </Item>\r\n        <Item label={t('form.default-value')} name=\"default_value\">\r\n          <Input name=\"default_value\" />\r\n        </Item>\r\n        <Item label={t('form.is-multilingual')} name=\"is_multilingual\">\r\n          <Switch name=\"is_multilingual\" />\r\n        </Item>\r\n        <Item label={t('form.use-in-listing')} name=\"use_in_listing\">\r\n          <Switch name=\"use_in_listing\" />\r\n        </Item>\r\n        <Item label={t('form.is-sortable')} name=\"is_sortable\">\r\n          <Switch name=\"is_sortable\" />\r\n        </Item>\r\n        <Item label={t('form.is-searchable')} name=\"is_searchable\">\r\n          <Switch name=\"is_searchable\" />\r\n        </Item>\r\n        <Item label={t('form.weight')} name=\"weight\">\r\n          <Input name=\"weight\" type=\"number\" />\r\n        </Item>\r\n\r\n        <ItemAntd>\r\n          {view === 'new' ? (\r\n            <Space size=\"middle\" direction=\"horizontal\">\r\n              <Button\r\n                htmlType=\"button\"\r\n                type=\"primary\"\r\n                size=\"large\"\r\n                disabled={loading}\r\n                onClick={() => handleSubmitForm('create', submitForm)}\r\n              >\r\n                {t('form.submit.new.create')}\r\n              </Button>\r\n              <Button\r\n                htmlType=\"button\"\r\n                type=\"default\"\r\n                size=\"large\"\r\n                disabled={loading}\r\n                onClick={() => handleSubmitForm('create-another', submitForm)}\r\n              >\r\n                {t('form.submit.new.create-and-create-another')}\r\n              </Button>\r\n            </Space>\r\n          ) : (\r\n            <Button\r\n              htmlType=\"submit\"\r\n              type=\"primary\"\r\n              size=\"large\"\r\n              disabled={loading}\r\n            >\r\n              {t('form.submit.detail')}\r\n            </Button>\r\n          )}\r\n        </ItemAntd>\r\n      </FormFormikAntd>\r\n    ),\r\n    [t, view, loading, handleSubmitForm]\r\n  )\r\n\r\n  useEffect(() => {\r\n    const cancelTokenSource = axios.CancelToken.source()\r\n\r\n    getData(cancelTokenSource.token)\r\n\r\n    return () => cancelTokenSource.cancel()\r\n  }, [getData])\r\n\r\n  useEffect(() => {\r\n    const cancelToken = cancelTokenRef.current\r\n\r\n    return () => cancelToken.cancel()\r\n  }, [])\r\n\r\n  return (\r\n    <Formik<FormValues>\r\n      initialValues={formInitialValues}\r\n      enableReinitialize\r\n      validate={values => validateSchema(values, FormSchema)}\r\n      onSubmit={handleSubmit}\r\n    >\r\n      {props => renderForm(props)}\r\n    </Formik>\r\n  )\r\n}\r\n","import React, { useContext, useEffect } from 'react'\r\nimport { RouteComponentProps } from '@reach/router'\r\nimport { useTranslation } from 'react-i18next'\r\nimport { SceneTitle } from 'components/SceneTitle'\r\nimport { AuthenticatedLayoutContext } from 'components/Layout/AuthenticatedLayout'\r\nimport { Form } from './components/Form'\r\nimport { BackButton } from 'components/BackButton'\r\n\r\nexport interface CatalogTemplateFieldDetailProps extends RouteComponentProps {\r\n  catalogItemTemplateId?: number\r\n  catalogItemTemplateFieldId?: number\r\n  view: 'new' | 'detail'\r\n}\r\n\r\nexport const CatalogTemplateFieldDetail: React.FC<CatalogTemplateFieldDetailProps> = ({\r\n  catalogItemTemplateId,\r\n  catalogItemTemplateFieldId,\r\n  view,\r\n}) => {\r\n  const { t } = useTranslation('catalog-template-field-detail')\r\n  const { setSceneTitle } = useContext(AuthenticatedLayoutContext)\r\n\r\n  useEffect(() => {\r\n    setSceneTitle(\r\n      <SceneTitle\r\n        title={t(view === 'detail' ? 'scene-title.detail' : 'scene-title.new')}\r\n        extraContent={\r\n          <BackButton\r\n            title={t('scene-title.back-to-template-detail')}\r\n            to={'/catalog/templates/' + catalogItemTemplateId}\r\n          />\r\n        }\r\n      />\r\n    )\r\n  }, [t, catalogItemTemplateId, view, setSceneTitle])\r\n\r\n  return (\r\n    <Form\r\n      catalogItemTemplateFieldId={catalogItemTemplateFieldId}\r\n      catalogItemTemplateId={catalogItemTemplateId}\r\n      view={view}\r\n    />\r\n  )\r\n}\r\n","import React, { useCallback } from 'react'\r\nimport { Button, Result } from 'antd'\r\nimport { useTranslation } from 'react-i18next'\r\nimport { RouteComponentProps, navigate } from '@reach/router'\r\n\r\nexport const InternalServerError: React.FC<RouteComponentProps> = () => {\r\n  const { PUBLIC_URL } = process.env\r\n  const { t } = useTranslation()\r\n\r\n  const handleButtonClick = useCallback(() => {\r\n    navigate(PUBLIC_URL + '/')\r\n  }, [PUBLIC_URL])\r\n\r\n  return (\r\n    <Result\r\n      status=\"500\"\r\n      title=\"500\"\r\n      subTitle={t('internal-server-error.text')}\r\n      extra={\r\n        <Button type=\"primary\" onClick={handleButtonClick}>\r\n          {t('internal-server-error.button')}\r\n        </Button>\r\n      }\r\n    />\r\n  )\r\n}\r\n","import React from 'react'\r\nimport { Layout } from 'antd'\r\nimport { Navigation } from 'components/Navigation'\r\nimport styled from 'styled-components'\r\nimport { COLORS } from 'constants/colors'\r\nimport { RouteComponentProps } from '@reach/router'\r\nimport { Logo } from 'components/Logo'\r\nimport { StyledHeader } from '../AuthenticatedLayout'\r\n\r\nconst { Footer } = Layout\r\n\r\nconst Main = styled(Layout)`\r\n  min-height: calc(100vh - 134px);\r\n  padding: 50px 0;\r\n  background: ${COLORS.white};\r\n`\r\n\r\nexport interface AuthenticatedLayoutProps extends RouteComponentProps {\r\n  children: React.ReactNode | React.ReactNodeArray\r\n}\r\n\r\nexport const AuthenticatedErrorLayout: React.FC<AuthenticatedLayoutProps> = ({\r\n  children,\r\n}) => {\r\n  return (\r\n    <Layout>\r\n      <StyledHeader>\r\n        <Logo />\r\n        <Navigation />\r\n      </StyledHeader>\r\n      <Main>{children}</Main>\r\n      <Footer>Footer</Footer>\r\n    </Layout>\r\n  )\r\n}\r\n","import React, { useCallback } from 'react'\r\nimport { Button, Result } from 'antd'\r\nimport { useTranslation } from 'react-i18next'\r\nimport { RouteComponentProps, navigate } from '@reach/router'\r\n\r\nexport const PageNotFound: React.FC<RouteComponentProps> = () => {\r\n  const { PUBLIC_URL } = process.env\r\n  const { t } = useTranslation()\r\n\r\n  const handleButtonClick = useCallback(() => {\r\n    navigate(PUBLIC_URL + '/')\r\n  }, [PUBLIC_URL])\r\n\r\n  console.log('404')\r\n\r\n  return (\r\n    <Result\r\n      status=\"404\"\r\n      title=\"404\"\r\n      subTitle={t('page-not-found.text')}\r\n      extra={\r\n        <Button type=\"primary\" onClick={handleButtonClick}>\r\n          {t('page-not-found.button')}\r\n        </Button>\r\n      }\r\n    />\r\n  )\r\n}\r\n","import React, { useEffect } from 'react'\r\nimport { RouteComponentProps, navigate } from '@reach/router'\r\n\r\nexport const RedirectTo: React.FC<RouteComponentProps> = ({\r\n  location: { state },\r\n}) => {\r\n  useEffect(() => {\r\n    navigate((state as any).to)\r\n  }, [state])\r\n\r\n  return null\r\n}\r\n","import axios, { AxiosPromise } from 'axios'\r\nimport { RequestConfig } from './requestConfig'\r\nimport { CatalogLanguage } from 'model/api/CatalogLanguage'\r\nimport { PaginatedList } from 'model/api/PaginatedList'\r\n\r\nexport class CatalogLanguagesApi {\r\n  /**\r\n   * Get Catalog Languages\r\n   *\r\n   * @param page\r\n   * @param pageSize\r\n   */\r\n  static getCatalogLanguages(\r\n    page?: number,\r\n    pageSize?: number,\r\n    config?: RequestConfig\r\n  ): AxiosPromise<PaginatedList<CatalogLanguage>> {\r\n    return axios({\r\n      ...config,\r\n      method: 'GET',\r\n      url: `/catalog-languages`,\r\n      params: {\r\n        page,\r\n        per_page: pageSize,\r\n      },\r\n    })\r\n  }\r\n\r\n  /**\r\n   * All Get Catalog Languages\r\n   */\r\n  static getAllCatalogLanguages(\r\n    config?: RequestConfig\r\n  ): AxiosPromise<CatalogLanguage[]> {\r\n    return axios({\r\n      ...config,\r\n      method: 'GET',\r\n      url: `/catalog-languages/all`,\r\n    })\r\n  }\r\n\r\n  /**\r\n   * Get Catalog Language\r\n   *\r\n   * @param code\r\n   */\r\n  static getCatalogLanguage(\r\n    code: string,\r\n    config?: RequestConfig\r\n  ): AxiosPromise<CatalogLanguage> {\r\n    return axios({\r\n      ...config,\r\n      method: 'GET',\r\n      url: `/catalog-languages/${code}`,\r\n    })\r\n  }\r\n\r\n  /**\r\n   * Create Catalog Language\r\n   *\r\n   * @param data\r\n   */\r\n  static createCatalogLanguage(\r\n    data: FormData,\r\n    config?: RequestConfig\r\n  ): AxiosPromise {\r\n    return axios({\r\n      ...config,\r\n      method: 'POST',\r\n      url: `/catalog-languages`,\r\n      data,\r\n    })\r\n  }\r\n\r\n  /**\r\n   * Update Catalog Language\r\n   *\r\n   * @param code\r\n   * @param data\r\n   */\r\n  static updateCatalogLanguage(\r\n    code: string,\r\n    data: FormData,\r\n    config?: RequestConfig\r\n  ): AxiosPromise {\r\n    return axios({\r\n      ...config,\r\n      method: 'PUT',\r\n      url: `/catalog-languages/${code}`,\r\n      data,\r\n    })\r\n  }\r\n\r\n  /**\r\n   * Delete Catalog Language\r\n   *\r\n   * @param data\r\n   */\r\n  static deleteCatalogLanguage(\r\n    code: string,\r\n    config?: RequestConfig\r\n  ): AxiosPromise {\r\n    return axios({\r\n      ...config,\r\n      method: 'DELETE',\r\n      url: `/catalog-languages/${code}`,\r\n    })\r\n  }\r\n}\r\n","import {\r\n  Dropdown as DropdownBase,\r\n  DropdownItemProps,\r\n} from 'components/Dropdown'\r\nimport { DropdownButton } from 'components/DropdownButton'\r\nimport React, { useCallback } from 'react'\r\nimport { useTranslation } from 'react-i18next'\r\n\r\n\r\nexport type DropdownAction = 'edit' | 'delete'\r\n\r\nexport interface DropdownProps {\r\n  onClick: (action: DropdownAction) => void\r\n  disabledActions?: DropdownAction[]\r\n}\r\n\r\nexport const Dropdown: React.FC<DropdownProps> = ({ onClick }) => {\r\n  const { t } = useTranslation('catalog-languages')\r\n\r\n  const handleClick = useCallback((action: DropdownAction) => {\r\n    onClick(action)\r\n  }, [onClick])\r\n\r\n  const items: DropdownItemProps[] = [\r\n    {\r\n      children: t('table.context-menu.edit'),\r\n      onClick: () => handleClick('edit'),\r\n      icon: 'pen',\r\n    },   \r\n    {\r\n      children: t('table.context-menu.delete'),\r\n      onClick: () => handleClick('delete'),\r\n      icon: 'trash-alt',\r\n      dialog: {\r\n        text: t('table.context-menu.delete-dialog.text'),\r\n        cancel: t('table.context-menu.delete-dialog.cancel'),\r\n        confirm: t('table.context-menu.delete-dialog.confirm')\r\n      }\r\n    },\r\n  ]\r\n\r\n  return (\r\n    <div>\r\n      <DropdownBase items={items} data-test=\"Dropdown\">\r\n        <DropdownButton size=\"small\" />\r\n      </DropdownBase>\r\n    </div>\r\n  )\r\n}\r\n","import React from 'react'\r\nimport { ColumnProps } from 'antd/es/table'\r\nimport { MappedCatalogLanguage } from './mapCatalogLanguages'\r\nimport i18next from 'i18next'\r\nimport { DropdownAction, Dropdown } from '../components/Dropdown'\r\n\r\nexport const getCatalogLanguagesColumns = (\r\n  t: i18next.TFunction,\r\n  onClick?: (action: DropdownAction, code: string) => void\r\n): ColumnProps<any>[] => [\r\n  {\r\n    key: 'code',\r\n    dataIndex: 'code',\r\n    title: t('table.columns.code'),\r\n    width: 200,\r\n  },\r\n  {\r\n    key: 'name',\r\n    dataIndex: 'name',\r\n    title: t('table.columns.name'),\r\n  },\r\n  {\r\n    key: 'context_menu',\r\n    dataIndex: 'context_menu',\r\n    width: 60,\r\n    render: (_, { code }: MappedCatalogLanguage) => (\r\n      <Dropdown\r\n        onClick={(action: DropdownAction) => onClick && onClick(action, code)}\r\n      />\r\n    ),\r\n    fixed: 'right',\r\n  },\r\n]\r\n","import { CatalogLanguage } from 'model/api/CatalogLanguage'\r\n\r\nexport interface MappedCatalogLanguage {\r\n  key: string\r\n  name: string\r\n  code: string\r\n}\r\n\r\nexport const mapCatalogLanguages = (\r\n  data: CatalogLanguage[]\r\n): MappedCatalogLanguage[] =>\r\n  data.map(({ name, code }) => ({\r\n    key: String(code),\r\n    name,\r\n    code,\r\n  }))\r\n","import React, { useCallback, useState, useEffect, useRef } from 'react'\r\nimport { Table as TableBase } from 'components/Table'\r\nimport { CatalogLanguagesApi } from 'api/CatalogLanguages'\r\nimport axios, { CancelTokenSource } from 'axios'\r\nimport { useTranslation } from 'react-i18next'\r\nimport { DropdownAction } from './Dropdown'\r\nimport { navigate } from '@reach/router'\r\nimport { notification } from 'antd'\r\nimport { getCatalogLanguagesColumns } from '../utils/getCatalogLanguagesColumns'\r\nimport {\r\n  mapCatalogLanguages,\r\n  MappedCatalogLanguage,\r\n} from '../utils/mapCatalogLanguages'\r\n\r\nexport const Table: React.FC = () => {\r\n  const { PUBLIC_URL } = process.env\r\n  const { t } = useTranslation('catalog-languages')\r\n  const [data, setData] = useState<MappedCatalogLanguage[]>([])\r\n  const [loading, setLoading] = useState(false)\r\n  const [total, setTotal] = useState(0)\r\n  const [page, setPage] = useState(1)\r\n  const [pageSize, setPageSize] = useState(0)\r\n  const cancelTokenRef = useRef<CancelTokenSource>(axios.CancelToken.source())\r\n\r\n  const getData = useCallback(async () => {\r\n    setLoading(true)\r\n\r\n    const {\r\n      data: { data, total, per_page },\r\n    } = await CatalogLanguagesApi.getCatalogLanguages(page, pageSize, {\r\n      cancelToken: cancelTokenRef.current.token,\r\n    })\r\n\r\n    setData(mapCatalogLanguages(data))\r\n    setTotal(total)\r\n    setPageSize(per_page)\r\n    setLoading(false)\r\n  }, [page, pageSize])\r\n\r\n  const handleActionClick = useCallback(\r\n    async (action: DropdownAction, code: string) => {\r\n      switch (action) {\r\n        case 'edit':\r\n          navigate(PUBLIC_URL + '/catalog/languages/' + code)\r\n          break\r\n        case 'delete':\r\n          try {\r\n            await CatalogLanguagesApi.deleteCatalogLanguage(code, {\r\n              cancelToken: cancelTokenRef.current.token,\r\n            })\r\n\r\n            notification.success({\r\n              message: t('table.delete-success'),\r\n            })\r\n\r\n            getData()\r\n          } catch (e) {}\r\n          break\r\n        default:\r\n          break\r\n      }\r\n    },\r\n    [PUBLIC_URL, getData, t]\r\n  )\r\n\r\n  const handlePageChange = useCallback((page: number) => {\r\n    setPage(page)\r\n  }, [])\r\n\r\n  useEffect(() => {\r\n    getData()\r\n  }, [getData])\r\n\r\n  useEffect(() => {\r\n    const cancelToken = cancelTokenRef.current\r\n\r\n    return () => cancelToken.cancel()\r\n  }, [])\r\n\r\n  return (\r\n    <TableBase\r\n      columns={getCatalogLanguagesColumns(t, handleActionClick)}\r\n      dataSource={data}\r\n      loading={loading}\r\n      pagination={{\r\n        current: page,\r\n        pageSize,\r\n        total,\r\n        onChange: handlePageChange,\r\n      }}\r\n    />\r\n  )\r\n}\r\n","import React, { useContext, useEffect, useCallback } from 'react'\r\nimport { RouteComponentProps, navigate } from '@reach/router'\r\nimport { useTranslation } from 'react-i18next'\r\nimport { SceneTitle } from 'components/SceneTitle'\r\nimport { AuthenticatedLayoutContext } from 'components/Layout/AuthenticatedLayout'\r\nimport { Table } from './components/Table'\r\nimport { Space } from 'antd'\r\nimport { IconButton } from 'components/IconButton'\r\n\r\nexport const CatalogLanguages: React.FC<RouteComponentProps> = () => {\r\n  const { PUBLIC_URL } = process.env\r\n  const { t } = useTranslation('catalog-languages')\r\n  const { setSceneTitle } = useContext(AuthenticatedLayoutContext)\r\n\r\n  const handleCreateCatalogItem = useCallback(() => {\r\n    navigate(PUBLIC_URL + '/catalog/languages/new')\r\n  }, [PUBLIC_URL])\r\n\r\n  useEffect(() => {\r\n    setSceneTitle(<SceneTitle title={t('scene-title')} />)\r\n  }, [setSceneTitle, t])\r\n\r\n  return (\r\n    <Space size=\"large\" direction=\"vertical\" style={{ width: '100%' }}>\r\n      <IconButton\r\n        size=\"middle\"\r\n        type=\"primary\"\r\n        icon=\"plus\"\r\n        onClick={handleCreateCatalogItem}\r\n      >\r\n        {t('create-new-catalog-language')}\r\n      </IconButton>\r\n      <Table />\r\n    </Space>\r\n  )\r\n}\r\n","import axios, { AxiosPromise } from 'axios'\r\nimport { RequestConfig } from './requestConfig'\r\nimport { CatalogCurrency } from 'model/api/CatalogCurrency'\r\nimport { PaginatedList } from 'model/api/PaginatedList'\r\n\r\nexport class CatalogCurrenciesApi {\r\n  /**\r\n   * Get Catalog Currencies\r\n   *\r\n   * @param page\r\n   * @param pageSize\r\n   */\r\n  static getCatalogCurrencies(\r\n    page?: number,\r\n    pageSize?: number,\r\n    config?: RequestConfig\r\n  ): AxiosPromise<PaginatedList<CatalogCurrency>> {\r\n    return axios({\r\n      ...config,\r\n      method: 'GET',\r\n      url: `/catalog-currencies`,\r\n      params: {\r\n        page,\r\n        per_page: pageSize,\r\n      },\r\n    })\r\n  }\r\n\r\n  /**\r\n   * Get All Catalog Currencies\r\n   */\r\n  static getAllCatalogCurrencies(\r\n    config?: RequestConfig\r\n  ): AxiosPromise<CatalogCurrency[]> {\r\n    return axios({\r\n      ...config,\r\n      method: 'GET',\r\n      url: `/catalog-currencies/all`,\r\n    })\r\n  }\r\n\r\n  /**\r\n   * Get Catalog Currency\r\n   *\r\n   * @param catalogCurrencyId\r\n   */\r\n  static getCatalogCurrency(\r\n    catalogCurrencyId: number,\r\n    config?: RequestConfig\r\n  ): AxiosPromise<CatalogCurrency> {\r\n    return axios({\r\n      ...config,\r\n      method: 'GET',\r\n      url: `/catalog-currencies/${catalogCurrencyId}`,\r\n    })\r\n  }\r\n\r\n  /**\r\n   * Create Catalog Currency\r\n   *\r\n   * @param data\r\n   */\r\n  static createCatalogCurrency(\r\n    data: FormData,\r\n    config?: RequestConfig\r\n  ): AxiosPromise<{ id: number }> {\r\n    return axios({\r\n      ...config,\r\n      method: 'POST',\r\n      url: `/catalog-currencies`,\r\n      data,\r\n    })\r\n  }\r\n\r\n  /**\r\n   * Update Catalog Currency\r\n   *\r\n   * @param catalogCurrencyId\r\n   * @param data\r\n   */\r\n  static updateCatalogCurrency(\r\n    catalogCurrencyId: number,\r\n    data: FormData,\r\n    config?: RequestConfig\r\n  ): AxiosPromise {\r\n    return axios({\r\n      ...config,\r\n      method: 'PUT',\r\n      url: `/catalog-currencies/${catalogCurrencyId}`,\r\n      data,\r\n    })\r\n  }\r\n\r\n  /**\r\n   * Delete Catalog Currency\r\n   *\r\n   * @param catalogCurrencyId\r\n   */\r\n  static deleteCatalogCurrency(\r\n    catalogCurrencyId: number,\r\n    config?: RequestConfig\r\n  ): AxiosPromise {\r\n    return axios({\r\n      ...config,\r\n      method: 'DELETE',\r\n      url: `/catalog-currencies/${catalogCurrencyId}`,\r\n    })\r\n  }\r\n}\r\n","import React, { useCallback, useState, useEffect, useRef } from 'react'\r\nimport { Formik } from 'formik'\r\nimport { Select, Input, Form as FormFormikAntd } from 'formik-antd'\r\nimport { FormikFormItem as Item } from 'components/FormikFormItem'\r\nimport { Button, Form as FormAntd, notification, Alert, Space } from 'antd'\r\nimport { useTranslation } from 'react-i18next'\r\nimport { validateSchema } from 'config/yup'\r\nimport * as Yup from 'yup'\r\nimport axios, { CancelToken, CancelTokenSource } from 'axios'\r\nimport { CatalogLanguagesApi } from 'api/CatalogLanguages'\r\nimport { navigate } from '@reach/router'\r\nimport { CatalogLanguage } from 'model/api/CatalogLanguage'\r\nimport { CatalogCurrenciesApi } from 'api/CatalogCurrencies'\r\nimport { CatalogCurrency } from 'model/api/CatalogCurrency'\r\n\r\nconst { Item: ItemAntd } = FormAntd\r\nconst { Option } = Select\r\n\r\nexport interface FormValues {\r\n  name?: string\r\n  code?: string\r\n  default_currency_id?: number\r\n}\r\n\r\nexport const FormSchema = Yup.object().shape<FormValues>({\r\n  name: Yup.string().required(),\r\n  code: Yup.string().required(),\r\n  default_currency_id: Yup.number()\r\n})\r\n\r\nexport interface FormProps {\r\n  code?: string\r\n  view: 'new' | 'detail'\r\n}\r\n\r\nexport const Form: React.FC<FormProps> = ({ code, view }) => {\r\n  const { PUBLIC_URL } = process.env\r\n  const { t } = useTranslation('catalog-language-detail')\r\n  const [data, setData] = useState<CatalogLanguage>()\r\n  const [currencies, setCurrencies] = useState<CatalogCurrency[]>([])\r\n  const [loading, setLoading] = useState(false)\r\n  const cancelTokenRef = useRef<CancelTokenSource>(axios.CancelToken.source())\r\n  const formInitialValues: FormValues = data || {\r\n    name: undefined,\r\n    code: undefined,\r\n    default_currency_id: undefined\r\n  }\r\n\r\n  const getData = useCallback(\r\n    async (cancelToken: CancelToken) => {\r\n      if (view === 'detail' && code) {\r\n        setLoading(true)\r\n\r\n        const { data } = await CatalogLanguagesApi.getCatalogLanguage(code, {\r\n          cancelToken,\r\n        })\r\n\r\n        setData(data)\r\n        setLoading(false)\r\n      }\r\n    },\r\n    [view, code]\r\n  )\r\n\r\n  const getCurrencies = useCallback(\r\n    async (cancelToken: CancelToken) => {\r\n      setLoading(true)\r\n\r\n      const { data } = await CatalogCurrenciesApi.getAllCatalogCurrencies({\r\n        cancelToken,\r\n      })\r\n\r\n      setCurrencies(data)\r\n      setLoading(false)\r\n    },\r\n    [setCurrencies]\r\n  )\r\n\r\n  const handleSubmit = useCallback(\r\n    async ({ code: languageCode, name, default_currency_id }: Required<FormValues>) => {\r\n      try {\r\n        setLoading(true)\r\n        const data = new FormData()\r\n\r\n        data.append('name', name)\r\n        data.append('code', languageCode)\r\n        data.append('default_currency_id', String(default_currency_id))\r\n\r\n        if (view === 'new') {\r\n          await CatalogLanguagesApi.createCatalogLanguage(data, {\r\n            cancelToken: cancelTokenRef.current.token,\r\n          })\r\n\r\n          setLoading(false)\r\n\r\n          notification.success({\r\n            message: t('form.create-success'),\r\n          })\r\n\r\n          navigate(PUBLIC_URL + '/catalog/languages')\r\n        } else if (view === 'detail') {\r\n          await CatalogLanguagesApi.updateCatalogLanguage(code, data, {\r\n            cancelToken: cancelTokenRef.current.token,\r\n          })\r\n\r\n          notification.success({\r\n            message: t('form.update-success'),\r\n          })\r\n\r\n          setLoading(false)\r\n\r\n          if (code !== languageCode) {\r\n            const to = PUBLIC_URL + '/catalog/languages/' + languageCode\r\n\r\n            navigate(PUBLIC_URL + '/redirect-to', {\r\n              state: {\r\n                to,\r\n              },\r\n            })\r\n          }\r\n        }\r\n      } catch (e) {\r\n        setLoading(false)\r\n      }\r\n    },\r\n    [PUBLIC_URL, view, code, t]\r\n  )\r\n\r\n  const renderForm = useCallback(\r\n    () => (\r\n      <FormFormikAntd layout=\"vertical\">\r\n        <Item label={t('form.name')} name=\"name\">\r\n          <Input name=\"name\" />\r\n        </Item>\r\n        <Item label={t('form.code')} name=\"code\">\r\n          <Space size=\"middle\" direction=\"vertical\" style={{ width: '100%' }}>\r\n            <Input name=\"code\" />\r\n            {view === 'detail' && (\r\n              <Alert type=\"warning\" message={t('form.code-warning')} />\r\n            )}\r\n          </Space>\r\n        </Item>\r\n        <Item label={t('form.currency')} name=\"default_currency_id\">\r\n          <Select name=\"default_currency_id\">\r\n            {currencies.map(({ name, code, id }) => (\r\n              <Option value={id} key={id}>\r\n                {name} ({code})\r\n              </Option>\r\n            ))}\r\n          </Select>\r\n        </Item>\r\n        <ItemAntd>\r\n          <Button\r\n            htmlType=\"submit\"\r\n            type=\"primary\"\r\n            size=\"large\"\r\n            disabled={loading}\r\n          >\r\n            {t(view === 'new' ? 'form.submit.new' : 'form.submit.detail')}\r\n          </Button>\r\n        </ItemAntd>\r\n      </FormFormikAntd>\r\n    ),\r\n    [t, view, loading, currencies]\r\n  )\r\n\r\n  useEffect(() => {\r\n    const cancelTokenSource = axios.CancelToken.source()\r\n\r\n    getData(cancelTokenSource.token)\r\n    getCurrencies(cancelTokenSource.token)\r\n\r\n    return () => cancelTokenSource.cancel()\r\n  }, [getData, getCurrencies])\r\n\r\n  useEffect(() => {\r\n    const cancelToken = cancelTokenRef.current\r\n\r\n    return () => cancelToken.cancel()\r\n  }, [])\r\n\r\n  return (\r\n    <Formik<FormValues>\r\n      initialValues={formInitialValues}\r\n      enableReinitialize\r\n      validate={values => validateSchema(values, FormSchema)}\r\n      onSubmit={handleSubmit}\r\n    >\r\n      {() => renderForm()}\r\n    </Formik>\r\n  )\r\n}\r\n","import React, { useContext, useEffect } from 'react'\r\nimport { RouteComponentProps } from '@reach/router'\r\nimport { useTranslation } from 'react-i18next'\r\nimport { SceneTitle } from 'components/SceneTitle'\r\nimport { AuthenticatedLayoutContext } from 'components/Layout/AuthenticatedLayout'\r\nimport { Form } from './components/Form'\r\nimport { BackButton } from 'components/BackButton'\r\n\r\nexport interface CatalogLanguageDetailProps extends RouteComponentProps {\r\n  code?: string\r\n  view: 'new' | 'detail'\r\n}\r\n\r\nexport const CatalogLanguageDetail: React.FC<CatalogLanguageDetailProps> = ({\r\n  code,\r\n  view,\r\n}) => {\r\n  const { t } = useTranslation('catalog-language-detail')\r\n  const { setSceneTitle } = useContext(AuthenticatedLayoutContext)\r\n\r\n  useEffect(() => {\r\n    setSceneTitle(\r\n      <SceneTitle\r\n        title={t(view === 'detail' ? 'scene-title.detail' : 'scene-title.new')}\r\n        extraContent={\r\n          <BackButton\r\n            title={t('scene-title.back-to-languages')}\r\n            to=\"/catalog/languages\"\r\n          />\r\n        }\r\n      />\r\n    )\r\n  }, [setSceneTitle, t, view])\r\n\r\n  return <Form code={code} view={view} />\r\n}\r\n","import axios, { AxiosPromise } from 'axios'\r\nimport { RequestConfig } from './requestConfig'\r\n\r\nexport class CatalogItemTemplateFieldValuesApi {\r\n  /**\r\n   * Update Catalog Item Template Field values\r\n   *\r\n   * @param catalogItemId\r\n   * @param data\r\n   */\r\n  static updateCatalogItemTemplateFieldValues(\r\n    catalogItemTemplateId: number,\r\n    data: FormData,\r\n    config?: RequestConfig\r\n  ): AxiosPromise {\r\n    return axios({\r\n      ...config,\r\n      method: 'PUT',\r\n      url: `/catalog-item-templates/${catalogItemTemplateId}/values`,\r\n      data,\r\n    })\r\n  }\r\n}\r\n","import React, { useCallback, useState, useEffect, useRef } from 'react'\r\nimport { Formik } from 'formik'\r\nimport { Select, Form as FormFormikAntd } from 'formik-antd'\r\nimport { FormikFormItem as Item } from 'components/FormikFormItem'\r\nimport { Button, Form as FormAntd, notification } from 'antd'\r\nimport { useTranslation } from 'react-i18next'\r\nimport { validateSchema } from 'config/yup'\r\nimport * as Yup from 'yup'\r\nimport axios, { CancelToken, CancelTokenSource } from 'axios'\r\nimport { CatalogItemTemplatesApi } from 'api/CatalogItemTemplates'\r\nimport { navigate } from '@reach/router'\r\nimport { CatalogItemTemplate } from 'model/api/CatalogItemTemplate'\r\nimport { CatalogItemsApi } from 'api/CatalogItems'\r\nimport { CatalogItemTemplateFieldValuesApi } from 'api/CatalogItemTemplateFieldValues'\r\n\r\nconst { Item: ItemAntd } = FormAntd\r\nconst { Option } = Select\r\n\r\nexport interface FormValues {\r\n  template_id?: number\r\n}\r\nexport const FormSchema = Yup.object().shape<FormValues>({\r\n  template_id: Yup.number().required(),\r\n})\r\n\r\nexport const CreateForm: React.FC = () => {\r\n  const { PUBLIC_URL } = process.env\r\n  const { t } = useTranslation('catalog-detail')\r\n  const [templates, setTemplates] = useState<CatalogItemTemplate[]>([])\r\n  const [loading, setLoading] = useState(false)\r\n  const cancelTokenRef = useRef<CancelTokenSource>(axios.CancelToken.source())\r\n  const formInitialValues = {\r\n    template_id: undefined,\r\n  }\r\n\r\n  const getTemplates = useCallback(async (cancelToken: CancelToken) => {\r\n    setLoading(true)\r\n    const { data } = await CatalogItemTemplatesApi.getAllCatalogItemTemplates({\r\n      cancelToken,\r\n    })\r\n\r\n    setTemplates(data)\r\n    setLoading(false)\r\n  }, [])\r\n\r\n  const handleSubmit = useCallback(\r\n    async ({ template_id }: FormValues) => {\r\n      console.log('submit')\r\n      try {\r\n        setLoading(true)\r\n        const itemData = new FormData()\r\n\r\n        itemData.append('template_id', String(template_id))\r\n\r\n        const {\r\n          data: { id: itemId },\r\n        } = await CatalogItemsApi.createCatalogItem(itemData, {\r\n          cancelToken: cancelTokenRef.current.token,\r\n        })\r\n\r\n        const valuesData = new FormData()\r\n\r\n        valuesData.append('item_id', String(itemId))\r\n\r\n        await CatalogItemTemplateFieldValuesApi.updateCatalogItemTemplateFieldValues(\r\n          template_id,\r\n          valuesData,\r\n          {\r\n            cancelToken: cancelTokenRef.current.token,\r\n          }\r\n        )\r\n\r\n        navigate(PUBLIC_URL + '/catalog/' + itemId)\r\n\r\n        notification.success({\r\n          message: t('create.form.create-success'),\r\n        })\r\n      } catch (e) {\r\n        console.log(e)\r\n        setLoading(false)\r\n      }\r\n    },\r\n    [PUBLIC_URL, t]\r\n  )\r\n\r\n  const renderForm = useCallback(\r\n    () => (\r\n      <FormFormikAntd layout=\"vertical\">\r\n        <Item label={t('create.form.template')} name=\"template_id\">\r\n          <Select name=\"template_id\">\r\n            {templates.map(({ id, name }) => (\r\n              <Option value={id} key={id}>\r\n                {name}\r\n              </Option>\r\n            ))}\r\n          </Select>\r\n        </Item>\r\n        <ItemAntd>\r\n          <Button\r\n            htmlType=\"submit\"\r\n            type=\"primary\"\r\n            size=\"large\"\r\n            disabled={loading}\r\n          >\r\n            {t('create.form.submit')}\r\n          </Button>\r\n        </ItemAntd>\r\n      </FormFormikAntd>\r\n    ),\r\n    [t, templates, loading]\r\n  )\r\n\r\n  useEffect(() => {\r\n    const cancelToken = axios.CancelToken.source()\r\n\r\n    getTemplates(cancelToken.token)\r\n\r\n    return () => cancelToken.cancel()\r\n  }, [getTemplates])\r\n\r\n  useEffect(() => {\r\n    const cancelToken = cancelTokenRef.current\r\n\r\n    return () => cancelToken.cancel()\r\n  }, [])\r\n\r\n  return (\r\n    <Formik<FormValues>\r\n      initialValues={formInitialValues}\r\n      validate={values => validateSchema(values, FormSchema)}\r\n      onSubmit={handleSubmit}\r\n    >\r\n      {() => renderForm()}\r\n    </Formik>\r\n  )\r\n}\r\n","import React from 'react'\r\nimport styled from 'styled-components'\r\nimport { COLORS } from 'constants/colors'\r\nimport { Skeleton } from 'antd'\r\n\r\nconst Container = styled.div<{ columns: number }>`\r\n  display: grid;\r\n  grid-gap: 24px 12px;\r\n  grid-template-columns: ${({ columns }) =>\r\n    columns && `repeat(${columns}, 1fr)`};\r\n  padding: 24px;\r\n  border: 1px solid ${COLORS.gray2};\r\n  border-radius: 2px;\r\n`\r\n\r\nconst Item = styled.div<{ span: string }>`\r\n  grid-column: ${({ span }) => span && span};\r\n`\r\n\r\nconst Label = styled.div`\r\n  margin-bottom: 8px;\r\n`\r\n\r\nexport interface InfoItemProps {\r\n  key: string\r\n  label: string\r\n  value: React.ReactNode | React.ReactNodeArray\r\n  span?: string\r\n}\r\n\r\nexport interface InfoProps {\r\n  items: InfoItemProps[]\r\n  columns?: number\r\n  loading?: boolean\r\n  className?: string\r\n}\r\n\r\nexport const Info: React.FC<InfoProps> = ({\r\n  items,\r\n  columns = 4,\r\n  loading = false,\r\n  className,\r\n}) => {\r\n  return (\r\n    <Container columns={columns} className={className}>\r\n      {loading ? (\r\n        <Skeleton active loading paragraph={{ rows: 4, width: '100%' }} />\r\n      ) : (\r\n        <>\r\n          {items.map(({ label, value, span, key }) => (\r\n            <Item span={span} key={key}>\r\n              <Label>{label}</Label>\r\n              {value}\r\n            </Item>\r\n          ))}\r\n        </>\r\n      )}\r\n    </Container>\r\n  )\r\n}\r\n","import React, { useContext, useRef, useCallback } from 'react'\r\nimport { CatalogDetailContext } from '..'\r\nimport { Info, InfoItemProps } from 'components/Info'\r\nimport { DATE_TIME_FORMAT } from 'constants/date'\r\nimport { format } from 'date-fns'\r\nimport { useTranslation } from 'react-i18next'\r\nimport { COLORS } from 'constants/colors'\r\nimport { Tag, Button, notification } from 'antd'\r\nimport styled from 'styled-components'\r\nimport { IconButton } from 'components/IconButton'\r\nimport axios, { CancelTokenSource } from 'axios'\r\nimport { CatalogItemsApi } from 'api/CatalogItems'\r\n\r\nconst { Group } = Button\r\n\r\nconst StyledInfo = styled(Info)`\r\n  margin-bottom: 24px;\r\n`\r\n\r\nconst Buttons = styled.div`\r\n  display: flex;\r\n  justify-content: flex-end;\r\n  margin-bottom: 24px;\r\n`\r\n\r\nexport const DetailInfo: React.FC = () => {\r\n  const { t } = useTranslation('catalog-detail')\r\n  const { data, getData, loading } = useContext(CatalogDetailContext)\r\n  const cancelTokenRef = useRef<CancelTokenSource>(axios.CancelToken.source())\r\n\r\n  const handlePublish = useCallback(async () => {\r\n    if (data) {\r\n      try {\r\n        await CatalogItemsApi.publishCatalogItem(data.id, {\r\n          cancelToken: cancelTokenRef.current.token,\r\n        })\r\n\r\n        notification.success({\r\n          message: t('publish-success'),\r\n        })\r\n\r\n        getData()\r\n      } catch (e) {}\r\n    }\r\n  }, [data, getData, t])\r\n\r\n  const handleUnpublish = useCallback(async () => {\r\n    if (data) {\r\n      try {\r\n        await CatalogItemsApi.unpublishCatalogItem(data.id, {\r\n          cancelToken: cancelTokenRef.current.token,\r\n        })\r\n\r\n        notification.success({\r\n          message: t('unpublish-success'),\r\n        })\r\n\r\n        getData()\r\n      } catch (e) {}\r\n    }\r\n  }, [data, getData, t])\r\n\r\n  if (data) {\r\n    const { created_at, modified_at, published_at, published } = data\r\n\r\n    const items: InfoItemProps[] = [\r\n      {\r\n        key: 'created-at',\r\n        label: t('info.created-at'),\r\n        value: created_at\r\n          ? format(new Date(created_at), DATE_TIME_FORMAT)\r\n          : '-',\r\n      },\r\n      {\r\n        key: 'modified-at',\r\n        label: t('info.modified-at'),\r\n        value: modified_at\r\n          ? format(new Date(modified_at), DATE_TIME_FORMAT)\r\n          : '-',\r\n      },\r\n      {\r\n        key: 'published-at',\r\n        label: t('info.published-at'),\r\n        value: published_at\r\n          ? format(new Date(published_at), DATE_TIME_FORMAT)\r\n          : '-',\r\n      },\r\n      {\r\n        key: 'status',\r\n        label: t('info.status'),\r\n        value: !!published && (\r\n          <Tag color={COLORS.green2}>{t('info.published')}</Tag>\r\n        ),\r\n      },\r\n    ]\r\n\r\n    return (\r\n      <>\r\n        <Buttons>\r\n          <Group>\r\n            <IconButton\r\n              icon=\"cloud-upload-alt\"\r\n              size=\"middle\"\r\n              type=\"default\"\r\n              disabled={!!published || loading}\r\n              onClick={handlePublish}\r\n            >\r\n              {t('info.publish')}\r\n            </IconButton>\r\n            <IconButton\r\n              icon=\"cloud-download-alt\"\r\n              size=\"middle\"\r\n              type=\"default\"\r\n              disabled={!published || loading}\r\n              onClick={handleUnpublish}\r\n            >\r\n              {t('info.unpublish')}\r\n            </IconButton>\r\n            <IconButton icon=\"trash-alt\" size=\"middle\" type=\"danger\" disabled>\r\n              {t('info.delete')}\r\n            </IconButton>\r\n          </Group>\r\n        </Buttons>\r\n        <StyledInfo items={items} loading={loading} />\r\n      </>\r\n    )\r\n  }\r\n\r\n  return null\r\n}\r\n","import { CatalogItemFieldData } from 'model/api/CatalogItemDetailFieldData'\r\n\r\nexport const isFieldValueMultilingual = (\r\n  value: { [key: string]: CatalogItemFieldData } | CatalogItemFieldData\r\n): value is { [key: string]: CatalogItemFieldData } => {\r\n  return !Object.keys(value).includes('extra_content')\r\n}\r\n","import React from 'react'\r\nimport { FormikFormItem as Item } from 'components/FormikFormItem'\r\nimport { CatalogItemDetailField } from 'model/api/CatalogItemDetailField'\r\nimport { CatalogLanguage } from 'model/api/CatalogLanguage'\r\n\r\nexport const render = (\r\n  field: CatalogItemDetailField,\r\n  renderChildren: (name: string) => React.ReactNode,\r\n  language?: CatalogLanguage\r\n) => {\r\n  const { name, id } = field\r\n\r\n  let label = name\r\n\r\n  if (language) {\r\n    label = `${name} (${language.name})`\r\n  }\r\n\r\n  const fieldName = `fields[${id}]${!!language ? `[${language.code}][value]` : '[value]'}`\r\n\r\n  return (\r\n    <Item label={label} name={fieldName} key={fieldName}>\r\n      {renderChildren(fieldName)}\r\n    </Item>\r\n  )\r\n}\r\n","import styled from 'styled-components'\r\nimport { COLORS } from 'constants/colors'\r\n\r\nexport const FieldGroup = styled.div`\r\n  margin: 24px 0;\r\n  padding: 24px 24px 12px;\r\n  border: 1px solid ${COLORS.gray2};\r\n  border-radius: 3px;\r\n\r\n  form {\r\n    display: grid;\r\n    grid-gap: 24px;\r\n    grid-template-columns: 1fr 1fr 1fr;\r\n    margin-top: 12px;\r\n\r\n    > .ant-row {\r\n      margin: 0;\r\n    }\r\n  }\r\n`\r\n\r\nexport const MultiLingual = styled.div`\r\n  display: grid;\r\n  grid-gap: 1rem;\r\n  grid-template-columns: 1fr 1fr;\r\n`","import React from 'react'\r\nimport { CatalogItemDetailField } from 'model/api/CatalogItemDetailField'\r\nimport { Input } from 'formik-antd'\r\nimport { CatalogLanguage } from 'model/api/CatalogLanguage'\r\nimport { render } from './utils/render'\r\nimport { MultiLingual } from './styles'\r\n\r\nexport interface StringProps {\r\n  field: CatalogItemDetailField\r\n  languages: CatalogLanguage[]\r\n}\r\n\r\nexport const String: React.FC<StringProps> = ({ languages, field }) => {\r\n  const { is_multilingual } = field\r\n\r\n  if (is_multilingual) {\r\n    return (\r\n      <MultiLingual>\r\n        {languages.map(language =>\r\n          render(field, (name: string) => <Input name={name} />, language)\r\n        )}\r\n      </MultiLingual>\r\n    )\r\n  }\r\n\r\n  return render(field, (name: string) => <Input name={name} />)\r\n}\r\n","import React from 'react'\r\nimport { CatalogItemDetailField } from 'model/api/CatalogItemDetailField'\r\nimport { Switch } from 'formik-antd'\r\nimport { CatalogLanguage } from 'model/api/CatalogLanguage'\r\nimport { render } from './utils/render'\r\nimport { MultiLingual } from './styles'\r\n\r\nexport interface BooleanProps {\r\n  field: CatalogItemDetailField\r\n  languages: CatalogLanguage[]\r\n}\r\n\r\nexport const Boolean: React.FC<BooleanProps> = ({ languages, field }) => {\r\n  const { is_multilingual } = field\r\n\r\n  if (is_multilingual) {\r\n    return (\r\n      <MultiLingual>\r\n        {languages.map(language =>\r\n          render(field, (name: string) => <Switch name={name} />, language)\r\n        )}\r\n      </MultiLingual>\r\n    )\r\n  }\r\n\r\n  return render(field, (name: string) => <Switch name={name} />)\r\n}\r\n","import React from 'react'\r\nimport { CatalogItemDetailField } from 'model/api/CatalogItemDetailField'\r\nimport { DatePicker } from 'formik-antd'\r\nimport { CatalogLanguage } from 'model/api/CatalogLanguage'\r\nimport { render } from './utils/render'\r\nimport { DATEPICKER_DATE_FORMAT } from 'constants/date'\r\nimport { MultiLingual } from './styles'\r\n\r\nexport interface DateProps {\r\n  field: CatalogItemDetailField\r\n  languages: CatalogLanguage[]\r\n}\r\n\r\nexport const Date: React.FC<DateProps> = ({ languages, field }) => {\r\n  const { is_multilingual } = field\r\n\r\n  if (is_multilingual) {\r\n    return (\r\n      <MultiLingual>\r\n        {languages.map(language =>\r\n          render(\r\n            field,\r\n            (name: string) => (\r\n              <DatePicker format={DATEPICKER_DATE_FORMAT} name={name} />\r\n            ),\r\n            language\r\n          )\r\n        )}\r\n      </MultiLingual>\r\n    )\r\n  }\r\n\r\n  return render(field, (name: string) => (\r\n    <DatePicker format={DATEPICKER_DATE_FORMAT} name={name} />\r\n  ))\r\n}\r\n","import React from 'react'\r\nimport { CatalogItemDetailField } from 'model/api/CatalogItemDetailField'\r\nimport { DatePicker } from 'formik-antd'\r\nimport { CatalogLanguage } from 'model/api/CatalogLanguage'\r\nimport { render } from './utils/render'\r\nimport { DATEPICKER_DATE_TIME_FORMAT } from 'constants/date'\r\nimport { MultiLingual } from './styles'\r\n\r\nexport interface DateTimeProps {\r\n  field: CatalogItemDetailField\r\n  languages: CatalogLanguage[]\r\n}\r\n\r\nexport const DateTime: React.FC<DateTimeProps> = ({ languages, field }) => {\r\n  const { is_multilingual } = field\r\n  const timeFormat = { format: 'HH:mm' }\r\n\r\n  if (is_multilingual) {\r\n    return (\r\n      <MultiLingual>\r\n        {languages.map(language =>\r\n          render(\r\n            field,\r\n            (name: string) => (\r\n              <DatePicker\r\n                format={DATEPICKER_DATE_TIME_FORMAT}\r\n                name={name}\r\n                showTime={timeFormat}\r\n              />\r\n            ),\r\n            language\r\n          )\r\n        )}\r\n      </MultiLingual>\r\n    )\r\n  }\r\n\r\n  return render(field, (name: string) => (\r\n    <DatePicker\r\n      format={DATEPICKER_DATE_TIME_FORMAT}\r\n      name={name}\r\n      showTime={timeFormat}\r\n    />\r\n  ))\r\n}\r\n","import React from 'react'\r\nimport { CatalogItemDetailField } from 'model/api/CatalogItemDetailField'\r\nimport { InputNumber } from 'formik-antd'\r\nimport { CatalogLanguage } from 'model/api/CatalogLanguage'\r\nimport { render } from './utils/render'\r\nimport { MultiLingual } from './styles'\r\n\r\nexport interface IntegerProps {\r\n  field: CatalogItemDetailField\r\n  languages: CatalogLanguage[]\r\n}\r\n\r\nexport const Integer: React.FC<IntegerProps> = ({ languages, field }) => {\r\n  const { is_multilingual } = field\r\n\r\n  if (is_multilingual) {\r\n    return (\r\n      <MultiLingual>\r\n        {languages.map(language =>\r\n          render(field, (name: string) => <InputNumber name={name} />, language)\r\n        )}\r\n      </MultiLingual>\r\n    )\r\n  }\r\n\r\n  return render(field, (name: string) => <InputNumber name={name} />)\r\n}\r\n","export const getExtraContentFieldValue = <T = {}>(\r\n  values: any,\r\n  name: string,\r\n  language?: string\r\n) => {\r\n  if (!values.fields) return {}\r\n\r\n  const fieldId = name.replace('[value]', '').match(/\\[(.*)\\]/)[1]\r\n  const index = Object.keys(values.fields).find(key => key === fieldId)\r\n\r\n  if (!!index) {\r\n    const fieldValues = values.fields[index]\r\n\r\n    if (language) {\r\n      return (fieldValues[language].extra_content as T) || {}\r\n    } else {\r\n      return (fieldValues.extra_content as T) || {}\r\n    }\r\n  }\r\n\r\n  return {}\r\n}\r\n","export const getExtraContentFieldName = (name: string): string => {\r\n  return name.replace('[value]', '[extra_content]')\r\n}\r\n","import React, { useCallback } from 'react'\r\nimport { CatalogItemDetailField } from 'model/api/CatalogItemDetailField'\r\nimport { Input } from 'formik-antd'\r\nimport { useFormikContext } from 'formik'\r\nimport { CatalogLanguage } from 'model/api/CatalogLanguage'\r\nimport { render } from './utils/render'\r\nimport { Select, Input as InputAntd, Form } from 'antd'\r\nimport { LinkFieldExtraContent } from 'model/api/LinkFieldExtraContent'\r\nimport i18next from 'i18next'\r\nimport { isFieldValueMultilingual } from 'types/isFieldValueMultilingual'\r\nimport { getExtraContentFieldValue } from './utils/getExtraContentFieldValue'\r\nimport { getExtraContentFieldName } from './utils/getExtraContentFieldName'\r\nimport { FieldGroup } from './styles'\r\n\r\nconst { Item } = Form\r\n\r\nexport interface LinkProps {\r\n  field: CatalogItemDetailField\r\n  languages: CatalogLanguage[]\r\n  t: i18next.TFunction\r\n}\r\n\r\nexport const Link: React.FC<LinkProps> = ({ languages, field, t }) => {\r\n  const { setFieldValue, values } = useFormikContext<any>()\r\n  const { is_multilingual } = field\r\n\r\n  const handleFormatChange = useCallback(\r\n    (value: string, name: string) => {\r\n      const extraContent = getExtraContentFieldValue(values, name)\r\n\r\n      setFieldValue(getExtraContentFieldName(name), {\r\n        ...extraContent,\r\n        format: value,\r\n      })\r\n    },\r\n    [setFieldValue, values]\r\n  )\r\n\r\n  const handleTargetChange = useCallback(\r\n    (value: string, name: string) => {\r\n      const extraContent = getExtraContentFieldValue<LinkFieldExtraContent>(\r\n        values,\r\n        name\r\n      )\r\n\r\n      setFieldValue(getExtraContentFieldName(name), {\r\n        ...extraContent,\r\n        target: value,\r\n      })\r\n    },\r\n    [setFieldValue, values]\r\n  )\r\n\r\n  const handleRelChange = useCallback(\r\n    (value: string, name: string) => {\r\n      const extraContent = getExtraContentFieldValue<LinkFieldExtraContent>(\r\n        values,\r\n        name\r\n      )\r\n\r\n      setFieldValue(getExtraContentFieldName(name), {\r\n        ...extraContent,\r\n        rel: value,\r\n      })\r\n    },\r\n    [setFieldValue, values]\r\n  )\r\n\r\n  const renderInput = useCallback(\r\n    (name: string, extraContent: LinkFieldExtraContent | null) => {\r\n      if (extraContent === null) {\r\n        extraContent = {\r\n          rel: '',\r\n          format: 'default',\r\n          target: 'self',\r\n        }\r\n\r\n        // TODO set initial field values\r\n      }\r\n\r\n      return (\r\n        <>\r\n          <Input name={name} />\r\n          <Form layout=\"inline\">\r\n            <Item label={t('fields.link.target.label')}>\r\n              <Select\r\n                defaultValue={extraContent.target}\r\n                onChange={(value: string) => handleTargetChange(value, name)}\r\n              >\r\n                <Select.Option value=\"self\">\r\n                  {t('fields.link.target.self')}\r\n                </Select.Option>\r\n                <Select.Option value=\"blank\">\r\n                  {t('fields.link.target.blank')}\r\n                </Select.Option>\r\n                <Select.Option value=\"parent\">\r\n                  {t('fields.link.target.parent')}\r\n                </Select.Option>\r\n                <Select.Option value=\"top\">\r\n                  {t('fields.link.target.top')}\r\n                </Select.Option>\r\n              </Select>\r\n            </Item>\r\n            <Item label={t('fields.link.format.label')}>\r\n              <Select\r\n                defaultValue={extraContent.format}\r\n                onChange={(value: string) => handleFormatChange(value, name)}\r\n              >\r\n                <Select.Option value=\"default\">\r\n                  {t('fields.link.format.default')}\r\n                </Select.Option>\r\n                <Select.Option value=\"tel\">\r\n                  {t('fields.link.format.tel')}\r\n                </Select.Option>\r\n                <Select.Option value=\"mailto\">\r\n                  {t('fields.link.format.mailto')}\r\n                </Select.Option>\r\n              </Select>\r\n            </Item>\r\n            <Item label={t('fields.link.rel.label')}>\r\n              <InputAntd\r\n                defaultValue={extraContent.rel}\r\n                onChange={({\r\n                  target: { value },\r\n                }: React.ChangeEvent<HTMLInputElement>) =>\r\n                  handleRelChange(value, name)\r\n                }\r\n              />\r\n            </Item>\r\n          </Form>\r\n        </>\r\n      )\r\n    },\r\n    [t, handleFormatChange, handleTargetChange, handleRelChange]\r\n  )\r\n\r\n  if (is_multilingual) {\r\n    return (\r\n      <FieldGroup>\r\n        {languages.map(language => {\r\n          let extraContent: LinkFieldExtraContent | null = null\r\n\r\n          if (Object.keys(field.data).length > 0) {\r\n            extraContent = isFieldValueMultilingual(field.data)\r\n              ? field.data[language.code].extra_content\r\n              : null\r\n          }\r\n\r\n          return render(\r\n            field,\r\n            (name: string) => renderInput(name, extraContent),\r\n            language\r\n          )\r\n        })}\r\n      </FieldGroup>\r\n    )\r\n  }\r\n\r\n  const extraContent: LinkFieldExtraContent | null = !isFieldValueMultilingual(\r\n    field.data\r\n  )\r\n    ? field.data.extra_content\r\n    : null\r\n\r\n  return (\r\n    <FieldGroup>\r\n      {render(field, (name: string) => renderInput(name, extraContent))}\r\n    </FieldGroup>\r\n  )\r\n}\r\n","import React from 'react'\r\nimport { CatalogItemDetailField } from 'model/api/CatalogItemDetailField'\r\nimport { Input } from 'formik-antd'\r\nimport { CatalogLanguage } from 'model/api/CatalogLanguage'\r\nimport { render } from './utils/render'\r\nimport { MultiLingual } from './styles'\r\n\r\nconst { TextArea } = Input\r\n\r\nexport interface TextProps {\r\n  field: CatalogItemDetailField\r\n  languages: CatalogLanguage[]\r\n}\r\n\r\nexport const Text: React.FC<TextProps> = ({ languages, field }) => {\r\n  const { is_multilingual } = field\r\n\r\n  if (is_multilingual) {\r\n    return (\r\n      <MultiLingual>\r\n        {languages.map(language =>\r\n          render(\r\n            field,\r\n            (name: string) => <TextArea name={name} rows={4} />,\r\n            language\r\n          )\r\n        )}\r\n      </MultiLingual>\r\n    )\r\n  }\r\n\r\n  return render(field, (name: string) => <TextArea name={name} rows={4} />)\r\n}\r\n","export const TINYMCE_SCRIPT_PATH = `${process.env.PUBLIC_URL}/js/tinymce/tinymce.min.js`\r\n","import React, { useCallback } from 'react'\r\nimport { Editor, IAllProps } from '@tinymce/tinymce-react'\r\nimport { useFormikContext, useField } from 'formik'\r\nimport { TINYMCE_SCRIPT_PATH } from 'constants/tinymce'\r\n\r\nconst { CMS_BASE_URL } = window._envConfig\r\n\r\nexport const initValues: Record<string, any> = {\r\n  height: 350,\r\n  toolbar: `undo redo | formatselect | image \r\n   | bold italic backcolor | alignleft aligncenter \r\n   alignright alignjustify | bullist numlist outdent indent | removeformat `,\r\n  plugins: [\r\n    'image imagetools',\r\n    'lists link',\r\n    'searchreplace visualblocks code fullscreen',\r\n    'insertdatetime media table paste code help wordcount',\r\n  ],\r\n  images_upload_url: CMS_BASE_URL + '/filemanager',\r\n}\r\n\r\nexport interface RichTextFormikProps extends IAllProps {\r\n  name: string\r\n}\r\n\r\nexport const RichTextFormik: React.FC<RichTextFormikProps> = ({\r\n  name,\r\n  ...props\r\n}) => {\r\n  const { setFieldValue, setFieldTouched } = useFormikContext()\r\n  const [field] = useField(name)\r\n\r\n  const handleEditorChange = useCallback(\r\n    (content: string) => {\r\n      setFieldValue(name, content)\r\n      setFieldTouched(name, true)\r\n    },\r\n    [setFieldValue, setFieldTouched, name]\r\n  )\r\n\r\n  return (\r\n    <Editor\r\n      initialValue={field.value}\r\n      onEditorChange={handleEditorChange}\r\n      tinymceScriptSrc={TINYMCE_SCRIPT_PATH}\r\n      init={initValues}\r\n      {...props}\r\n    />\r\n  )\r\n}\r\n","import React from 'react'\r\nimport { CatalogItemDetailField } from 'model/api/CatalogItemDetailField'\r\nimport { RichTextFormik } from 'components/RichTextFormik'\r\nimport { CatalogLanguage } from 'model/api/CatalogLanguage'\r\nimport { render } from './utils/render'\r\nimport { MultiLingual } from './styles'\r\n\r\nexport interface RichTextProps {\r\n  field: CatalogItemDetailField\r\n  languages: CatalogLanguage[]\r\n}\r\n\r\nexport const RichText: React.FC<RichTextProps> = ({ languages, field }) => {\r\n  const { is_multilingual } = field\r\n\r\n  if (is_multilingual) {\r\n    return (\r\n      <MultiLingual>\r\n        {languages.map(language =>\r\n          render(\r\n            field,\r\n            (name: string) => (\r\n              <RichTextFormik name={name} />\r\n            ),\r\n            language\r\n          )\r\n        )}\r\n      </MultiLingual>\r\n    )\r\n  }\r\n\r\n  return render(field, (name: string) => (\r\n    <RichTextFormik name={name} />\r\n  ))\r\n}\r\n","import React from 'react'\r\nimport styled from 'styled-components'\r\nimport { COLORS } from 'constants/colors'\r\n\r\nconst StyledHeader = styled.div`\r\n  display: flex;\r\n  flex-direction: row;\r\n  align-items: center;\r\n`\r\n\r\nconst Line = styled.div`\r\n  width: 100%;\r\n  height: 1px;\r\n  margin-left: 24px;\r\n  background: ${COLORS.gray2};\r\n`\r\n\r\nconst Title = styled.div`\r\n  white-space: nowrap;\r\n`\r\n\r\nexport interface HeaderProps {\r\n  children: React.ReactNode | React.ReactNodeArray\r\n  className?: string\r\n}\r\n\r\nexport const Header: React.FC<HeaderProps> = ({ children, className }) => (\r\n  <StyledHeader className={className}>\r\n    <Title>{children}</Title>\r\n    <Line />\r\n  </StyledHeader>\r\n)\r\n","export const getFieldName = (name: string): string => {\r\n  return name.replace('[value]', '')\r\n}\r\n","export const GalleryTypes = {\r\n  GALLERY_IMAGE: 'galleryImage'\r\n}","import React, { useRef, useImperativeHandle } from 'react'\r\nimport styled from 'styled-components'\r\nimport { COLORS } from 'constants/colors'\r\nimport { Form, Input } from 'antd'\r\nimport { IconButton } from 'components/IconButton'\r\nimport { useTranslation } from 'react-i18next'\r\nimport {\r\n  ConnectDropTarget,\r\n  ConnectDragSource,\r\n  DropTargetMonitor,\r\n  DragSourceMonitor,\r\n} from 'react-dnd'\r\nimport {\r\n  DragSource,\r\n  DropTarget,\r\n  DropTargetConnector,\r\n  DragSourceConnector,\r\n} from 'react-dnd'\r\n\r\nimport { GalleryTypes } from '../types/GalleryTypes'\r\nimport { XYCoord } from 'dnd-core'\r\n\r\nconst { Item } = Form\r\nconst { TextArea } = Input\r\n\r\nconst Title = styled.div`\r\n  display: flex;\r\n  justify-content: space-between;\r\n  margin: 0 0 10px;\r\n  padding: 0 0 6px;\r\n  font-weight: bold;\r\n  border-bottom: 1px solid ${COLORS.gray2};\r\n`\r\n\r\nconst Container = styled.div`\r\n  display: grid;\r\n  grid-gap: 24px;\r\n  grid-template-columns: 120px auto;\r\n  padding: 12px;\r\n  background: ${COLORS.gray1};\r\n  border: 1px solid ${COLORS.gray2};\r\n  border-radius: 2px;\r\n\r\n  .ant-form-item-label {\r\n    line-height: 1.1;\r\n\r\n    label {\r\n      height: initial;\r\n    }\r\n  }\r\n\r\n  .ant-form-item {\r\n    margin-bottom: 12px;\r\n\r\n    &:last-child {\r\n      margin-bottom: 0;\r\n    }\r\n  }\r\n`\r\n\r\nconst ImageContainer = styled.div`\r\n  width: 120px;\r\n  height: 120px;\r\n  overflow: hidden;\r\n  background-repeat: no-repeat;\r\n  background-position: 50% 50%;\r\n  background-size: cover;\r\n  border: 1px solid ${COLORS.gray2};\r\n  border-radius: 2px;\r\n`\r\n\r\nexport interface GalleryImageProps {\r\n  imagePath: string\r\n  index: number\r\n  onDelete?: (index: number) => void\r\n  titleValue?: string\r\n  onTitleChange?: (value: string, index: number) => void\r\n  descriptionValue?: string\r\n  onDescriptionChange?: (value: string, index: number) => void\r\n\r\n  onMove: (dragIndex: number, hoverIndex: number) => void\r\n  isDragging: boolean\r\n  connectDragSource: ConnectDragSource\r\n  connectDropTarget: ConnectDropTarget\r\n}\r\n\r\ninterface GalleryImageInstance {\r\n  getNode(): HTMLDivElement | null\r\n}\r\n\r\n\r\nexport const GalleryImage = React.forwardRef<HTMLDivElement, GalleryImageProps>(({\r\n  imagePath,\r\n  index,\r\n  onDelete,\r\n  titleValue = '',\r\n  onTitleChange,\r\n  onDescriptionChange,\r\n  descriptionValue = '',\r\n  isDragging, \r\n  connectDragSource,\r\n  connectDropTarget\r\n}, ref) => {\r\n  const { t } = useTranslation('catalog-detail')\r\n  const elementRef = useRef(null)\r\n  connectDragSource(elementRef)\r\n  connectDropTarget(elementRef)\r\n\r\n  const opacity = isDragging ? 0 : 1\r\n\r\n  useImperativeHandle<{}, GalleryImageInstance>(ref, () => ({\r\n    getNode: () => elementRef.current,\r\n  }))\r\n\r\n  return (\r\n    <div ref={elementRef} style={{ opacity }}>\r\n    <Container>\r\n      <ImageContainer style={{ backgroundImage: `url(${imagePath})` }} />\r\n\r\n      <div>\r\n        <Title>\r\n          <IconButton\r\n            size=\"small\"\r\n            icon=\"trash-alt\"\r\n            onClick={() => onDelete && onDelete(index)}\r\n          >\r\n            {t('fields.gallery-image.delete')}\r\n          </IconButton>\r\n        </Title>\r\n\r\n        <Item label={t('fields.gallery-image.title')}>\r\n          <Input\r\n            defaultValue={titleValue}\r\n            onChange={event =>\r\n              onTitleChange && onTitleChange(event.target.value, index)\r\n            }\r\n          />\r\n        </Item>\r\n\r\n        <Item label={t('fields.gallery-image.description')}>\r\n          <TextArea\r\n            defaultValue={descriptionValue}\r\n            onChange={event =>\r\n              onDescriptionChange &&\r\n              onDescriptionChange(event.target.value, index)\r\n            }\r\n            rows={2}\r\n          />\r\n        </Item>\r\n      </div>\r\n    </Container>\r\n    </div>\r\n  )\r\n})\r\n\r\nexport const GalleryImageDraggable = DropTarget(\r\n  GalleryTypes.GALLERY_IMAGE,\r\n  {\r\n    hover(\r\n      props: GalleryImageProps,\r\n      monitor: DropTargetMonitor,\r\n      component: GalleryImageInstance,\r\n    ) {\r\n      if (!component) {\r\n        return null\r\n      }\r\n      // node = HTML Div element from imperative API\r\n      const node = component.getNode()\r\n      if (!node) {\r\n        return null\r\n      }\r\n\r\n      const dragIndex = monitor.getItem().index\r\n      const hoverIndex = props.index\r\n\r\n      // Don't replace items with themselves\r\n      if (dragIndex === hoverIndex) {\r\n        return\r\n      }\r\n\r\n      // Determine rectangle on screen\r\n      const hoverBoundingRect = node.getBoundingClientRect()\r\n\r\n      // Get vertical middle\r\n      const hoverMiddleY =\r\n        (hoverBoundingRect.bottom - hoverBoundingRect.top) / 2\r\n\r\n      // Determine mouse position\r\n      const clientOffset = monitor.getClientOffset()\r\n\r\n      // Get pixels to the top\r\n      const hoverClientY = (clientOffset as XYCoord).y - hoverBoundingRect.top\r\n\r\n      // Only perform the move when the mouse has crossed half of the items height\r\n      // When dragging downwards, only move when the cursor is below 50%\r\n      // When dragging upwards, only move when the cursor is above 50%\r\n\r\n      // Dragging downwards\r\n      if (dragIndex < hoverIndex && hoverClientY < hoverMiddleY) {\r\n        return\r\n      }\r\n\r\n      // Dragging upwards\r\n      if (dragIndex > hoverIndex && hoverClientY > hoverMiddleY) {\r\n        return\r\n      }\r\n\r\n      // Time to actually perform the action\r\n      props.onMove(dragIndex, hoverIndex)\r\n\r\n      // Note: we're mutating the monitor item here!\r\n      // Generally it's better to avoid mutations,\r\n      // but it's good here for the sake of performance\r\n      // to avoid expensive index searches.\r\n      monitor.getItem().index = hoverIndex\r\n    },\r\n  },\r\n  (connect: DropTargetConnector) => ({\r\n    connectDropTarget: connect.dropTarget(),\r\n  }),\r\n)(\r\n  DragSource(\r\n    GalleryTypes.GALLERY_IMAGE,\r\n    {\r\n      beginDrag: (props: GalleryImageProps) => ({\r\n        index: props.index,\r\n      }),\r\n    },\r\n    (connect: DragSourceConnector, monitor: DragSourceMonitor) => ({\r\n      connectDragSource: connect.dragSource(),\r\n      isDragging: monitor.isDragging(),\r\n    }),\r\n  )(GalleryImage),\r\n)\r\n","/**\r\n * \r\n * @param file \r\n */\r\nexport const getBase64 = (file) => {\r\n  return new Promise((resolve, reject) => {\r\n    const reader = new FileReader();\r\n    reader.readAsDataURL(file);\r\n    reader.onload = () => resolve(reader.result);\r\n    reader.onerror = error => reject(error);\r\n  });\r\n}","import React, { useState, useCallback, useEffect } from 'react'\r\nimport { UploadFile } from 'antd/lib/upload/interface'\r\nimport { getBase64 } from 'utils/getBase64'\r\nimport styled from 'styled-components'\r\nimport { COLORS } from 'constants/colors'\r\nimport { Form, Input } from 'antd'\r\nimport { IconButton } from 'components/IconButton'\r\nimport { useTranslation } from 'react-i18next'\r\n\r\nconst { Item } = Form\r\nconst { TextArea } = Input\r\n\r\nconst Title = styled.div`\r\n  display: flex;\r\n  justify-content: space-between;\r\n  margin: 0 0 10px;\r\n  padding: 0 0 6px;\r\n  font-weight: bold;\r\n  border-bottom: 1px solid ${COLORS.gray2};\r\n`\r\n\r\nconst Container = styled.div`\r\n  display: grid;\r\n  grid-gap: 24px;\r\n  grid-template-columns: 120px auto;\r\n  padding: 12px;\r\n  background: ${COLORS.gray1};\r\n  border: 1px solid ${COLORS.gray2};\r\n  border-radius: 2px;\r\n\r\n  .ant-form-item-label {\r\n    line-height: 1.1;\r\n\r\n    label {\r\n      height: initial;\r\n    }\r\n  }\r\n\r\n  .ant-form-item {\r\n    margin-bottom: 12px;\r\n\r\n    &:last-child {\r\n      margin-bottom: 0;\r\n    }\r\n  }\r\n`\r\n\r\nconst ImageContainer = styled.div`\r\n  width: 120px;\r\n  height: 120px;\r\n  overflow: hidden;\r\n  background-repeat: no-repeat;\r\n  background-position: 50% 50%;\r\n  background-size: cover;\r\n  border: 1px solid ${COLORS.gray2};\r\n  border-radius: 2px;\r\n`\r\n\r\nexport interface UploadedGalleryImageProps {\r\n  file: UploadFile\r\n  onDelete?: (file: UploadFile) => void\r\n  onTitleChange?: (value: string) => void\r\n  onDescriptionChange?: (value: string) => void\r\n}\r\n\r\nexport const UploadedGalleryImage: React.FC<UploadedGalleryImageProps> = ({\r\n  file,\r\n  onDelete,\r\n  onTitleChange,\r\n  onDescriptionChange,\r\n}) => {\r\n  const [image, setImage] = useState<string>()\r\n  const { t } = useTranslation('catalog-detail')\r\n\r\n  const getImage = useCallback(async () => {\r\n    if (file) {\r\n      const img = await getBase64(file.originFileObj)\r\n\r\n      setImage(img as string)\r\n    }\r\n  }, [file])\r\n\r\n  useEffect(() => {\r\n    getImage()\r\n  }, [getImage])\r\n\r\n  return (\r\n    <Container>\r\n      <ImageContainer style={{ backgroundImage: `url(${image})` }} />\r\n\r\n      <div>\r\n        <Title>\r\n          <div>{file.name}</div>\r\n          <IconButton\r\n            size=\"small\"\r\n            icon=\"trash-alt\"\r\n            onClick={() => onDelete && onDelete(file)}\r\n          >\r\n            {t('fields.gallery-image.delete')}\r\n          </IconButton>\r\n        </Title>\r\n\r\n        <Item label={t('fields.gallery-image.title')}>\r\n          <Input\r\n            onChange={event =>\r\n              onTitleChange && onTitleChange(event.target.value)\r\n            }\r\n          />\r\n        </Item>\r\n\r\n        <Item label={t('fields.gallery-image.description')}>\r\n          <TextArea\r\n            onChange={event =>\r\n              onDescriptionChange && onDescriptionChange(event.target.value)\r\n            }\r\n            rows={2}\r\n          />\r\n        </Item>\r\n      </div>\r\n    </Container>\r\n  )\r\n}\r\n","export const getFieldValue = <T>(values: any, fieldId: number, language?: string) => {\r\n  if (!values.fields) return\r\n\r\n  const index = Object.keys(values.fields).find(key => Number(key) === fieldId)\r\n\r\n  if (!!index) {\r\n    let fieldValues = values.fields[index]\r\n\r\n    if (language) {\r\n      fieldValues = fieldValues[language]\r\n    }\r\n\r\n    return fieldValues.value as T\r\n  }\r\n}\r\n","import React, { useState, useCallback } from 'react'\r\nimport { CatalogItemDetailField } from 'model/api/CatalogItemDetailField'\r\nimport { Upload } from 'antd'\r\nimport { CatalogLanguage } from 'model/api/CatalogLanguage'\r\nimport { Icon } from 'components/Icon'\r\nimport { useFormikContext } from 'formik'\r\nimport { UploadFile, UploadChangeParam } from 'antd/lib/upload/interface'\r\nimport styled from 'styled-components'\r\nimport { Header } from 'components/Header'\r\nimport { CatalogGalleryImageValues } from 'model/api/CatalogGalleryImageValue'\r\nimport { useTranslation } from 'react-i18next'\r\nimport { FieldGroup } from './styles'\r\nimport { getFieldName } from './utils/getFieldName'\r\nimport { getExtraContentFieldName } from './utils/getExtraContentFieldName'\r\nimport { render } from './utils/render'\r\nimport { GalleryImageDraggable } from './components/GalleryImage'\r\nimport { UploadedGalleryImage } from './components/UploadedGalleryImage'\r\nimport { getFieldValue } from './utils/getFieldValue'\r\nimport update from 'immutability-helper'\r\n\r\nconst { Dragger } = Upload\r\n\r\nconst { CMS_STATIC_URL } = window._envConfig\r\nconst catalogUrl = CMS_STATIC_URL + '/images/catalog/'\r\n\r\nconst GalleryImages = styled.div`\r\n  display: grid;\r\n  grid-gap: 12px;\r\n  grid-template-columns: 1fr 1fr 1fr;\r\n  margin: 24px 0;\r\n`\r\n\r\nconst StyledHeader = styled(Header)`\r\n  margin-top: 24px;\r\n`\r\n\r\nexport interface GalleryProps {\r\n  field: CatalogItemDetailField\r\n  languages: CatalogLanguage[]\r\n}\r\n\r\nexport const Gallery: React.FC<GalleryProps> = ({ languages, field }) => {\r\n  const { is_multilingual, id } = field\r\n  const { setFieldValue, values } = useFormikContext<any>()\r\n  const [fileList, setFileList] = useState<\r\n    UploadFile[] | { [key: string]: UploadFile[] }\r\n  >([])\r\n  const { t } = useTranslation('catalog-detail')\r\n\r\n  const getImages = useCallback(\r\n    (language: CatalogLanguage) => {\r\n      let images: CatalogGalleryImageValues[] = []\r\n\r\n      if (values.fields[field.id]) {\r\n        if (language) {\r\n          if (values.fields[field.id][language.code]) {\r\n            images = values.fields[field.id][language.code].value\r\n          }\r\n        } else {\r\n          images = values.fields[field.id].value\r\n        }\r\n      }\r\n\r\n      return images\r\n    },\r\n    [values, field.id]\r\n  )\r\n\r\n  const handleUploadedImageTitleChange = useCallback(\r\n    (name: string, value: string, index: number) => {\r\n      const fieldName = `${getExtraContentFieldName(name)}[${index}][title]`\r\n\r\n      setFieldValue(fieldName, value)\r\n    },\r\n    [setFieldValue]\r\n  )\r\n\r\n  const handleUploadedImageDescriptionChange = useCallback(\r\n    (name: string, value: string, index: number) => {\r\n      const fieldName = `${getExtraContentFieldName(\r\n        name\r\n      )}[${index}][description]`\r\n\r\n      setFieldValue(fieldName, value)\r\n    },\r\n    [setFieldValue]\r\n  )\r\n\r\n  const handleUploadedImageDelete = useCallback(\r\n    (name: string, file: UploadFile<any>) => {\r\n      const imageFieldName = getFieldName(name) + '[images]'\r\n\r\n      if (is_multilingual) {\r\n        const language = imageFieldName.match(/.*\\[(.*)\\]\\[images\\]/)[1]\r\n        const newFileList = fileList[language].filter(\r\n          item => item.uid !== file.uid\r\n        )\r\n\r\n        setFileList(value => {\r\n          value[language] = newFileList\r\n\r\n          return value\r\n        })\r\n\r\n        setFieldValue(imageFieldName, newFileList)\r\n      } else {\r\n        const newFileList = (fileList as UploadFile<any>[]).filter(\r\n          item => item.uid !== file.uid\r\n        )\r\n\r\n        setFileList(newFileList)\r\n        setFieldValue(imageFieldName, newFileList)\r\n      }\r\n    },\r\n    [fileList, setFileList, setFieldValue, is_multilingual]\r\n  )\r\n\r\n  const handleImageTitleChange = useCallback(\r\n    (value: string, index: number, name: string, language: CatalogLanguage) => {\r\n      const images = getImages(language)\r\n\r\n      const newImages = images.map((image, currentIndex) => {\r\n        if (index === currentIndex) {\r\n          return { ...image, title: value }\r\n        } else {\r\n          return image\r\n        }\r\n      })\r\n\r\n      setFieldValue(name, newImages)\r\n    },\r\n    [setFieldValue, getImages]\r\n  )\r\n\r\n  const handleImageDescriptionChange = useCallback(\r\n    (value: string, index: number, name: string, language: CatalogLanguage) => {\r\n      const images = getImages(language)\r\n\r\n      const newImages = images.map((image, currentIndex) => {\r\n        if (index === currentIndex) {\r\n          return { ...image, description: value }\r\n        } else {\r\n          return image\r\n        }\r\n      })\r\n\r\n      setFieldValue(name, newImages)\r\n    },\r\n    [setFieldValue, getImages]\r\n  )\r\n\r\n  const handleImageDelete = useCallback(\r\n    (index: number, name: string, language: CatalogLanguage) => {\r\n      const images = getImages(language)\r\n\r\n      const newImages = images.filter(\r\n        (_, currentIndex) => currentIndex !== index\r\n      )\r\n\r\n      setFieldValue(name, newImages)\r\n    },\r\n    [setFieldValue, getImages]\r\n  )\r\n\r\n  const handleChange = useCallback(\r\n    (name, { fileList }: UploadChangeParam<UploadFile<any>>) => {\r\n      const imageFieldName = getFieldName(name) + '[images]'\r\n\r\n      if (is_multilingual) {\r\n        const language = imageFieldName.match(/.*\\[(.*)\\]\\[images\\]/)[1]\r\n\r\n        setFileList(value => {\r\n          value[language] = fileList\r\n\r\n          return value\r\n        })\r\n      } else {\r\n        setFileList(fileList)\r\n      }\r\n\r\n      setFieldValue(imageFieldName, fileList)\r\n    },\r\n    [setFieldValue, is_multilingual]\r\n  )\r\n\r\n  const handleMove = useCallback(\r\n    (\r\n      dragIndex: number,\r\n      hoverIndex: number,\r\n      name: string,\r\n      language?: CatalogLanguage\r\n    ) => {\r\n      const dragGalleryImages = getFieldValue<CatalogGalleryImageValues[]>(\r\n        values,\r\n        id,\r\n        language && language.code\r\n      )\r\n      const dragGalleryImage = dragGalleryImages[dragIndex]\r\n\r\n      setFieldValue(\r\n        name,\r\n        update(dragGalleryImages, {\r\n          $splice: [\r\n            [dragIndex, 1],\r\n            [hoverIndex, 0, dragGalleryImage],\r\n          ],\r\n        })\r\n      )\r\n    },\r\n    [values, id, setFieldValue]\r\n  )\r\n\r\n  const renderInput = useCallback(\r\n    (name: string, language?: CatalogLanguage) => {\r\n      const images = getImages(language)\r\n      let files: UploadFile<any>[] = []\r\n\r\n      if (is_multilingual) {\r\n        files =\r\n          (fileList as {\r\n            [key: string]: UploadFile<any>[]\r\n          })[language.code] || []\r\n      } else {\r\n        files = fileList as UploadFile<any>[]\r\n      }\r\n\r\n      return (\r\n        <>\r\n          <Dragger\r\n            multiple={true}\r\n            beforeUpload={() => {\r\n              return false\r\n            }}\r\n            accept=\"image/*\"\r\n            showUploadList={false}\r\n            onChange={info => handleChange(name, info)}\r\n          >\r\n            <Icon icon=\"cloud-upload-alt\" size=\"2x\" />\r\n            <p>{t('fields.gallery.upload-files-text')}</p>\r\n          </Dragger>\r\n\r\n          {images && (\r\n            <GalleryImages>\r\n              {images.map(({ thumbnail, title, description }, index) => (\r\n                <GalleryImageDraggable\r\n                  key={thumbnail}\r\n                  index={index}\r\n                  onDelete={value => handleImageDelete(value, name, language)}\r\n                  imagePath={catalogUrl + thumbnail}\r\n                  titleValue={title}\r\n                  onTitleChange={(value, valueIndex) =>\r\n                    handleImageTitleChange(value, valueIndex, name, language)\r\n                  }\r\n                  descriptionValue={description}\r\n                  onDescriptionChange={(value, valueIndex) =>\r\n                    handleImageDescriptionChange(\r\n                      value,\r\n                      valueIndex,\r\n                      name,\r\n                      language\r\n                    )\r\n                  }\r\n                  onMove={(dragIndex, hoverIndex) =>\r\n                    handleMove(dragIndex, hoverIndex, name, language)\r\n                  }\r\n                />\r\n              ))}\r\n            </GalleryImages>\r\n          )}\r\n\r\n          {files.length > 0 && (\r\n            <StyledHeader>{t('fields.gallery.new-images')}</StyledHeader>\r\n          )}\r\n\r\n          <GalleryImages>\r\n            {files.map((file: UploadFile, index) => (\r\n              <UploadedGalleryImage\r\n                key={index}\r\n                file={file}\r\n                onTitleChange={value =>\r\n                  handleUploadedImageTitleChange(name, value, index)\r\n                }\r\n                onDescriptionChange={value =>\r\n                  handleUploadedImageDescriptionChange(name, value, index)\r\n                }\r\n                onDelete={file => handleUploadedImageDelete(name, file)}\r\n              />\r\n            ))}\r\n          </GalleryImages>\r\n        </>\r\n      )\r\n    },\r\n    [\r\n      handleUploadedImageDescriptionChange,\r\n      handleUploadedImageTitleChange,\r\n      handleUploadedImageDelete,\r\n      handleImageDescriptionChange,\r\n      handleImageTitleChange,\r\n      handleImageDelete,\r\n      handleChange,\r\n      getImages,\r\n      t,\r\n      fileList,\r\n      handleMove,\r\n      is_multilingual,\r\n    ]\r\n  )\r\n\r\n  if (is_multilingual) {\r\n    return (\r\n        <FieldGroup>\r\n          {languages.map(language =>\r\n            render(\r\n              field,\r\n              (name: string) => renderInput(name, language),\r\n              language\r\n            )\r\n          )}\r\n        </FieldGroup>\r\n    )\r\n  }\r\n\r\n  return (\r\n    <FieldGroup>\r\n      {render(field, (name: string) => renderInput(name))}\r\n    </FieldGroup>\r\n  )\r\n}\r\n","import React, { useCallback } from 'react'\r\nimport { CatalogItemDetailField } from 'model/api/CatalogItemDetailField'\r\nimport { Input } from 'formik-antd'\r\nimport { Input as InputAntd, Space } from 'antd'\r\nimport { useFormikContext } from 'formik'\r\nimport { CatalogLanguage } from 'model/api/CatalogLanguage'\r\nimport { render } from './utils/render'\r\nimport { CatalogCurrency } from 'model/api/CatalogCurrency'\r\nimport { Alert } from 'antd'\r\nimport { useTranslation } from 'react-i18next'\r\nimport { getFieldValue } from './utils/getFieldValue'\r\nimport { MultiLingual } from './styles'\r\n\r\nexport interface PriceProps {\r\n  field: CatalogItemDetailField\r\n  languages: CatalogLanguage[]\r\n  currencies: CatalogCurrency[]\r\n}\r\n\r\nexport const Price: React.FC<PriceProps> = ({\r\n  languages,\r\n  currencies,\r\n  field,\r\n}) => {\r\n  const { is_multilingual, id } = field\r\n  const { t } = useTranslation('catalog-detail')\r\n  const { values } = useFormikContext()\r\n\r\n  const renderInput = useCallback(\r\n    (name: string, language?: CatalogLanguage) => {\r\n      if (!is_multilingual) {\r\n        const mainCurrency = currencies.find(currency => !!currency.is_main)\r\n        const otherCurrencies = currencies.filter(currency => !currency.is_main)\r\n        const fieldValue = getFieldValue<number>(\r\n          values,\r\n          id,\r\n          language && language.code\r\n        )\r\n\r\n        if (mainCurrency) {\r\n          return (\r\n            <Space direction=\"vertical\" size=\"small\" style={{ width: '100%' }}>\r\n              <Input\r\n                type=\"number\"\r\n                min=\"0\"\r\n                name={name}\r\n                addonBefore={mainCurrency.code}\r\n              />\r\n              {otherCurrencies.map(currency => {\r\n                const value =\r\n                  fieldValue &&\r\n                  (currency.rate * fieldValue).toFixed(currency.decimal_places)\r\n\r\n                return (\r\n                  <InputAntd\r\n                    disabled\r\n                    value={value}\r\n                    addonBefore={currency.code}\r\n                  />\r\n                )\r\n              })}\r\n            </Space>\r\n          )\r\n        }\r\n      } else {\r\n        const currency = currencies.find(\r\n          currency => language && language.default_currency_id === currency.id\r\n        )\r\n\r\n        if (currency) {\r\n          return (\r\n            <Input\r\n              type=\"number\"\r\n              min=\"0\"\r\n              name={name}\r\n              addonBefore={currency.code}\r\n            />\r\n          )\r\n        } else {\r\n          return (\r\n            <Alert\r\n              type=\"warning\"\r\n              message={t('fields.price.no-default-currency-for-language', {\r\n                language: language.name,\r\n              })}\r\n            />\r\n          )\r\n        }\r\n      }\r\n\r\n      return (\r\n        <Alert type=\"warning\" message={t('fields.price.no-main-currency')} />\r\n      )\r\n    },\r\n    [currencies, t, id, values, is_multilingual]\r\n  )\r\n\r\n  if (is_multilingual) {\r\n    return (\r\n      <MultiLingual>\r\n        {languages.map(language =>\r\n          render(field, (name: string) => renderInput(name, language), language)\r\n        )}\r\n      </MultiLingual>\r\n    )\r\n  }\r\n\r\n  return render(field, renderInput)\r\n}\r\n","import React, { useCallback } from 'react'\r\nimport { CatalogItemDetailField } from 'model/api/CatalogItemDetailField'\r\nimport { Select } from 'formik-antd'\r\nimport { CatalogLanguage } from 'model/api/CatalogLanguage'\r\nimport { render } from './utils/render'\r\nimport { CatalogCurrency } from 'model/api/CatalogCurrency'\r\nimport { Alert, Tag, Space, Input as AntdInput } from 'antd'\r\nimport { useTranslation } from 'react-i18next'\r\nimport { CatalogCurrencyTaxRate } from 'model/api/CatalogCurrencyTaxRate'\r\nimport { COLORS } from 'constants/colors'\r\nimport styled from 'styled-components'\r\nimport { MultiLingual } from './styles'\r\n\r\nconst { Group } = AntdInput\r\n\r\nconst { Option } = Select\r\n\r\nconst StyledSelect = styled(Select)`\r\n  && {\r\n    width: 100% !important;\r\n\r\n    .ant-select-selector {\r\n      border-top-left-radius: 0;\r\n      border-bottom-left-radius: 0;\r\n    }\r\n  }\r\n`\r\n\r\nexport interface TaxRateProps {\r\n  field: CatalogItemDetailField\r\n  languages: CatalogLanguage[]\r\n  currencies: CatalogCurrency[]\r\n  taxRates: CatalogCurrencyTaxRate[]\r\n}\r\n\r\nexport const TaxRate: React.FC<TaxRateProps> = ({\r\n  languages,\r\n  currencies,\r\n  taxRates,\r\n  field,\r\n}) => {\r\n  const { is_multilingual } = field\r\n  const { t } = useTranslation('catalog-detail')\r\n\r\n  const renderTaxRateSelect = useCallback(\r\n    (\r\n      taxRates: CatalogCurrencyTaxRate[],\r\n      currency: CatalogCurrency,\r\n      name: string\r\n    ) => (\r\n      <Group className=\"ant-input-wrapper\">\r\n        <div className=\"ant-input-group-addon\">{currency.code}</div>\r\n        <StyledSelect name={name}>\r\n          {taxRates.map(({ id, rate }) => (\r\n            <Option value={String(id)} key={id}>\r\n              {rate === null ? (\r\n                <Tag color={COLORS.orange5}>\r\n                  {t('fields.tax-rate.no-tax-rate')}\r\n                </Tag>\r\n              ) : (\r\n                `${rate}%`\r\n              )}\r\n            </Option>\r\n          ))}\r\n        </StyledSelect>\r\n      </Group>\r\n    ),\r\n    [t]\r\n  )\r\n\r\n  const renderInput = useCallback(\r\n    (name: string, language?: CatalogLanguage) => {\r\n      if (!is_multilingual) {\r\n        const mainCurrency = currencies.find(currency => !!currency.is_main)\r\n\r\n        if (mainCurrency) {\r\n          const mainCurrencyTaxRates = taxRates.filter(\r\n            item => item.currency_id === mainCurrency.id\r\n          )\r\n\r\n          return (\r\n            <Space direction=\"vertical\" size=\"small\" style={{ width: '100%' }}>\r\n              {renderTaxRateSelect(mainCurrencyTaxRates, mainCurrency, name)}\r\n              <Alert\r\n                type=\"info\"\r\n                message={t('fields.tax-rate.main-tax-rate-info')}\r\n              />\r\n            </Space>\r\n          )\r\n        }\r\n      } else {\r\n        const currency = currencies.find(\r\n          currency => language && language.default_currency_id === currency.id\r\n        )\r\n\r\n        if (currency) {\r\n          const currencyTaxRates = taxRates.filter(\r\n            item => item.currency_id === currency.id\r\n          )\r\n\r\n          return renderTaxRateSelect(currencyTaxRates, currency, name)\r\n        } else {\r\n          return (\r\n            <Alert\r\n              type=\"warning\"\r\n              message={t('fields.price.no-default-currency-for-language', {\r\n                language: language.name,\r\n              })}\r\n            />\r\n          )\r\n        }\r\n      }\r\n\r\n      return (\r\n        <Alert type=\"warning\" message={t('fields.price.no-main-currency')} />\r\n      )\r\n    },\r\n    [currencies, taxRates, t, is_multilingual, renderTaxRateSelect]\r\n  )\r\n\r\n  if (is_multilingual) {\r\n    return (\r\n      <MultiLingual>\r\n        {languages.map(language =>\r\n          render(field, (name: string) => renderInput(name, language), language)\r\n        )}\r\n      </MultiLingual>\r\n    )\r\n  }\r\n\r\n  return render(field, renderInput)\r\n}\r\n","import axios, { AxiosPromise } from 'axios'\r\nimport { RequestConfig } from './requestConfig'\r\nimport { CatalogCurrencyTaxRate } from 'model/api/CatalogCurrencyTaxRate'\r\nimport { PaginatedList } from 'model/api/PaginatedList'\r\n\r\nexport class CatalogCurrencyTaxRatesApi {\r\n  /**\r\n   * Get Catalog Currency Tax Rates\r\n   * \r\n   * @param catalogCurrencyId\r\n   * @param page\r\n   * @param pageSize\r\n   */\r\n  static getCatalogCurrencyTaxRates(\r\n    catalogCurrencyId: number,\r\n    page?: number,\r\n    pageSize?: number,\r\n    config?: RequestConfig\r\n  ): AxiosPromise<PaginatedList<CatalogCurrencyTaxRate>> {\r\n    return axios({\r\n      ...config,\r\n      method: 'GET',\r\n      url: `/catalog-currencies/${catalogCurrencyId}/tax-rates`,\r\n      params: {\r\n        page,\r\n        per_page: pageSize,\r\n      },\r\n    })\r\n  }\r\n\r\n  /**\r\n   * Get All Catalog Currencies\r\n   * \r\n   * @param catalogCurrencyId\r\n   */\r\n  static getAllCatalogCurrencyTaxRates(\r\n    catalogCurrencyId?: number,\r\n    config?: RequestConfig\r\n  ): AxiosPromise<CatalogCurrencyTaxRate[]> {\r\n    let url = '';\r\n\r\n    if (catalogCurrencyId) {\r\n      url = `/catalog-currencies/${catalogCurrencyId}/all`\r\n    } else {\r\n      url = `/catalog-currencies/tax-rates`\r\n    }\r\n\r\n    return axios({\r\n      ...config,\r\n      method: 'GET',\r\n      url,\r\n    })\r\n  }\r\n\r\n  /**\r\n   * Get Catalog Currency Tax Rate\r\n   *\r\n   * @param catalogCurrencyId\r\n   * @param catalogCurrencyTaxRateId\r\n   */\r\n  static getCatalogCurrencyTaxRate(\r\n    catalogCurrencyId: number,\r\n    catalogCurrencyTaxRateId: number,\r\n    config?: RequestConfig\r\n  ): AxiosPromise<CatalogCurrencyTaxRate> {\r\n    return axios({\r\n      ...config,\r\n      method: 'GET',\r\n      url: `/catalog-currencies/${catalogCurrencyId}/tax-rates/${catalogCurrencyTaxRateId}`,\r\n    })\r\n  }\r\n\r\n  /**\r\n   * Create Catalog Currency Tax Rate\r\n   *\r\n   * @param catalogCurrencyId\r\n   * @param data\r\n   */\r\n  static createCatalogCurrencyTaxRate(\r\n    catalogCurrencyId: number,\r\n    data: FormData,\r\n    config?: RequestConfig\r\n  ): AxiosPromise {\r\n    return axios({\r\n      ...config,\r\n      method: 'POST',\r\n      url: `/catalog-currencies/${catalogCurrencyId}/tax-rates`,\r\n      data,\r\n    })\r\n  }\r\n\r\n  /**\r\n   * Update Catalog Currency Tax Rate\r\n   *\r\n   * @param catalogCurrencyId\r\n   * @param catalogCurrencyTaxRateId\r\n   * @param data\r\n   */\r\n  static updateCatalogCurrencyTaxRate(\r\n    catalogCurrencyId: number,\r\n    catalogCurrencyTaxRateId: number,\r\n    data: FormData,\r\n    config?: RequestConfig\r\n  ): AxiosPromise {\r\n    return axios({\r\n      ...config,\r\n      method: 'PUT',\r\n      url: `/catalog-currencies/${catalogCurrencyId}/tax-rates/${catalogCurrencyTaxRateId}`,\r\n      data,\r\n    })\r\n  }\r\n\r\n  /**\r\n   * Delete Catalog Currency Tax Rate\r\n   *\r\n   * @param catalogCurrencyId\r\n   * @param catalogCurrencyTaxRateId\r\n   */\r\n  static deleteCatalogCurrencyTaxRate(\r\n    catalogCurrencyId: number,\r\n    catalogCurrencyTaxRateId: number,\r\n    config?: RequestConfig\r\n  ): AxiosPromise {\r\n    return axios({\r\n      ...config,\r\n      method: 'DELETE',\r\n      url: `/catalog-currencies/${catalogCurrencyId}/tax-rates/${catalogCurrencyTaxRateId}`,\r\n    })\r\n  }\r\n}\r\n","import React, { useState, useCallback, useEffect } from 'react'\r\nimport { useTranslation } from 'react-i18next'\r\nimport { getBase64 } from 'utils/getBase64'\r\nimport { UploadFile } from 'antd/lib/upload/interface'\r\nimport styled from 'styled-components'\r\nimport { COLORS } from 'constants/colors'\r\nimport { IconButton } from 'components/IconButton'\r\n\r\nconst ImageContainer = styled.div`\r\n  display: flex;\r\n  flex-direction: row;\r\n  justify-content: flex-end;\r\n  width: 240px;\r\n  height: 240px;\r\n  margin-top: 24px;\r\n  padding: 12px;\r\n  overflow: hidden;\r\n  background-repeat: no-repeat;\r\n  background-position: 50% 50%;\r\n  background-size: cover;\r\n  border: 1px solid ${COLORS.gray2};\r\n  border-radius: 2px;\r\n`\r\n\r\nexport interface UploadedImageProps {\r\n  file: UploadFile | string\r\n  onDelete?: () => void\r\n}\r\n\r\nexport const UploadedImage: React.FC<UploadedImageProps> = ({\r\n  file,\r\n  onDelete,\r\n}) => {\r\n  const [image, setImage] = useState<string>()\r\n  const { t } = useTranslation('catalog-detail')\r\n\r\n  const getImage = useCallback(async () => {\r\n    if (typeof file !== 'string') {\r\n      const img = await getBase64(file.originFileObj)\r\n\r\n      setImage(img as string)\r\n    } else {\r\n      setImage(file as string)\r\n    }\r\n  }, [file])\r\n\r\n  useEffect(() => {\r\n    getImage()\r\n  }, [getImage])\r\n\r\n  return (\r\n    <ImageContainer style={{ backgroundImage: `url(${image})` }}>\r\n      <IconButton\r\n        size=\"small\"\r\n        icon=\"trash-alt\"\r\n        onClick={() => onDelete && onDelete()}\r\n      >\r\n        {t('fields.image.delete')}\r\n      </IconButton>\r\n    </ImageContainer>\r\n  )\r\n}\r\n","import React, { useCallback, useState } from 'react'\r\nimport { Icon } from 'components/Icon'\r\nimport { Upload } from 'antd'\r\nimport { useTranslation } from 'react-i18next'\r\nimport { getFieldName } from './utils/getFieldName'\r\nimport { CatalogItemDetailField } from 'model/api/CatalogItemDetailField'\r\nimport { CatalogLanguage } from 'model/api/CatalogLanguage'\r\nimport { UploadChangeParam } from 'antd/lib/upload'\r\nimport { UploadFile } from 'antd/lib/upload/interface'\r\nimport { useFormikContext } from 'formik'\r\nimport { FieldGroup } from './styles'\r\nimport { render } from './utils/render'\r\nimport { UploadedImage } from './components/UploadedImage'\r\n\r\nconst { CMS_STATIC_URL } = window._envConfig\r\nconst catalogUrl = CMS_STATIC_URL + '/images/catalog/'\r\n\r\nconst { Dragger } = Upload\r\n\r\nexport interface ImageProps {\r\n  field: CatalogItemDetailField\r\n  languages: CatalogLanguage[]\r\n}\r\n\r\nexport const Image: React.FC<ImageProps> = ({ languages, field }) => {\r\n  const { t } = useTranslation('catalog-detail')\r\n  const { is_multilingual } = field\r\n  const { setFieldValue, values } = useFormikContext<any>()\r\n  const [file, setFile] = useState<\r\n    UploadFile<any> | { [key: string]: UploadFile<any> }\r\n  >()\r\n\r\n  const getImage = useCallback(\r\n    (language?: CatalogLanguage) => {\r\n      let image\r\n\r\n      if (values.fields[field.id]) {\r\n        if (language) {\r\n          if (values.fields[field.id][language.code]) {\r\n            image = values.fields[field.id][language.code].value\r\n          }\r\n        } else {\r\n          image = values.fields[field.id].value\r\n        }\r\n      }\r\n\r\n      if (image) {\r\n        return image.thumbnail\r\n      }\r\n    },\r\n    [values, field.id]\r\n  )\r\n\r\n  const handleChange = useCallback(\r\n    (name, { fileList, file: { uid } }: UploadChangeParam<UploadFile<any>>) => {\r\n      const imageFieldName = getFieldName(name) + '[image]'\r\n      const filteredFile = fileList.find(item => item.uid === uid)\r\n\r\n      if (is_multilingual) {\r\n        const language = imageFieldName.match(/.*\\[(.*)\\]\\[image\\]/)[1]\r\n\r\n        setFile(value => {\r\n          value[language] = filteredFile\r\n\r\n          return value\r\n        })\r\n      } else {\r\n        setFile(filteredFile)\r\n      }\r\n\r\n      setFieldValue(imageFieldName, filteredFile)\r\n    },\r\n    [setFieldValue, is_multilingual]\r\n  )\r\n\r\n  const handleDelete = useCallback(\r\n    (name: string) => {\r\n      if (file) {\r\n        const imageFieldName = getFieldName(name) + '[image]'\r\n\r\n        if (is_multilingual) {\r\n          const language = imageFieldName.match(/.*\\[(.*)\\]\\[image\\]/)[1]\r\n          setFile(value => {\r\n            value[language] = undefined\r\n\r\n            return value\r\n          })\r\n        } else {\r\n          setFile(undefined)\r\n        }\r\n        setFieldValue(imageFieldName, undefined)\r\n      } else {\r\n        setFieldValue(name, '')\r\n      }\r\n    },\r\n    [file, setFieldValue, is_multilingual]\r\n  )\r\n\r\n  const renderInput = useCallback(\r\n    (name: string, language?: CatalogLanguage) => {\r\n      let previewFile: UploadFile<any> | string | undefined = undefined\r\n      const image = getImage(language)\r\n\r\n      if (language) {\r\n        if (file && file[language.code]) {\r\n          previewFile = file[language.code] as UploadFile<any>\r\n        } else {\r\n          if (image) {\r\n            previewFile = (catalogUrl + image) as string\r\n          }\r\n        }\r\n      } else {\r\n        if (file) {\r\n          previewFile = file as UploadFile<any>\r\n        } else {\r\n          if (image) {\r\n            previewFile = (catalogUrl + image) as string\r\n          }\r\n        }\r\n      }\r\n\r\n      return (\r\n        <>\r\n          <Dragger\r\n            multiple={false}\r\n            beforeUpload={() => {\r\n              return false\r\n            }}\r\n            showUploadList={false}\r\n            accept=\"image/*\"\r\n            onChange={info => handleChange(name, info)}\r\n          >\r\n            <Icon icon=\"cloud-upload-alt\" size=\"2x\" />\r\n            <p>{t('fields.image.upload-file-text')}</p>\r\n          </Dragger>\r\n          {!!previewFile && (\r\n            <UploadedImage\r\n              file={previewFile}\r\n              onDelete={() => handleDelete(name)}\r\n            />\r\n          )}\r\n        </>\r\n      )\r\n    },\r\n    [t, file, getImage, handleDelete, handleChange]\r\n  )\r\n\r\n  if (is_multilingual) {\r\n    return (\r\n      <FieldGroup>\r\n        {languages.map(language =>\r\n          render(field, (name: string) => renderInput(name, language), language)\r\n        )}\r\n      </FieldGroup>\r\n    )\r\n  }\r\n\r\n  return (\r\n    <FieldGroup>\r\n      {render(field, (name: string) => renderInput(name))}\r\n    </FieldGroup>\r\n  )\r\n}\r\n","import React, { useCallback, useState, useEffect, useContext } from 'react'\r\nimport { useTranslation } from 'react-i18next'\r\nimport axios, { CancelToken } from 'axios'\r\nimport { CatalogLanguage } from 'model/api/CatalogLanguage'\r\nimport { CatalogLanguagesApi } from 'api/CatalogLanguages'\r\nimport { CatalogItemTemplateFieldTypeEnum } from 'model/api/CatalogItemTemplateFieldTypeEnum'\r\nimport { String as StringComponent } from './Fields/String'\r\nimport { Boolean } from './Fields/Boolean'\r\nimport { Date } from './Fields/Date'\r\nimport { DateTime } from './Fields/DateTime'\r\nimport { Integer } from './Fields/Integer'\r\nimport { Link } from './Fields/Link'\r\nimport { Text } from './Fields/Text'\r\nimport { RichText } from './Fields/RichText'\r\nimport { Gallery } from './Fields/Gallery'\r\nimport { Price } from './Fields/Price'\r\nimport { TaxRate } from './Fields/TaxRate'\r\nimport { Skeleton } from 'antd'\r\nimport { CatalogDetailContext } from '..'\r\nimport { CatalogCurrenciesApi } from 'api/CatalogCurrencies'\r\nimport { CatalogCurrencyTaxRatesApi } from 'api/CatalogCurrencyTaxRates'\r\nimport { CatalogCurrency } from 'model/api/CatalogCurrency'\r\nimport { CatalogCurrencyTaxRate } from 'model/api/CatalogCurrencyTaxRate'\r\nimport { Image } from './Fields/Image'\r\n\r\nexport const Data: React.FC = () => {\r\n  const { t } = useTranslation('catalog-detail')\r\n  const [languages, setLanguages] = useState<CatalogLanguage[]>([])\r\n  const [currencies, setCurrencies] = useState<CatalogCurrency[]>([])\r\n  const [currencyTaxRates, setCurrencyTaxRates] = useState<\r\n    CatalogCurrencyTaxRate[]\r\n  >([])\r\n  const { data, loading, setLoading } = useContext(CatalogDetailContext)\r\n\r\n  const getLanguages = useCallback(\r\n    async (cancelToken: CancelToken) => {\r\n      setLoading(true)\r\n\r\n      const { data } = await CatalogLanguagesApi.getAllCatalogLanguages({\r\n        cancelToken,\r\n      })\r\n\r\n      setLanguages(data)\r\n      setLoading(false)\r\n    },\r\n    [setLoading]\r\n  )\r\n\r\n  const getCurrencies = useCallback(\r\n    async (cancelToken: CancelToken) => {\r\n      setLoading(true)\r\n\r\n      const { data } = await CatalogCurrenciesApi.getAllCatalogCurrencies({\r\n        cancelToken,\r\n      })\r\n\r\n      setCurrencies(data)\r\n      setLoading(false)\r\n    },\r\n    [setLoading]\r\n  )\r\n\r\n  const getCurrencyTaxRates = useCallback(\r\n    async (cancelToken: CancelToken) => {\r\n      setLoading(true)\r\n\r\n      const {\r\n        data,\r\n      } = await CatalogCurrencyTaxRatesApi.getAllCatalogCurrencyTaxRates(\r\n        undefined,\r\n        {\r\n          cancelToken,\r\n        }\r\n      )\r\n\r\n      setCurrencyTaxRates(data)\r\n      setLoading(false)\r\n    },\r\n    [setLoading]\r\n  )\r\n\r\n  useEffect(() => {\r\n    const cancelTokenSource = axios.CancelToken.source()\r\n\r\n    getLanguages(cancelTokenSource.token)\r\n    getCurrencies(cancelTokenSource.token)\r\n    getCurrencyTaxRates(cancelTokenSource.token)\r\n\r\n    return () => cancelTokenSource.cancel()\r\n  }, [getLanguages, getCurrencies, getCurrencyTaxRates])\r\n\r\n  if (loading) {\r\n    return <Skeleton active loading paragraph={{ rows: 4, width: '400px' }} />\r\n  }\r\n\r\n  if (data) {\r\n    const { fields } = data\r\n\r\n    return (\r\n      <div>\r\n        {fields.map(field => {\r\n          switch (field.type) {\r\n            case CatalogItemTemplateFieldTypeEnum.STRING:\r\n              return (\r\n                <StringComponent\r\n                  languages={languages}\r\n                  field={field}\r\n                  key={field.id}\r\n                />\r\n              )\r\n            case CatalogItemTemplateFieldTypeEnum.BOOLEAN:\r\n              return (\r\n                <Boolean languages={languages} field={field} key={field.id} />\r\n              )\r\n            case CatalogItemTemplateFieldTypeEnum.DATE:\r\n              return <Date languages={languages} field={field} key={field.id} />\r\n            case CatalogItemTemplateFieldTypeEnum.DATE_TIME:\r\n              return (\r\n                <DateTime languages={languages} field={field} key={field.id} />\r\n              )\r\n            case CatalogItemTemplateFieldTypeEnum.INTEGER:\r\n              return (\r\n                <Integer languages={languages} field={field} key={field.id} />\r\n              )\r\n            case CatalogItemTemplateFieldTypeEnum.LINK:\r\n              return (\r\n                <Link\r\n                  languages={languages}\r\n                  field={field}\r\n                  t={t}\r\n                  key={field.id}\r\n                />\r\n              )\r\n            case CatalogItemTemplateFieldTypeEnum.TEXT:\r\n              return <Text languages={languages} field={field} key={field.id} />\r\n            case CatalogItemTemplateFieldTypeEnum.RICH_TEXT:\r\n              return (\r\n                <RichText languages={languages} field={field} key={field.id} />\r\n              )\r\n            case CatalogItemTemplateFieldTypeEnum.GALLERY:\r\n              return (\r\n                <Gallery languages={languages} field={field} key={field.id} />\r\n              )\r\n            case CatalogItemTemplateFieldTypeEnum.IMAGE:\r\n              return (\r\n                <Image languages={languages} field={field} key={field.id} />\r\n              )\r\n            case CatalogItemTemplateFieldTypeEnum.PRICE:\r\n              return (\r\n                <Price\r\n                  languages={languages}\r\n                  currencies={currencies}\r\n                  field={field}\r\n                  key={field.id}\r\n                />\r\n              )\r\n            case CatalogItemTemplateFieldTypeEnum.TAX_RATE:\r\n              return (\r\n                <TaxRate\r\n                  languages={languages}\r\n                  currencies={currencies}\r\n                  taxRates={currencyTaxRates}\r\n                  field={field}\r\n                  key={field.id}\r\n                />\r\n              )\r\n            default:\r\n              return null\r\n          }\r\n        })}\r\n      </div>\r\n    )\r\n  }\r\n\r\n  return null\r\n}\r\n","import React, { useCallback, useContext, useState, useEffect } from 'react'\r\nimport { TreeSelect, Input } from 'formik-antd'\r\nimport { TreeSelect as TreeSelectAntd } from 'antd'\r\nimport axios, { CancelToken } from 'axios'\r\nimport { CatalogDetailContext } from '..'\r\nimport { CatalogCategoriesApi } from 'api/CatalogCategories'\r\nimport { useTranslation } from 'react-i18next'\r\nimport {\r\n  mapCatalogCategories,\r\n  MappedCatalogCategory,\r\n} from 'mappers/mapCatalogCategories'\r\nimport { FormikFormItem as Item } from 'components/FormikFormItem'\r\n\r\nconst { SHOW_ALL } = TreeSelectAntd\r\n\r\nexport const Categories: React.FC = () => {\r\n  const { t } = useTranslation('catalog-detail')\r\n  const { setLoading } = useContext(CatalogDetailContext)\r\n  const [categories, setCategories] = useState<MappedCatalogCategory[]>()\r\n\r\n  const getCatalogCategories = useCallback(\r\n    async (cancelToken: CancelToken) => {\r\n      try {\r\n        setLoading(true)\r\n        const { data } = await CatalogCategoriesApi.getCatalogCategories(\r\n          undefined,\r\n          undefined,\r\n          undefined,\r\n          undefined,\r\n          {\r\n            cancelToken,\r\n          }\r\n        )\r\n\r\n        setCategories(mapCatalogCategories(data, t, false))\r\n        setLoading(false)\r\n      } catch (e) {\r\n        setLoading(false)\r\n      }\r\n    },\r\n    [t, setLoading]\r\n  )\r\n\r\n  useEffect(() => {\r\n    const cancelTokenSource = axios.CancelToken.source()\r\n    getCatalogCategories(cancelTokenSource.token)\r\n\r\n    return () => cancelTokenSource.cancel()\r\n  }, [getCatalogCategories])\r\n\r\n  return (\r\n    <Item label={t('categories.categories')} name=\"categories\">\r\n      {categories ? (\r\n        <TreeSelect\r\n          treeData={categories}\r\n          name=\"categories\"\r\n          showCheckedStrategy={SHOW_ALL}\r\n          treeCheckable\r\n          treeCheckStrictly\r\n          treeDefaultExpandAll\r\n          showArrow\r\n          allowClear\r\n          filterTreeNode\r\n          treeNodeFilterProp=\"title\"\r\n        />\r\n      ) : (\r\n        <Input name=\"categories\" disabled />\r\n      )}\r\n    </Item>\r\n  )\r\n}\r\n","import axios, { AxiosPromise } from 'axios'\r\nimport { RequestConfig } from './requestConfig'\r\n\r\nexport class CatalogItemCategoriesApi {\r\n  /**\r\n   * Get Catalog Item Categories\r\n   *\r\n   * @param catalogItemId\r\n   */\r\n  static getCatalogItemCategories(\r\n    catalogItemId: number,\r\n    config?: RequestConfig\r\n  ): AxiosPromise<number[]> {\r\n    return axios({\r\n      ...config,\r\n      method: 'GET',\r\n      url: `/catalog-items/${catalogItemId}/categories`,\r\n    })\r\n  }\r\n\r\n  /**\r\n   * Set Catalog Item Categories\r\n   *\r\n   * @param data\r\n   * @param catalogItemId\r\n   */\r\n  static setCatalogItemCategories(\r\n    data: FormData,\r\n    catalogItemId: number,\r\n    config?: RequestConfig\r\n  ): AxiosPromise {\r\n    return axios({\r\n      ...config,\r\n      method: 'PUT',\r\n      url: `/catalog-items/${catalogItemId}/categories`,\r\n      data,\r\n    })\r\n  }\r\n}","import React, { useCallback, useContext, useRef, useEffect } from 'react'\r\nimport { useGetInitialValues } from '../hooks/useGetInitialValues'\r\nimport { CatalogDetailContext } from '..'\r\nimport axios, { CancelTokenSource } from 'axios'\r\nimport { CatalogItemTemplateFieldValuesApi } from 'api/CatalogItemTemplateFieldValues'\r\nimport { CatalogItemsApi } from 'api/CatalogItems'\r\nimport { objectToFormData } from 'object-to-formdata'\r\nimport { Button, Form as FormAntd, notification } from 'antd'\r\nimport { validateSchema } from 'config/yup'\r\nimport { navigate } from '@reach/router'\r\nimport { Formik } from 'formik'\r\nimport { Form as FormFormikAntd } from 'formik-antd'\r\nimport * as Yup from 'yup'\r\nimport { useTranslation } from 'react-i18next'\r\nimport { Data } from './Data'\r\nimport { Tabs } from 'antd'\r\nimport { Categories } from './Categories'\r\nimport { CatalogItemCategoriesApi } from 'api/CatalogItemCategories'\r\n\r\nconst { TabPane } = Tabs\r\nconst { Item: ItemAntd } = FormAntd\r\n\r\nexport enum CatalogTabsEnum {\r\n  DATA = 'Data',\r\n  CATEGORIES = 'Categories',\r\n}\r\n\r\nexport interface FormValues {}\r\nexport const FormSchema = Yup.object().shape<FormValues>({})\r\n\r\nexport const Form = () => {\r\n  const { t } = useTranslation('catalog-detail')\r\n  const { data, loading, setLoading } = useContext(CatalogDetailContext)\r\n  const formInitialValues = useGetInitialValues()\r\n  const cancelTokenRef = useRef<CancelTokenSource>(axios.CancelToken.source())\r\n  const { PUBLIC_URL } = process.env\r\n\r\n  const handleSubmit = useCallback(\r\n    // TODO type values\r\n    async (values: any) => {\r\n      const cancelToken = cancelTokenRef.current.token\r\n\r\n      if (data) {\r\n        try {\r\n          setLoading(true)\r\n          const transformedValues = { fields: {} }\r\n\r\n          Object.keys(values.fields).forEach(key => {\r\n            if (Object.keys(values.fields[key])[0] !== 'value') {\r\n              Object.keys(values.fields[key]).forEach(language => {\r\n                let newValue = values.fields[key][language]\r\n\r\n                if (typeof newValue.value === 'object') {\r\n                  newValue = {\r\n                    ...newValue,\r\n                    value: JSON.stringify(newValue.value),\r\n                  }\r\n                }\r\n\r\n                if (typeof newValue.images !== 'undefined') {\r\n                  newValue = {\r\n                    ...newValue,\r\n                    images: newValue.images.map(image => image.originFileObj),\r\n                  }\r\n                }\r\n\r\n                if (typeof newValue.image !== 'undefined') {\r\n                  newValue = {\r\n                    ...newValue,\r\n                    image: newValue.image.originFileObj,\r\n                  }\r\n                }\r\n\r\n                if (!transformedValues.fields[key]) {\r\n                  transformedValues.fields[key] = {}\r\n                }\r\n                transformedValues.fields[key][language] = newValue\r\n              })\r\n            } else {\r\n              let newValue = values.fields[key]\r\n\r\n              if (typeof newValue.value === 'object') {\r\n                newValue = {\r\n                  ...newValue,\r\n                  value: JSON.stringify(newValue.value),\r\n                }\r\n              }\r\n\r\n              if (typeof newValue.images !== 'undefined') {\r\n                newValue = {\r\n                  ...newValue,\r\n                  images: newValue.images.map(image => image.originFileObj),\r\n                }\r\n              }\r\n\r\n              if (typeof newValue.image !== 'undefined') {\r\n                newValue = {\r\n                  ...newValue,\r\n                  image: newValue.image.originFileObj,\r\n                }\r\n              }\r\n\r\n              transformedValues.fields[key] = newValue\r\n            }\r\n          })\r\n\r\n          const formData = objectToFormData(transformedValues, {\r\n            nullsAsUndefineds: true,\r\n            booleansAsIntegers: true,\r\n          })\r\n\r\n          formData.append('item_id', String(data.id))\r\n\r\n          const categoriesFormData = new FormData()\r\n\r\n          values.categories.forEach(category => {\r\n            if (typeof category === 'object') {\r\n              category = category.value\r\n            }\r\n\r\n            categoriesFormData.append('category[]', String(category))\r\n          })\r\n\r\n          await CatalogItemTemplateFieldValuesApi.updateCatalogItemTemplateFieldValues(\r\n            data.template_id,\r\n            formData,\r\n            { cancelToken }\r\n          )\r\n\r\n          await CatalogItemCategoriesApi.setCatalogItemCategories(\r\n            categoriesFormData,\r\n            data.id,\r\n            {\r\n              cancelToken,\r\n            }\r\n          )\r\n\r\n          await CatalogItemsApi.updateCatalogItem(data.id, new FormData(), {\r\n            cancelToken,\r\n          })\r\n\r\n          const to = PUBLIC_URL + '/catalog/' + data.id\r\n\r\n          navigate(PUBLIC_URL + '/redirect-to', {\r\n            state: {\r\n              to,\r\n            },\r\n          })\r\n\r\n          notification.success({ message: t('save-success') })\r\n          setLoading(false)\r\n        } catch (e) {\r\n          console.log(e)\r\n          setLoading(false)\r\n        }\r\n      }\r\n    },\r\n    [data, PUBLIC_URL, t, setLoading]\r\n  )\r\n\r\n  useEffect(() => {\r\n    const cancelToken = cancelTokenRef.current\r\n\r\n    return () => cancelToken.cancel()\r\n  }, [])\r\n\r\n  console.log(formInitialValues)\r\n\r\n  return (\r\n    <Formik<any>\r\n      initialValues={formInitialValues}\r\n      enableReinitialize\r\n      validate={values => validateSchema(values, FormSchema)}\r\n      onSubmit={handleSubmit}\r\n    >\r\n      <FormFormikAntd layout=\"vertical\">\r\n        <Tabs defaultActiveKey={CatalogTabsEnum.DATA}>\r\n          <TabPane tab={t('tabs.data')} key={CatalogTabsEnum.DATA}>\r\n            <Data />\r\n          </TabPane>\r\n          <TabPane tab={t('tabs.categories')} key={CatalogTabsEnum.CATEGORIES}>\r\n            <Categories />\r\n          </TabPane>\r\n        </Tabs>\r\n        <ItemAntd>\r\n          <Button\r\n            htmlType=\"submit\"\r\n            type=\"primary\"\r\n            size=\"large\"\r\n            disabled={loading}\r\n          >\r\n            {t('detail.form.submit')}\r\n          </Button>\r\n        </ItemAntd>\r\n      </FormFormikAntd>\r\n    </Formik>\r\n  )\r\n}\r\n","import { CatalogItemFieldData } from 'model/api/CatalogItemDetailFieldData'\r\nimport { isFieldValueMultilingual } from 'types/isFieldValueMultilingual'\r\nimport { CatalogDetailContext } from '..'\r\nimport { useContext } from 'react'\r\n\r\nexport const useGetInitialValues = () => {\r\n  const { data } = useContext(CatalogDetailContext)\r\n\r\n  const initialValues = { fields: {}, categories: [] }\r\n\r\n  if (data) {\r\n    initialValues.categories = data.categories\r\n\r\n    data.fields.forEach(field => {\r\n      const { is_multilingual, id } = field\r\n\r\n      if (!!is_multilingual) {\r\n        const fieldData = field.data as { [key: string]: CatalogItemFieldData }\r\n\r\n        initialValues.fields[id] = {}\r\n\r\n        Object.keys(fieldData).forEach(language => {\r\n          initialValues.fields[id][language] = {}\r\n\r\n          initialValues.fields[id][language]['value'] =\r\n            fieldData[language] && fieldData[language].value\r\n              ? fieldData[language].value\r\n              : undefined\r\n          initialValues.fields[id][language]['extra_content'] =\r\n            fieldData[language] && fieldData[language].extra_content\r\n              ? fieldData[language].extra_content\r\n              : undefined\r\n        })\r\n      } else {\r\n        const fieldData: CatalogItemFieldData | null = !isFieldValueMultilingual(\r\n          field.data\r\n        )\r\n          ? field.data\r\n          : null\r\n\r\n        initialValues.fields[id] = {}\r\n\r\n        initialValues.fields[id]['value'] =\r\n          fieldData && fieldData.value ? fieldData.value : undefined\r\n        initialValues.fields[id]['extra_content'] =\r\n          fieldData && fieldData.extra_content\r\n            ? fieldData.extra_content\r\n            : undefined\r\n      }\r\n    })\r\n  }\r\n\r\n  return initialValues\r\n}\r\n","import React, {\r\n  useContext,\r\n  useEffect,\r\n  createContext,\r\n  useState,\r\n  useRef,\r\n  useCallback,\r\n} from 'react'\r\nimport { RouteComponentProps } from '@reach/router'\r\nimport { useTranslation } from 'react-i18next'\r\nimport { SceneTitle } from 'components/SceneTitle'\r\nimport { AuthenticatedLayoutContext } from 'components/Layout/AuthenticatedLayout'\r\nimport { BackButton } from 'components/BackButton'\r\nimport { CatalogItemsApi } from 'api/CatalogItems'\r\nimport axios, { CancelTokenSource } from 'axios'\r\nimport { CreateForm } from './components/CreateForm'\r\nimport { CatalogItemDetail } from 'model/api/CatalogItemDetail'\r\nimport { DetailInfo } from './components/DetailInfo'\r\nimport { Form } from './components/Form'\r\n\r\nexport interface CatalogDetailContextProps {\r\n  data: CatalogItemDetail | undefined\r\n  getData: () => Promise<void>\r\n  loading: boolean\r\n  setLoading: React.Dispatch<React.SetStateAction<boolean>>\r\n}\r\n\r\nexport const CatalogDetailContext = createContext(\r\n  {} as CatalogDetailContextProps\r\n)\r\n\r\nexport interface CatalogDetailProps extends RouteComponentProps {\r\n  catalogItemId?: number\r\n  view: 'new' | 'detail'\r\n}\r\n\r\nexport const CatalogDetail: React.FC<CatalogDetailProps> = ({\r\n  catalogItemId,\r\n  view,\r\n}) => {\r\n  const { t } = useTranslation('catalog-detail')\r\n  const { setSceneTitle } = useContext(AuthenticatedLayoutContext)\r\n  const [loading, setLoading] = useState(false)\r\n  const [data, setData] = useState<CatalogItemDetail>()\r\n  const cancelTokenRef = useRef<CancelTokenSource>(axios.CancelToken.source())\r\n\r\n  const getData = useCallback(async () => {\r\n    if (catalogItemId && view === 'detail') {\r\n      setLoading(true)\r\n\r\n      const { data } = await CatalogItemsApi.getCatalogItem(catalogItemId, {\r\n        cancelToken: cancelTokenRef.current.token,\r\n      })\r\n\r\n      setData(data)\r\n      setLoading(false)\r\n    }\r\n  }, [catalogItemId, view])\r\n\r\n  useEffect(() => {\r\n    setSceneTitle(\r\n      <SceneTitle\r\n        title={t(view === 'detail' ? 'scene-title.detail' : 'scene-title.new')}\r\n        extraContent={\r\n          <BackButton\r\n            title={t('scene-title.back-to-catalog-items')}\r\n            to=\"/catalog\"\r\n          />\r\n        }\r\n      />\r\n    )\r\n  }, [setSceneTitle, t, view])\r\n\r\n  useEffect(() => {\r\n    getData()\r\n  }, [getData])\r\n\r\n  useEffect(() => {\r\n    const cancelToken = cancelTokenRef.current\r\n\r\n    return () => cancelToken.cancel()\r\n  }, [])\r\n\r\n  if (view === 'new') {\r\n    return <CreateForm />\r\n  } else {\r\n    return (\r\n      <CatalogDetailContext.Provider\r\n        value={{ data, getData, loading, setLoading }}\r\n      >\r\n        <DetailInfo />\r\n        <Form />\r\n      </CatalogDetailContext.Provider>\r\n    )\r\n  }\r\n}\r\n","import React, { useCallback, useState, useEffect, useRef } from 'react'\r\nimport { useTranslation } from 'react-i18next'\r\nimport axios, { CancelToken, CancelTokenSource } from 'axios'\r\nimport { CatalogCategoriesApi } from 'api/CatalogCategories'\r\nimport { CatalogCategory } from 'model/api/CatalogCategory'\r\nimport styled from 'styled-components'\r\nimport { COLORS } from 'constants/colors'\r\nimport { Tag, Skeleton, notification } from 'antd'\r\nimport { Dropdown, DropdownAction } from './Dropdown'\r\nimport { navigate } from '@reach/router'\r\n\r\ninterface ItemProps {\r\n  depth: number\r\n}\r\n\r\nconst Item = styled.div<ItemProps>`\r\n  display: grid;\r\n  grid-gap: 12px;\r\n  grid-template-columns: min-content min-content auto;\r\n  margin-bottom: 6px;\r\n  margin-left: ${({ depth }) => depth > 0 && depth * 24}px;\r\n  padding: 8px 24px;\r\n  border: 1px solid ${COLORS.gray2};\r\n  border-radius: 2px;\r\n`\r\n\r\nconst Name = styled.div`\r\n  white-space: nowrap;\r\n`\r\n\r\nconst StyledDropdown = styled(Dropdown)`\r\n  justify-self: end;\r\n`\r\n\r\nexport const Tree: React.FC = () => {\r\n  const { t } = useTranslation('catalog-categories')\r\n  const [data, setData] = useState<CatalogCategory[]>([])\r\n  const [loading, setLoading] = useState(false)\r\n  const cancelTokenRef = useRef<CancelTokenSource>(axios.CancelToken.source())\r\n  const { PUBLIC_URL } = process.env\r\n\r\n  const getData = useCallback(async (cancelToken: CancelToken) => {\r\n    try {\r\n      setLoading(true)\r\n\r\n      const response = await CatalogCategoriesApi.getCatalogCategories(\r\n        undefined,\r\n        undefined,\r\n        undefined,\r\n        undefined,\r\n        {\r\n          cancelToken,\r\n        }\r\n      )\r\n\r\n      setData(response.data)\r\n      setLoading(false)\r\n    } catch (e) {\r\n      setLoading(false)\r\n    }\r\n  }, [])\r\n\r\n  const handleDropdownClick = useCallback(\r\n    async (action: DropdownAction, id: number) => {\r\n      const cancelToken = cancelTokenRef.current.token\r\n\r\n      switch (action) {\r\n        case 'create':\r\n          navigate(PUBLIC_URL + '/catalog/categories/new?parentId=' + id)\r\n          break\r\n        case 'edit':\r\n          navigate(PUBLIC_URL + '/catalog/categories/' + id)\r\n          break\r\n        case 'delete':\r\n          try {\r\n            await CatalogCategoriesApi.deleteCatalogCategory(id, {\r\n              cancelToken,\r\n            })\r\n\r\n            getData(cancelToken)\r\n\r\n            notification.success({ message: t('delete-success') })\r\n          } catch (e) {}\r\n          break\r\n        case 'publish':\r\n          try {\r\n            await CatalogCategoriesApi.publishCatalogCategory(id, {\r\n              cancelToken,\r\n            })\r\n\r\n            getData(cancelToken)\r\n\r\n            notification.success({ message: t('publish-success') })\r\n          } catch (e) {}\r\n          break\r\n        case 'unpublish':\r\n          try {\r\n            await CatalogCategoriesApi.unpublishCatalogCategory(id, {\r\n              cancelToken,\r\n            })\r\n\r\n            getData(cancelToken)\r\n\r\n            notification.success({ message: t('unpublish-success') })\r\n          } catch (e) {}\r\n          break\r\n        default:\r\n          break\r\n      }\r\n    },\r\n    [PUBLIC_URL, t, getData]\r\n  )\r\n\r\n  const renderTree = useCallback(\r\n    (children: CatalogCategory[], depth: number) => {\r\n      return children.map(({ id, name, published, items_count, children }) => (\r\n        <>\r\n          <Item key={id} depth={depth}>\r\n            <Name>\r\n              {name} {t('tree.items-count', { itemsCount: items_count })}\r\n            </Name>\r\n            {published ? (\r\n              <Tag color={COLORS.green2}>{t('tree.published')}</Tag>\r\n            ) : (\r\n              <div />\r\n            )}\r\n            <StyledDropdown\r\n              onClick={action => handleDropdownClick(action, id)}\r\n            />\r\n          </Item>\r\n          {children && (\r\n            <div key={id + '_children'}>{renderTree(children, depth + 1)}</div>\r\n          )}\r\n        </>\r\n      ))\r\n    },\r\n    [t, handleDropdownClick]\r\n  )\r\n\r\n  useEffect(() => {\r\n    const cancelTokenSource = axios.CancelToken.source()\r\n\r\n    getData(cancelTokenSource.token)\r\n\r\n    return () => cancelTokenSource.cancel()\r\n  }, [getData])\r\n\r\n  useEffect(() => {\r\n    const cancelTokenSource = cancelTokenRef.current\r\n\r\n    return () => cancelTokenSource.cancel()\r\n  }, [])\r\n\r\n  if (loading) {\r\n    return <Skeleton active loading paragraph={{ rows: 4, width: '400px' }} />\r\n  }\r\n\r\n  return <>{renderTree(data, 0)}</>\r\n}\r\n","import {\r\n  Dropdown as DropdownBase,\r\n  DropdownItemProps,\r\n} from 'components/Dropdown'\r\nimport { DropdownButton } from 'components/DropdownButton'\r\nimport React, { useCallback } from 'react'\r\nimport { useTranslation } from 'react-i18next'\r\n\r\nexport type DropdownAction = 'edit' | 'publish' | 'unpublish' | 'create' | 'delete'\r\n\r\nexport interface DropdownProps {\r\n  onClick: (action: DropdownAction) => void\r\n  disabledActions?: DropdownAction[]\r\n  className?: string\r\n}\r\n\r\nexport const Dropdown: React.FC<DropdownProps> = ({ onClick, className }) => {\r\n  const { t } = useTranslation('catalog-categories')\r\n\r\n  const handleClick = useCallback((action: DropdownAction) => {\r\n    onClick(action)\r\n  }, [onClick])\r\n\r\n  const items: DropdownItemProps[] = [\r\n    {\r\n      children: t('tree.context-menu.edit'),\r\n      onClick: () => handleClick('edit'),\r\n      icon: 'pen',\r\n    },   \r\n    {\r\n      children: t('tree.context-menu.create'),\r\n      onClick: () => handleClick('create'),\r\n      icon: 'plus-square',\r\n    }, \r\n    {\r\n      children: t('tree.context-menu.publish'),\r\n      onClick: () => handleClick('publish'),\r\n      icon: 'cloud-upload-alt',\r\n    },   \r\n    {\r\n      children: t('tree.context-menu.unpublish'),\r\n      onClick: () => handleClick('unpublish'),\r\n      icon: 'cloud-download-alt',\r\n    },       \r\n    {\r\n      children: t('tree.context-menu.delete'),\r\n      onClick: () => handleClick('delete'),\r\n      icon: 'trash-alt',\r\n      dialog: {\r\n        text: t('tree.context-menu.delete-dialog.text'),\r\n        cancel: t('tree.context-menu.delete-dialog.cancel'),\r\n        confirm: t('tree.context-menu.delete-dialog.confirm')\r\n      }\r\n    },\r\n  ]\r\n\r\n  return (\r\n    <div className={className}>\r\n      <DropdownBase items={items} data-test=\"Dropdown\">\r\n        <DropdownButton size=\"small\" />\r\n      </DropdownBase>\r\n    </div>\r\n  )\r\n}\r\n","import React, { useContext, useEffect, useCallback } from 'react'\r\nimport { RouteComponentProps, navigate } from '@reach/router'\r\nimport { useTranslation } from 'react-i18next'\r\nimport { SceneTitle } from 'components/SceneTitle'\r\nimport { AuthenticatedLayoutContext } from 'components/Layout/AuthenticatedLayout'\r\nimport { Space } from 'antd'\r\nimport { IconButton } from 'components/IconButton'\r\nimport { Tree } from './components/Tree'\r\n\r\nexport const CatalogCategories: React.FC<RouteComponentProps> = () => {\r\n  const { PUBLIC_URL } = process.env\r\n  const { t } = useTranslation('catalog-categories')\r\n  const { setSceneTitle } = useContext(AuthenticatedLayoutContext)\r\n\r\n  const handleCreateCatalogCategory = useCallback(() => {\r\n    navigate(PUBLIC_URL + '/catalog/categories/new')\r\n  }, [PUBLIC_URL])\r\n\r\n  useEffect(() => {\r\n    setSceneTitle(<SceneTitle title={t('scene-title')} />)\r\n  }, [setSceneTitle, t])\r\n\r\n  return (\r\n    <Space size=\"large\" direction=\"vertical\" style={{ width: '100%' }}>\r\n      <IconButton\r\n        size=\"middle\"\r\n        type=\"primary\"\r\n        icon=\"plus\"\r\n        onClick={handleCreateCatalogCategory}\r\n      >\r\n        {t('create-new-catalog-category')}\r\n      </IconButton>\r\n      <Tree />\r\n    </Space>\r\n  )\r\n}\r\n","import React, { useCallback, useState, useEffect, useRef } from 'react'\r\nimport { Formik, FormikProps } from 'formik'\r\nimport { Input, Form as FormFormikAntd, TreeSelect } from 'formik-antd'\r\nimport { FormikFormItem as Item } from 'components/FormikFormItem'\r\nimport { Button, Form as FormAntd, notification, Space } from 'antd'\r\nimport { useTranslation } from 'react-i18next'\r\nimport { validateSchema } from 'config/yup'\r\nimport * as Yup from 'yup'\r\nimport axios, { CancelToken, CancelTokenSource } from 'axios'\r\nimport { CatalogLanguagesApi } from 'api/CatalogLanguages'\r\nimport { navigate } from '@reach/router'\r\nimport { CatalogLanguage } from 'model/api/CatalogLanguage'\r\nimport { CatalogCategoryDetail } from 'model/api/CatalogCategoryDetail'\r\nimport { CatalogCategoriesApi } from 'api/CatalogCategories'\r\nimport {\r\n  mapCatalogCategories,\r\n  MappedCatalogCategory,\r\n} from 'mappers/mapCatalogCategories'\r\nimport { objectToFormData } from 'object-to-formdata'\r\nimport { FieldGroup } from 'scenes/CatalogDetail/components/Fields/styles'\r\nimport { RichTextFormik } from 'components/RichTextFormik'\r\n\r\nconst { Item: ItemAntd } = FormAntd\r\n\r\nexport interface CatalogCategory {}\r\n\r\nexport interface FormValuesValue {\r\n  name?: string\r\n  description?: string\r\n}\r\n\r\nexport interface FormValues {\r\n  name?: string\r\n  parent_id?: number | null\r\n  weight: number\r\n  values?: Array<{\r\n    [key: string]: FormValuesValue\r\n  }>\r\n}\r\n\r\nexport const FormSchema = Yup.object().shape<FormValues>({\r\n  name: Yup.string().required(),\r\n  parent_id: Yup.number().nullable(),\r\n  weight: Yup.number(),\r\n})\r\n\r\nexport interface FormProps {\r\n  catalogCategoryId?: number\r\n  parentId?: number\r\n  view: 'new' | 'detail'\r\n}\r\n\r\nexport const Form: React.FC<FormProps> = ({\r\n  catalogCategoryId,\r\n  parentId,\r\n  view,\r\n}) => {\r\n  const { PUBLIC_URL } = process.env\r\n  const { t } = useTranslation('catalog-category-detail')\r\n  const [languages, setLanguages] = useState<CatalogLanguage[]>()\r\n  const [data, setData] = useState<CatalogCategoryDetail>()\r\n  const [categories, setCategories] = useState<MappedCatalogCategory[]>()\r\n  const [loading, setLoading] = useState(false)\r\n  const cancelTokenRef = useRef<CancelTokenSource>(axios.CancelToken.source())\r\n  const submitFormSource = useRef<'create' | 'create-another'>()\r\n\r\n  const getInitialValues = useCallback(() => {\r\n    if (languages) {\r\n      const languageValues = languages.map(({ code }) => ({\r\n        [code]: {\r\n          name: undefined,\r\n          description: undefined,\r\n        },\r\n      }))\r\n\r\n      if (view === 'detail' && data) {\r\n        return {\r\n          name: data.name,\r\n          parent_id: data.parent_id || 0,\r\n          weight: data.weight,\r\n          values: {\r\n            ...languageValues,\r\n            ...data.data,\r\n          },\r\n        } as FormValues\r\n      } else {\r\n        return {\r\n          name: undefined,\r\n          parent_id: parentId || 0,\r\n          weight: 50,\r\n          values: languageValues,\r\n        } as FormValues\r\n      }\r\n    }\r\n  }, [data, languages, parentId, view])\r\n\r\n  const getData = useCallback(\r\n    async (cancelToken: CancelToken) => {\r\n      if (view === 'detail' && catalogCategoryId) {\r\n        try {\r\n          setLoading(true)\r\n\r\n          const { data } = await CatalogCategoriesApi.getCatalogCategory(\r\n            catalogCategoryId,\r\n            undefined,\r\n            {\r\n              cancelToken,\r\n            }\r\n          )\r\n\r\n          setData(data)\r\n          setLoading(false)\r\n        } catch (e) {\r\n          setLoading(false)\r\n        }\r\n      }\r\n    },\r\n    [view, catalogCategoryId]\r\n  )\r\n\r\n  const getCatalogCategories = useCallback(\r\n    async (cancelToken: CancelToken) => {\r\n      try {\r\n        setLoading(true)\r\n        const { data } = await CatalogCategoriesApi.getCatalogCategories(\r\n          undefined,\r\n          undefined,\r\n          undefined,\r\n          undefined,\r\n          {\r\n            cancelToken,\r\n          }\r\n        )\r\n\r\n        setCategories(mapCatalogCategories(data, t))\r\n        setLoading(false)\r\n      } catch (e) {\r\n        setLoading(false)\r\n      }\r\n    },\r\n    [t]\r\n  )\r\n\r\n  const getLanguages = useCallback(async (cancelToken: CancelToken) => {\r\n    try {\r\n      setLoading(true)\r\n\r\n      const { data } = await CatalogLanguagesApi.getAllCatalogLanguages({\r\n        cancelToken,\r\n      })\r\n\r\n      setLanguages(data)\r\n      setLoading(false)\r\n    } catch (e) {\r\n      setLoading(false)\r\n    }\r\n  }, [])\r\n\r\n  const handleSubmitForm = useCallback(\r\n    (\r\n      source: 'create' | 'create-another',\r\n      submitForm: (() => Promise<void>) & (() => Promise<any>)\r\n    ) => {\r\n      submitFormSource.current = source\r\n      submitForm()\r\n    },\r\n    []\r\n  )\r\n\r\n  const handleSubmit = useCallback(\r\n    async (data: Required<FormValues>) => {\r\n      try {\r\n        setLoading(true)\r\n\r\n        if (data.parent_id === 0) {\r\n          delete data.parent_id\r\n        }\r\n\r\n        const formData = objectToFormData(data, { booleansAsIntegers: true })\r\n\r\n        if (view === 'new') {\r\n          await CatalogCategoriesApi.createCatalogCategory(formData, {\r\n            cancelToken: cancelTokenRef.current.token,\r\n          })\r\n\r\n          notification.success({ message: t('create-success') })\r\n\r\n          if (submitFormSource.current === 'create') {\r\n            navigate(PUBLIC_URL + '/catalog/categories')\r\n          } else {\r\n            let to = PUBLIC_URL + '/catalog/categories/new'\r\n\r\n            if (data.parent_id) {\r\n              to = to + '?parentId=' + data.parent_id\r\n            }\r\n\r\n            navigate(PUBLIC_URL + '/redirect-to', {\r\n              state: {\r\n                to,\r\n              },\r\n            })\r\n          }\r\n        } else if (view === 'detail' && catalogCategoryId) {\r\n          await CatalogCategoriesApi.updateCatalogCategory(\r\n            catalogCategoryId,\r\n            formData,\r\n            {\r\n              cancelToken: cancelTokenRef.current.token,\r\n            }\r\n          )\r\n\r\n          notification.success({ message: t('update-success') })\r\n          navigate(PUBLIC_URL + '/catalog/categories')\r\n        }\r\n      } catch (e) {\r\n        setLoading(false)\r\n      }\r\n    },\r\n    [PUBLIC_URL, view, t, catalogCategoryId]\r\n  )\r\n\r\n  const renderForm = useCallback(\r\n    ({ submitForm }: FormikProps<FormValues>) => (\r\n      <FormFormikAntd layout=\"vertical\">\r\n        <Item label={t('form.name')} name=\"name\">\r\n          <Input name=\"name\" />\r\n        </Item>\r\n        <Item label={t('form.parent')} name=\"parent_id\">\r\n          {categories ? (\r\n            <TreeSelect\r\n              style={{ width: '100%' }}\r\n              name=\"parent_id\"\r\n              defaultActiveFirstOption\r\n              dropdownStyle={{ maxHeight: 400, overflow: 'auto' }}\r\n              treeData={categories}\r\n              placeholder=\"Please select\"\r\n              treeDefaultExpandAll\r\n            />\r\n          ) : (\r\n            <Input name=\"parent_id\" disabled={loading} />\r\n          )}\r\n        </Item>\r\n        <Item label={t('form.weight')} name=\"weight\">\r\n          <Input name=\"weight\" type=\"number\" />\r\n        </Item>\r\n        {languages &&\r\n          languages.map(({ code, name }) => (\r\n            <FieldGroup key={code}>\r\n              <Item\r\n                label={t('form.name-localized', { language: name })}\r\n                name={`values[${code}][name]`}\r\n              >\r\n                <Input name={`values[${code}][name]`} />\r\n              </Item>\r\n              <Item\r\n                label={t('form.description-localized', { language: name })}\r\n                name={`values[${code}][description]`}\r\n              >\r\n                <RichTextFormik name={`values[${code}][description]`} />\r\n              </Item>\r\n            </FieldGroup>\r\n          ))}\r\n        <ItemAntd>\r\n          {view === 'new' ? (\r\n            <Space size=\"middle\" direction=\"horizontal\">\r\n              <Button\r\n                htmlType=\"submit\"\r\n                type=\"primary\"\r\n                size=\"large\"\r\n                disabled={loading}\r\n                onClick={() => handleSubmitForm('create', submitForm)}\r\n              >\r\n                {t('form.submit.new')}\r\n              </Button>\r\n              <Button\r\n                htmlType=\"button\"\r\n                type=\"default\"\r\n                size=\"large\"\r\n                disabled={loading}\r\n                onClick={() => handleSubmitForm('create-another', submitForm)}\r\n              >\r\n                {t('form.submit.create-and-create-another')}\r\n              </Button>\r\n            </Space>\r\n          ) : (\r\n            <Button\r\n              htmlType=\"submit\"\r\n              type=\"primary\"\r\n              size=\"large\"\r\n              disabled={loading}\r\n            >\r\n              {t('form.submit.detail')}\r\n            </Button>\r\n          )}\r\n        </ItemAntd>\r\n      </FormFormikAntd>\r\n    ),\r\n    [t, view, categories, languages, loading, handleSubmitForm]\r\n  )\r\n\r\n  useEffect(() => {\r\n    const cancelTokenSource = axios.CancelToken.source()\r\n\r\n    getData(cancelTokenSource.token)\r\n    getLanguages(cancelTokenSource.token)\r\n    getCatalogCategories(cancelTokenSource.token)\r\n\r\n    return () => cancelTokenSource.cancel()\r\n  }, [getData, getLanguages, getCatalogCategories])\r\n\r\n  useEffect(() => {\r\n    const cancelToken = cancelTokenRef.current\r\n\r\n    return () => cancelToken.cancel()\r\n  }, [])\r\n\r\n  return (\r\n    <Formik<FormValues>\r\n      initialValues={getInitialValues()}\r\n      enableReinitialize\r\n      validate={values => validateSchema(values, FormSchema)}\r\n      onSubmit={handleSubmit}\r\n    >\r\n      {props => renderForm(props)}\r\n    </Formik>\r\n  )\r\n}\r\n","import React, { useContext, useEffect } from 'react'\r\nimport { RouteComponentProps } from '@reach/router'\r\nimport { useTranslation } from 'react-i18next'\r\nimport { SceneTitle } from 'components/SceneTitle'\r\nimport { AuthenticatedLayoutContext } from 'components/Layout/AuthenticatedLayout'\r\nimport { Form } from './components/Form'\r\nimport { BackButton } from 'components/BackButton'\r\nimport { parse } from 'query-string'\r\n\r\nexport interface CatalogCategoryDetailProps extends RouteComponentProps {\r\n  catalogCategoryId?: number\r\n  view: 'new' | 'detail'\r\n}\r\n\r\nexport const CatalogCategoryDetail: React.FC<CatalogCategoryDetailProps> = ({\r\n  catalogCategoryId,\r\n  view,\r\n  location,\r\n}) => {\r\n  const { t } = useTranslation('catalog-category-detail')\r\n  const { setSceneTitle } = useContext(AuthenticatedLayoutContext)\r\n  const { parentId } = parse(location.search)\r\n\r\n  useEffect(() => {\r\n    setSceneTitle(\r\n      <SceneTitle\r\n        title={t(view === 'detail' ? 'scene-title.detail' : 'scene-title.new')}\r\n        extraContent={\r\n          <BackButton\r\n            title={t('scene-title.back-to-categories')}\r\n            to=\"/catalog/categories\"\r\n          />\r\n        }\r\n      />\r\n    )\r\n  }, [setSceneTitle, t, view])\r\n\r\n  return (\r\n    <Form\r\n      parentId={parentId ? Number(parentId) : undefined}\r\n      catalogCategoryId={catalogCategoryId}\r\n      view={view}\r\n    />\r\n  )\r\n}\r\n","import React, { useEffect } from 'react'\r\nimport { RouteComponentProps } from '@reach/router'\r\n\r\nexport interface ScrollToTopProps extends RouteComponentProps {\r\n  children: React.ReactNode | React.ReactNodeArray\r\n}\r\n\r\nexport const ScrollToTop: React.FC<ScrollToTopProps> = ({\r\n  children,\r\n  location,\r\n}) => {\r\n  useEffect(() => { \r\n    console.log('effect')\r\n    \r\n    window.scrollTo(0, 0) }, [location.pathname])\r\n\r\n  return <>{children}</>\r\n}\r\n","import {\r\n  Dropdown as DropdownBase,\r\n  DropdownItemProps,\r\n} from 'components/Dropdown'\r\nimport { DropdownButton } from 'components/DropdownButton'\r\nimport React from 'react'\r\nimport { useTranslation } from 'react-i18next'\r\n\r\nexport type DropdownAction = 'edit' | 'delete'\r\n\r\nexport interface DropdownProps {\r\n  onClick: (action: DropdownAction) => void\r\n  disabledActions?: DropdownAction[]\r\n}\r\n\r\nexport const Dropdown: React.FC<DropdownProps> = ({ onClick }) => {\r\n  const { t } = useTranslation('catalog-currencies')\r\n\r\n  const handleClick = (action: DropdownAction) => {\r\n    onClick(action)\r\n  }\r\n\r\n  const items: DropdownItemProps[] = [\r\n    {\r\n      children: t('table.context-menu.edit'),\r\n      onClick: () => handleClick('edit'),\r\n      icon: 'pen',\r\n    },\r\n    {\r\n      children: t('table.context-menu.delete'),\r\n      onClick: () => handleClick('delete'),\r\n      icon: 'trash-alt',\r\n      dialog: {\r\n        text: t('table.context-menu.delete-dialog.text'),\r\n        cancel: t('table.context-menu.delete-dialog.cancel'),\r\n        confirm: t('table.context-menu.delete-dialog.confirm'),\r\n      },\r\n    },\r\n  ]\r\n\r\n  return (\r\n    <div>\r\n      <DropdownBase items={items} data-test=\"Dropdown\">\r\n        <DropdownButton size=\"small\" />\r\n      </DropdownBase>\r\n    </div>\r\n  )\r\n}\r\n","import React from 'react'\r\nimport { ColumnProps } from 'antd/es/table'\r\nimport { MappedCatalogCurrency } from './mapCatalogCurrencies'\r\nimport i18next from 'i18next'\r\nimport { DropdownAction, Dropdown } from '../components/Dropdown'\r\n\r\nexport const getCatalogCurrenciesColumns = (\r\n  t: i18next.TFunction,\r\n  onClick?: (action: DropdownAction, id: number) => void\r\n): ColumnProps<any>[] => [\r\n  {\r\n    key: 'id',\r\n    dataIndex: 'id',\r\n    title: t('table.columns.id'),\r\n    width: 100,\r\n    fixed: 'left',\r\n  },\r\n  {\r\n    key: 'code',\r\n    dataIndex: 'code',\r\n    title: t('table.columns.code'),\r\n    width: 150,\r\n  },\r\n  {\r\n    key: 'name',\r\n    dataIndex: 'name',\r\n    title: t('table.columns.name'),\r\n    width: 200,\r\n  },\r\n  {\r\n    key: 'symbol',\r\n    dataIndex: 'symbol',\r\n    title: t('table.columns.symbol'),\r\n    width: 200,\r\n  },\r\n  {\r\n    key: 'rate',\r\n    dataIndex: 'rate',\r\n    title: t('table.columns.rate'),\r\n    width: 150,\r\n  },\r\n  {\r\n    key: 'is_main',\r\n    dataIndex: 'is_main',\r\n    title: t('table.columns.is-main'),\r\n    render: (value: boolean) => (value ? t('table.yes') : t('table.no')),\r\n    width: 100,\r\n  },\r\n  {\r\n    key: 'context_menu',\r\n    dataIndex: 'context_menu',\r\n    width: 60,\r\n    render: (_, { id }: MappedCatalogCurrency) => (\r\n      <Dropdown\r\n        onClick={(action: DropdownAction) => onClick && onClick(action, id)}\r\n      />\r\n    ),\r\n    fixed: 'right',\r\n  },\r\n]\r\n","import { CatalogCurrency } from 'model/api/CatalogCurrency'\r\n\r\nexport interface MappedCatalogCurrency {\r\n  key: string\r\n  id: number\r\n  name: string\r\n  code: string\r\n  symbol: string\r\n  is_main: boolean\r\n  rate: number\r\n}\r\n\r\nexport const mapCatalogCurrencies = (\r\n  data: CatalogCurrency[]\r\n): MappedCatalogCurrency[] =>\r\n  data.map(({ id, name, code, symbol, is_main, rate }) => ({\r\n    key: String(id),\r\n    id,\r\n    name,\r\n    code,\r\n    symbol,\r\n    is_main: !!is_main,\r\n    rate,\r\n  }))\r\n","import React, { useCallback, useState, useEffect, useRef } from 'react'\r\nimport { Table as TableBase } from 'components/Table'\r\nimport { CatalogCurrenciesApi } from 'api/CatalogCurrencies'\r\nimport axios, { CancelTokenSource } from 'axios'\r\nimport { useTranslation } from 'react-i18next'\r\nimport { DropdownAction } from './Dropdown'\r\nimport { navigate } from '@reach/router'\r\nimport { notification } from 'antd'\r\nimport { getCatalogCurrenciesColumns } from '../utils/getCatalogCurrenciesColumns'\r\nimport {\r\n  mapCatalogCurrencies,\r\n  MappedCatalogCurrency,\r\n} from '../utils/mapCatalogCurrencies'\r\n\r\nexport const Table: React.FC = () => {\r\n  const { PUBLIC_URL } = process.env\r\n  const { t } = useTranslation('catalog-currencies')\r\n  const [data, setData] = useState<MappedCatalogCurrency[]>([])\r\n  const [loading, setLoading] = useState(false)\r\n  const [total, setTotal] = useState(0)\r\n  const [page, setPage] = useState(1)\r\n  const [pageSize, setPageSize] = useState(0)\r\n  const cancelTokenRef = useRef<CancelTokenSource>(axios.CancelToken.source())\r\n\r\n  const getData = useCallback(async () => {\r\n    setLoading(true)\r\n\r\n    const {\r\n      data: { data, total, per_page },\r\n    } = await CatalogCurrenciesApi.getCatalogCurrencies(page, pageSize, {\r\n      cancelToken: cancelTokenRef.current.token,\r\n    })\r\n\r\n    setData(mapCatalogCurrencies(data))\r\n    setTotal(total)\r\n    setPageSize(per_page)\r\n    setLoading(false)\r\n  }, [page, pageSize])\r\n\r\n  const handleActionClick = useCallback(\r\n    async (action: DropdownAction, catalogCurrencyId: number) => {\r\n      switch (action) {\r\n        case 'edit':\r\n          navigate(PUBLIC_URL + '/catalog/currencies/' + catalogCurrencyId)\r\n          break\r\n        case 'delete':\r\n          try {\r\n            /* await CatalogCurrenciesApi.deleteCatalogLanguage(code, {\r\n              cancelToken: cancelTokenRef.current.token,\r\n            }) */\r\n\r\n            notification.success({\r\n              message: t('table.delete-success'),\r\n            })\r\n\r\n            getData()\r\n          } catch (e) {}\r\n          break\r\n        default:\r\n          break\r\n      }\r\n    },\r\n    [PUBLIC_URL, getData, t]\r\n  )\r\n\r\n  const handlePageChange = useCallback((page: number) => {\r\n    setPage(page)\r\n  }, [])\r\n\r\n  useEffect(() => {\r\n    getData()\r\n  }, [getData])\r\n\r\n  useEffect(() => {\r\n    const cancelToken = cancelTokenRef.current\r\n\r\n    return () => cancelToken.cancel()\r\n  }, [])\r\n\r\n  return (\r\n    <TableBase\r\n      columns={getCatalogCurrenciesColumns(t, handleActionClick)}\r\n      dataSource={data}\r\n      loading={loading}\r\n      isScrollable\r\n      pagination={{\r\n        current: page,\r\n        pageSize,\r\n        total,\r\n        onChange: handlePageChange,\r\n      }}\r\n    />\r\n  )\r\n}\r\n","import React, { useContext, useEffect, useCallback } from 'react'\r\nimport { RouteComponentProps, navigate } from '@reach/router'\r\nimport { useTranslation } from 'react-i18next'\r\nimport { SceneTitle } from 'components/SceneTitle'\r\nimport { AuthenticatedLayoutContext } from 'components/Layout/AuthenticatedLayout'\r\nimport { Table } from './components/Table'\r\nimport { Space } from 'antd'\r\nimport { IconButton } from 'components/IconButton'\r\n\r\nexport const CatalogCurrencies: React.FC<RouteComponentProps> = () => {\r\n  const { PUBLIC_URL } = process.env\r\n  const { t } = useTranslation('catalog-currencies')\r\n  const { setSceneTitle } = useContext(AuthenticatedLayoutContext)\r\n\r\n  const handleCreateCatalogItem = useCallback(() => {\r\n    navigate(PUBLIC_URL + '/catalog/currencies/new')\r\n  }, [PUBLIC_URL])\r\n\r\n  useEffect(() => {\r\n    setSceneTitle(<SceneTitle title={t('scene-title')} />)\r\n  }, [setSceneTitle, t])\r\n\r\n  return (\r\n    <Space size=\"large\" direction=\"vertical\" style={{ width: '100%' }}>\r\n      <IconButton\r\n        size=\"middle\"\r\n        type=\"primary\"\r\n        icon=\"plus\"\r\n        onClick={handleCreateCatalogItem}\r\n      >\r\n        {t('create-new-catalog-currency')}\r\n      </IconButton>\r\n      <Table />\r\n    </Space>\r\n  )\r\n}\r\n","import { CatalogCurrency } from 'model/api/CatalogCurrency'\r\n\r\nexport interface MappedCatalogCurrency\r\n  extends Omit<\r\n    CatalogCurrency,\r\n    'is_main' | 'inherits_tax_rate' | 'fetch_currency_rate'\r\n  > {\r\n  is_main: boolean\r\n  inherits_tax_rate: boolean\r\n  fetch_currency_rate: boolean\r\n}\r\n\r\nexport const mapCatalogCurrency = ({\r\n  id,\r\n  name,\r\n  code,\r\n  symbol,\r\n  rate,\r\n  decimal_places,\r\n  is_main,\r\n  inherits_tax_rate,\r\n  fetch_currency_rate,\r\n}: CatalogCurrency): MappedCatalogCurrency => ({\r\n  id,\r\n  name,\r\n  code,\r\n  symbol,\r\n  rate,\r\n  decimal_places,\r\n  is_main: !!is_main,\r\n  inherits_tax_rate: !!inherits_tax_rate,\r\n  fetch_currency_rate: !!fetch_currency_rate,\r\n})\r\n","import React, { useCallback, useState, useEffect, useRef } from 'react'\r\nimport { Formik } from 'formik'\r\nimport { Switch, Input, Form as FormFormikAntd } from 'formik-antd'\r\nimport { FormikFormItem as Item } from 'components/FormikFormItem'\r\nimport { Button, Form as FormAntd, notification, Alert, Space } from 'antd'\r\nimport { useTranslation } from 'react-i18next'\r\nimport { validateSchema } from 'config/yup'\r\nimport * as Yup from 'yup'\r\nimport axios, { CancelToken, CancelTokenSource } from 'axios'\r\nimport { navigate } from '@reach/router'\r\nimport { CatalogCurrenciesApi } from 'api/CatalogCurrencies'\r\nimport {\r\n  MappedCatalogCurrency,\r\n  mapCatalogCurrency,\r\n} from '../utils/mapCatalogCurrency'\r\n\r\nconst { Item: ItemAntd } = FormAntd\r\n\r\nexport interface FormValues {\r\n  name?: string\r\n  code?: string\r\n  symbol?: string\r\n  rate?: number\r\n  decimal_places?: number\r\n  is_main?: boolean\r\n}\r\n\r\nexport const FormSchema = Yup.object().shape<FormValues>({\r\n  name: Yup.string().required(),\r\n  code: Yup.string().required(),\r\n  symbol: Yup.string().required(),\r\n  rate: Yup.number().required(),\r\n  decimal_places: Yup.number(),\r\n  is_main: Yup.boolean(),\r\n})\r\n\r\nexport interface FormProps {\r\n  catalogCurrencyId?: number\r\n  view: 'new' | 'detail'\r\n}\r\n\r\nexport const Form: React.FC<FormProps> = ({ catalogCurrencyId, view }) => {\r\n  const { PUBLIC_URL } = process.env\r\n  const { t } = useTranslation('catalog-currency-detail')\r\n  const [data, setData] = useState<MappedCatalogCurrency>()\r\n  const [loading, setLoading] = useState(false)\r\n  const cancelTokenRef = useRef<CancelTokenSource>(axios.CancelToken.source())\r\n  const formInitialValues: FormValues = data || {\r\n    name: undefined,\r\n    code: undefined,\r\n    symbol: undefined,\r\n    rate: 1,\r\n    decimal_places: 2,\r\n    is_main: false,\r\n  }\r\n\r\n  const getData = useCallback(\r\n    async (cancelToken: CancelToken) => {\r\n      if (view === 'detail' && catalogCurrencyId) {\r\n        setLoading(true)\r\n\r\n        const { data } = await CatalogCurrenciesApi.getCatalogCurrency(\r\n          catalogCurrencyId,\r\n          {\r\n            cancelToken,\r\n          }\r\n        )\r\n\r\n        setData(mapCatalogCurrency(data))\r\n        setLoading(false)\r\n      }\r\n    },\r\n    [view, catalogCurrencyId]\r\n  )\r\n\r\n  const handleSubmit = useCallback(\r\n    async ({\r\n      code,\r\n      decimal_places,\r\n      is_main,\r\n      name,\r\n      rate,\r\n      symbol,\r\n    }: Required<FormValues>) => {\r\n      try {\r\n        setLoading(true)\r\n        const data = new FormData()\r\n\r\n        data.append('name', name)\r\n        data.append('code', code)\r\n        data.append('symbol', symbol)\r\n        data.append('rate', String(rate))\r\n        data.append('decimal_places', String(decimal_places))\r\n\r\n        if (view === 'detail') {\r\n          data.append('is_main', String(+is_main))\r\n        } else {\r\n          data.append('is_main', '0')\r\n        }\r\n\r\n        if (view === 'new') {\r\n          const {\r\n            data: { id },\r\n          } = await CatalogCurrenciesApi.createCatalogCurrency(data, {\r\n            cancelToken: cancelTokenRef.current.token,\r\n          })\r\n\r\n          setLoading(false)\r\n\r\n          notification.success({\r\n            message: t('form.create-success'),\r\n          })\r\n\r\n          navigate(PUBLIC_URL + '/catalog/currencies/' + id)\r\n        } else if (view === 'detail') {\r\n          await CatalogCurrenciesApi.updateCatalogCurrency(\r\n            catalogCurrencyId,\r\n            data,\r\n            {\r\n              cancelToken: cancelTokenRef.current.token,\r\n            }\r\n          )\r\n\r\n          notification.success({\r\n            message: t('form.update-success'),\r\n          })\r\n\r\n          setLoading(false)\r\n\r\n          const to = PUBLIC_URL + '/catalog/currencies/' + catalogCurrencyId\r\n\r\n          navigate(PUBLIC_URL + '/redirect-to', {\r\n            state: {\r\n              to,\r\n            },\r\n          })\r\n        }\r\n      } catch (e) {\r\n        setLoading(false)\r\n      }\r\n    },\r\n    [PUBLIC_URL, view, catalogCurrencyId, t]\r\n  )\r\n\r\n  const renderForm = useCallback(() => {\r\n    return (\r\n      <FormFormikAntd layout=\"vertical\">\r\n        <Item label={t('form.name')} name=\"name\">\r\n          <Input name=\"name\" />\r\n        </Item>\r\n        <Item label={t('form.code')} name=\"code\">\r\n          <Space size=\"middle\" direction=\"vertical\" style={{ width: '100%' }}>\r\n            <Input name=\"code\" />\r\n          </Space>\r\n        </Item>\r\n        <Item label={t('form.symbol')} name=\"symbol\">\r\n          <Input name=\"symbol\" />\r\n        </Item>\r\n        <Item label={t('form.rate')} name=\"rate\">\r\n          <Input name=\"rate\" type=\"number\" />\r\n        </Item>\r\n        <Item label={t('form.decimal-places')} name=\"decimal_places\">\r\n          <Input name=\"decimal_places\" type=\"number\" />\r\n        </Item>\r\n        <Item label={t('form.is-main')} name=\"is_main\">\r\n          <Space size=\"middle\" direction=\"vertical\" style={{ width: '100%' }}>\r\n            <Switch\r\n              name=\"is_main\"\r\n              disabled={view === 'new' || (data && data.is_main)}\r\n            />\r\n\r\n            {view === 'new' ||\r\n              (data && data.is_main && (\r\n                <Alert type=\"info\" message={t('form.is-main-info')} />\r\n              ))}\r\n\r\n            {view === 'new' && (\r\n              <Alert type=\"info\" message={t('form.is-main-info-new')} />\r\n            )}\r\n\r\n            {view === 'detail' && (\r\n              <Alert\r\n                type=\"warning\"\r\n                message={t('form.is-main-warning-detail')}\r\n              />\r\n            )}\r\n          </Space>\r\n        </Item>\r\n        <ItemAntd>\r\n          <Button\r\n            htmlType=\"submit\"\r\n            type=\"primary\"\r\n            size=\"large\"\r\n            disabled={loading}\r\n          >\r\n            {t(view === 'new' ? 'form.submit.new' : 'form.submit.detail')}\r\n          </Button>\r\n        </ItemAntd>\r\n      </FormFormikAntd>\r\n    )\r\n  }, [t, view, data, loading])\r\n\r\n  useEffect(() => {\r\n    const cancelTokenSource = axios.CancelToken.source()\r\n\r\n    getData(cancelTokenSource.token)\r\n\r\n    return () => cancelTokenSource.cancel()\r\n  }, [getData])\r\n\r\n  useEffect(() => {\r\n    const cancelToken = cancelTokenRef.current\r\n\r\n    return () => cancelToken.cancel()\r\n  }, [])\r\n\r\n  return (\r\n    <Formik<FormValues>\r\n      initialValues={formInitialValues}\r\n      enableReinitialize\r\n      validate={values => validateSchema(values, FormSchema)}\r\n      onSubmit={handleSubmit}\r\n    >\r\n      {() => renderForm()}\r\n    </Formik>\r\n  )\r\n}\r\n","import {\r\n  Dropdown as DropdownBase,\r\n  DropdownItemProps,\r\n} from 'components/Dropdown'\r\nimport { DropdownButton } from 'components/DropdownButton'\r\nimport React from 'react'\r\nimport { useTranslation } from 'react-i18next'\r\n\r\nexport type DropdownAction = 'edit' | 'delete'\r\n\r\nexport interface DropdownProps {\r\n  onClick: (action: DropdownAction) => void\r\n  disabledActions?: DropdownAction[]\r\n}\r\n\r\nexport const Dropdown: React.FC<DropdownProps> = ({ onClick }) => {\r\n  const { t } = useTranslation('catalog-currency-detail')\r\n\r\n  const handleClick = (action: DropdownAction) => {\r\n    onClick(action)\r\n  }\r\n\r\n  const items: DropdownItemProps[] = [\r\n    {\r\n      children: t('tax-rates.context-menu.edit'),\r\n      onClick: () => handleClick('edit'),\r\n      icon: 'pen',\r\n    },\r\n    {\r\n      children: t('tax-rates.context-menu.delete'),\r\n      onClick: () => handleClick('delete'),\r\n      icon: 'trash-alt',\r\n      dialog: {\r\n        text: t('tax-rates.context-menu.delete-dialog.text'),\r\n        cancel: t('tax-rates.context-menu.delete-dialog.cancel'),\r\n        confirm: t('tax-rates.context-menu.delete-dialog.confirm'),\r\n      },\r\n    },\r\n  ]\r\n\r\n  return (\r\n    <div>\r\n      <DropdownBase items={items} data-test=\"Dropdown\">\r\n        <DropdownButton size=\"small\" />\r\n      </DropdownBase>\r\n    </div>\r\n  )\r\n}\r\n","import React from 'react'\r\nimport { ColumnProps } from 'antd/es/table'\r\nimport { MappedCatalogTaxRate } from './mapCatalogTaxRates'\r\nimport i18next from 'i18next'\r\nimport { DropdownAction, Dropdown } from '../components/Dropdown'\r\nimport { Tag } from 'antd'\r\nimport { COLORS } from 'constants/colors'\r\n\r\nexport const getCatalogTaxRatesColumns = (\r\n  t: i18next.TFunction,\r\n  onClick?: (action: DropdownAction, id: number) => void\r\n): ColumnProps<any>[] => [\r\n  {\r\n    key: 'id',\r\n    dataIndex: 'id',\r\n    title: t('tax-rates.columns.id'),\r\n    width: 100,\r\n  },\r\n  {\r\n    key: 'rate',\r\n    dataIndex: 'rate',\r\n    title: t('tax-rates.columns.rate'),\r\n    render: (value: number | null) =>\r\n      value === null ? (\r\n        <Tag color={COLORS.orange5}>{t('tax-rates.no-tax-rate')}</Tag>\r\n      ) : (\r\n        `${value}%`\r\n      ),\r\n  },\r\n  {\r\n    key: 'context_menu',\r\n    dataIndex: 'context_menu',\r\n    width: 60,\r\n    render: (_, { id }: MappedCatalogTaxRate) => (\r\n      <Dropdown\r\n        onClick={(action: DropdownAction) => onClick && onClick(action, id)}\r\n      />\r\n    ),\r\n    fixed: 'right',\r\n  },\r\n]\r\n","import { CatalogCurrencyTaxRate } from 'model/api/CatalogCurrencyTaxRate'\r\n\r\nexport interface MappedCatalogTaxRate {\r\n  key: string\r\n  id: number\r\n  rate: number\r\n}\r\n\r\nexport const mapCatalogTaxRates = (\r\n  data: CatalogCurrencyTaxRate[]\r\n): MappedCatalogTaxRate[] =>\r\n  data.map(({ id, rate }) => ({\r\n    key: String(id),\r\n    id,\r\n    rate,\r\n  }))\r\n","import React, { useRef, useState, useCallback, useEffect } from 'react'\r\nimport { Divider, Typography, notification, Space } from 'antd'\r\nimport { useTranslation } from 'react-i18next'\r\nimport { Table } from 'components/Table'\r\nimport axios, { CancelTokenSource } from 'axios'\r\nimport { CatalogCurrencyTaxRatesApi } from 'api/CatalogCurrencyTaxRates'\r\nimport { navigate } from '@reach/router'\r\nimport { IconButton } from 'components/IconButton'\r\nimport styled from 'styled-components'\r\nimport { DropdownAction } from './Dropdown'\r\nimport { getCatalogTaxRatesColumns } from '../utils/getCatalogTaxRatesColumns'\r\nimport { mapCatalogTaxRates, MappedCatalogTaxRate } from '../utils/mapCatalogTaxRates'\r\n\r\nconst TitleContainer = styled.div`\r\n  display: flex;\r\n  flex-direction: row;\r\n  justify-content: space-between;\r\n`\r\n\r\nconst { Title } = Typography\r\n\r\nexport interface TaxRatesProps {\r\n  catalogCurrencyId: number\r\n}\r\n\r\nexport const TaxRates: React.FC<TaxRatesProps> = ({ catalogCurrencyId }) => {\r\n  const { PUBLIC_URL } = process.env\r\n  const { t } = useTranslation('catalog-currency-detail')\r\n  const [data, setData] = useState<MappedCatalogTaxRate[]>([])\r\n  const [loading, setLoading] = useState(false)\r\n  const [total, setTotal] = useState(0)\r\n  const [page, setPage] = useState(1)\r\n  const [pageSize, setPageSize] = useState(0)\r\n  const cancelTokenRef = useRef<CancelTokenSource>(axios.CancelToken.source())\r\n\r\n  const getData = useCallback(async () => {\r\n    setLoading(true)\r\n\r\n    const {\r\n      data: { data, total, per_page },\r\n    } = await CatalogCurrencyTaxRatesApi.getCatalogCurrencyTaxRates(\r\n      catalogCurrencyId,\r\n      page,\r\n      pageSize,\r\n      {\r\n        cancelToken: cancelTokenRef.current.token,\r\n      }\r\n    )\r\n\r\n    setData(mapCatalogTaxRates(data))\r\n    setTotal(total)\r\n    setPageSize(per_page)\r\n    setLoading(false)\r\n  }, [page, pageSize, catalogCurrencyId])\r\n\r\n  const handleActionClick = useCallback(\r\n    async (action: DropdownAction, id: number) => {\r\n      switch (action) {\r\n        case 'edit':\r\n          navigate(\r\n            PUBLIC_URL +\r\n              '/catalog/currencies/' +\r\n              catalogCurrencyId +\r\n              '/tax-rates/' +\r\n              id\r\n          )\r\n          break\r\n        case 'delete':\r\n          try {\r\n          await CatalogCurrencyTaxRatesApi.deleteCatalogCurrencyTaxRate(\r\n            catalogCurrencyId,\r\n            id,\r\n            {\r\n              cancelToken: cancelTokenRef.current.token,\r\n            }\r\n          )\r\n\r\n          notification.success({\r\n            message: t('tax-rates.delete-success'),\r\n          })\r\n\r\n          getData()\r\n          } catch (e) {}\r\n          break\r\n        default:\r\n          break\r\n      }\r\n    },\r\n    [PUBLIC_URL, getData, t, catalogCurrencyId]\r\n  )\r\n\r\n  const handlePageChange = useCallback((page: number) => {\r\n    setPage(page)\r\n  }, [])\r\n\r\n  const handleCreateTaxRate = useCallback(() => {\r\n    navigate(\r\n      PUBLIC_URL + '/catalog/currencies/' + catalogCurrencyId + '/tax-rates/new'\r\n    )\r\n  }, [PUBLIC_URL, catalogCurrencyId])\r\n\r\n  useEffect(() => {\r\n    getData()\r\n  }, [getData])\r\n\r\n  useEffect(() => {\r\n    const cancelToken = cancelTokenRef.current\r\n\r\n    return () => cancelToken.cancel()\r\n  }, [])\r\n\r\n  return (\r\n    <>\r\n      <Divider />\r\n      <Space size=\"large\" direction=\"vertical\" style={{ width: '100%' }}>\r\n        <TitleContainer>\r\n          <Title level={3}>{t('tax-rates.title')}</Title>\r\n          <IconButton\r\n            size=\"middle\"\r\n            type=\"primary\"\r\n            icon=\"plus\"\r\n            onClick={handleCreateTaxRate}\r\n          >\r\n            {t('tax-rates.create-new-tax-rate')}\r\n          </IconButton>\r\n        </TitleContainer>\r\n        <Table\r\n          columns={getCatalogTaxRatesColumns(t, handleActionClick)}\r\n          dataSource={data}\r\n          loading={loading}\r\n          pagination={{\r\n            current: page,\r\n            pageSize,\r\n            total,\r\n            onChange: handlePageChange,\r\n          }}\r\n        />\r\n      </Space>\r\n    </>\r\n  )\r\n}\r\n","import React, { useContext, useEffect } from 'react'\r\nimport { RouteComponentProps } from '@reach/router'\r\nimport { useTranslation } from 'react-i18next'\r\nimport { SceneTitle } from 'components/SceneTitle'\r\nimport { AuthenticatedLayoutContext } from 'components/Layout/AuthenticatedLayout'\r\nimport { Form } from './components/Form'\r\nimport { BackButton } from 'components/BackButton'\r\nimport { TaxRates } from './components/TaxRates'\r\n\r\nexport interface CatalogCurrencyDetailProps extends RouteComponentProps {\r\n  catalogCurrencyId?: number\r\n  view: 'new' | 'detail'\r\n}\r\n\r\nexport const CatalogCurrencyDetail: React.FC<CatalogCurrencyDetailProps> = ({\r\n  catalogCurrencyId,\r\n  view,\r\n}) => {\r\n  const { t } = useTranslation('catalog-currency-detail')\r\n  const { setSceneTitle } = useContext(AuthenticatedLayoutContext)\r\n\r\n  useEffect(() => {\r\n    setSceneTitle(\r\n      <SceneTitle\r\n        title={t(view === 'detail' ? 'scene-title.detail' : 'scene-title.new')}\r\n        extraContent={\r\n          <BackButton\r\n            title={t('scene-title.back-to-currencies')}\r\n            to=\"/catalog/currencies\"\r\n          />\r\n        }\r\n      />\r\n    )\r\n  }, [setSceneTitle, t, view])\r\n\r\n  return (\r\n    <>\r\n      <Form catalogCurrencyId={catalogCurrencyId} view={view} />\r\n      {view === 'detail' && <TaxRates catalogCurrencyId={catalogCurrencyId} />}\r\n    </>\r\n  )\r\n}\r\n","import React, { useCallback, useState, useEffect, useRef } from 'react'\r\nimport { Formik, FormikProps } from 'formik'\r\nimport { InputNumber, Switch, Form as FormFormikAntd } from 'formik-antd'\r\nimport { FormikFormItem as Item } from 'components/FormikFormItem'\r\nimport { Button, Form as FormAntd, notification, Alert, Space } from 'antd'\r\nimport { useTranslation } from 'react-i18next'\r\nimport { validateSchema } from 'config/yup'\r\nimport * as Yup from 'yup'\r\nimport axios, { CancelToken, CancelTokenSource } from 'axios'\r\nimport { navigate } from '@reach/router'\r\nimport { CatalogCurrencyTaxRate } from 'model/api/CatalogCurrencyTaxRate'\r\nimport { CatalogCurrencyTaxRatesApi } from 'api/CatalogCurrencyTaxRates'\r\n\r\nconst { Item: ItemAntd } = FormAntd\r\n\r\nexport interface FormValues {\r\n  rate?: number\r\n  no_rate?: boolean\r\n}\r\n\r\nexport const FormSchema = Yup.object().shape<FormValues>({\r\n  rate: Yup.number(),\r\n  no_rate: Yup.boolean(),\r\n})\r\n\r\nexport interface FormProps {\r\n  catalogCurrencyId?: number\r\n  catalogCurrencyTaxRateId?: number\r\n  view: 'new' | 'detail'\r\n}\r\n\r\nexport const Form: React.FC<FormProps> = ({\r\n  catalogCurrencyId,\r\n  catalogCurrencyTaxRateId,\r\n  view,\r\n}) => {\r\n  const { PUBLIC_URL } = process.env\r\n  const { t } = useTranslation('catalog-currency-tax-rate-detail')\r\n  const [data, setData] = useState<CatalogCurrencyTaxRate>()\r\n  const [loading, setLoading] = useState(false)\r\n  const cancelTokenRef = useRef<CancelTokenSource>(axios.CancelToken.source())\r\n\r\n  const getFormInitialValues: () => FormValues = useCallback(() => {\r\n    if (view === 'new' || !data) {\r\n      return {\r\n        rate: undefined,\r\n        no_rate: false,\r\n      }\r\n    } else {\r\n      console.log(data)\r\n      return {\r\n        rate: data.rate || undefined,\r\n        no_rate: data.rate === null,\r\n      }\r\n    }\r\n  }, [data, view])\r\n\r\n  const getData = useCallback(\r\n    async (cancelToken: CancelToken) => {\r\n      if (view === 'detail' && catalogCurrencyId && catalogCurrencyTaxRateId) {\r\n        setLoading(true)\r\n\r\n        const {\r\n          data,\r\n        } = await CatalogCurrencyTaxRatesApi.getCatalogCurrencyTaxRate(\r\n          catalogCurrencyId,\r\n          catalogCurrencyTaxRateId,\r\n          {\r\n            cancelToken,\r\n          }\r\n        )\r\n\r\n        setData(data)\r\n        setLoading(false)\r\n      }\r\n    },\r\n    [view, catalogCurrencyId, catalogCurrencyTaxRateId]\r\n  )\r\n\r\n  const handleSubmit = useCallback(\r\n    async ({ rate, no_rate }: Required<FormValues>) => {\r\n      try {\r\n        setLoading(true)\r\n        const data = new FormData()\r\n\r\n        if (!no_rate) {\r\n          data.append('rate', String(rate))\r\n        }\r\n\r\n        if (view === 'new') {\r\n          await CatalogCurrencyTaxRatesApi.createCatalogCurrencyTaxRate(\r\n            catalogCurrencyId,\r\n            data,\r\n            {\r\n              cancelToken: cancelTokenRef.current.token,\r\n            }\r\n          )\r\n\r\n          setLoading(false)\r\n\r\n          notification.success({\r\n            message: t('form.create-success'),\r\n          })\r\n\r\n          navigate(PUBLIC_URL + '/catalog/currencies/' + catalogCurrencyId)\r\n        } else if (view === 'detail') {\r\n          if (!no_rate) {\r\n            data.append('rate', String(rate))\r\n          } else {\r\n            data.append('rate', '')\r\n          }\r\n\r\n          await CatalogCurrencyTaxRatesApi.updateCatalogCurrencyTaxRate(\r\n            catalogCurrencyId,\r\n            catalogCurrencyTaxRateId,\r\n            data,\r\n            {\r\n              cancelToken: cancelTokenRef.current.token,\r\n            }\r\n          )\r\n\r\n          notification.success({\r\n            message: t('form.update-success'),\r\n          })\r\n\r\n          setLoading(false)\r\n        }\r\n      } catch (e) {\r\n        setLoading(false)\r\n      }\r\n    },\r\n    [PUBLIC_URL, view, catalogCurrencyId, catalogCurrencyTaxRateId, t]\r\n  )\r\n\r\n  const renderForm = useCallback(\r\n    ({ values }: FormikProps<FormValues>) => (\r\n      <FormFormikAntd layout=\"vertical\">\r\n        <Item label={t('form.rate')} name=\"rate\">\r\n          <InputNumber\r\n            formatter={value => `${value}%`}\r\n            parser={value => value.replace('%', '')}\r\n            min={0}\r\n            name=\"rate\"\r\n            disabled={values.no_rate}\r\n            style={{ width: '100%' }}\r\n          />\r\n        </Item>\r\n        <Item label={t('form.no-rate')} name=\"no_rate\">\r\n          <Space size=\"middle\" direction=\"vertical\" style={{ width: '100%' }}>\r\n            <Switch name=\"no_rate\" />\r\n            <Alert type=\"info\" message={t('form.no-rate-info')} />\r\n          </Space>\r\n        </Item>\r\n        <ItemAntd>\r\n          <Button\r\n            htmlType=\"submit\"\r\n            type=\"primary\"\r\n            size=\"large\"\r\n            disabled={loading}\r\n          >\r\n            {t(view === 'new' ? 'form.submit.new' : 'form.submit.detail')}\r\n          </Button>\r\n        </ItemAntd>\r\n      </FormFormikAntd>\r\n    ),\r\n    [t, view, loading]\r\n  )\r\n\r\n  useEffect(() => {\r\n    const cancelTokenSource = axios.CancelToken.source()\r\n\r\n    getData(cancelTokenSource.token)\r\n\r\n    return () => cancelTokenSource.cancel()\r\n  }, [getData])\r\n\r\n  useEffect(() => {\r\n    const cancelToken = cancelTokenRef.current\r\n\r\n    return () => cancelToken.cancel()\r\n  }, [])\r\n\r\n  return (\r\n    <Formik<FormValues>\r\n      initialValues={getFormInitialValues()}\r\n      enableReinitialize\r\n      validate={values => validateSchema(values, FormSchema)}\r\n      onSubmit={handleSubmit}\r\n    >\r\n      {props => renderForm(props)}\r\n    </Formik>\r\n  )\r\n}\r\n","import React, { useContext, useEffect } from 'react'\r\nimport { RouteComponentProps } from '@reach/router'\r\nimport { useTranslation } from 'react-i18next'\r\nimport { SceneTitle } from 'components/SceneTitle'\r\nimport { AuthenticatedLayoutContext } from 'components/Layout/AuthenticatedLayout'\r\nimport { Form } from './components/Form'\r\nimport { BackButton } from 'components/BackButton'\r\n\r\nexport interface CatalogCurrencyTaxRateDetailProps extends RouteComponentProps {\r\n  catalogCurrencyId?: number\r\n  catalogCurrencyTaxRateId?: number\r\n  view: 'new' | 'detail'\r\n}\r\n\r\nexport const CatalogCurrencyTaxRateDetail: React.FC<CatalogCurrencyTaxRateDetailProps> = ({\r\n  catalogCurrencyId,\r\n  catalogCurrencyTaxRateId,\r\n  view,\r\n}) => {\r\n  const { t } = useTranslation('catalog-currency-tax-rate-detail')\r\n  const { setSceneTitle } = useContext(AuthenticatedLayoutContext)\r\n\r\n  useEffect(() => {\r\n    setSceneTitle(\r\n      <SceneTitle\r\n        title={t(view === 'detail' ? 'scene-title.detail' : 'scene-title.new')}\r\n        extraContent={\r\n          <BackButton\r\n            title={t('scene-title.back-to-catalog-currency-detail')}\r\n            to={'/catalog/currencies/' + catalogCurrencyId}\r\n          />\r\n        }\r\n      />\r\n    )\r\n  }, [setSceneTitle, t, view, catalogCurrencyId])\r\n\r\n  return (\r\n    <Form\r\n      catalogCurrencyId={catalogCurrencyId}\r\n      catalogCurrencyTaxRateId={catalogCurrencyTaxRateId}\r\n      view={view}\r\n    />\r\n  )\r\n}\r\n","import {\r\n  Dropdown as DropdownBase,\r\n  DropdownItemProps,\r\n} from 'components/Dropdown'\r\nimport { DropdownButton } from 'components/DropdownButton'\r\nimport React, { useCallback } from 'react'\r\nimport { useTranslation } from 'react-i18next'\r\n\r\nexport type DropdownAction = 'edit' | 'delete'\r\n\r\nexport interface DropdownProps {\r\n  onClick: (action: DropdownAction) => void\r\n  disabledActions?: DropdownAction[]\r\n}\r\n\r\nexport const Dropdown: React.FC<DropdownProps> = ({ onClick }) => {\r\n  const { t } = useTranslation('views')\r\n\r\n  const handleClick = useCallback((action: DropdownAction) => {\r\n    onClick(action)\r\n  }, [onClick])\r\n\r\n  const items: DropdownItemProps[] = [\r\n    {\r\n      children: t('table.context-menu.edit'),\r\n      onClick: () => handleClick('edit'),\r\n      icon: 'pen',\r\n    },   \r\n    {\r\n      children: t('table.context-menu.delete'),\r\n      onClick: () => handleClick('delete'),\r\n      icon: 'trash-alt',\r\n      dialog: {\r\n        text: t('table.context-menu.delete-dialog.text'),\r\n        cancel: t('table.context-menu.delete-dialog.cancel'),\r\n        confirm: t('table.context-menu.delete-dialog.confirm')\r\n      }\r\n    },\r\n  ]\r\n\r\n  return (\r\n    <div>\r\n      <DropdownBase items={items} data-test=\"Dropdown\">\r\n        <DropdownButton size=\"small\" />\r\n      </DropdownBase>\r\n    </div>\r\n  )\r\n}\r\n","import React from 'react'\r\nimport { ColumnProps } from 'antd/es/table'\r\nimport { MappedView } from './mapViews'\r\nimport i18next from 'i18next'\r\nimport { DropdownAction, Dropdown } from '../components/Dropdown'\r\n\r\nexport const getViewsColumns = (\r\n  t: i18next.TFunction,\r\n  onClick?: (action: DropdownAction, viewId: number) => void\r\n): ColumnProps<any>[] => [\r\n  {\r\n    key: 'id',\r\n    dataIndex: 'id',\r\n    title: t('table.columns.id'),\r\n    width: 100,\r\n  },\r\n  {\r\n    key: 'name',\r\n    dataIndex: 'name',\r\n    title: t('table.columns.name'),\r\n    width: 200,\r\n  },\r\n  {\r\n    key: 'path',\r\n    dataIndex: 'path',\r\n    title: t('table.columns.path'),\r\n  },\r\n  {\r\n    key: 'context_menu',\r\n    dataIndex: 'context_menu',\r\n    width: 60,\r\n    render: (_, { id }: MappedView) => (\r\n      <Dropdown\r\n        onClick={(action: DropdownAction) => onClick && onClick(action, id)}\r\n      />\r\n    ),\r\n    fixed: 'right',\r\n  },\r\n]\r\n","import { View } from 'model/api/View'\r\n\r\nexport interface MappedView {\r\n  key: string\r\n  id: number\r\n  name: string\r\n  path: string\r\n}\r\n\r\nexport const mapViews = (data: View[]): MappedView[] =>\r\n  data.map(({ id, name, path }) => ({\r\n    key: String(id),\r\n    id,\r\n    name,\r\n    path,\r\n  }))\r\n","import React, { useCallback, useState, useEffect, useRef } from 'react'\r\nimport { Table as TableBase } from 'components/Table'\r\nimport axios, { CancelTokenSource } from 'axios'\r\nimport { useTranslation } from 'react-i18next'\r\nimport { DropdownAction } from './Dropdown'\r\nimport { navigate } from '@reach/router'\r\nimport { notification } from 'antd'\r\nimport { getViewsColumns } from '../utils/getViewsColumns'\r\nimport { ViewsApi } from 'api/Views'\r\nimport { MappedView, mapViews } from '../utils/mapViews'\r\n\r\nexport const Table: React.FC = () => {\r\n  const { PUBLIC_URL } = process.env\r\n  const { t } = useTranslation('views')\r\n  const [data, setData] = useState<MappedView[]>([])\r\n  const [loading, setLoading] = useState(false)\r\n  const [total, setTotal] = useState(0)\r\n  const [page, setPage] = useState(1)\r\n  const [pageSize, setPageSize] = useState(0)\r\n  const cancelTokenRef = useRef<CancelTokenSource>(axios.CancelToken.source())\r\n\r\n  const getData = useCallback(async () => {\r\n    setLoading(true)\r\n\r\n    const {\r\n      data: { data, total, per_page },\r\n    } = await ViewsApi.getViews(page, pageSize, {\r\n      cancelToken: cancelTokenRef.current.token,\r\n    })\r\n\r\n    setData(mapViews(data))\r\n    setTotal(total)\r\n    setPageSize(per_page)\r\n    setLoading(false)\r\n  }, [page, pageSize])\r\n\r\n  const handleActionClick = useCallback(\r\n    async (action: DropdownAction, viewId: number) => {\r\n      switch (action) {\r\n        case 'edit':\r\n          navigate(PUBLIC_URL + '/content/views/' + viewId)\r\n          break\r\n        case 'delete':\r\n          try {\r\n            await ViewsApi.deleteView(viewId, {\r\n              cancelToken: cancelTokenRef.current.token,\r\n            })\r\n\r\n            notification.success({\r\n              message: t('table.delete-success'),\r\n            })\r\n\r\n            getData()\r\n          } catch (e) {}\r\n          break\r\n        default:\r\n          break\r\n      }\r\n    },\r\n    [PUBLIC_URL, getData, t]\r\n  )\r\n\r\n  const handlePageChange = useCallback((page: number) => {\r\n    setPage(page)\r\n  }, [])\r\n\r\n  useEffect(() => {\r\n    getData()\r\n  }, [getData])\r\n\r\n  useEffect(() => {\r\n    const cancelToken = cancelTokenRef.current\r\n\r\n    return () => cancelToken.cancel()\r\n  }, [])\r\n\r\n  return (\r\n    <TableBase\r\n      columns={getViewsColumns(t, handleActionClick)}\r\n      dataSource={data}\r\n      loading={loading}\r\n      pagination={{\r\n        current: page,\r\n        pageSize,\r\n        total,\r\n        onChange: handlePageChange,\r\n      }}\r\n    />\r\n  )\r\n}\r\n","import React, { useContext, useEffect, useCallback } from 'react'\r\nimport { RouteComponentProps, navigate } from '@reach/router'\r\nimport { useTranslation } from 'react-i18next'\r\nimport { SceneTitle } from 'components/SceneTitle'\r\nimport { AuthenticatedLayoutContext } from 'components/Layout/AuthenticatedLayout'\r\nimport { Table } from './components/Table'\r\nimport { Space } from 'antd'\r\nimport { IconButton } from 'components/IconButton'\r\n\r\nexport const Views: React.FC<RouteComponentProps> = () => {\r\n  const { PUBLIC_URL } = process.env\r\n  const { t } = useTranslation('views')\r\n  const { setSceneTitle } = useContext(AuthenticatedLayoutContext)\r\n\r\n  const handleCreateView = useCallback(() => {\r\n    navigate(PUBLIC_URL + '/content/views/new')\r\n  }, [PUBLIC_URL])\r\n\r\n  useEffect(() => {\r\n    setSceneTitle(<SceneTitle title={t('scene-title')} />)\r\n  }, [setSceneTitle, t])\r\n\r\n  return (\r\n    <Space size=\"large\" direction=\"vertical\" style={{ width: '100%' }}>\r\n      <IconButton\r\n        size=\"middle\"\r\n        type=\"primary\"\r\n        icon=\"plus\"\r\n        onClick={handleCreateView}\r\n      >\r\n        {t('create-new-view')}\r\n      </IconButton>\r\n      <Table />\r\n    </Space>\r\n  )\r\n}\r\n","import React, { useCallback, useState, useEffect, useRef } from 'react'\r\nimport { Formik } from 'formik'\r\nimport { Input, Form as FormFormikAntd } from 'formik-antd'\r\nimport { FormikFormItem as Item } from 'components/FormikFormItem'\r\nimport { Button, Form as FormAntd, notification } from 'antd'\r\nimport { useTranslation } from 'react-i18next'\r\nimport { validateSchema } from 'config/yup'\r\nimport * as Yup from 'yup'\r\nimport axios, { CancelToken, CancelTokenSource } from 'axios'\r\nimport { navigate } from '@reach/router'\r\nimport { View } from 'model/api/View'\r\nimport { ViewsApi } from 'api/Views'\r\n\r\nconst { Item: ItemAntd } = FormAntd\r\n\r\nexport interface FormValues {\r\n  name?: string\r\n  path?: string\r\n}\r\n\r\nexport const FormSchema = Yup.object().shape<FormValues>({\r\n  name: Yup.string().required(),\r\n  path: Yup.string().required(),\r\n})\r\n\r\nexport interface FormProps {\r\n  viewId?: number\r\n  view: 'new' | 'detail'\r\n}\r\n\r\nexport const Form: React.FC<FormProps> = ({ viewId, view }) => {\r\n  const { PUBLIC_URL } = process.env\r\n  const { t } = useTranslation('view-detail')\r\n  const [data, setData] = useState<View>()\r\n  const [loading, setLoading] = useState(false)\r\n  const cancelTokenRef = useRef<CancelTokenSource>(axios.CancelToken.source())\r\n  const formInitialValues = data || {\r\n    name: undefined,\r\n    path: undefined,\r\n  }\r\n\r\n  const getData = useCallback(\r\n    async (cancelToken: CancelToken) => {\r\n      if (view === 'detail' && viewId) {\r\n        try {\r\n          setLoading(true)\r\n\r\n          const { data } = await ViewsApi.getView(viewId, {\r\n            cancelToken,\r\n          })\r\n\r\n          setData(data)\r\n          setLoading(false)\r\n        } catch (e) {\r\n          setLoading(false)\r\n        }\r\n      }\r\n    },\r\n    [view, viewId]\r\n  )\r\n\r\n  const handleSubmit = useCallback(\r\n    async ({ name, path }: Required<FormValues>) => {\r\n      try {\r\n        setLoading(true)\r\n\r\n        const formData = new FormData()\r\n        formData.append('name', name)\r\n        formData.append('path', path)\r\n\r\n        if (view === 'new') {\r\n          await ViewsApi.createView(formData, {\r\n            cancelToken: cancelTokenRef.current.token,\r\n          })\r\n\r\n          notification.success({ message: t('create-success') })\r\n          navigate(PUBLIC_URL + '/content/views')\r\n        } else if (view === 'detail' && viewId) {\r\n          await ViewsApi.updateView(viewId, formData, {\r\n            cancelToken: cancelTokenRef.current.token,\r\n          })\r\n\r\n          notification.success({ message: t('update-success') })\r\n          navigate(PUBLIC_URL + '/content/views')\r\n        }\r\n      } catch (e) {\r\n        setLoading(false)\r\n      }\r\n    },\r\n    [PUBLIC_URL, view, t, viewId]\r\n  )\r\n\r\n  const renderForm = useCallback(\r\n    () => (\r\n      <FormFormikAntd layout=\"vertical\">\r\n        <Item label={t('form.name')} name=\"name\">\r\n          <Input name=\"name\" />\r\n        </Item>\r\n        <Item label={t('form.path')} name=\"path\">\r\n          <Input name=\"path\" />\r\n        </Item>\r\n        <ItemAntd>\r\n          <Button\r\n            htmlType=\"submit\"\r\n            type=\"primary\"\r\n            size=\"large\"\r\n            disabled={loading}\r\n          >\r\n            {t(view === 'new' ? 'form.submit.new' : 'form.submit.detail')}\r\n          </Button>\r\n        </ItemAntd>\r\n      </FormFormikAntd>\r\n    ),\r\n    [t, view, loading]\r\n  )\r\n\r\n  useEffect(() => {\r\n    const cancelTokenSource = axios.CancelToken.source()\r\n\r\n    getData(cancelTokenSource.token)\r\n\r\n    return () => cancelTokenSource.cancel()\r\n  }, [getData])\r\n\r\n  useEffect(() => {\r\n    const cancelToken = cancelTokenRef.current\r\n\r\n    return () => cancelToken.cancel()\r\n  }, [])\r\n\r\n  return (\r\n    <Formik<FormValues>\r\n      initialValues={formInitialValues}\r\n      enableReinitialize\r\n      validate={values => validateSchema(values, FormSchema)}\r\n      onSubmit={handleSubmit}\r\n    >\r\n      {() => renderForm()}\r\n    </Formik>\r\n  )\r\n}\r\n","import React, { useContext, useEffect } from 'react'\r\nimport { RouteComponentProps } from '@reach/router'\r\nimport { useTranslation } from 'react-i18next'\r\nimport { SceneTitle } from 'components/SceneTitle'\r\nimport { AuthenticatedLayoutContext } from 'components/Layout/AuthenticatedLayout'\r\nimport { Form } from './components/Form'\r\nimport { BackButton } from 'components/BackButton'\r\n\r\nexport interface ViewDetailProps extends RouteComponentProps {\r\n  viewId?: number\r\n  view: 'new' | 'detail'\r\n}\r\n\r\nexport const ViewDetail: React.FC<ViewDetailProps> = ({\r\n  viewId,\r\n  view,\r\n}) => {\r\n  const { t } = useTranslation('view-detail')\r\n  const { setSceneTitle } = useContext(AuthenticatedLayoutContext)\r\n\r\n  useEffect(() => {\r\n    setSceneTitle(\r\n      <SceneTitle\r\n        title={t(view === 'detail' ? 'scene-title.detail' : 'scene-title.new')}\r\n        extraContent={\r\n          <BackButton\r\n            title={t('scene-title.back-to-views')}\r\n            to=\"/content/views\"\r\n          />\r\n        }\r\n      />\r\n    )\r\n  }, [setSceneTitle, t, view])\r\n\r\n  return (\r\n    <Form\r\n      viewId={viewId}\r\n      view={view}\r\n    />\r\n  )\r\n}\r\n","import {\r\n  Dropdown as DropdownBase,\r\n  DropdownItemProps,\r\n} from 'components/Dropdown'\r\nimport { DropdownButton } from 'components/DropdownButton'\r\nimport React, { useCallback } from 'react'\r\nimport { useTranslation } from 'react-i18next'\r\n\r\nexport type DropdownAction = 'edit' | 'delete'\r\n\r\nexport interface DropdownProps {\r\n  onClick: (action: DropdownAction) => void\r\n  disabledActions?: DropdownAction[]\r\n}\r\n\r\nexport const Dropdown: React.FC<DropdownProps> = ({ onClick }) => {\r\n  const { t } = useTranslation('templates')\r\n\r\n  const handleClick = useCallback((action: DropdownAction) => {\r\n    onClick(action)\r\n  }, [onClick])\r\n\r\n  const items: DropdownItemProps[] = [\r\n    {\r\n      children: t('table.context-menu.edit'),\r\n      onClick: () => handleClick('edit'),\r\n      icon: 'pen',\r\n    },   \r\n    {\r\n      children: t('table.context-menu.delete'),\r\n      onClick: () => handleClick('delete'),\r\n      icon: 'trash-alt',\r\n      dialog: {\r\n        text: t('table.context-menu.delete-dialog.text'),\r\n        cancel: t('table.context-menu.delete-dialog.cancel'),\r\n        confirm: t('table.context-menu.delete-dialog.confirm')\r\n      }\r\n    },\r\n  ]\r\n\r\n  return (\r\n    <div>\r\n      <DropdownBase items={items} data-test=\"Dropdown\">\r\n        <DropdownButton size=\"small\" />\r\n      </DropdownBase>\r\n    </div>\r\n  )\r\n}\r\n","import React from 'react'\r\nimport { ColumnProps } from 'antd/es/table'\r\nimport { MappedTemplate } from './mapTemplates'\r\nimport i18next from 'i18next'\r\nimport { DropdownAction, Dropdown } from '../components/Dropdown'\r\nimport { format } from 'date-fns'\r\nimport { DATE_TIME_FORMAT } from 'constants/date'\r\n\r\nexport const getTemplatesColumns = (\r\n  t: i18next.TFunction,\r\n  onClick?: (action: DropdownAction, viewId: number) => void\r\n): ColumnProps<any>[] => [\r\n  {\r\n    key: 'id',\r\n    dataIndex: 'id',\r\n    title: t('table.columns.id'),\r\n    width: 100,\r\n  },\r\n  {\r\n    key: 'name',\r\n    dataIndex: 'name',\r\n    title: t('table.columns.name'),\r\n    width: 200,\r\n  },\r\n  {\r\n    key: 'created_at',\r\n    dataIndex: 'created_at',\r\n    title: t('table.columns.created-at'),\r\n    width: 170,\r\n    render: (value: Date | null) =>\r\n      value ? format(value, DATE_TIME_FORMAT) : '-',\r\n  },\r\n  {\r\n    key: 'modified_at',\r\n    dataIndex: 'modified_at',\r\n    title: t('table.columns.modified-at'),\r\n    render: (value: Date | null) =>\r\n      value ? format(value, DATE_TIME_FORMAT) : '-',\r\n  },\r\n  {\r\n    key: 'context_menu',\r\n    dataIndex: 'context_menu',\r\n    width: 60,\r\n    render: (_, { id }: MappedTemplate) => (\r\n      <Dropdown\r\n        onClick={(action: DropdownAction) => onClick && onClick(action, id)}\r\n      />\r\n    ),\r\n    fixed: 'right',\r\n  },\r\n]\r\n","import axios, { AxiosPromise } from 'axios'\r\nimport { RequestConfig } from './requestConfig'\r\nimport { Template } from 'model/api/Template'\r\nimport { PaginatedList } from 'model/api/PaginatedList'\r\nimport { TemplateDetail } from 'model/api/TemplateDetail'\r\n\r\nexport class TemplatesApi {\r\n  /**\r\n   * Get Templates\r\n   *\r\n   * @param page\r\n   * @param pageSize\r\n   */\r\n  static getTemplates(\r\n    page?: number,\r\n    pageSize?: number,\r\n    config?: RequestConfig\r\n  ): AxiosPromise<PaginatedList<Template>> {\r\n    return axios({\r\n      ...config,\r\n      method: 'GET',\r\n      url: `/templates`,\r\n      params: {\r\n        page,\r\n        per_page: pageSize,\r\n      },\r\n    })\r\n  }\r\n\r\n  /**\r\n   * Get All Templates\r\n   */\r\n  static getAllTemplates(\r\n    config?: RequestConfig\r\n  ): AxiosPromise<Template[]> {\r\n    return axios({\r\n      ...config,\r\n      method: 'GET',\r\n      url: `/templates/all`,\r\n    })\r\n  }\r\n\r\n  /**\r\n   * Get Template\r\n   *\r\n   * @param templateId\r\n   */\r\n  static getTemplate(\r\n    templateId: number,\r\n    config?: RequestConfig\r\n  ): AxiosPromise<TemplateDetail> {\r\n    return axios({\r\n      ...config,\r\n      method: 'GET',\r\n      url: `/templates/${templateId}`,\r\n    })\r\n  }\r\n\r\n  /**\r\n   * Create Template\r\n   */\r\n  static createTemplate(\r\n    data: FormData,\r\n    config?: RequestConfig\r\n  ): AxiosPromise<{ id: number }> {\r\n    return axios({\r\n      ...config,\r\n      method: 'POST',\r\n      url: `/templates`,\r\n      data,\r\n    })\r\n  }\r\n\r\n  /**\r\n   * Update Template\r\n   */\r\n  static updateTemplate(\r\n    templateId: number,\r\n    data: FormData,\r\n    config?: RequestConfig\r\n  ): AxiosPromise {\r\n    return axios({\r\n      ...config,\r\n      method: 'PUT',\r\n      url: `/templates/${templateId}`,\r\n      data,\r\n    })\r\n  }\r\n\r\n  /**\r\n   * Delete Template\r\n   */\r\n  static deleteTemplate(\r\n    templateId: number,\r\n    config?: RequestConfig\r\n  ): AxiosPromise {\r\n    return axios({\r\n      ...config,\r\n      method: 'DELETE',\r\n      url: `/templates/${templateId}`,\r\n    })\r\n  }\r\n}\r\n","import { Template } from 'model/api/Template'\r\n\r\nexport interface MappedTemplate {\r\n  key: string\r\n  id: number\r\n  name: string\r\n  created_at: Date\r\n  modified_at: Date\r\n}\r\n\r\nexport const mapTemplates = (data: Template[]): MappedTemplate[] =>\r\n  data.map(({ id, name, created_at, modified_at }) => ({\r\n    key: String(id),\r\n    id,\r\n    name,\r\n    created_at: created_at ? new Date(created_at) : null,\r\n    modified_at: modified_at ? new Date(modified_at) : null,\r\n  }))\r\n","import React, { useCallback, useState, useEffect, useRef } from 'react'\r\nimport { Table as TableBase } from 'components/Table'\r\nimport axios, { CancelTokenSource } from 'axios'\r\nimport { useTranslation } from 'react-i18next'\r\nimport { DropdownAction } from './Dropdown'\r\nimport { navigate } from '@reach/router'\r\nimport { notification } from 'antd'\r\nimport { getTemplatesColumns } from '../utils/getTemplatesColumns'\r\nimport { TemplatesApi } from 'api/Templates'\r\nimport { MappedTemplate, mapTemplates } from '../utils/mapTemplates'\r\n\r\nexport const Table: React.FC = () => {\r\n  const { PUBLIC_URL } = process.env\r\n  const { t } = useTranslation('templates')\r\n  const [data, setData] = useState<MappedTemplate[]>([])\r\n  const [loading, setLoading] = useState(false)\r\n  const [total, setTotal] = useState(0)\r\n  const [page, setPage] = useState(1)\r\n  const [pageSize, setPageSize] = useState(0)\r\n  const cancelTokenRef = useRef<CancelTokenSource>(axios.CancelToken.source())\r\n\r\n  const getData = useCallback(async () => {\r\n    setLoading(true)\r\n\r\n    const {\r\n      data: { data, total, per_page },\r\n    } = await TemplatesApi.getTemplates(page, pageSize, {\r\n      cancelToken: cancelTokenRef.current.token,\r\n    })\r\n\r\n    setData(mapTemplates(data))\r\n    setTotal(total)\r\n    setPageSize(per_page)\r\n    setLoading(false)\r\n  }, [page, pageSize])\r\n\r\n  const handleActionClick = useCallback(\r\n    async (action: DropdownAction, templateId: number) => {\r\n      switch (action) {\r\n        case 'edit':\r\n          navigate(PUBLIC_URL + '/content/templates/' + templateId)\r\n          break\r\n        case 'delete':\r\n          try {\r\n            await TemplatesApi.deleteTemplate(templateId, {\r\n              cancelToken: cancelTokenRef.current.token,\r\n            })\r\n\r\n            notification.success({\r\n              message: t('table.delete-success'),\r\n            })\r\n\r\n            getData()\r\n          } catch (e) {}\r\n          break\r\n        default:\r\n          break\r\n      }\r\n    },\r\n    [PUBLIC_URL, getData, t]\r\n  )\r\n\r\n  const handlePageChange = useCallback((page: number) => {\r\n    setPage(page)\r\n  }, [])\r\n\r\n  useEffect(() => {\r\n    getData()\r\n  }, [getData])\r\n\r\n  useEffect(() => {\r\n    const cancelToken = cancelTokenRef.current\r\n\r\n    return () => cancelToken.cancel()\r\n  }, [])\r\n\r\n  return (\r\n    <TableBase\r\n      columns={getTemplatesColumns(t, handleActionClick)}\r\n      dataSource={data}\r\n      loading={loading}\r\n      pagination={{\r\n        current: page,\r\n        pageSize,\r\n        total,\r\n        onChange: handlePageChange,\r\n      }}\r\n    />\r\n  )\r\n}\r\n","import React, { useContext, useEffect, useCallback } from 'react'\r\nimport { RouteComponentProps, navigate } from '@reach/router'\r\nimport { useTranslation } from 'react-i18next'\r\nimport { SceneTitle } from 'components/SceneTitle'\r\nimport { AuthenticatedLayoutContext } from 'components/Layout/AuthenticatedLayout'\r\nimport { Table } from './components/Table'\r\nimport { Space } from 'antd'\r\nimport { IconButton } from 'components/IconButton'\r\n\r\nexport const Templates: React.FC<RouteComponentProps> = () => {\r\n  const { PUBLIC_URL } = process.env\r\n  const { t } = useTranslation('templates')\r\n  const { setSceneTitle } = useContext(AuthenticatedLayoutContext)\r\n\r\n  const handleCreateTemplate = useCallback(() => {\r\n    navigate(PUBLIC_URL + '/content/templates/new')\r\n  }, [PUBLIC_URL])\r\n\r\n  useEffect(() => {\r\n    setSceneTitle(<SceneTitle title={t('scene-title')} />)\r\n  }, [setSceneTitle, t])\r\n\r\n  return (\r\n    <Space size=\"large\" direction=\"vertical\" style={{ width: '100%' }}>\r\n      <IconButton\r\n        size=\"middle\"\r\n        type=\"primary\"\r\n        icon=\"plus\"\r\n        onClick={handleCreateTemplate}\r\n      >\r\n        {t('create-new-template')}\r\n      </IconButton>\r\n      <Table />\r\n    </Space>\r\n  )\r\n}\r\n","import {\r\n  Dropdown as DropdownBase,\r\n  DropdownItemProps,\r\n} from 'components/Dropdown'\r\nimport { DropdownButton } from 'components/DropdownButton'\r\nimport React, { useCallback } from 'react'\r\nimport { useTranslation } from 'react-i18next'\r\n\r\nexport type DropdownAction = 'edit' | 'delete'\r\n\r\nexport interface DropdownProps {\r\n  onClick: (action: DropdownAction) => void\r\n  disabledActions?: DropdownAction[]\r\n}\r\n\r\nexport const Dropdown: React.FC<DropdownProps> = ({ onClick }) => {\r\n  const { t } = useTranslation('layouts')\r\n\r\n  const handleClick = useCallback((action: DropdownAction) => {\r\n    onClick(action)\r\n  }, [onClick])\r\n\r\n  const items: DropdownItemProps[] = [\r\n    {\r\n      children: t('table.context-menu.edit'),\r\n      onClick: () => handleClick('edit'),\r\n      icon: 'pen',\r\n    },   \r\n    {\r\n      children: t('table.context-menu.delete'),\r\n      onClick: () => handleClick('delete'),\r\n      icon: 'trash-alt',\r\n      dialog: {\r\n        text: t('table.context-menu.delete-dialog.text'),\r\n        cancel: t('table.context-menu.delete-dialog.cancel'),\r\n        confirm: t('table.context-menu.delete-dialog.confirm')\r\n      }\r\n    },\r\n  ]\r\n\r\n  return (\r\n    <div>\r\n      <DropdownBase items={items} data-test=\"Dropdown\">\r\n        <DropdownButton size=\"small\" />\r\n      </DropdownBase>\r\n    </div>\r\n  )\r\n}\r\n","import React from 'react'\r\nimport { ColumnProps } from 'antd/es/table'\r\nimport { MappedLayout } from './mapLayouts'\r\nimport i18next from 'i18next'\r\nimport { DropdownAction, Dropdown } from '../components/Dropdown'\r\nimport { format } from 'date-fns'\r\nimport { DATE_TIME_FORMAT } from 'constants/date'\r\n\r\nexport const getLayoutsColumns = (\r\n  t: i18next.TFunction,\r\n  onClick?: (action: DropdownAction, viewId: number) => void\r\n): ColumnProps<any>[] => [\r\n  {\r\n    key: 'id',\r\n    dataIndex: 'id',\r\n    title: t('table.columns.id'),\r\n    width: 100,\r\n  },\r\n  {\r\n    key: 'name',\r\n    dataIndex: 'name',\r\n    title: t('table.columns.name'),\r\n    width: 250,\r\n  },\r\n  {\r\n    key: 'created_at',\r\n    dataIndex: 'created_at',\r\n    title: t('table.columns.created-at'),\r\n    width: 170,\r\n    render: (value: Date) => format(value, DATE_TIME_FORMAT),\r\n  },\r\n  {\r\n    key: 'modified_at',\r\n    dataIndex: 'modified_at',\r\n    title: t('table.columns.modified-at'),\r\n    render: (value: Date | null) =>\r\n      value ? format(value, DATE_TIME_FORMAT) : '-',\r\n  },\r\n  {\r\n    key: 'context_menu',\r\n    dataIndex: 'context_menu',\r\n    width: 60,\r\n    render: (_, { id }: MappedLayout) => (\r\n      <Dropdown\r\n        onClick={(action: DropdownAction) => onClick && onClick(action, id)}\r\n      />\r\n    ),\r\n    fixed: 'right',\r\n  },\r\n]\r\n","import axios, { AxiosPromise } from 'axios'\r\nimport { RequestConfig } from './requestConfig'\r\nimport { Layout } from 'model/api/Layout'\r\nimport { PaginatedList } from 'model/api/PaginatedList'\r\n\r\nexport class LayoutsApi {\r\n  /**\r\n   * Get Layouts\r\n   *\r\n   * @param page\r\n   * @param pageSize\r\n   */\r\n  static getLayouts(\r\n    page?: number,\r\n    pageSize?: number,\r\n    config?: RequestConfig\r\n  ): AxiosPromise<PaginatedList<Layout>> {\r\n    return axios({\r\n      ...config,\r\n      method: 'GET',\r\n      url: `/layouts`,\r\n      params: {\r\n        page,\r\n        per_page: pageSize\r\n      },\r\n    })\r\n  }\r\n\r\n  /**\r\n   * Get All Layouts\r\n   *\r\n   */\r\n  static getAllLayouts(\r\n    config?: RequestConfig\r\n  ): AxiosPromise<Layout[]> {\r\n    return axios({\r\n      ...config,\r\n      method: 'GET',\r\n      url: `/layouts/all`,\r\n    })\r\n  }\r\n\r\n  /**\r\n   * Get Layout\r\n   *\r\n   * @param layoutId\r\n   */\r\n  static getLayout(\r\n    layoutId: number,\r\n    config?: RequestConfig\r\n  ): AxiosPromise<Layout> {\r\n    return axios({\r\n      ...config,\r\n      method: 'GET',\r\n      url: `/layouts/${layoutId}`,\r\n    })\r\n  }\r\n\r\n  /**\r\n   * Create Layout\r\n   *\r\n   * @param data\r\n   */\r\n  static createLayout(\r\n    data: FormData,\r\n    config?: RequestConfig\r\n  ): AxiosPromise<{ id: number }> {\r\n    return axios({\r\n      ...config,\r\n      method: 'POST',\r\n      url: `/layouts`,\r\n      data\r\n    })\r\n  }\r\n\r\n  /**\r\n   * Update Layout\r\n   *\r\n   * @param layoutId\r\n   */\r\n  static updateLayout(\r\n    layoutId: number,\r\n    data: FormData,\r\n    config?: RequestConfig\r\n  ): AxiosPromise {\r\n    return axios({\r\n      ...config,\r\n      method: 'PUT',\r\n      url: `/layouts/${layoutId}`,\r\n      data\r\n    })\r\n  }\r\n\r\n  /**\r\n   * Delete Layout\r\n   *\r\n   * @param layoutId\r\n   */\r\n  static deleteLayout(\r\n    layoutId: number,\r\n    config?: RequestConfig\r\n  ): AxiosPromise {\r\n    return axios({\r\n      ...config,\r\n      method: 'DELETE',\r\n      url: `/layouts/${layoutId}`,\r\n    })\r\n  }\r\n}","import { Layout } from 'model/api/Layout'\r\n\r\nexport interface MappedLayout {\r\n  key: string\r\n  id: number\r\n  name: string\r\n  created_at: Date\r\n  modified_at: Date | null\r\n}\r\n\r\nexport const mapLayouts = (data: Layout[]): MappedLayout[] =>\r\n  data.map(({ id, name, created_at, modified_at }) => ({\r\n    key: String(id),\r\n    id,\r\n    name,\r\n    created_at: new Date(created_at),\r\n    modified_at: modified_at ? new Date(modified_at) : null,\r\n  }))\r\n","import React, { useCallback, useState, useEffect, useRef } from 'react'\r\nimport { Table as TableBase } from 'components/Table'\r\nimport axios, { CancelTokenSource } from 'axios'\r\nimport { useTranslation } from 'react-i18next'\r\nimport { DropdownAction } from './Dropdown'\r\nimport { navigate } from '@reach/router'\r\nimport { notification } from 'antd'\r\nimport { getLayoutsColumns } from '../utils/getLayoutsColumns'\r\nimport { LayoutsApi } from 'api/Layouts'\r\nimport { MappedLayout, mapLayouts } from '../utils/mapLayouts'\r\n\r\nexport const Table: React.FC = () => {\r\n  const { PUBLIC_URL } = process.env\r\n  const { t } = useTranslation('layouts')\r\n  const [data, setData] = useState<MappedLayout[]>([])\r\n  const [loading, setLoading] = useState(false)\r\n  const [total, setTotal] = useState(0)\r\n  const [page, setPage] = useState(1)\r\n  const [pageSize, setPageSize] = useState(0)\r\n  const cancelTokenRef = useRef<CancelTokenSource>(axios.CancelToken.source())\r\n\r\n  const getData = useCallback(async () => {\r\n    setLoading(true)\r\n\r\n    const {\r\n      data: { data, total, per_page },\r\n    } = await LayoutsApi.getLayouts(page, pageSize, {\r\n      cancelToken: cancelTokenRef.current.token,\r\n    })\r\n\r\n    setData(mapLayouts(data))\r\n    setTotal(total)\r\n    setPageSize(per_page)\r\n    setLoading(false)\r\n  }, [page, pageSize])\r\n\r\n  const handleActionClick = useCallback(\r\n    async (action: DropdownAction, layoutId: number) => {\r\n      switch (action) {\r\n        case 'edit':\r\n          navigate(PUBLIC_URL + '/content/layouts/' + layoutId)\r\n          break\r\n        case 'delete':\r\n          try {\r\n            await LayoutsApi.deleteLayout(layoutId, {\r\n              cancelToken: cancelTokenRef.current.token,\r\n            })\r\n\r\n            notification.success({\r\n              message: t('table.delete-success'),\r\n            })\r\n\r\n            getData()\r\n          } catch (e) {}\r\n          break\r\n        default:\r\n          break\r\n      }\r\n    },\r\n    [PUBLIC_URL, getData, t]\r\n  )\r\n\r\n  const handlePageChange = useCallback((page: number) => {\r\n    setPage(page)\r\n  }, [])\r\n\r\n  useEffect(() => {\r\n    getData()\r\n  }, [getData])\r\n\r\n  useEffect(() => {\r\n    const cancelToken = cancelTokenRef.current\r\n\r\n    return () => cancelToken.cancel()\r\n  }, [])\r\n\r\n  return (\r\n    <TableBase\r\n      columns={getLayoutsColumns(t, handleActionClick)}\r\n      dataSource={data}\r\n      loading={loading}\r\n      pagination={{\r\n        current: page,\r\n        pageSize,\r\n        total,\r\n        onChange: handlePageChange,\r\n      }}\r\n    />\r\n  )\r\n}\r\n","import React, { useContext, useEffect, useCallback } from 'react'\r\nimport { RouteComponentProps, navigate } from '@reach/router'\r\nimport { useTranslation } from 'react-i18next'\r\nimport { SceneTitle } from 'components/SceneTitle'\r\nimport { AuthenticatedLayoutContext } from 'components/Layout/AuthenticatedLayout'\r\nimport { Table } from './components/Table'\r\nimport { Space } from 'antd'\r\nimport { IconButton } from 'components/IconButton'\r\n\r\nexport const Layouts: React.FC<RouteComponentProps> = () => {\r\n  const { PUBLIC_URL } = process.env\r\n  const { t } = useTranslation('layouts')\r\n  const { setSceneTitle } = useContext(AuthenticatedLayoutContext)\r\n\r\n  const handleCreateLayout = useCallback(() => {\r\n    navigate(PUBLIC_URL + '/content/layouts/new')\r\n  }, [PUBLIC_URL])\r\n\r\n  useEffect(() => {\r\n    setSceneTitle(<SceneTitle title={t('scene-title')} />)\r\n  }, [setSceneTitle, t])\r\n\r\n  return (\r\n    <Space size=\"large\" direction=\"vertical\" style={{ width: '100%' }}>\r\n      <IconButton\r\n        size=\"middle\"\r\n        type=\"primary\"\r\n        icon=\"plus\"\r\n        onClick={handleCreateLayout}\r\n      >\r\n        {t('create-new-layout')}\r\n      </IconButton>\r\n      <Table />\r\n    </Space>\r\n  )\r\n}\r\n","import React, { useCallback, useState, useEffect, useRef } from 'react'\r\nimport { Formik } from 'formik'\r\nimport { Input, Form as FormFormikAntd } from 'formik-antd'\r\nimport { FormikFormItem as Item } from 'components/FormikFormItem'\r\nimport { Button, Form as FormAntd, notification } from 'antd'\r\nimport { useTranslation } from 'react-i18next'\r\nimport { validateSchema } from 'config/yup'\r\nimport * as Yup from 'yup'\r\nimport axios, { CancelToken, CancelTokenSource } from 'axios'\r\nimport { navigate } from '@reach/router'\r\nimport { Layout } from 'model/api/Layout'\r\nimport { LayoutsApi } from 'api/Layouts'\r\n\r\nconst { Item: ItemAntd } = FormAntd\r\n\r\nexport interface FormValues {\r\n  name?: string\r\n}\r\n\r\nexport const FormSchema = Yup.object().shape<FormValues>({\r\n  name: Yup.string().required(),\r\n})\r\n\r\nexport interface FormProps {\r\n  layoutId?: number\r\n  view: 'new' | 'detail'\r\n}\r\n\r\nexport const Form: React.FC<FormProps> = ({ layoutId, view }) => {\r\n  const { PUBLIC_URL } = process.env\r\n  const { t } = useTranslation('layout-detail')\r\n  const [data, setData] = useState<Layout>()\r\n  const [loading, setLoading] = useState(false)\r\n  const cancelTokenRef = useRef<CancelTokenSource>(axios.CancelToken.source())\r\n  const formInitialValues = data || {\r\n    name: undefined,\r\n  }\r\n\r\n  const getData = useCallback(\r\n    async (cancelToken: CancelToken) => {\r\n      if (view === 'detail' && layoutId) {\r\n        try {\r\n          setLoading(true)\r\n\r\n          const { data } = await LayoutsApi.getLayout(layoutId, {\r\n            cancelToken,\r\n          })\r\n\r\n          setData(data)\r\n          setLoading(false)\r\n        } catch (e) {\r\n          setLoading(false)\r\n        }\r\n      }\r\n    },\r\n    [view, layoutId]\r\n  )\r\n\r\n  const handleSubmit = useCallback(\r\n    async ({ name }: Required<FormValues>) => {\r\n      try {\r\n        setLoading(true)\r\n\r\n        const formData = new FormData()\r\n        formData.append('name', name)\r\n\r\n        if (view === 'new') {\r\n          const {\r\n            data: { id },\r\n          } = await LayoutsApi.createLayout(formData, {\r\n            cancelToken: cancelTokenRef.current.token,\r\n          })\r\n\r\n          notification.success({ message: t('create-success') })\r\n          navigate(PUBLIC_URL + '/content/layouts/' + id)\r\n        } else if (view === 'detail' && layoutId) {\r\n          await LayoutsApi.updateLayout(layoutId, formData, {\r\n            cancelToken: cancelTokenRef.current.token,\r\n          })\r\n\r\n          notification.success({ message: t('update-success') })\r\n          const to = PUBLIC_URL + '/content/layouts/' + layoutId\r\n\r\n          navigate(PUBLIC_URL + '/redirect-to', {\r\n            state: {\r\n              to,\r\n            },\r\n          })\r\n        }\r\n      } catch (e) {\r\n        setLoading(false)\r\n      }\r\n    },\r\n    [PUBLIC_URL, view, t, layoutId]\r\n  )\r\n\r\n  const renderForm = useCallback(\r\n    () => (\r\n      <FormFormikAntd layout=\"vertical\">\r\n        <Item label={t('form.name')} name=\"name\">\r\n          <Input name=\"name\" />\r\n        </Item>\r\n        <ItemAntd>\r\n          <Button\r\n            htmlType=\"submit\"\r\n            type=\"primary\"\r\n            size=\"large\"\r\n            disabled={loading}\r\n          >\r\n            {t(view === 'new' ? 'form.submit.new' : 'form.submit.detail')}\r\n          </Button>\r\n        </ItemAntd>\r\n      </FormFormikAntd>\r\n    ),\r\n    [t, view, loading]\r\n  )\r\n\r\n  useEffect(() => {\r\n    const cancelTokenSource = axios.CancelToken.source()\r\n\r\n    getData(cancelTokenSource.token)\r\n\r\n    return () => cancelTokenSource.cancel()\r\n  }, [getData])\r\n\r\n  useEffect(() => {\r\n    const cancelToken = cancelTokenRef.current\r\n\r\n    return () => cancelToken.cancel()\r\n  }, [])\r\n\r\n  return (\r\n    <Formik<FormValues>\r\n      initialValues={formInitialValues}\r\n      enableReinitialize\r\n      validate={values => validateSchema(values, FormSchema)}\r\n      onSubmit={handleSubmit}\r\n    >\r\n      {() => renderForm()}\r\n    </Formik>\r\n  )\r\n}\r\n","import axios, { AxiosPromise } from 'axios'\r\nimport { RequestConfig } from './requestConfig'\r\nimport { LayoutSlot } from 'model/api/LayoutSlot'\r\nimport { LayoutSlotDetail } from 'model/api/LayoutSlotDetail'\r\n\r\nexport class LayoutSlotsApi {\r\n  /**\r\n   * Get Layout Slots\r\n   *\r\n   * @param layoutId\r\n   */\r\n  static getLayoutSlots(\r\n    layoutId: number,\r\n    config?: RequestConfig\r\n  ): AxiosPromise<LayoutSlot[]> {\r\n    return axios({\r\n      ...config,\r\n      method: 'GET',\r\n      url: `/layout-slots`,\r\n      params: {\r\n        layout_id: layoutId\r\n      }\r\n    })\r\n  }\r\n\r\n  /**\r\n   * Get All Layout Slots\r\n   *\r\n   * @param layoutId\r\n   */\r\n  static getAllLayoutSlots(\r\n    layoutId: number,\r\n    config?: RequestConfig\r\n  ): AxiosPromise<LayoutSlot[]> {\r\n    return axios({\r\n      ...config,\r\n      method: 'GET',\r\n      url: `/layout-slots/all`,\r\n      params: {\r\n        layout_id: layoutId\r\n      }\r\n    })\r\n  }\r\n\r\n  /**\r\n   * Get Layout Slot\r\n   *\r\n   */\r\n  static getLayoutSlot(\r\n    layoutSlotId: number,\r\n    config?: RequestConfig\r\n  ): AxiosPromise<LayoutSlotDetail> {\r\n    return axios({\r\n      ...config,\r\n      method: 'GET',\r\n      url: `/layout-slots/${layoutSlotId}`,\r\n    })\r\n  }\r\n\r\n  /**\r\n   * Create Layout Slot\r\n   *\r\n   * @param data\r\n   */\r\n  static createLayoutSlot(\r\n    data: FormData,\r\n    config?: RequestConfig\r\n  ): AxiosPromise<{ id: number }> {\r\n    return axios({\r\n      ...config,\r\n      method: 'POST',\r\n      url: `/layout-slots`,\r\n      data\r\n    })\r\n  }\r\n\r\n  /**\r\n   * Update Layout Slot\r\n   *\r\n   * @param layoutSlotId\r\n   */\r\n  static updateLayoutSlot(\r\n    layoutSlotId: number,\r\n    data: FormData,\r\n    config?: RequestConfig\r\n  ): AxiosPromise {\r\n    return axios({\r\n      ...config,\r\n      method: 'PUT',\r\n      url: `/layout-slots/${layoutSlotId}`,\r\n      data\r\n    })\r\n  }\r\n\r\n  /**\r\n   * Delete Layout Slot\r\n   *\r\n   * @param layoutSlotId\r\n   */\r\n  static deleteLayoutSlot(\r\n    layoutSlotId: number,\r\n    config?: RequestConfig\r\n  ): AxiosPromise {\r\n    return axios({\r\n      ...config,\r\n      method: 'DELETE',\r\n      url: `/layout-slots/${layoutSlotId}`,\r\n    })\r\n  }\r\n}","import { LayoutSlotDetail } from 'model/api/LayoutSlotDetail'\r\n\r\nexport interface MappedLayoutSlot\r\n  extends Omit<LayoutSlotDetail, 'writeable' | 'locked'> {\r\n  writeable: boolean\r\n  locked: boolean\r\n}\r\n\r\nexport const mapLayoutSlot = ({\r\n  writeable,\r\n  locked,\r\n  created_at,\r\n  modified_at,\r\n  ...rest\r\n}: LayoutSlotDetail) => ({\r\n  ...rest,\r\n  writeable: !!writeable,\r\n  locked: !!locked,\r\n  created_at: new Date(created_at),\r\n  modified_at: modified_at ? new Date(modified_at) : null,\r\n})\r\n","import { Modal, Space } from 'antd'\r\nimport React, { useCallback, useState, useRef, useEffect } from 'react'\r\nimport * as Yup from 'yup'\r\nimport { Formik } from 'formik'\r\nimport { Switch, Select, Input, Form as FormFormikAntd } from 'formik-antd'\r\nimport { FormikFormItem as Item } from 'components/FormikFormItem'\r\nimport { Button, Form as FormAntd } from 'antd'\r\nimport { useTranslation } from 'react-i18next'\r\nimport { validateSchema } from 'config/yup'\r\nimport axios, { CancelToken, CancelTokenSource } from 'axios'\r\nimport { LayoutSlotsApi } from 'api/LayoutSlots'\r\nimport { MappedLayoutSlot, mapLayoutSlot } from '../utils/mapLayoutSlot'\r\nimport { LayoutSlot } from 'model/api/LayoutSlot'\r\n\r\nconst { Item: ItemAntd } = FormAntd\r\nconst { Option } = Select\r\n\r\nexport interface SlotModalProps {\r\n  parentId?: number // For creating sub-ordinated slot\r\n  slotId?: number // Editing\r\n  layoutId: number\r\n  view: 'new' | 'detail'\r\n  onClose: () => void\r\n  onSave?: (view: 'new' | 'detail') => void\r\n}\r\n\r\nexport interface FormValues {\r\n  parent_id?: number | null\r\n  name?: string\r\n  writeable?: boolean\r\n  locked?: boolean\r\n  weight?: number\r\n  html_class_name?: string\r\n  html_id?: string\r\n}\r\n\r\nexport const FormSchema = Yup.object().shape<FormValues>({\r\n  parent_id: Yup.number()\r\n    .nullable()\r\n    .notRequired(),\r\n  name: Yup.string().required(),\r\n  writeable: Yup.boolean().notRequired(),\r\n  locked: Yup.boolean().notRequired(),\r\n  weight: Yup.number().required(),\r\n  html_class_name: Yup.string().notRequired(),\r\n  html_id: Yup.string().notRequired(),\r\n})\r\n\r\nexport const SlotModal: React.FC<SlotModalProps> = ({\r\n  view,\r\n  layoutId,\r\n  parentId,\r\n  slotId,\r\n  onClose,\r\n  onSave,\r\n}) => {\r\n  const { t } = useTranslation('layout-detail')\r\n  const [loading, setLoading] = useState(false)\r\n  const [data, setData] = useState<MappedLayoutSlot>()\r\n  const [layoutSlots, setLayoutSlots] = useState<LayoutSlot[]>([])\r\n  const cancelTokenRef = useRef<CancelTokenSource>(axios.CancelToken.source())\r\n\r\n  const getLayoutSlots = useCallback(\r\n    async (cancelToken: CancelToken) => {\r\n      try {\r\n        setLoading(true)\r\n\r\n        const { data } = await LayoutSlotsApi.getAllLayoutSlots(layoutId, {\r\n          cancelToken,\r\n        })\r\n\r\n        setLayoutSlots(data)\r\n        setLoading(false)\r\n      } catch (e) {\r\n        setLoading(false)\r\n      }\r\n    },\r\n    [layoutId]\r\n  )\r\n\r\n  const getData = useCallback(\r\n    async (cancelToken: CancelToken) => {\r\n      if (view === 'detail' && slotId) {\r\n        try {\r\n          setLoading(true)\r\n\r\n          const { data } = await LayoutSlotsApi.getLayoutSlot(slotId, {\r\n            cancelToken,\r\n          })\r\n\r\n          setData(mapLayoutSlot(data))\r\n          setLoading(false)\r\n        } catch (e) {\r\n          setLoading(false)\r\n        }\r\n      }\r\n    },\r\n    [view, slotId]\r\n  )\r\n\r\n  const getInitialValues = useCallback((): FormValues => {\r\n    if (data) {\r\n      return {\r\n        ...data,\r\n        parent_id: data.parent_id || 0,\r\n      }\r\n    } else {\r\n      return {\r\n        parent_id: parentId || 0,\r\n        name: undefined,\r\n        weight: 50,\r\n        locked: false,\r\n        writeable: false,\r\n        html_class_name: '',\r\n        html_id: '',\r\n      }\r\n    }\r\n  }, [data, parentId])\r\n\r\n  const handleSubmit = useCallback(\r\n    async ({\r\n      name,\r\n      writeable,\r\n      locked,\r\n      weight,\r\n      html_class_name,\r\n      html_id,\r\n    }: Required<FormValues>) => {\r\n      const cancelToken = cancelTokenRef.current.token\r\n\r\n      const formData = new FormData()\r\n      formData.append('name', name)\r\n      formData.append('writeable', String(+writeable))\r\n      formData.append('locked', String(+locked))\r\n      formData.append('weight', String(weight))\r\n      formData.append('html_class_name', html_class_name)\r\n      formData.append('html_id', html_id)\r\n\r\n      formData.append('layout_id', String(layoutId))\r\n\r\n      if (!!parentId) {\r\n        formData.append('parent_id', String(parentId))\r\n      }\r\n\r\n      if (view === 'new') {\r\n        try {\r\n          await LayoutSlotsApi.createLayoutSlot(formData, {\r\n            cancelToken,\r\n          })\r\n\r\n          onSave(view)\r\n        } catch (e) {}\r\n      } else if (view === 'detail' && slotId) {\r\n        try {\r\n          await LayoutSlotsApi.updateLayoutSlot(slotId, formData, {\r\n            cancelToken,\r\n          })\r\n\r\n          onSave(view)\r\n        } catch (e) {}\r\n      }\r\n    },\r\n    [view, layoutId, parentId, onSave, slotId]\r\n  )\r\n\r\n  const renderForm = useCallback(\r\n    () => (\r\n      <FormFormikAntd layout=\"vertical\">\r\n        <Item label={t('slot-modal.form.parent-id.label')} name=\"parent_id\">\r\n          <Select name=\"parent_id\" loading={loading}>\r\n            <Option value={0}>{t('slot-modal.form.parent-id.root')}</Option>\r\n            {layoutSlots.map(({ name, id }) => (\r\n              <Option value={id}>\r\n                <em>(id: {id})</em> {name}\r\n              </Option>\r\n            ))}\r\n          </Select>\r\n        </Item>\r\n        <Item label={t('slot-modal.form.name')} name=\"name\">\r\n          <Input name=\"name\" />\r\n        </Item>\r\n        <Item label={t('slot-modal.form.writeable')} name=\"writeable\">\r\n          <Switch name=\"writeable\" />\r\n        </Item>\r\n        <Item label={t('slot-modal.form.locked')} name=\"locked\">\r\n          <Switch name=\"locked\" />\r\n        </Item>\r\n        <Item label={t('slot-modal.form.weight')} name=\"weight\">\r\n          <Input name=\"weight\" type=\"number\" />\r\n        </Item>\r\n        <Item\r\n          label={t('slot-modal.form.html-class-name')}\r\n          name=\"html_class_name\"\r\n        >\r\n          <Input name=\"html_class_name\" />\r\n        </Item>\r\n        <Item label={t('slot-modal.form.html-id')} name=\"html_id\">\r\n          <Input name=\"html_id\" />\r\n        </Item>\r\n        <ItemAntd>\r\n          <Space direction=\"horizontal\" size=\"middle\">\r\n            <Button\r\n              htmlType=\"submit\"\r\n              type=\"primary\"\r\n              size=\"large\"\r\n              disabled={loading}\r\n            >\r\n              {t(\r\n                view === 'new'\r\n                  ? 'slot-modal.form.submit.new'\r\n                  : 'slot-modal.form.submit.detail'\r\n              )}\r\n            </Button>\r\n            <Button\r\n              type=\"default\"\r\n              htmlType=\"button\"\r\n              onClick={onClose}\r\n              size=\"large\"\r\n            >\r\n              {t('slot-modal.form.close')}\r\n            </Button>\r\n          </Space>\r\n        </ItemAntd>\r\n      </FormFormikAntd>\r\n    ),\r\n    [t, view, loading, onClose, layoutSlots]\r\n  )\r\n\r\n  useEffect(() => {\r\n    const cancelTokenSource = axios.CancelToken.source()\r\n\r\n    getData(cancelTokenSource.token)\r\n    getLayoutSlots(cancelTokenSource.token)\r\n\r\n    return () => cancelTokenSource.cancel()\r\n  }, [getData, getLayoutSlots])\r\n\r\n  return (\r\n    <Modal visible footer={null} closable={false}>\r\n      <Formik<FormValues>\r\n        initialValues={getInitialValues()}\r\n        enableReinitialize\r\n        validate={values => validateSchema(values, FormSchema)}\r\n        onSubmit={handleSubmit}\r\n      >\r\n        {() => renderForm()}\r\n      </Formik>\r\n    </Modal>\r\n  )\r\n}\r\n","import React, { useCallback, useState, useEffect, useRef } from 'react'\r\nimport { useTranslation } from 'react-i18next'\r\nimport axios, { CancelTokenSource } from 'axios'\r\nimport { LayoutSlotsApi } from 'api/LayoutSlots'\r\nimport { LayoutSlot } from 'model/api/LayoutSlot'\r\nimport styled from 'styled-components'\r\nimport { COLORS } from 'constants/colors'\r\nimport { Skeleton, Space, Alert, Button, notification } from 'antd'\r\nimport { IconButton } from 'components/IconButton'\r\nimport { SlotModal } from './SlotModal'\r\nimport { Dialog, DialogContainer } from 'components/Dialog'\r\nimport { Icon } from 'components/Icon'\r\n\r\nconst StyledDialog = styled(Dialog)`\r\n  && {\r\n    position: absolute;\r\n  }\r\n`\r\n\r\nconst Slot = styled.div`\r\n  margin-top: 12px;\r\n  padding: 24px;\r\n  border: 1px solid ${COLORS.gray2};\r\n  box-shadow: 0px 4px 10px 0px rgba(0, 0, 0, 0.1);\r\n`\r\n\r\nconst Container = styled.div<{ hasChildren: boolean }>`\r\n  display: grid;\r\n  grid-template-columns: auto max-content;\r\n  margin-bottom: ${({ hasChildren }) => hasChildren && `24px`};\r\n`\r\n\r\nconst StyledIcon = styled(Icon)`\r\n  margin-left: 6px;\r\n`\r\n\r\nexport interface SlotsProps {\r\n  layoutId: number\r\n}\r\n\r\nexport const Slots: React.FC<SlotsProps> = ({ layoutId }) => {\r\n  const { t } = useTranslation('layout-detail')\r\n  const [data, setData] = useState<LayoutSlot[]>([])\r\n  const [loading, setLoading] = useState(false)\r\n  const [isModalOpen, setIsModalOpen] = useState(false)\r\n  const [modalData, setModalData] = useState<{\r\n    parentId?: number\r\n    slotId?: number\r\n  }>({ parentId: undefined, slotId: undefined })\r\n  const [dialogActiveItem, setDialogActiveItem] = useState<number>()\r\n  const cancelTokenRef = useRef<CancelTokenSource>(axios.CancelToken.source())\r\n\r\n  const getData = useCallback(async () => {\r\n    try {\r\n      setLoading(true)\r\n      const { data } = await LayoutSlotsApi.getLayoutSlots(layoutId, {\r\n        cancelToken: cancelTokenRef.current.token,\r\n      })\r\n\r\n      setData(data)\r\n      setLoading(false)\r\n    } catch (e) {\r\n      setLoading(false)\r\n    }\r\n  }, [layoutId])\r\n\r\n  const handleDelete = useCallback(\r\n    async (slotId: number) => {\r\n      try {\r\n        await LayoutSlotsApi.deleteLayoutSlot(slotId, {\r\n          cancelToken: cancelTokenRef.current.token,\r\n        })\r\n\r\n        getData()\r\n\r\n        notification.success({ message: t('slots.delete-success') })\r\n      } catch (e) {}\r\n    },\r\n    [getData, t]\r\n  )\r\n\r\n  const renderSlots = useCallback(\r\n    (slots: LayoutSlot[]) =>\r\n      slots.map(({ id, name, children, locked }, index) => (\r\n        <Slot key={id}>\r\n          <Container hasChildren={!!children}>\r\n            <span>\r\n              {name}\r\n              {locked ? <StyledIcon icon=\"lock\" size=\"sm\" /> : null}\r\n            </span>\r\n            <Space direction=\"horizontal\" size=\"small\">\r\n              <IconButton\r\n                icon=\"plus\"\r\n                size=\"small\"\r\n                onClick={() => {\r\n                  setModalData({ parentId: id })\r\n                  setIsModalOpen(true)\r\n                }}\r\n              >\r\n                {t('slots.add')}\r\n              </IconButton>\r\n              <Button\r\n                size=\"small\"\r\n                onClick={() => {\r\n                  setModalData({ slotId: id })\r\n                  setIsModalOpen(true)\r\n                }}\r\n              >\r\n                {t('slots.edit')}\r\n              </Button>\r\n\r\n              <DialogContainer\r\n                top={\r\n                  data.length === 1 || index + 1 === data.length\r\n                    ? '-115px'\r\n                    : '10px'\r\n                }\r\n                left={`calc(-100% - 175px)`}\r\n              >\r\n                <Button\r\n                  size=\"small\"\r\n                  type=\"danger\"\r\n                  ghost\r\n                  onClick={() => setDialogActiveItem(id)}\r\n                >\r\n                  {t('slots.delete')}\r\n                </Button>\r\n\r\n                {dialogActiveItem === id && (\r\n                  <StyledDialog\r\n                    onConfirm={() => handleDelete(id)}\r\n                    onCancel={() => setDialogActiveItem(undefined)}\r\n                    confirm={t('slots.dialog.confirm')}\r\n                    cancel={t('slots.dialog.cancel')}\r\n                    text={t('slots.dialog.text')}\r\n                  />\r\n                )}\r\n              </DialogContainer>\r\n            </Space>\r\n          </Container>\r\n          {children && renderSlots(children)}\r\n        </Slot>\r\n      )),\r\n    [dialogActiveItem, data.length, handleDelete, t]\r\n  )\r\n\r\n  const handleSave = useCallback(\r\n    (view: 'new' | 'detail') => {\r\n      getData()\r\n      setIsModalOpen(false)\r\n      setModalData({ parentId: undefined, slotId: undefined })\r\n\r\n      if (view === 'new') {\r\n        notification.success({ message: t('slots.create-success') })\r\n      } else {\r\n        notification.success({ message: t('slots.update-success') })\r\n      }\r\n    },\r\n    [getData, t]\r\n  )\r\n\r\n  useEffect(() => {\r\n    getData()\r\n  }, [getData])\r\n\r\n  useEffect(() => {\r\n    const cancelTokenSource = cancelTokenRef.current\r\n\r\n    return () => cancelTokenSource.cancel()\r\n  }, [])\r\n\r\n  if (loading) {\r\n    return <Skeleton active loading paragraph={{ rows: 4, width: '100%' }} />\r\n  }\r\n\r\n  if (data) {\r\n    if (data.length > 0) {\r\n      return (\r\n        <>\r\n          <Space direction=\"vertical\" size=\"middle\" style={{ width: '100%' }}>\r\n            <IconButton\r\n              size=\"middle\"\r\n              type=\"primary\"\r\n              icon=\"plus\"\r\n              onClick={() => setIsModalOpen(true)}\r\n            >\r\n              {t('slots.create-new-slot')}\r\n            </IconButton>\r\n            <div>{renderSlots(data)}</div>\r\n          </Space>\r\n          {isModalOpen && (\r\n            <SlotModal\r\n              view={modalData.slotId ? 'detail' : 'new'}\r\n              layoutId={layoutId}\r\n              parentId={modalData.parentId}\r\n              slotId={modalData.slotId}\r\n              onClose={() => setIsModalOpen(false)}\r\n              onSave={handleSave}\r\n            />\r\n          )}\r\n        </>\r\n      )\r\n    } else {\r\n      return (\r\n        <>\r\n          <Alert\r\n            type=\"warning\"\r\n            message={\r\n              <Space direction=\"vertical\" size=\"middle\">\r\n                <div>{t('slots.no-slots')}</div>\r\n\r\n                <IconButton\r\n                  size=\"middle\"\r\n                  type=\"primary\"\r\n                  icon=\"plus\"\r\n                  onClick={() => setIsModalOpen(true)}\r\n                >\r\n                  {t('slots.create-new-slot')}\r\n                </IconButton>\r\n              </Space>\r\n            }\r\n          />\r\n          {isModalOpen && (\r\n            <SlotModal\r\n              view=\"new\"\r\n              layoutId={layoutId}\r\n              onClose={() => setIsModalOpen(false)}\r\n              onSave={handleSave}\r\n            />\r\n          )}\r\n        </>\r\n      )\r\n    }\r\n  }\r\n\r\n  return null\r\n}\r\n","import React, { useContext, useEffect, useState } from 'react'\r\nimport { RouteComponentProps } from '@reach/router'\r\nimport { useTranslation } from 'react-i18next'\r\nimport { SceneTitle } from 'components/SceneTitle'\r\nimport { AuthenticatedLayoutContext } from 'components/Layout/AuthenticatedLayout'\r\nimport { Form } from './components/Form'\r\nimport { BackButton } from 'components/BackButton'\r\nimport { Collapse } from 'antd'\r\nimport { Slots } from './components/Slots'\r\n\r\nconst { Panel } = Collapse\r\n\r\nenum PanelEnum {\r\n  FORM = 'form',\r\n  SLOTS = 'slots',\r\n}\r\n\r\nexport interface LayoutDetailProps extends RouteComponentProps {\r\n  layoutId?: number\r\n  view: 'new' | 'detail'\r\n  activeKeys?: PanelEnum[]\r\n}\r\n\r\nexport const LayoutDetail: React.FC<LayoutDetailProps> = ({\r\n  layoutId,\r\n  view,\r\n  activeKeys = [PanelEnum.SLOTS],\r\n}) => {\r\n  const { t } = useTranslation('layout-detail')\r\n  const { setSceneTitle } = useContext(AuthenticatedLayoutContext)\r\n  const [currentActiveKeys, setCurrentActiveKeys] = useState<PanelEnum[]>(\r\n    activeKeys\r\n  )\r\n\r\n  useEffect(() => {\r\n    setSceneTitle(\r\n      <SceneTitle\r\n        title={t(view === 'detail' ? 'scene-title.detail' : 'scene-title.new')}\r\n        extraContent={\r\n          <BackButton\r\n            title={t('scene-title.back-to-layouts')}\r\n            to=\"/content/layouts\"\r\n          />\r\n        }\r\n      />\r\n    )\r\n  }, [setSceneTitle, t, view])\r\n\r\n  if (view === 'new') {\r\n    return <Form layoutId={layoutId} view={view} />\r\n  } else if (view === 'detail' && layoutId) {\r\n    return (\r\n      <Collapse\r\n        defaultActiveKey={currentActiveKeys}\r\n        onChange={key => setCurrentActiveKeys(key as PanelEnum[])}\r\n      >\r\n        <Panel header={t('form.title')} key={PanelEnum.FORM}>\r\n          <Form layoutId={layoutId} view={view} />\r\n        </Panel>\r\n        <Panel header={t('slots.title')} key={PanelEnum.SLOTS}>\r\n          <Slots layoutId={layoutId} />\r\n        </Panel>\r\n      </Collapse>\r\n    )\r\n  }\r\n\r\n  return null\r\n}\r\n","import { TemplateDetail } from 'model/api/TemplateDetail'\r\n\r\nexport interface MappedTemplateDetail\r\n  extends Omit<TemplateDetail, 'template_pages'> {\r\n  template_pages?: number[]\r\n}\r\n\r\nexport const mapTemplateDetail = ({\r\n  template_pages,\r\n  ...rest\r\n}: TemplateDetail): MappedTemplateDetail => ({\r\n  ...rest,\r\n  template_pages: template_pages.reduce<number[]>((acc, { id }) => {\r\n    acc.push(id)\r\n    return acc\r\n  }, []),\r\n})\r\n","import axios, { AxiosPromise } from 'axios'\r\nimport { RequestConfig } from './requestConfig'\r\nimport { TemplatePage } from 'model/api/TemplatePage'\r\nimport { PaginatedList } from 'model/api/PaginatedList'\r\n\r\nexport class TemplatePagesApi {\r\n  /**\r\n   * Get Template Pages\r\n   *\r\n   * @param page\r\n   * @param pageSize\r\n   */\r\n  static getTemplatePages(\r\n    page?: number,\r\n    pageSize?: number,\r\n    config?: RequestConfig\r\n  ): AxiosPromise<PaginatedList<TemplatePage>> {\r\n    return axios({\r\n      ...config,\r\n      method: 'GET',\r\n      url: `/template-pages`,\r\n      params: {\r\n        page,\r\n        per_page: pageSize,\r\n      },\r\n    })\r\n  }\r\n\r\n  /**\r\n   * Get Template Pages\r\n   *\r\n   * @param layout_id\r\n   */\r\n  static getAllTemplatePages(\r\n    layout_id?: number,\r\n    config?: RequestConfig\r\n  ): AxiosPromise<TemplatePage[]> {\r\n    return axios({\r\n      ...config,\r\n      method: 'GET',\r\n      url: `/template-pages/all`,\r\n      params: {\r\n        layout_id,\r\n      },\r\n    })\r\n  }\r\n\r\n  /**\r\n   * Get Template Page\r\n   *\r\n   * @param templatePageId\r\n   */\r\n  static getTemplatePage(\r\n    templatePageId: number,\r\n    config?: RequestConfig\r\n  ): AxiosPromise<TemplatePage> {\r\n    return axios({\r\n      ...config,\r\n      method: 'GET',\r\n      url: `/template-pages/${templatePageId}`,\r\n    })\r\n  }\r\n\r\n  /**\r\n   * Create Template Page\r\n   */\r\n  static createTemplatePage(\r\n    data: FormData,\r\n    config?: RequestConfig\r\n  ): AxiosPromise<{ id: number }> {\r\n    return axios({\r\n      ...config,\r\n      method: 'POST',\r\n      url: `/template-pages`,\r\n      data,\r\n    })\r\n  }\r\n\r\n  /**\r\n   * Update Template Page\r\n   */\r\n  static updateTemplatePage(\r\n    templatePageId: number,\r\n    data: FormData,\r\n    config?: RequestConfig\r\n  ): AxiosPromise {\r\n    return axios({\r\n      ...config,\r\n      method: 'PUT',\r\n      url: `/template-pages/${templatePageId}`,\r\n      data,\r\n    })\r\n  }\r\n\r\n  /**\r\n   * Delete Template Page\r\n   */\r\n  static deleteTemplatePage(\r\n    templatePageId: number,\r\n    config?: RequestConfig\r\n  ): AxiosPromise {\r\n    return axios({\r\n      ...config,\r\n      method: 'DELETE',\r\n      url: `/template-pages/${templatePageId}`,\r\n    })\r\n  }\r\n}\r\n","import React, { useCallback, useState, useEffect, useRef } from 'react'\r\nimport { Formik } from 'formik'\r\nimport { Select, Input, Form as FormFormikAntd } from 'formik-antd'\r\nimport { FormikFormItem as Item } from 'components/FormikFormItem'\r\nimport { Button, Form as FormAntd, notification } from 'antd'\r\nimport { useTranslation } from 'react-i18next'\r\nimport { validateSchema } from 'config/yup'\r\nimport * as Yup from 'yup'\r\nimport axios, { CancelToken, CancelTokenSource } from 'axios'\r\nimport { navigate } from '@reach/router'\r\nimport { View } from 'model/api/View'\r\nimport { ViewsApi } from 'api/Views'\r\nimport { TemplatesApi } from 'api/Templates'\r\nimport { Layout } from 'model/api/Layout'\r\nimport { LayoutsApi } from 'api/Layouts'\r\nimport {\r\n  MappedTemplateDetail,\r\n  mapTemplateDetail,\r\n} from '../utils/mapTemplateDetail'\r\nimport { TemplatePage } from 'model/api/TemplatePage'\r\nimport { TemplatePagesApi } from 'api/TemplatePages'\r\n\r\nconst { Item: ItemAntd } = FormAntd\r\nconst { TextArea } = Input\r\nconst { Option } = Select\r\n\r\nexport interface CatalogCategory {}\r\n\r\nexport interface FormValues {\r\n  layout_id?: number\r\n  view_id?: number\r\n  name?: string\r\n  html_head_end?: string\r\n  html_body_start?: string\r\n  html_body_end?: string\r\n  template_pages?: number[]\r\n}\r\n\r\nexport const FormSchema = Yup.object().shape<FormValues>({\r\n  layout_id: Yup.number().required(),\r\n  view_id: Yup.number().required(),\r\n  name: Yup.string().required(),\r\n  html_head_end: Yup.string().notRequired(),\r\n  html_body_start: Yup.string().notRequired(),\r\n  html_body_end: Yup.string().notRequired(),\r\n  template_pages: Yup.array().of(Yup.number()),\r\n})\r\n\r\nexport interface FormProps {\r\n  templateId?: number\r\n  view: 'new' | 'detail'\r\n}\r\n\r\nexport const Form: React.FC<FormProps> = ({ templateId, view }) => {\r\n  const { PUBLIC_URL } = process.env\r\n  const { t } = useTranslation('template-detail')\r\n  const [data, setData] = useState<MappedTemplateDetail>()\r\n  const [views, setViews] = useState<View[]>([])\r\n  const [layouts, setLayouts] = useState<Layout[]>([])\r\n  const [templatePages, setTemplatePages] = useState<TemplatePage[]>([])\r\n  const [loading, setLoading] = useState(false)\r\n  const cancelTokenRef = useRef<CancelTokenSource>(axios.CancelToken.source())\r\n  const formInitialValues: FormValues = data || {\r\n    name: undefined,\r\n    view_id: undefined,\r\n    layout_id: undefined,\r\n    html_head_end: '',\r\n    html_body_start: '',\r\n    html_body_end: '',\r\n    template_pages: undefined,\r\n  }\r\n\r\n\r\n  const getTemplatePages = useCallback(\r\n    async (layoutId: number, cancelToken: CancelToken) => {\r\n      if (view === 'detail') {\r\n        try {\r\n          setLoading(true)\r\n\r\n          const { data } = await TemplatePagesApi.getAllTemplatePages(layoutId, {\r\n            cancelToken,\r\n          })\r\n\r\n          setTemplatePages(data)\r\n          setLoading(false)\r\n        } catch (e) {\r\n          setLoading(false)\r\n        }\r\n      }\r\n    },\r\n    [view]\r\n  )\r\n\r\n  const getData = useCallback(\r\n    async (cancelToken: CancelToken) => {\r\n      if (view === 'detail' && templateId) {\r\n        try {\r\n          setLoading(true)\r\n\r\n          const { data } = await TemplatesApi.getTemplate(templateId, {\r\n            cancelToken,\r\n          })\r\n\r\n          await getTemplatePages(data.layout_id, cancelToken)\r\n\r\n          setData(mapTemplateDetail(data))\r\n          setLoading(false)\r\n        } catch (e) {\r\n          setLoading(false)\r\n        }\r\n      }\r\n    },\r\n    [view, templateId, getTemplatePages]\r\n  )\r\n\r\n  const getViews = useCallback(async (cancelToken: CancelToken) => {\r\n    try {\r\n      setLoading(true)\r\n\r\n      const { data } = await ViewsApi.getAllViews({ cancelToken })\r\n\r\n      setViews(data)\r\n      setLoading(false)\r\n    } catch (e) {\r\n      setLoading(false)\r\n    }\r\n  }, [])\r\n\r\n  const getLayouts = useCallback(async (cancelToken: CancelToken) => {\r\n    try {\r\n      setLoading(true)\r\n\r\n      const { data } = await LayoutsApi.getAllLayouts({ cancelToken })\r\n\r\n      setLayouts(data)\r\n      setLoading(false)\r\n    } catch (e) {\r\n      setLoading(false)\r\n    }\r\n  }, [])\r\n\r\n  const handleSubmit = useCallback(\r\n    async ({\r\n      name,\r\n      view_id,\r\n      layout_id,\r\n      html_head_end,\r\n      html_body_end,\r\n      html_body_start,\r\n      template_pages,\r\n    }: Required<FormValues>) => {\r\n      try {\r\n        setLoading(true)\r\n\r\n        const formData = new FormData()\r\n        formData.append('name', name)\r\n        formData.append('view_id', String(view_id))\r\n        formData.append('layout_id', String(layout_id))\r\n        formData.append('html_head_end', html_head_end)\r\n        formData.append('html_body_end', html_body_end)\r\n        formData.append('html_body_start', html_body_start)\r\n\r\n        if (view === 'new') {\r\n          const {\r\n            data: { id },\r\n          } = await TemplatesApi.createTemplate(formData, {\r\n            cancelToken: cancelTokenRef.current.token,\r\n          })\r\n\r\n          notification.success({ message: t('form.create-success') })\r\n          navigate(PUBLIC_URL + '/content/templates/' + id)\r\n        } else if (view === 'detail' && templateId) {\r\n          template_pages.forEach(id => {\r\n            formData.append('template_pages[]', String(id))\r\n          })\r\n\r\n          await TemplatesApi.updateTemplate(templateId, formData, {\r\n            cancelToken: cancelTokenRef.current.token,\r\n          })\r\n\r\n          notification.success({ message: t('form.update-success') })\r\n\r\n          const to = PUBLIC_URL + '/content/templates/' + templateId\r\n\r\n          navigate(PUBLIC_URL + '/redirect-to', {\r\n            state: {\r\n              to,\r\n            },\r\n          })\r\n        }\r\n      } catch (e) {\r\n        setLoading(false)\r\n      }\r\n    },\r\n    [PUBLIC_URL, view, t, templateId]\r\n  )\r\n\r\n  const renderForm = useCallback(\r\n    () => (\r\n      <FormFormikAntd layout=\"vertical\">\r\n        <Item label={t('form.layout-id')} name=\"layout_id\">\r\n          <Select name=\"layout_id\">\r\n            {layouts.map(({ id, name }) => (\r\n              <Option key={id} value={id}>\r\n                {name}\r\n              </Option>\r\n            ))}\r\n          </Select>\r\n        </Item>\r\n        <Item label={t('form.view-id')} name=\"view_id\">\r\n          <Select name=\"view_id\">\r\n            {views.map(({ id, name }) => (\r\n              <Option key={id} value={id}>\r\n                {name}\r\n              </Option>\r\n            ))}\r\n          </Select>\r\n        </Item>\r\n        <Item label={t('form.name')} name=\"name\">\r\n          <Input name=\"name\" />\r\n        </Item>\r\n        <Item label={t('form.html-head-end')} name=\"html_head_end\">\r\n          <TextArea name=\"html_head_end\" rows={3} />\r\n        </Item>\r\n        <Item label={t('form.html-body-start')} name=\"html_body_start\">\r\n          <TextArea name=\"html_body_start\" rows={3} />\r\n        </Item>\r\n        <Item label={t('form.html-body-end')} name=\"html_body_end\">\r\n          <TextArea name=\"html_body_end\" rows={3} />\r\n        </Item>\r\n        {view === 'detail' && (\r\n          <Item label={t('form.template-pages')} name=\"template_pages\">\r\n            <Select name=\"template_pages\" mode=\"multiple\">\r\n              {templatePages.map(({ id, name }) => (\r\n                <Option key={id} value={id}>\r\n                  {name}\r\n                </Option>\r\n              ))}\r\n            </Select>\r\n          </Item>\r\n        )}\r\n        <ItemAntd>\r\n          <Button\r\n            htmlType=\"submit\"\r\n            type=\"primary\"\r\n            size=\"large\"\r\n            disabled={loading}\r\n          >\r\n            {t(view === 'new' ? 'form.submit.new' : 'form.submit.detail')}\r\n          </Button>\r\n        </ItemAntd>\r\n      </FormFormikAntd>\r\n    ),\r\n    [t, view, views, layouts, templatePages, loading]\r\n  )\r\n\r\n  useEffect(() => {\r\n    const cancelTokenSource = axios.CancelToken.source()\r\n\r\n    getData(cancelTokenSource.token)\r\n    getViews(cancelTokenSource.token)\r\n    getLayouts(cancelTokenSource.token)\r\n\r\n    return () => cancelTokenSource.cancel()\r\n  }, [getData, getViews, getLayouts])\r\n\r\n  useEffect(() => {\r\n    const cancelToken = cancelTokenRef.current\r\n\r\n    return () => cancelToken.cancel()\r\n  }, [])\r\n\r\n  return (\r\n    <Formik<FormValues>\r\n      initialValues={formInitialValues}\r\n      enableReinitialize\r\n      validate={values => validateSchema(values, FormSchema)}\r\n      onSubmit={handleSubmit}\r\n    >\r\n      {() => renderForm()}\r\n    </Formik>\r\n  )\r\n}\r\n","import React, { useContext, useEffect } from 'react'\r\nimport { RouteComponentProps } from '@reach/router'\r\nimport { useTranslation } from 'react-i18next'\r\nimport { SceneTitle } from 'components/SceneTitle'\r\nimport { AuthenticatedLayoutContext } from 'components/Layout/AuthenticatedLayout'\r\nimport { Form } from './components/Form'\r\nimport { BackButton } from 'components/BackButton'\r\n\r\nexport interface TemplatDetailProps extends RouteComponentProps {\r\n  templateId?: number\r\n  view: 'new' | 'detail'\r\n}\r\n\r\nexport const TemplateDetail: React.FC<TemplatDetailProps> = ({\r\n  templateId,\r\n  view,\r\n}) => {\r\n  const { t } = useTranslation('template-detail')\r\n  const { setSceneTitle } = useContext(AuthenticatedLayoutContext)\r\n\r\n  useEffect(() => {\r\n    setSceneTitle(\r\n      <SceneTitle\r\n        title={t(view === 'detail' ? 'scene-title.detail' : 'scene-title.new')}\r\n        extraContent={\r\n          <BackButton\r\n            title={t('scene-title.back-to-templates')}\r\n            to=\"/content/templates\"\r\n          />\r\n        }\r\n      />\r\n    )\r\n  }, [setSceneTitle, t, view])\r\n\r\n  return (\r\n    <Form\r\n      templateId={templateId}\r\n      view={view}\r\n    />\r\n  )\r\n}\r\n","import { Page } from 'model/api/Page'\r\nimport mapObject from 'map-obj'\r\n\r\nexport interface MappedPage\r\n  extends Omit<Page, 'identifier' | 'name' | 'children'> {\r\n  value: string | null\r\n  title: string\r\n  children?: MappedPage[]\r\n}\r\n\r\nexport const mapPages = (\r\n  data: Page[],\r\n) => {\r\n  const mappedPages = (mapObject(\r\n    data,\r\n    (key: any, value: any) => {\r\n      switch (key) {\r\n        case 'identifier':\r\n          return ['value', value]\r\n        case 'name':\r\n          return ['title', value]\r\n        case 'children':\r\n        default:\r\n          return [key, value]\r\n      }\r\n    },\r\n    { deep: true }\r\n  ) as unknown) as MappedPage[]\r\n\r\n  return mappedPages\r\n}\r\n","import { useEffect, useState, useCallback } from 'react'\r\nimport { Template } from 'model/api/Template'\r\nimport axios, { CancelToken } from 'axios'\r\nimport { TemplatesApi } from 'api/Templates'\r\nimport { PagesApi } from 'api/Pages'\r\nimport { mapPages, MappedPage } from 'mappers/mapPages'\r\n\r\nexport const useGetPropertiesData = () => {\r\n  const [pages, setPages] = useState<MappedPage[]>()\r\n  const [templates, setTemplates] = useState<Template[]>([])\r\n  const [loading, setLoading] = useState(false)\r\n\r\n  const getTemplates = useCallback(async (cancelToken: CancelToken) => {\r\n    try {\r\n      setLoading(true)\r\n      const { data } = await TemplatesApi.getAllTemplates({ cancelToken })\r\n\r\n      setTemplates(data)\r\n      setLoading(false)\r\n    } catch (e) {\r\n      setLoading(false)\r\n    }\r\n  }, [])\r\n\r\n  const getAllPages = useCallback(\r\n    async (cancelToken: CancelToken) => {\r\n      try {\r\n        setLoading(true)\r\n        const { data } = await PagesApi.getAllPages({ cancelToken })\r\n\r\n        setPages(mapPages(data))\r\n        setLoading(false)\r\n      } catch (e) {\r\n        setLoading(false)\r\n      }\r\n    },\r\n    []\r\n  )\r\n\r\n  useEffect(() => {\r\n    const cancelTokenSource = axios.CancelToken.source()\r\n\r\n    getTemplates(cancelTokenSource.token)\r\n    getAllPages(cancelTokenSource.token)\r\n\r\n    return () => cancelTokenSource.cancel()\r\n  }, [getTemplates, getAllPages])\r\n\r\n  return {\r\n    pages,\r\n    templates,\r\n    loading,\r\n  }\r\n}\r\n","import React, { useCallback, useState, useEffect, useRef } from 'react'\r\nimport { Formik } from 'formik'\r\nimport { Input, Select, Form as FormFormikAntd, TreeSelect } from 'formik-antd'\r\nimport { FormikFormItem as Item } from 'components/FormikFormItem'\r\nimport { Button, Form as FormAntd, notification } from 'antd'\r\nimport { useTranslation } from 'react-i18next'\r\nimport { validateSchema } from 'config/yup'\r\nimport * as Yup from 'yup'\r\nimport { PagesApi } from 'api/Pages'\r\nimport axios, { CancelTokenSource } from 'axios'\r\nimport { navigate } from '@reach/router'\r\nimport { useGetPropertiesData } from '../hooks/useGetPropertiesData'\r\n\r\nconst { Item: ItemAntd } = FormAntd\r\nconst { Option } = Select\r\n\r\nexport interface FormValues {\r\n  parent?: string\r\n  name?: string\r\n  template_id?: number\r\n  path?: string\r\n}\r\n\r\nexport const FormSchema = Yup.object().shape<FormValues>({\r\n  parent: Yup.string().notRequired(),\r\n  name: Yup.string().required(),\r\n  template_id: Yup.number().required(),\r\n  path: Yup.string().required(),\r\n})\r\n\r\nexport interface FormProps {\r\n  pageIdentifier?: string\r\n  parent?: string\r\n  view: 'new' | 'detail'\r\n}\r\n\r\nexport const Form: React.FC<FormProps> = ({ parent, view }) => {\r\n  const { PUBLIC_URL } = process.env\r\n  const { t } = useTranslation('content-detail')\r\n  const { pages, templates, loading: propsDataLoading } = useGetPropertiesData()\r\n  const [loading, setLoading] = useState(false)\r\n  const cancelTokenRef = useRef<CancelTokenSource>(axios.CancelToken.source())\r\n  const formInitialValues: FormValues = {\r\n    parent: parent ? parent : '',\r\n    name: undefined,\r\n    template_id: undefined,\r\n    path: undefined,\r\n  }\r\n\r\n  const handleSubmit = useCallback(\r\n    async ({\r\n      name,\r\n      parent: parentIdentifier,\r\n      path,\r\n      template_id,\r\n    }: Required<FormValues>) => {\r\n      setLoading(true)\r\n      const data = new FormData()\r\n      data.append('name', name)\r\n      data.append('parent', parentIdentifier)\r\n      data.append('path', path)\r\n      data.append('template_id', String(template_id))\r\n\r\n      if (view === 'new') {\r\n        const {\r\n          data: { identifier },\r\n        } = await PagesApi.createPage(data, {\r\n          cancelToken: cancelTokenRef.current.token,\r\n        })\r\n\r\n        setLoading(false)\r\n\r\n        notification.success({\r\n          message: t('form.create-success'),\r\n        })\r\n\r\n        navigate(PUBLIC_URL + '/content/' + identifier)\r\n      }\r\n    },\r\n    [PUBLIC_URL, view, t]\r\n  )\r\n\r\n  const renderForm = useCallback(\r\n    () => (\r\n      <FormFormikAntd layout=\"vertical\">\r\n        <Item label={t('form.tempalte-id')} name=\"template_id\">\r\n          <Select name=\"template_id\" loading={loading || propsDataLoading}>\r\n            {templates.map(({ id, name }) => (\r\n              <Option value={id} key={id}>\r\n                {name}\r\n              </Option>\r\n            ))}\r\n          </Select>\r\n        </Item>\r\n        <Item label={t('form.parent')} name=\"parent\">\r\n          {pages ? (\r\n            <TreeSelect\r\n              treeData={pages}\r\n              name=\"parent\"\r\n              allowClear\r\n              showArrow\r\n              showSearch\r\n              filterTreeNode\r\n              treeDefaultExpandAll\r\n              treeNodeFilterProp=\"title\"\r\n            />\r\n          ) : (\r\n            <Input name=\"parent\" disabled />\r\n          )}\r\n        </Item>\r\n        <Item label={t('form.name')} name=\"name\">\r\n          <Input name=\"name\" />\r\n        </Item>\r\n        <Item label={t('form.path')} name=\"path\">\r\n          <Input name=\"path\" />\r\n        </Item>\r\n        <ItemAntd>\r\n          <Button\r\n            htmlType=\"submit\"\r\n            type=\"primary\"\r\n            size=\"large\"\r\n            disabled={loading}\r\n          >\r\n            {t('form.submit.new')}\r\n          </Button>\r\n        </ItemAntd>\r\n      </FormFormikAntd>\r\n    ),\r\n    [t, templates, pages, loading, propsDataLoading]\r\n  )\r\n\r\n  useEffect(() => {\r\n    const cancelToken = cancelTokenRef.current\r\n\r\n    return () => cancelToken.cancel()\r\n  }, [])\r\n\r\n  return (\r\n    <Formik<FormValues>\r\n      initialValues={formInitialValues}\r\n      enableReinitialize\r\n      validate={values => validateSchema(values, FormSchema)}\r\n      onSubmit={handleSubmit}\r\n    >\r\n      {() => renderForm()}\r\n    </Formik>\r\n  )\r\n}\r\n","import axios, { AxiosPromise } from 'axios'\r\nimport { RequestConfig } from './requestConfig'\r\nimport { Module } from 'model/api/Module'\r\n\r\nexport class ModulesApi {\r\n  /**\r\n   * Get Modules\r\n   *\r\n   * @param pageIdentifier\r\n   * @param pageVersion\r\n   * @param layoutId\r\n   * @param templatePageIds\r\n   */\r\n  static getModules(\r\n    pageIdentifier: string,\r\n    pageVersion: number,\r\n    layoutId: number,\r\n    templatePageIds?: number[],\r\n    config?: RequestConfig\r\n  ): AxiosPromise<Module[]> {\r\n    return axios({\r\n      ...config,\r\n      method: 'GET',\r\n      url: `/modules`,\r\n      params: {\r\n        page_identifier: pageIdentifier,\r\n        page_version: pageVersion,\r\n        layout_id: layoutId,\r\n        template_page_ids: templatePageIds,\r\n      },\r\n    })\r\n  }\r\n}\r\n","export enum ModuleTypeEnum {\r\n  'TEXT' = 'TEXT',\r\n  'GALLERY' = 'GALLERY',\r\n  'IMAGE' = 'IMAGE',\r\n  'HEADING' = 'HEADING',\r\n  'NAVIGATION' = 'NAVIGATION',\r\n  'LOGO' = 'LOGO',\r\n  'CATALOG_CATEGORY_TREE' = 'CATALOG_CATEGORY_TREE',\r\n  'CATALOG_CATEGORY' = 'CATALOG_CATEGORY',\r\n  'CATALOG_LISTING' = 'CATALOG_LISTING',\r\n  'CATALOG_SEARCH' = 'CATALOG_SEARCH',\r\n  'CATALOG_DETAIL' = 'CATALOG_DETAIL',\r\n  'CATALOG_ITEM' = 'CATALOG_ITEM',\r\n  'CAROUSEL' = 'CAROUSEL',\r\n  'FORM' = 'FORM',\r\n  'HTML' = 'HTML',\r\n  'BUTTON' = 'BUTTON',\r\n  'GRID' = 'GRID',\r\n  'PRICE' = 'PRICE',\r\n  'PAGE_LISTING' = 'PAGE_LISTING',\r\n  'PAGE_TAG_TREE' = 'PAGE_TAG_TREE',\r\n  'PAGE_SEARCH' = 'PAGE_SEARCH',\r\n}\r\n","export enum PageTypeEnum {\r\n  'PAGE' = 'PAGE',\r\n  'TEMPLATE_PAGE' = 'TEMPLATE_PAGE',\r\n}\r\n","import axios, { AxiosPromise } from 'axios'\r\nimport { RequestConfig } from './requestConfig'\r\nimport { TextModule } from 'model/api/TextModule'\r\n\r\nexport class TextModulesApi {\r\n  /**\r\n   * Get Text Module\r\n   *\r\n   * @param moduleId\r\n   */\r\n  static getTextModule(\r\n    moduleId: number,\r\n    config?: RequestConfig\r\n  ): AxiosPromise<TextModule> {\r\n    return axios({\r\n      ...config,\r\n      method: 'GET',\r\n      url: `/text-modules/${moduleId}`,\r\n    })\r\n  }\r\n}\r\n","import axios, { AxiosPromise } from 'axios'\r\nimport { RequestConfig } from './requestConfig'\r\nimport { CatalogListingModule } from 'model/api/CatalogListingModule'\r\n\r\nexport class CatalogListingModulesApi {\r\n  /**\r\n   * Get Catalog Listing Module\r\n   *\r\n   * @param moduleId\r\n   */\r\n  static getCatalogListingModule(\r\n    moduleId: number,\r\n    config?: RequestConfig\r\n  ): AxiosPromise<CatalogListingModule> {\r\n    return axios({\r\n      ...config,\r\n      method: 'GET',\r\n      url: `/catalog-listing-modules/${moduleId}`,\r\n    })\r\n  }\r\n}\r\n","import axios, { AxiosPromise } from 'axios'\r\nimport { RequestConfig } from './requestConfig'\r\nimport { NavigationModule } from 'model/api/NavigationModule'\r\n\r\nexport class NavigationModulesApi {\r\n  /**\r\n   * Get Navigation Module\r\n   *\r\n   * @param moduleId\r\n   */\r\n  static getNavigationModule(\r\n    moduleId: number,\r\n    config?: RequestConfig\r\n  ): AxiosPromise<NavigationModule> {\r\n    return axios({\r\n      ...config,\r\n      method: 'GET',\r\n      url: `/navigation-modules/${moduleId}`,\r\n    })\r\n  }\r\n}\r\n","import axios, { AxiosPromise } from 'axios'\r\nimport { RequestConfig } from './requestConfig'\r\nimport { ButtonModule } from 'model/api/ButtonModule'\r\n\r\nexport class ButtonModulesApi {\r\n  /**\r\n   * Get Button Module\r\n   *\r\n   * @param moduleId\r\n   */\r\n  static getButtonModule(\r\n    moduleId: number,\r\n    config?: RequestConfig\r\n  ): AxiosPromise<ButtonModule> {\r\n    return axios({\r\n      ...config,\r\n      method: 'GET',\r\n      url: `/button-modules/${moduleId}`,\r\n    })\r\n  }\r\n}\r\n","import axios, { AxiosPromise } from 'axios'\r\nimport { RequestConfig } from './requestConfig'\r\nimport { ImageModule } from 'model/api/ImageModule'\r\n\r\nexport class ImageModulesApi {\r\n  /**\r\n   * Get Image Module\r\n   *\r\n   * @param moduleId\r\n   */\r\n  static getImageModule(\r\n    moduleId: number,\r\n    config?: RequestConfig\r\n  ): AxiosPromise<ImageModule> {\r\n    return axios({\r\n      ...config,\r\n      method: 'GET',\r\n      url: `/image-modules/${moduleId}`,\r\n    })\r\n  }\r\n}\r\n","import axios, { AxiosPromise } from 'axios'\r\nimport { RequestConfig } from './requestConfig'\r\nimport { HeadingModule } from 'model/api/HeadingModule'\r\n\r\nexport class HeadingModulesApi {\r\n  /**\r\n   * Get Heading Module\r\n   *\r\n   * @param moduleId\r\n   */\r\n  static getHeadingModule(\r\n    moduleId: number,\r\n    config?: RequestConfig\r\n  ): AxiosPromise<HeadingModule> {\r\n    return axios({\r\n      ...config,\r\n      method: 'GET',\r\n      url: `/heading-modules/${moduleId}`,\r\n    })\r\n  }\r\n}\r\n","import axios, { AxiosPromise } from 'axios'\r\nimport { RequestConfig } from './requestConfig'\r\nimport { CatalogItemModule } from 'model/api/CatalogItemModule'\r\n\r\nexport class CatalogItemModulesApi {\r\n  /**\r\n   * Get Catalog Item Module\r\n   *\r\n   * @param moduleId\r\n   */\r\n  static getCatalogItemModule(\r\n    moduleId: number,\r\n    config?: RequestConfig\r\n  ): AxiosPromise<CatalogItemModule> {\r\n    return axios({\r\n      ...config,\r\n      method: 'GET',\r\n      url: `/catalog-item-modules/${moduleId}`,\r\n    })\r\n  }\r\n}\r\n","import axios, { AxiosPromise } from 'axios'\r\nimport { RequestConfig } from './requestConfig'\r\nimport { CatalogCategoryTreeModule } from 'model/api/CatalogCategoryTreeModule'\r\n\r\nexport class CatalogCategoryTreeModulesApi {\r\n  /**\r\n   * Get Catalog Category Tree Module\r\n   *\r\n   * @param moduleId\r\n   */\r\n  static getCatalogCategoryTreeModule(\r\n    moduleId: number,\r\n    config?: RequestConfig\r\n  ): AxiosPromise<CatalogCategoryTreeModule> {\r\n    return axios({\r\n      ...config,\r\n      method: 'GET',\r\n      url: `/catalog-category-tree-modules/${moduleId}`,\r\n    })\r\n  }\r\n}\r\n","import axios, { AxiosPromise } from 'axios'\r\nimport { RequestConfig } from './requestConfig'\r\nimport { CatalogCategoryModule } from 'model/api/CatalogCategoryModule'\r\n\r\nexport class CatalogCategoryModulesApi {\r\n  /**\r\n   * Get Catalog Category Module\r\n   *\r\n   * @param moduleId\r\n   */\r\n  static getCatalogCategoryModule(\r\n    moduleId: number,\r\n    config?: RequestConfig\r\n  ): AxiosPromise<CatalogCategoryModule> {\r\n    return axios({\r\n      ...config,\r\n      method: 'GET',\r\n      url: `/catalog-category-modules/${moduleId}`,\r\n    })\r\n  }\r\n}\r\n","import axios, { AxiosPromise } from 'axios'\r\nimport { RequestConfig } from './requestConfig'\r\nimport { CatalogDetailModule } from 'model/api/CatalogDetailModule'\r\n\r\nexport class CatalogDetailModulesApi {\r\n  /**\r\n   * Get Catalog Detail Module\r\n   *\r\n   * @param moduleId\r\n   */\r\n  static getCatalogDetailModule(\r\n    moduleId: number,\r\n    config?: RequestConfig\r\n  ): AxiosPromise<CatalogDetailModule> {\r\n    return axios({\r\n      ...config,\r\n      method: 'GET',\r\n      url: `/catalog-detail-modules/${moduleId}`,\r\n    })\r\n  }\r\n}\r\n","import axios, { AxiosPromise } from 'axios'\r\nimport { RequestConfig } from './requestConfig'\r\nimport { CatalogSearchModule } from 'model/api/CatalogSearchModule'\r\n\r\nexport class CatalogSearchModulesApi {\r\n  /**\r\n   * Get Catalog Search Module\r\n   *\r\n   * @param moduleId\r\n   */\r\n  static getCatalogSearchModule(\r\n    moduleId: number,\r\n    config?: RequestConfig\r\n  ): AxiosPromise<CatalogSearchModule> {\r\n    return axios({\r\n      ...config,\r\n      method: 'GET',\r\n      url: `/catalog-search-modules/${moduleId}`,\r\n    })\r\n  }\r\n}\r\n","import { useCallback, useState, useRef, useEffect } from 'react'\r\nimport { Page } from 'model/api/Page'\r\nimport { LayoutSlot } from 'model/api/LayoutSlot'\r\nimport { View } from 'model/api/View'\r\nimport { Template } from 'model/api/Template'\r\nimport { Layout } from 'model/api/Layout'\r\nimport axios, { CancelTokenSource } from 'axios'\r\nimport { TemplatesApi } from 'api/Templates'\r\nimport { PagesApi } from 'api/Pages'\r\nimport { ViewsApi } from 'api/Views'\r\nimport { LayoutsApi } from 'api/Layouts'\r\nimport { LayoutSlotsApi } from 'api/LayoutSlots'\r\nimport { ModulesApi } from 'api/Modules'\r\nimport { ModuleProps } from '../types/Module'\r\nimport uuid from 'uuid/v4'\r\nimport { ModuleTypeEnum } from 'model/api/ModuleTypeEnum'\r\nimport { TextModulesApi } from 'api/TextModules'\r\nimport { CatalogListingModulesApi } from 'api/CatalogListingModules'\r\nimport { NavigationModulesApi } from 'api/NavigationModules'\r\nimport { ButtonModulesApi } from 'api/ButtonModules'\r\nimport { ImageModulesApi } from 'api/ImageModules'\r\nimport { HeadingModulesApi } from 'api/HeadingModules'\r\nimport { CatalogItemModulesApi } from 'api/CatalogItemModules'\r\nimport { CatalogCategoryTreeModulesApi } from 'api/CatalogCategoryTreeModules'\r\nimport { CatalogCategoryModulesApi } from 'api/CatalogCategoryModules'\r\nimport { CatalogDetailModulesApi } from 'api/CatalogDetailModules'\r\nimport { CatalogSearchModulesApi } from 'api/CatalogSearchModules'\r\nimport { PageTypeEnum } from 'model/api/PageTypeEnum'\r\n\r\nexport interface ModulesProps {\r\n  [slotId: number]: ModuleProps[]\r\n}\r\n\r\nexport interface UseGetPageDataProps {\r\n  view: 'new' | 'detail'\r\n  identifier?: string\r\n}\r\n\r\nexport interface UseGetPageDataResponseProps {\r\n  loading: boolean\r\n  setLoading: React.Dispatch<React.SetStateAction<boolean>>\r\n  page?: Page\r\n  template?: Template\r\n  view?: View\r\n  layout?: Layout\r\n  layoutSlots?: LayoutSlot[]\r\n  modules: ModulesProps\r\n  setModules: React.Dispatch<React.SetStateAction<ModulesProps>>\r\n}\r\n\r\nexport const useGetPageData = ({\r\n  view,\r\n  identifier,\r\n}: UseGetPageDataProps): UseGetPageDataResponseProps => {\r\n  const cancelTokenSourceRef = useRef<CancelTokenSource>(\r\n    axios.CancelToken.source()\r\n  )\r\n\r\n  const [loading, setLoading] = useState(false)\r\n  const [layoutSlots, setLayoutSlots] = useState<LayoutSlot[]>()\r\n  const [page, setPage] = useState<Page>()\r\n  const [template, setTemplate] = useState<Template>()\r\n  const [templateView, setTemplateView] = useState<View>()\r\n  const [layout, setLayout] = useState<Layout>()\r\n  const [modules, setModules] = useState<ModulesProps>({})\r\n\r\n  const getLayoutSlots = useCallback(\r\n    async (layoutId: number) => {\r\n      if (view === 'detail' && identifier) {\r\n        try {\r\n          setLoading(true)\r\n\r\n          const { data } = await LayoutSlotsApi.getLayoutSlots(layoutId, {\r\n            cancelToken: cancelTokenSourceRef.current.token,\r\n          })\r\n\r\n          setLayoutSlots(data)\r\n          setLoading(false)\r\n        } catch (e) {\r\n          setLoading(false)\r\n        }\r\n      }\r\n    },\r\n    [identifier, view]\r\n  )\r\n\r\n  const getLayout = useCallback(\r\n    async (layoutId: number) => {\r\n      if (view === 'detail' && identifier) {\r\n        try {\r\n          setLoading(true)\r\n\r\n          const { data } = await LayoutsApi.getLayout(layoutId, {\r\n            cancelToken: cancelTokenSourceRef.current.token,\r\n          })\r\n\r\n          setLayout(data)\r\n          setLoading(false)\r\n        } catch (e) {\r\n          setLoading(false)\r\n        }\r\n      }\r\n    },\r\n    [identifier, view]\r\n  )\r\n\r\n  const getView = useCallback(\r\n    async (viewId: number) => {\r\n      if (view === 'detail' && identifier) {\r\n        try {\r\n          setLoading(true)\r\n\r\n          const { data } = await ViewsApi.getView(viewId, {\r\n            cancelToken: cancelTokenSourceRef.current.token,\r\n          })\r\n\r\n          setTemplateView(data)\r\n          setLoading(false)\r\n        } catch (e) {\r\n          setLoading(false)\r\n        }\r\n      }\r\n    },\r\n    [identifier, view]\r\n  )\r\n\r\n  const getModules = useCallback(\r\n    async (\r\n      identifier: string,\r\n      version: number,\r\n      layoutId: number,\r\n      templatePageIDs: number[]\r\n    ) => {\r\n      setLoading(true)\r\n\r\n      const { data } = await ModulesApi.getModules(\r\n        identifier,\r\n        version,\r\n        layoutId,\r\n        templatePageIDs,\r\n        {\r\n          cancelToken: cancelTokenSourceRef.current.token,\r\n        }\r\n      )\r\n\r\n      const currentValues = {}\r\n\r\n      await Promise.all(\r\n        data.map(async currentModule => {\r\n          const newModule: ModuleProps = {\r\n            isNew: false,\r\n            isTouched: false,\r\n            moduleType: currentModule.module_type,\r\n            uuid: uuid(),\r\n            slotId: currentModule.slot_id,\r\n            weight: currentModule.weight,\r\n            moduleId: currentModule.id,\r\n            data: {},\r\n            locked: currentModule.page_type === PageTypeEnum.TEMPLATE_PAGE,\r\n            isTemplatePageModule:\r\n              currentModule.page_type === PageTypeEnum.TEMPLATE_PAGE,\r\n          }\r\n\r\n          /* eslint-disable no-lone-blocks */\r\n          switch (currentModule.module_type) {\r\n            case ModuleTypeEnum.HEADING:\r\n              {\r\n                try {\r\n                  const {\r\n                    data: moduleData,\r\n                  } = await HeadingModulesApi.getHeadingModule(currentModule.id)\r\n\r\n                  newModule.data = {\r\n                    level: moduleData.level,\r\n                    content: moduleData.content,\r\n                  }\r\n                } catch (e) {\r\n                  //\r\n                }\r\n              }\r\n              break\r\n            case ModuleTypeEnum.TEXT:\r\n              {\r\n                try {\r\n                  const {\r\n                    data: moduleData,\r\n                  } = await TextModulesApi.getTextModule(currentModule.id)\r\n\r\n                  newModule.data = { content: moduleData.content }\r\n                } catch (e) {\r\n                  //\r\n                }\r\n              }\r\n              break\r\n            case ModuleTypeEnum.IMAGE:\r\n              {\r\n                try {\r\n                  const {\r\n                    data: moduleData,\r\n                  } = await ImageModulesApi.getImageModule(currentModule.id)\r\n\r\n                  newModule.data = {\r\n                    file_name: moduleData.file_name,\r\n                    image_alt: moduleData.image_alt,\r\n                  }\r\n                } catch (e) {\r\n                  //\r\n                }\r\n              }\r\n              break\r\n            case ModuleTypeEnum.BUTTON:\r\n              {\r\n                try {\r\n                  const {\r\n                    data: moduleData,\r\n                  } = await ButtonModulesApi.getButtonModule(currentModule.id)\r\n\r\n                  newModule.data = {\r\n                    text: moduleData.text,\r\n                    path: moduleData.path,\r\n                    target: moduleData.target,\r\n                    button_id: moduleData.button_id,\r\n                  }\r\n                } catch (e) {\r\n                  //\r\n                }\r\n              }\r\n              break\r\n            case ModuleTypeEnum.NAVIGATION:\r\n              {\r\n                try {\r\n                  const {\r\n                    data: moduleData,\r\n                  } = await NavigationModulesApi.getNavigationModule(\r\n                    currentModule.id\r\n                  )\r\n\r\n                  newModule.data = {\r\n                    navigation_id: moduleData.navigation_id,\r\n                  }\r\n                } catch (e) {\r\n                  //\r\n                }\r\n              }\r\n              break\r\n            case ModuleTypeEnum.CATALOG_LISTING:\r\n              {\r\n                try {\r\n                  const {\r\n                    data: moduleData,\r\n                  } = await CatalogListingModulesApi.getCatalogListingModule(\r\n                    currentModule.id\r\n                  )\r\n\r\n                  newModule.data = {\r\n                    language_code: moduleData.language_code,\r\n                    category_id: moduleData.category_id,\r\n                    category_id_variable_name:\r\n                      moduleData.category_id_variable_name,\r\n                  }\r\n                } catch (e) {\r\n                  //\r\n                }\r\n              }\r\n              break\r\n            case ModuleTypeEnum.CATALOG_ITEM:\r\n              {\r\n                try {\r\n                  const {\r\n                    data: moduleData,\r\n                  } = await CatalogItemModulesApi.getCatalogItemModule(\r\n                    currentModule.id\r\n                  )\r\n\r\n                  newModule.data = {\r\n                    language_code: moduleData.language_code,\r\n                    catalog_item_id: moduleData.catalog_item_id,\r\n                  }\r\n                } catch (e) {\r\n                  //\r\n                }\r\n              }\r\n              break\r\n            case ModuleTypeEnum.CATALOG_DETAIL:\r\n              {\r\n                try {\r\n                  const {\r\n                    data: moduleData,\r\n                  } = await CatalogDetailModulesApi.getCatalogDetailModule(\r\n                    currentModule.id\r\n                  )\r\n\r\n                  newModule.data = {\r\n                    language_code: moduleData.language_code,\r\n                    catalog_item_id: moduleData.catalog_item_id,\r\n                    catalog_item_id_variable_name:\r\n                      moduleData.catalog_item_id_variable_name,\r\n                    load_from_global_context:\r\n                      moduleData.load_from_global_context,\r\n                  }\r\n                } catch (e) {\r\n                  //\r\n                }\r\n              }\r\n              break\r\n            case ModuleTypeEnum.CATALOG_SEARCH:\r\n              {\r\n                try {\r\n                  const {\r\n                    data: moduleData,\r\n                  } = await CatalogSearchModulesApi.getCatalogSearchModule(\r\n                    currentModule.id\r\n                  )\r\n\r\n                  newModule.data = {\r\n                    search_placeholder: moduleData.search_placeholder,\r\n                    submit_label: moduleData.submit_label,\r\n                  }\r\n                } catch (e) {\r\n                  //\r\n                }\r\n              }\r\n              break\r\n            case ModuleTypeEnum.CATALOG_CATEGORY_TREE:\r\n              {\r\n                try {\r\n                  const {\r\n                    data: moduleData,\r\n                  } = await CatalogCategoryTreeModulesApi.getCatalogCategoryTreeModule(\r\n                    currentModule.id\r\n                  )\r\n\r\n                  newModule.data = {\r\n                    parent_category_id: moduleData.parent_category_id,\r\n                    display_if_parent_category_id:\r\n                      moduleData.display_if_parent_category_id,\r\n                    language_code: moduleData.language_code,\r\n                    link_pattern: moduleData.link_pattern,\r\n                  }\r\n                } catch (e) {\r\n                  //\r\n                }\r\n              }\r\n              break\r\n            case ModuleTypeEnum.CATALOG_CATEGORY:\r\n              {\r\n                try {\r\n                  const {\r\n                    data: moduleData,\r\n                  } = await CatalogCategoryModulesApi.getCatalogCategoryModule(\r\n                    currentModule.id\r\n                  )\r\n\r\n                  newModule.data = {\r\n                    category_id: moduleData.category_id,\r\n                    language_code: moduleData.language_code,\r\n                    category_id_variable_name:\r\n                      moduleData.category_id_variable_name,\r\n                    load_from_global_context: !!moduleData.load_from_global_context,\r\n                  }\r\n                } catch (e) {\r\n                  //\r\n                }\r\n              }\r\n              break\r\n          }\r\n\r\n          if (!currentValues[currentModule.slot_id]) {\r\n            currentValues[currentModule.slot_id] = []\r\n          }\r\n\r\n          currentValues[currentModule.slot_id].push(newModule)\r\n        })\r\n        /* eslint-disable no-lone-blocks */\r\n      )\r\n\r\n      setModules(currentValues)\r\n      setLoading(false)\r\n    },\r\n    []\r\n  )\r\n\r\n  const getTemplate = useCallback(\r\n    async ({ template_id, version }: Page) => {\r\n      if (view === 'detail' && identifier) {\r\n        try {\r\n          setLoading(true)\r\n\r\n          const { data } = await TemplatesApi.getTemplate(template_id, {\r\n            cancelToken: cancelTokenSourceRef.current.token,\r\n          })\r\n\r\n          const templatePageIDs = []\r\n\r\n          data.template_pages.forEach(({ id }) => {\r\n            templatePageIDs.push(id)\r\n          })\r\n\r\n          getLayout(data.layout_id)\r\n          getLayoutSlots(data.layout_id)\r\n          getView(data.view_id)\r\n          await getModules(identifier, version, data.layout_id, templatePageIDs)\r\n\r\n          setTemplate(data)\r\n          setLoading(false)\r\n        } catch (e) {\r\n          setLoading(false)\r\n        }\r\n      }\r\n    },\r\n    [getLayout, getLayoutSlots, getView, getModules, identifier, view]\r\n  )\r\n\r\n  const getPage = useCallback(async () => {\r\n    if (view === 'detail' && identifier) {\r\n      try {\r\n        setLoading(true)\r\n\r\n        const { data } = await PagesApi.getPage(identifier, {\r\n          cancelToken: cancelTokenSourceRef.current.token,\r\n        })\r\n\r\n        await getTemplate(data)\r\n\r\n        setPage(data)\r\n        setLoading(false)\r\n      } catch (e) {\r\n        setLoading(false)\r\n      }\r\n    }\r\n  }, [getTemplate, identifier, view])\r\n\r\n  useEffect(() => {\r\n    getPage()\r\n  }, [getPage])\r\n\r\n  useEffect(() => {\r\n    const cancelTokenSource = cancelTokenSourceRef.current\r\n\r\n    return () => cancelTokenSource.cancel()\r\n  }, [])\r\n\r\n  return {\r\n    page,\r\n    template,\r\n    layout,\r\n    layoutSlots,\r\n    view: templateView,\r\n    modules,\r\n    setModules,\r\n    loading,\r\n    setLoading,\r\n  }\r\n}\r\n","import React from 'react'\r\nimport styled from 'styled-components'\r\nimport { COLORS } from 'constants/colors'\r\n\r\nconst Container = styled.div`\r\n  position: absolute;\r\n  top: 0;\r\n  right: 0;\r\n`\r\n\r\nconst Title = styled.div`\r\n  padding: 2px 8px 3px;\r\n  color: ${COLORS.white};\r\n  font-size: 12px;\r\n  background: ${COLORS.purple2};\r\n`\r\n\r\nexport interface SlotControlsProps {\r\n  name: string\r\n}\r\n\r\nexport const SlotControls: React.FC<SlotControlsProps> = ({ name }) => {\r\n  return (\r\n    <Container>\r\n      <Title>{name}</Title>\r\n    </Container>\r\n  )\r\n}\r\n","import styled, { css } from 'styled-components'\r\nimport { COLORS } from 'constants/colors'\r\nimport { rgba } from 'polished'\r\n\r\nexport const Controls = styled.div`\r\n  position: absolute;\r\n  bottom: -40px;\r\n  left: 0;\r\n  z-index: 200;\r\n  display: none;\r\n  min-width: 100%;\r\n  padding: 6px;\r\n  background: ${COLORS.white};\r\n  border: 1px solid ${COLORS.gray2};\r\n`\r\n\r\nexport const Container = styled.div<{ locked: boolean }>`\r\n  position: relative;\r\n  min-width: 64px;\r\n  margin: 12px;\r\n\r\n  ${({ locked }) => !locked ? css`\r\n    border: 2px dotted ${rgba(COLORS.cyan2, 0.5)};\r\n  ` : css`\r\n    opacity: 0.8;\r\n  `}\r\n\r\n  cursor: ${({ locked }) => (locked ? 'not-allowed' : 'move')};\r\n\r\n  :hover {\r\n    ${Controls} {\r\n      display: grid;\r\n      grid-gap: 24px;\r\n      grid-template-columns: max-content max-content;\r\n    }\r\n  }\r\n`\r\n","import React from 'react'\r\nimport JSXParserBase, { JsxParserProps } from '@vojtechportes/react-jsx-parser'\r\n\r\nconst block = (cb: any) => cb()\r\n\r\nexport const iterator = (\r\n  items: any[],\r\n  renderItem: (item: any, renderItem: any) => any\r\n) => {\r\n  return items.map(item => {\r\n    return renderItem(item, renderItem)\r\n  })\r\n}\r\n\r\nexport const JSXParser: React.FC<JsxParserProps> = ({ bindings, ...rest }) => (\r\n  <JSXParserBase\r\n    bindings={{\r\n      ...bindings,\r\n      iterator,\r\n      JSON,\r\n      Object,\r\n      Array,\r\n      Number,\r\n      String,\r\n      console,\r\n      block\r\n    }}\r\n    {...rest}\r\n  />\r\n)\r\n","import React from 'react'\r\nimport { Controls as ControlsContainer } from './styles'\r\nimport { Button } from 'antd'\r\nimport styled from 'styled-components'\r\nimport { ModuleTypeEnum } from 'model/api/ModuleTypeEnum'\r\nimport { useTranslation } from 'react-i18next'\r\n\r\nconst { Group } = Button\r\n\r\nconst StyledGroup = styled(Group)`\r\n  white-space: nowrap;\r\n`\r\n\r\nexport interface ControlsProps {\r\n  moduleType: ModuleTypeEnum\r\n  hasEdit?: boolean\r\n  hasConfiguration?: boolean\r\n  onEdit?: () => void\r\n  onConfigure?: () => void\r\n  onDelete?: () => void\r\n  className?: string\r\n  style?: React.CSSProperties\r\n}\r\n\r\nexport const Controls: React.FC<ControlsProps> = ({\r\n  moduleType,\r\n  hasEdit = true,\r\n  hasConfiguration = true,\r\n  onEdit,\r\n  onConfigure,\r\n  onDelete,\r\n  className,\r\n  style,\r\n}) => {\r\n  const { t } = useTranslation('content-detail')\r\n\r\n  return (\r\n    <ControlsContainer className={className} style={style}>\r\n      {t(`module-type-enum.${moduleType.toLowerCase()}`)}\r\n      <StyledGroup>\r\n        {hasEdit && (\r\n          <Button size=\"small\" onClick={onEdit}>\r\n            Edit\r\n          </Button>\r\n        )}\r\n        {hasConfiguration && (\r\n          <Button size=\"small\" onClick={onConfigure}>\r\n            Configuration\r\n          </Button>\r\n        )}\r\n        <Button size=\"small\" type=\"danger\" onClick={onDelete}>\r\n          Delete\r\n        </Button>\r\n      </StyledGroup>\r\n    </ControlsContainer>\r\n  )\r\n}\r\n","import React from 'react'\r\nimport { Editor } from '@tinymce/tinymce-react'\r\nimport { EventHandler } from '@tinymce/tinymce-react/lib/cjs/main/ts/Events'\r\nimport { initValues } from './RichTextFormik'\r\nimport { TINYMCE_SCRIPT_PATH } from 'constants/tinymce'\r\n\r\nexport interface RichTextProps {\r\n  value?: string\r\n  inline?: boolean\r\n  init?: Record<string, any> \r\n  onBlur?: EventHandler<FocusEvent>\r\n  onFocus?: EventHandler<FocusEvent>\r\n  onChange: (value: string) => void\r\n}\r\n\r\nexport const RichText: React.FC<RichTextProps> = ({\r\n  value = '',\r\n  onChange,\r\n  onFocus,\r\n  onBlur,\r\n  init = initValues,\r\n  inline = false,\r\n}) => {\r\n  return (\r\n  <Editor\r\n    initialValue={value}\r\n    onEditorChange={onChange}\r\n    onBlur={onBlur}\r\n    onFocus={onFocus}\r\n    tinymceScriptSrc={TINYMCE_SCRIPT_PATH}\r\n    init={init}\r\n    inline={inline}\r\n  />\r\n)}\r\n","export const ItemTypes = {\r\n  NEW_MODULE: 'new_module',\r\n  MODULE: 'module',\r\n}\r\n","import { ModulesProps } from '../hooks/useGetPageData'\r\n\r\nexport const findModule = (\r\n  modules: ModulesProps,\r\n  slotId: number,\r\n  uuid: string\r\n) => {\r\n  const module = modules[slotId].find(\r\n    currentModule => currentModule.uuid === uuid\r\n  )\r\n\r\n  return {\r\n    module,\r\n    index: modules[slotId].indexOf(module)\r\n  }\r\n}\r\n","import { useRef, useContext } from 'react'\r\nimport { useDrop, DropTargetMonitor, useDrag } from 'react-dnd'\r\nimport { ItemTypes } from '../types/ItemTypes'\r\nimport { ContentDetailContext } from '..'\r\nimport { findModule } from '../utils/findModule'\r\nimport { XYCoord } from 'dnd-core'\r\n\r\nexport interface Item {\r\n  type: string\r\n  uuid: string\r\n  slotId: number\r\n}\r\n\r\nexport interface UseModuleSortProps {\r\n  slotId: number\r\n  uuid: string\r\n  locked?: boolean\r\n  onMove: (slotId: number, dragIndex: number, hoverIndex: number) => void\r\n}\r\n\r\nexport const useModuleSort = ({ slotId, uuid, onMove, locked }: UseModuleSortProps) => {\r\n  const { modules } = useContext(ContentDetailContext)\r\n  const ref = useRef<HTMLDivElement>(null)\r\n\r\n  const [, drop] = useDrop({\r\n    accept: ItemTypes.MODULE,\r\n    hover(item: Item, monitor: DropTargetMonitor) {\r\n      if (!ref.current) {\r\n        return\r\n      }\r\n\r\n      const dragIndex = findModule(modules, slotId, item.uuid).index\r\n      const hoverIndex = findModule(modules, slotId, uuid).index\r\n\r\n      // Don't replace items with themselves\r\n      if (item.uuid === uuid) {\r\n        return\r\n      }\r\n\r\n      // Determine rectangle on screen\r\n      const hoverBoundingRect = ref.current!.getBoundingClientRect()\r\n\r\n      // Get vertical middle\r\n      const hoverMiddleY =\r\n        (hoverBoundingRect.bottom - hoverBoundingRect.top) / 2\r\n\r\n      // Determine mouse position\r\n      const clientOffset = monitor.getClientOffset()\r\n\r\n      // Get pixels to the top\r\n      const hoverClientY = (clientOffset as XYCoord).y - hoverBoundingRect.top\r\n\r\n      // Only perform the move when the mouse has crossed half of the items height\r\n      // When dragging downwards, only move when the cursor is below 50%\r\n      // When dragging upwards, only move when the cursor is above 50%\r\n\r\n      // Dragging downwards\r\n      if (dragIndex < hoverIndex && hoverClientY < hoverMiddleY) {\r\n        return\r\n      }\r\n\r\n      // Dragging upwards\r\n      if (dragIndex > hoverIndex && hoverClientY > hoverMiddleY) {\r\n        return\r\n      }\r\n\r\n      if (slotId === item.slotId) {\r\n        // Time to actually perform the action\r\n        // item.uuid = uuid\r\n        onMove(slotId, dragIndex, hoverIndex)\r\n      }\r\n    },\r\n  })\r\n\r\n  const [{ isDragging }, drag] = useDrag({\r\n    item: { type: ItemTypes.MODULE, uuid, slotId, locked },\r\n    canDrag: () => !locked,\r\n    collect: (monitor: any) => ({\r\n      isDragging: monitor.isDragging(),\r\n    }),\r\n  })\r\n\r\n  return {\r\n    drag,\r\n    drop,\r\n    isDragging,\r\n    ref,\r\n  }\r\n}\r\n","import { ContentDetailContext } from '../'\r\nimport { useContext, useCallback } from 'react'\r\n\r\nexport interface UseModuleUpdateProps<DT> {\r\n  uuid: string\r\n  slotId: number\r\n  onUpdate?: () => void\r\n}\r\n\r\nexport const useModuleUpdate = <DT>({\r\n  uuid,\r\n  slotId,\r\n  onUpdate,\r\n}: UseModuleUpdateProps<DT>) => {\r\n  const { setModules, setIsTouched } = useContext(ContentDetailContext)\r\n\r\n  const update = useCallback(\r\n    (data: Partial<DT>, mutate: boolean = false) => {\r\n      setModules(value => {\r\n        const modules = mutate ? { ...value } : value\r\n        const currentModule = modules[slotId].find(\r\n          currentValue => currentValue.uuid === uuid\r\n        )\r\n        const currentModuleIndex = modules[slotId].findIndex(\r\n          currentValue => currentValue.uuid === uuid\r\n        )\r\n\r\n        if (currentModule) {\r\n          modules[slotId][currentModuleIndex].isTouched = true\r\n          modules[slotId][currentModuleIndex].data = {\r\n            ...currentModule.data,\r\n            ...data,\r\n          }\r\n\r\n          return modules\r\n        }\r\n\r\n        return value\r\n      })\r\n\r\n      setIsTouched(true)\r\n\r\n      onUpdate && onUpdate()\r\n    },\r\n    [setModules, setIsTouched, onUpdate, slotId, uuid]\r\n  )\r\n\r\n  return { update }\r\n}\r\n","export enum HeadingModuleLevelEnum {\r\n  'LEVEL_1' = 1,\r\n  'LEVEL_2' = 2,\r\n  'LEVEL_3' = 3,\r\n  'LEVEL_4' = 4,\r\n  'LEVEL_5' = 5,\r\n  'LEVEL_6' = 6,\r\n}\r\n","export const iterableEnum = <T>(t: T): {[key: string]: T[keyof T]} => {\r\n  const keys = Object.keys(t) as [keyof T]\r\n  return keys.reduce((agg, key) => Object.defineProperty(agg, key, {\r\n      value: t[key],\r\n      enumerable: !isFinite(+key)\r\n    }), {})\r\n}","import React, { useCallback, useState } from 'react'\r\nimport { Modal, Select, Form } from 'antd'\r\nimport { useTranslation } from 'react-i18next'\r\nimport { HeadingDataProps } from 'scenes/ContentDetail/types/Module'\r\nimport { HeadingModuleLevelEnum } from 'model/api/HeadingModuleLevelEnum'\r\nimport { iterableEnum } from 'utils/iterableEnum'\r\n\r\nexport type Data = Omit<HeadingDataProps, 'content'>\r\n\r\nexport interface ConfigurationProps {\r\n  data: Data\r\n  onConfirm: (data: Data) => void\r\n  onCancel: () => void\r\n}\r\n\r\nconst { Option } = Select\r\nconst { Item } = Form\r\n\r\nexport const Configuration: React.FC<ConfigurationProps> = ({\r\n  data,\r\n  onConfirm,\r\n  onCancel,\r\n}) => {\r\n  const { t } = useTranslation('content-detail')\r\n  const [configuration, setConfiguration] = useState(data)\r\n\r\n  const handleConfirm = useCallback(() => {\r\n    onConfirm(configuration)\r\n  }, [onConfirm, configuration])\r\n\r\n  const handleLevelChange = useCallback((level: number) => {\r\n    setConfiguration(value => ({\r\n      ...value,\r\n      level,\r\n    }))\r\n  }, [])\r\n\r\n  return (\r\n    <Modal\r\n      visible\r\n      width={600}\r\n      onOk={handleConfirm}\r\n      onCancel={onCancel}\r\n      title={t('heading-configuration.title')}\r\n    >\r\n      <Form layout=\"vertical\">\r\n        <Item label={t('heading-configuration.level')}>\r\n          <Select\r\n            defaultValue={configuration.level}\r\n            onChange={handleLevelChange}\r\n          >\r\n            {Object.values(iterableEnum(HeadingModuleLevelEnum)).map(level => (\r\n              <Option value={level} kex={level}>\r\n                {level}\r\n              </Option>\r\n            ))}\r\n          </Select>\r\n        </Item>\r\n      </Form>\r\n    </Modal>\r\n  )\r\n}\r\n","import { useSelector } from 'react-redux'\r\nimport { State } from 'state/rootReducer'\r\nimport { useCallback } from 'react'\r\nimport { TemplatePreview } from 'model/api/TemplatePreview'\r\n\r\nexport const useGetTemplatePreview = () => {\r\n  const { previews } = useSelector((state: State) => state.templates)\r\n\r\n  const getTemplatePreview = useCallback(\r\n    (path: string, moduleName: string): TemplatePreview | undefined => {\r\n      if (previews[path] && previews[path][moduleName]) {\r\n        return previews[path][moduleName]\r\n      }\r\n    },\r\n    [previews]\r\n  )\r\n\r\n  return { getTemplatePreview }\r\n}\r\n","import { useCallback, useContext } from 'react'\r\nimport { ContentDetailContext } from '..'\r\n\r\nexport interface UseDeleteModuleProps {\r\n  isNew: boolean\r\n  slotId: number\r\n  uuid: string\r\n  moduleId?: number\r\n}\r\n\r\nexport const useDeleteModule = ({\r\n  isNew,\r\n  uuid,\r\n  moduleId,\r\n  slotId,\r\n}: UseDeleteModuleProps) => {\r\n  const { setModules, setDeletedModules } = useContext(ContentDetailContext)\r\n\r\n  return useCallback(() => {\r\n    if (!isNew && moduleId) {\r\n      setDeletedModules(values => {\r\n        values.push(moduleId)\r\n\r\n        return values\r\n      })\r\n    }\r\n\r\n    setModules(values => ({\r\n      ...values,\r\n      [slotId]: values[slotId].filter(module => module.uuid !== uuid),\r\n    }))\r\n  }, [setModules, setDeletedModules, isNew, slotId, uuid, moduleId])\r\n}\r\n","import React, { useContext, useCallback, useState } from 'react'\r\nimport {\r\n  ModuleProps,\r\n  HeadingDataProps,\r\n} from 'scenes/ContentDetail/types/Module'\r\nimport { Container } from '../styles'\r\nimport { ContentDetailContext } from 'scenes/ContentDetail'\r\nimport { ModuleTypeEnum } from 'model/api/ModuleTypeEnum'\r\nimport { JSXParser } from 'components/JSXParser'\r\nimport { Controls } from '../Controls'\r\nimport { RichText } from 'components/RichText'\r\nimport { useModuleSort } from 'scenes/ContentDetail/hooks/useModuleSort'\r\nimport { OnMove } from 'scenes/ContentDetail/types/OnMove'\r\nimport { useModuleUpdate } from 'scenes/ContentDetail/hooks/useModuleUpdate'\r\nimport { Configuration, Data } from './Configuration'\r\nimport { useGetTemplatePreview } from 'scenes/ContentDetail/hooks/useGetTemplatePreview'\r\nimport { useDeleteModule } from 'scenes/ContentDetail/hooks/useDeleteModule'\r\n\r\nexport const richTextInitValues: Record<string, any> = {\r\n  menubar: false,\r\n  forced_root_block: false,\r\n  valid_elements: 'strong,em,span[style],a[href]',\r\n  toolbar: `undo redo\r\n   | bold italic backcolor | alignleft aligncenter \r\n   alignright alignjustify`,\r\n  plugins: ['link'],\r\n}\r\n\r\nexport interface HeadingProps extends ModuleProps {\r\n  onMove?: OnMove\r\n  data: HeadingDataProps\r\n}\r\n\r\nexport const Heading: React.FC<HeadingProps> = ({\r\n  uuid,\r\n  moduleType,\r\n  isNew,\r\n  moduleId,\r\n  data: { content, level },\r\n  onMove,\r\n  slotId,\r\n  locked,\r\n}) => {\r\n  const { view } = useContext(ContentDetailContext)\r\n  const [isConfigurationOpen, setIsConfigurationOpen] = useState(false)\r\n  const { getTemplatePreview } = useGetTemplatePreview()\r\n  const { drag, drop, isDragging, ref } = useModuleSort({\r\n    uuid,\r\n    slotId,\r\n    onMove,\r\n    locked,\r\n  })\r\n  const { update } = useModuleUpdate<HeadingDataProps>({ uuid, slotId })\r\n  const handleDelete = useDeleteModule({ isNew, slotId, uuid, moduleId })\r\n\r\n  const templatePreview =\r\n    view && getTemplatePreview(view.path, ModuleTypeEnum.HEADING)\r\n\r\n  const handleEditorChange = useCallback(\r\n    (content: string, mutate: boolean = false) => {\r\n      update({ content }, mutate)\r\n    },\r\n    [update]\r\n  )\r\n\r\n  const handleConfigurationChange = useCallback(\r\n    ({ level: headingLevel }: Data) => {\r\n      update({ level: headingLevel }, true)\r\n      setIsConfigurationOpen(false)\r\n    },\r\n    [update]\r\n  )\r\n\r\n  if (templatePreview) {\r\n    const template = templatePreview.template\r\n    const Level = `h${level}`\r\n\r\n    const opacity = isDragging ? 0 : 1\r\n    drag(drop(ref))\r\n\r\n    return (\r\n      <>\r\n        <div ref={ref} style={{ opacity }}>\r\n          <Container locked={locked}>\r\n            {!locked && (\r\n              <Controls\r\n                moduleType={moduleType}\r\n                hasEdit={false}\r\n                onConfigure={() => setIsConfigurationOpen(true)}\r\n                onDelete={handleDelete}\r\n              />\r\n            )}\r\n            {content && (\r\n              <JSXParser\r\n                jsx={template}\r\n                components={{ Level }}\r\n                bindings={{\r\n                  content: (\r\n                    <RichText\r\n                      init={richTextInitValues}\r\n                      value={content}\r\n                      onBlur={(_, editor) => {\r\n                        handleEditorChange(editor.save(), true)\r\n                      }}\r\n                      onChange={value => handleEditorChange(value, false)}\r\n                      inline\r\n                    />\r\n                  ),\r\n                  level,\r\n                }}\r\n                renderInWrapper={false}\r\n              />\r\n            )}\r\n          </Container>\r\n        </div>\r\n        {isConfigurationOpen && (\r\n          <Configuration\r\n            data={{ level }}\r\n            onConfirm={handleConfigurationChange}\r\n            onCancel={() => setIsConfigurationOpen(false)}\r\n          />\r\n        )}\r\n      </>\r\n    )\r\n  } else {\r\n    return null\r\n  }\r\n}\r\n","import React, { useContext, useCallback } from 'react'\r\nimport {\r\n  ModuleProps,\r\n  TextDataProps,\r\n} from 'scenes/ContentDetail/types/Module'\r\nimport { Container } from '../styles'\r\nimport { ContentDetailContext } from 'scenes/ContentDetail'\r\nimport { ModuleTypeEnum } from 'model/api/ModuleTypeEnum'\r\nimport { JSXParser } from 'components/JSXParser'\r\nimport { Controls } from '../Controls'\r\nimport { RichText } from 'components/RichText'\r\nimport { useModuleSort } from 'scenes/ContentDetail/hooks/useModuleSort'\r\nimport { OnMove } from 'scenes/ContentDetail/types/OnMove'\r\nimport { useModuleUpdate } from 'scenes/ContentDetail/hooks/useModuleUpdate'\r\nimport { useGetTemplatePreview } from 'scenes/ContentDetail/hooks/useGetTemplatePreview'\r\nimport { useDeleteModule } from 'scenes/ContentDetail/hooks/useDeleteModule'\r\n\r\nexport const richTextInitValues: Record<string, any> = {\r\n  menubar: false,\r\n  forced_root_block: false,\r\n  toolbar: `undo redo | formatselect | image \r\n   | bold italic backcolor | alignleft aligncenter \r\n   alignright alignjustify | bullist numlist outdent indent | removeformat `,\r\n  plugins: [\r\n    'image imagetools',\r\n    'lists link',\r\n    'searchreplace visualblocks code fullscreen',\r\n    'insertdatetime media table paste code help wordcount',\r\n  ],\r\n}\r\nexport interface TextProps extends ModuleProps {\r\n  onMove?: OnMove\r\n  data: TextDataProps\r\n}\r\n\r\nexport const Text: React.FC<TextProps> = ({\r\n  uuid,\r\n  isNew,\r\n  moduleId,\r\n  moduleType,\r\n  data: { content = '' },\r\n  onMove,\r\n  slotId,\r\n  locked,\r\n}) => {\r\n  const { view } = useContext(ContentDetailContext)\r\n  const { getTemplatePreview } = useGetTemplatePreview()\r\n  const { drag, drop, isDragging, ref } = useModuleSort({\r\n    uuid,\r\n    slotId,\r\n    onMove,\r\n    locked,\r\n  })\r\n  const { update } = useModuleUpdate<TextDataProps>({ uuid, slotId })\r\n  const handleDelete = useDeleteModule({ isNew, slotId, uuid, moduleId })\r\n  const templatePreview = view && getTemplatePreview(view.path, ModuleTypeEnum.TEXT)\r\n\r\n  const handleEditorChange = useCallback(\r\n    (content: string, mutate: boolean = false) => {\r\n      update({ content }, mutate)\r\n    },\r\n    [update]\r\n  )\r\n\r\n  if (templatePreview) {\r\n    const template = templatePreview.template\r\n\r\n    const opacity = isDragging ? 0 : 1\r\n    drag(drop(ref))\r\n\r\n    return (\r\n      <>\r\n        <div ref={ref} style={{ opacity }}>\r\n          <Container locked={locked}>\r\n            {!locked && <Controls\r\n              moduleType={moduleType}\r\n              hasEdit={false}\r\n              hasConfiguration={false}\r\n              onDelete={handleDelete}\r\n            />}\r\n            <JSXParser\r\n              jsx={template}\r\n              bindings={{\r\n                content: (\r\n                  <RichText\r\n                    init={richTextInitValues}\r\n                    value={content}\r\n                    onBlur={(_, editor) => { handleEditorChange(editor.save(), true) }}\r\n                    onChange={value => handleEditorChange(value, false)}\r\n                    inline\r\n                  />\r\n                ),\r\n              }}\r\n              renderInWrapper={false}\r\n            />\r\n          </Container>\r\n        </div>\r\n      </>\r\n    )\r\n  } else {\r\n    return null\r\n  }\r\n}\r\n","import axios, { AxiosPromise } from 'axios'\r\nimport { RequestConfig } from './requestConfig'\r\nimport { Button } from 'model/api/Button'\r\nimport { PaginatedList } from 'model/api/PaginatedList'\r\n\r\nexport class ButtonsApi {\r\n  /**\r\n   * Get Buttons\r\n   *\r\n   * @param page\r\n   * @param pageSize\r\n   */\r\n  static getButtons(\r\n    page?: number,\r\n    pageSize?: number,\r\n    config?: RequestConfig\r\n  ): AxiosPromise<PaginatedList<Button>> {\r\n    return axios({\r\n      ...config,\r\n      method: 'GET',\r\n      url: `/buttons`,\r\n      params: {\r\n        page,\r\n        per_page: pageSize\r\n      },\r\n    })\r\n  }\r\n\r\n  /**\r\n   * Get All Buttons\r\n   *\r\n   */\r\n  static getAllButtons(\r\n    config?: RequestConfig\r\n  ): AxiosPromise<Button[]> {\r\n    return axios({\r\n      ...config,\r\n      method: 'GET',\r\n      url: `/buttons/all`,\r\n    })\r\n  }\r\n\r\n  /**\r\n   * Get Button\r\n   *\r\n   * @param buttonId\r\n   */\r\n  static getButton(\r\n    buttonId: number,\r\n    config?: RequestConfig\r\n  ): AxiosPromise<Button> {\r\n    return axios({\r\n      ...config,\r\n      method: 'GET',\r\n      url: `/buttons/${buttonId}`,\r\n    })\r\n  }\r\n\r\n  /**\r\n   * Create Button\r\n   *\r\n   * @param data\r\n   */\r\n  static createButton(\r\n    data: FormData,\r\n    config?: RequestConfig\r\n  ): AxiosPromise<{ id: number }> {\r\n    return axios({\r\n      ...config,\r\n      method: 'POST',\r\n      url: `/buttons`,\r\n      data\r\n    })\r\n  }\r\n\r\n  /**\r\n   * Update Button\r\n   *\r\n   * @param buttonId\r\n   * @param data\r\n   */\r\n  static updateButton(\r\n    buttonId: number,\r\n    data: FormData,\r\n    config?: RequestConfig\r\n  ): AxiosPromise {\r\n    return axios({\r\n      ...config,\r\n      method: 'PUT',\r\n      url: `/buttons/${buttonId}`,\r\n      data\r\n    })\r\n  }\r\n\r\n  /**\r\n   * Delete Button\r\n   *\r\n   * @param buttonId\r\n   */\r\n  static deleteButton(\r\n    buttonId: number,\r\n    config?: RequestConfig\r\n  ): AxiosPromise {\r\n    return axios({\r\n      ...config,\r\n      method: 'DELETE',\r\n      url: `/buttons/${buttonId}`,\r\n    })\r\n  }\r\n}","export enum ButtonModuleTargetEnum {\r\n  'BLANK' = 'BLANK',\r\n  'SELF' = 'SELF',\r\n  'TOP' = 'TOP',\r\n  'PARENT' = 'PARENT',\r\n}\r\n","import React, { useCallback, useState, useEffect } from 'react'\r\nimport { Modal, Select, Form, Input } from 'antd'\r\nimport { useTranslation } from 'react-i18next'\r\nimport { ButtonDataProps } from 'scenes/ContentDetail/types/Module'\r\nimport axios, { CancelToken } from 'axios'\r\nimport { ButtonsApi } from 'api/Buttons'\r\nimport { Button } from 'model/api/Button'\r\nimport { ButtonModuleTargetEnum } from 'model/api/ButtonModuleTargetEnum'\r\n\r\nexport type Data = ButtonDataProps\r\n\r\nexport interface ConfigurationProps {\r\n  data: Data\r\n  onConfirm: (data: Data) => void\r\n  onCancel: () => void\r\n}\r\n\r\nconst { Option } = Select\r\nconst { Item } = Form\r\n\r\nexport const Configuration: React.FC<ConfigurationProps> = ({\r\n  data,\r\n  onConfirm,\r\n  onCancel,\r\n}) => {\r\n  const { t } = useTranslation('content-detail')\r\n  const [configuration, setConfiguration] = useState(data)\r\n  const [buttons, setButtons] = useState<Button[]>([])\r\n\r\n  const getButtons = useCallback(async (cancelToken: CancelToken) => {\r\n    const { data } = await ButtonsApi.getAllButtons({\r\n      cancelToken,\r\n    })\r\n\r\n    setButtons(data)\r\n  }, [])\r\n\r\n  const handleConfirm = useCallback(() => {\r\n    onConfirm(configuration)\r\n  }, [onConfirm, configuration])\r\n\r\n  const handleTextChange = useCallback((event: React.ChangeEvent<HTMLInputElement>) => {\r\n    event.persist()\r\n\r\n    setConfiguration(value => ({\r\n      ...value,\r\n      text: event.target.value,\r\n    }))\r\n  }, [])\r\n\r\n  const handlePathChange = useCallback((event: React.ChangeEvent<HTMLInputElement>) => {\r\n    event.persist()\r\n    \r\n    setConfiguration(value => ({\r\n      ...value,\r\n      path: event.target.value,\r\n    }))\r\n  }, [])\r\n\r\n  const handleTargetChange = useCallback((target: ButtonModuleTargetEnum) => {\r\n    setConfiguration(value => ({\r\n      ...value,\r\n      target,\r\n    }))\r\n  }, [])\r\n\r\n  const handleButtonChange = useCallback((button_id: number) => {\r\n    setConfiguration(value => ({\r\n      ...value,\r\n      button_id,\r\n    }))\r\n  }, [])\r\n\r\n  useEffect(() => {\r\n    const cancelTokenSource = axios.CancelToken.source()\r\n\r\n    getButtons(cancelTokenSource.token)\r\n\r\n    return () => cancelTokenSource.cancel()\r\n  }, [getButtons])\r\n\r\n  return (\r\n    <Modal\r\n      visible\r\n      width={600}\r\n      onOk={handleConfirm}\r\n      onCancel={onCancel}\r\n      title={t('button-configuration.title')}\r\n    >\r\n      <Form layout=\"vertical\">\r\n        <Item label={t('button-configuration.text')}>\r\n          <Input\r\n            defaultValue={configuration.text}\r\n            onChange={handleTextChange}\r\n          />\r\n        </Item>        \r\n        <Item label={t('button-configuration.path')}>\r\n          <Input\r\n            defaultValue={configuration.path}\r\n            onChange={handlePathChange}\r\n          />\r\n        </Item>        \r\n        <Item label={t('button-configuration.button-id')}>\r\n          <Select\r\n            defaultValue={configuration.target}\r\n            onChange={handleTargetChange}\r\n          >\r\n            {Object.values(ButtonModuleTargetEnum).map(target => (\r\n              <Option value={target}>{target}</Option>\r\n            ))}\r\n          </Select>\r\n        </Item>\r\n        <Item label={t('button-configuration.button-id')}>\r\n          <Select\r\n            defaultValue={configuration.button_id}\r\n            onChange={handleButtonChange}\r\n          >\r\n            {buttons.map(({ id, name }) => (\r\n              <Option value={id}>{name}</Option>\r\n            ))}\r\n          </Select>\r\n        </Item>\r\n      </Form>\r\n    </Modal>\r\n  )\r\n}\r\n","import React, { useContext, useCallback, useState, useEffect } from 'react'\r\nimport { ModuleProps, ButtonDataProps } from 'scenes/ContentDetail/types/Module'\r\nimport { Container } from '../styles'\r\nimport { ContentDetailContext } from 'scenes/ContentDetail'\r\nimport { ModuleTypeEnum } from 'model/api/ModuleTypeEnum'\r\nimport { JSXParser } from 'components/JSXParser'\r\nimport { Controls } from '../Controls'\r\nimport { useModuleSort } from 'scenes/ContentDetail/hooks/useModuleSort'\r\nimport { OnMove } from 'scenes/ContentDetail/types/OnMove'\r\nimport { useModuleUpdate } from 'scenes/ContentDetail/hooks/useModuleUpdate'\r\nimport { useGetTemplatePreview } from 'scenes/ContentDetail/hooks/useGetTemplatePreview'\r\nimport { useDeleteModule } from 'scenes/ContentDetail/hooks/useDeleteModule'\r\nimport axios, { CancelToken } from 'axios'\r\nimport { Configuration, Data } from './Configuration'\r\nimport { Button as ButtonInterface } from 'model/api/Button'\r\nimport { ButtonsApi } from 'api/Buttons'\r\nimport { Alert } from 'antd'\r\nimport { useTranslation } from 'react-i18next'\r\n\r\nexport interface ButtonProps extends ModuleProps {\r\n  onMove?: OnMove\r\n  data: ButtonDataProps\r\n}\r\n\r\nexport const Button: React.FC<ButtonProps> = ({\r\n  uuid,\r\n  isNew,\r\n  moduleId,\r\n  moduleType,\r\n  data: { text, path, target, button_id },\r\n  onMove,\r\n  slotId,\r\n  locked,\r\n}) => {\r\n  const { t } = useTranslation('content-detial')\r\n  const { view } = useContext(ContentDetailContext)\r\n  const [button, setButton] = useState<ButtonInterface>()\r\n  const [isConfigurationOpen, setIsConfigurationOpen] = useState(false)\r\n  const { getTemplatePreview } = useGetTemplatePreview()\r\n  const { drag, drop, isDragging, ref } = useModuleSort({\r\n    uuid,\r\n    slotId,\r\n    onMove,\r\n    locked,\r\n  })\r\n  const { update } = useModuleUpdate<ButtonDataProps>({ uuid, slotId })\r\n  const handleDelete = useDeleteModule({ isNew, slotId, uuid, moduleId })\r\n  const templatePreview =\r\n    view && getTemplatePreview(view.path, ModuleTypeEnum.BUTTON)\r\n\r\n  const handleConfigurationChange = useCallback(\r\n    ({ text, path, target, button_id }: Data) => {\r\n      update({ text, path, target, button_id }, true)\r\n      setIsConfigurationOpen(false)\r\n    },\r\n    [update]\r\n  )\r\n\r\n  const getButton = useCallback(\r\n    async (cancelToken: CancelToken) => {\r\n      if (button_id) {\r\n        const { data } = await ButtonsApi.getButton(button_id, {\r\n          cancelToken,\r\n        })\r\n\r\n        setButton(data)\r\n      }\r\n    },\r\n    [button_id]\r\n  )\r\n\r\n  useEffect(() => {\r\n    const cancelTokenSource = axios.CancelToken.source()\r\n\r\n    getButton(cancelTokenSource.token)\r\n\r\n    return () => cancelTokenSource.cancel()\r\n  }, [getButton])\r\n\r\n  if (templatePreview) {\r\n    const template = templatePreview.template\r\n\r\n    const opacity = isDragging ? 0 : 1\r\n    drag(drop(ref))\r\n\r\n    return (\r\n      <>\r\n        <div ref={ref} style={{ opacity }}>\r\n          <Container locked={locked}>\r\n            {!locked && (\r\n              <Controls\r\n                moduleType={moduleType}\r\n                hasEdit={false}\r\n                onConfigure={() => setIsConfigurationOpen(true)}\r\n                onDelete={handleDelete}\r\n              />\r\n            )}\r\n            {!!button ? (\r\n              <JSXParser\r\n                jsx={template}\r\n                bindings={{\r\n                  button,\r\n                  text,\r\n                  path,\r\n                  target,\r\n                }}\r\n                renderInWrapper={false}\r\n              />\r\n            ) : (\r\n              <Alert\r\n                message={t('this-module-needs-to-be-configured-first')}\r\n                type=\"info\"\r\n              />\r\n            )}\r\n          </Container>\r\n        </div>\r\n        {isConfigurationOpen && (\r\n          <Configuration\r\n            data={{ text, path, target, button_id }}\r\n            onConfirm={handleConfigurationChange}\r\n            onCancel={() => setIsConfigurationOpen(false)}\r\n          />\r\n        )}\r\n      </>\r\n    )\r\n  } else {\r\n    return null\r\n  }\r\n}\r\n","import React from 'react'\r\nimport { useGetTemplatePreview } from 'scenes/ContentDetail/hooks/useGetTemplatePreview'\r\nimport { CatalogItemPublic } from 'model/api/CatalogItemPublic'\r\nimport { JSXParser } from 'components/JSXParser'\r\n\r\nexport interface ListProps {\r\n  data: CatalogItemPublic[]\r\n}\r\n\r\nexport const List: React.FC<ListProps> = ({ data }) => {\r\n  const { getTemplatePreview } = useGetTemplatePreview()\r\n\r\n  return (\r\n    <>\r\n      {data.map(item => {\r\n        const {\r\n          id,\r\n          data: { view_path, template_path, template_name },\r\n        } = item\r\n        const templatePreviewPath = `${view_path}/${template_path}`\r\n\r\n        const templatePreview = getTemplatePreview(\r\n          templatePreviewPath,\r\n          template_name\r\n        )\r\n\r\n        if (templatePreview) {\r\n          const { template } = templatePreview\r\n\r\n          return (\r\n            <JSXParser\r\n              key={id}\r\n              jsx={template}\r\n              bindings={{ data: item }}\r\n              components={{ List }}\r\n              renderInWrapper={false}\r\n              onError={e => console.log(e)}\r\n            />\r\n          )\r\n        }\r\n\r\n        return null\r\n      })}\r\n    </>\r\n  )\r\n}\r\n","import React, { useCallback, useState, useEffect } from 'react'\r\nimport { Modal, Select, TreeSelect, Input, Form } from 'antd'\r\nimport { useTranslation } from 'react-i18next'\r\nimport { CatalogListingDataProps } from 'scenes/ContentDetail/types/Module'\r\nimport axios, { CancelToken } from 'axios'\r\nimport { CatalogLanguagesApi } from 'api/CatalogLanguages'\r\nimport { CatalogLanguage } from 'model/api/CatalogLanguage'\r\nimport { CatalogCategoriesApi } from 'api/CatalogCategories'\r\nimport {\r\n  mapCatalogCategories,\r\n  MappedCatalogCategory,\r\n} from 'mappers/mapCatalogCategories'\r\n\r\nexport type Data = CatalogListingDataProps\r\n\r\nexport interface ConfigurationProps {\r\n  data: Data\r\n  onConfirm: (data: Data) => void\r\n  onCancel: () => void\r\n}\r\n\r\nconst { Option } = Select\r\nconst { Item } = Form\r\n\r\nexport const Configuration: React.FC<ConfigurationProps> = ({\r\n  data,\r\n  onConfirm,\r\n  onCancel,\r\n}) => {\r\n  const { t } = useTranslation('content-detail')\r\n  const [configuration, setConfiguration] = useState(data)\r\n  const [catalogLanguages, setCatalogLanguages] = useState<CatalogLanguage[]>(\r\n    []\r\n  )\r\n  const [catalogCategories, setCatalogCategories] = useState<\r\n    MappedCatalogCategory[]\r\n  >()\r\n\r\n  const getCatalogLanguages = useCallback(async (cancelToken: CancelToken) => {\r\n    const { data } = await CatalogLanguagesApi.getAllCatalogLanguages({\r\n      cancelToken,\r\n    })\r\n\r\n    setCatalogLanguages(data)\r\n  }, [])\r\n\r\n  const getCatalogCategories = useCallback(\r\n    async (cancelToken: CancelToken) => {\r\n      const { data } = await CatalogCategoriesApi.getCatalogCategories(\r\n        undefined,\r\n        undefined,\r\n        undefined,\r\n        undefined,\r\n        {\r\n          cancelToken,\r\n        }\r\n      )\r\n\r\n      setCatalogCategories(mapCatalogCategories(data, t))\r\n    },\r\n    [t]\r\n  )\r\n\r\n  const handleLanguageChange = useCallback(value => {\r\n    setConfiguration(values => ({\r\n      ...values,\r\n      language_code: value === '' ? null : value,\r\n    }))\r\n  }, [])\r\n\r\n  const handleCategoryIdChange = useCallback(value => {\r\n    setConfiguration(values => ({\r\n      ...values,\r\n      category_id: Number(value) === 0 ? null : value,\r\n    }))\r\n  }, [])\r\n\r\n  const handleCategoryIdVariableNameChange = useCallback(\r\n    ({ target: { value } }: React.ChangeEvent<HTMLInputElement>) => {\r\n      setConfiguration(values => ({\r\n        ...values,\r\n        category_id_variable_name: value === '' ? null : value,\r\n      }))\r\n    },\r\n    []\r\n  )\r\n\r\n  const handleConfirm = useCallback(() => {\r\n    onConfirm(configuration)\r\n  }, [onConfirm, configuration])\r\n\r\n  useEffect(() => {\r\n    const cancelTokenSource = axios.CancelToken.source()\r\n\r\n    getCatalogLanguages(cancelTokenSource.token)\r\n    getCatalogCategories(cancelTokenSource.token)\r\n\r\n    return () => cancelTokenSource.cancel()\r\n  }, [getCatalogLanguages, getCatalogCategories])\r\n\r\n  return (\r\n    <Modal\r\n      visible\r\n      width={600}\r\n      onOk={handleConfirm}\r\n      onCancel={onCancel}\r\n      title={t('catalog-listing-configuration.title')}\r\n    >\r\n      <Form layout=\"vertical\">\r\n        <Item label={t('catalog-listing-configuration.language')}>\r\n          <Select\r\n            onChange={handleLanguageChange}\r\n            defaultValue={data.language_code}\r\n            allowClear\r\n          >\r\n            {catalogLanguages.map(({ code, name }) => (\r\n              <Option key={code} value={code}>\r\n                {name}\r\n              </Option>\r\n            ))}\r\n          </Select>\r\n        </Item>\r\n        <Item label={t('catalog-listing-configuration.category-id')}>\r\n          {catalogCategories ? (\r\n            <TreeSelect\r\n              style={{ width: '100%' }}\r\n              onChange={handleCategoryIdChange}\r\n              defaultValue={data.category_id}\r\n              defaultActiveFirstOption\r\n              allowClear\r\n              dropdownStyle={{ maxHeight: 400, overflow: 'auto' }}\r\n              treeData={catalogCategories}\r\n              placeholder=\"Please select\"\r\n              treeDefaultExpandAll\r\n            />\r\n          ) : (\r\n            <Input disabled />\r\n          )}\r\n        </Item>\r\n        <Item\r\n          label={t('catalog-listing-configuration.category-id-variable-name')}\r\n        >\r\n          <Input\r\n            onChange={handleCategoryIdVariableNameChange}\r\n            defaultValue={data.category_id_variable_name}\r\n          />\r\n        </Item>\r\n      </Form>\r\n    </Modal>\r\n  )\r\n}\r\n","import React, { useCallback, useState, useEffect, useContext } from 'react'\r\nimport {\r\n  ModuleProps,\r\n  CatalogListingDataProps,\r\n} from 'scenes/ContentDetail/types/Module'\r\nimport { Container } from '../styles'\r\nimport { ModuleTypeEnum } from 'model/api/ModuleTypeEnum'\r\nimport { JSXParser } from 'components/JSXParser'\r\nimport { Controls } from '../Controls'\r\nimport { useModuleSort } from 'scenes/ContentDetail/hooks/useModuleSort'\r\nimport { OnMove } from 'scenes/ContentDetail/types/OnMove'\r\nimport { useModuleUpdate } from 'scenes/ContentDetail/hooks/useModuleUpdate'\r\nimport { useGetTemplatePreview } from 'scenes/ContentDetail/hooks/useGetTemplatePreview'\r\nimport { useDeleteModule } from 'scenes/ContentDetail/hooks/useDeleteModule'\r\nimport { CatalogItemsApi } from 'api/CatalogItems'\r\nimport axios, { CancelToken } from 'axios'\r\nimport { PaginatedList } from 'model/api/PaginatedList'\r\nimport { List } from './List'\r\nimport { ContentDetailContext } from 'scenes/ContentDetail'\r\nimport { CatalogItemPublic } from 'model/api/CatalogItemPublic'\r\nimport { Configuration } from './Configuration'\r\n\r\nexport interface CatalogListingProps extends ModuleProps {\r\n  onMove?: OnMove\r\n  data: CatalogListingDataProps\r\n}\r\n\r\nexport const CatalogListing: React.FC<CatalogListingProps> = ({\r\n  uuid,\r\n  isNew,\r\n  moduleId,\r\n  moduleType,\r\n  data: { language_code, category_id, category_id_variable_name },\r\n  onMove,\r\n  slotId,\r\n  locked,\r\n}) => {\r\n  const { view } = useContext(ContentDetailContext)\r\n  const [isConfigurationOpen, setIsConfigurationOpen] = useState(false)\r\n  const [listingData, setListingData] = useState<\r\n    PaginatedList<CatalogItemPublic>\r\n  >()\r\n  const { getTemplatePreview } = useGetTemplatePreview()\r\n  const { drag, drop, isDragging, ref } = useModuleSort({\r\n    uuid,\r\n    slotId,\r\n    onMove,\r\n    locked,\r\n  })\r\n  const { update } = useModuleUpdate<CatalogListingDataProps>({ uuid, slotId })\r\n  const handleDelete = useDeleteModule({ isNew, slotId, uuid, moduleId })\r\n  const templatePreview =\r\n    view && getTemplatePreview(view.path, ModuleTypeEnum.CATALOG_LISTING)\r\n\r\n  const handleConfigurationChange = useCallback(\r\n    ({\r\n      category_id,\r\n      language_code,\r\n      category_id_variable_name,\r\n    }: CatalogListingDataProps) => {\r\n      update({ category_id, language_code, category_id_variable_name }, true)\r\n      setIsConfigurationOpen(false)\r\n    },\r\n    [update]\r\n  )\r\n\r\n  const getListingData = useCallback(async (cancelToken: CancelToken) => {\r\n    const { data } = await CatalogItemsApi.getPublicCatalogItems(\r\n      undefined,\r\n      undefined,\r\n      language_code,\r\n      category_id,\r\n      {\r\n        cancelToken,\r\n      }\r\n    )\r\n\r\n    setListingData(data)\r\n  }, [language_code, category_id])\r\n\r\n  useEffect(() => {\r\n    const cancelTokenSource = axios.CancelToken.source()\r\n\r\n    getListingData(cancelTokenSource.token)\r\n\r\n    return () => cancelTokenSource.cancel()\r\n  }, [getListingData])\r\n\r\n  if (templatePreview) {\r\n    const template = templatePreview.template\r\n\r\n    const opacity = isDragging ? 0 : 1\r\n    drag(drop(ref))\r\n\r\n    return (\r\n      <>\r\n        <div ref={ref} style={{ opacity }}>\r\n          <Container locked={locked}>\r\n            {!locked && (\r\n              <Controls\r\n                moduleType={moduleType}\r\n                hasEdit={false}\r\n                hasConfiguration\r\n                onConfigure={() => setIsConfigurationOpen(true)}\r\n                onDelete={handleDelete}\r\n              />\r\n            )}\r\n            {!!listingData && (\r\n              <JSXParser\r\n                jsx={template}\r\n                bindings={{ data: listingData }}\r\n                components={{ List }}\r\n                renderInWrapper={false}\r\n                onError={e => console.log(e)}\r\n              />\r\n            )}\r\n          </Container>\r\n        </div>\r\n        {isConfigurationOpen && (\r\n          <Configuration\r\n            data={{ language_code, category_id, category_id_variable_name }}\r\n            onConfirm={handleConfigurationChange}\r\n            onCancel={() => setIsConfigurationOpen(false)}\r\n          />\r\n        )}\r\n      </>\r\n    )\r\n  } else {\r\n    return null\r\n  }\r\n}\r\n","import React, { useCallback, useState, useEffect } from 'react'\r\nimport { Modal, Select, Form, Input } from 'antd'\r\nimport { useTranslation } from 'react-i18next'\r\nimport { CatalogItemDataProps } from 'scenes/ContentDetail/types/Module'\r\nimport { CatalogLanguagesApi } from 'api/CatalogLanguages'\r\nimport axios, { CancelToken } from 'axios'\r\nimport { CatalogLanguage } from 'model/api/CatalogLanguage'\r\n\r\nexport type Data = CatalogItemDataProps\r\n\r\nexport interface ConfigurationProps {\r\n  data: Data\r\n  onConfirm: (data: Data) => void\r\n  onCancel: () => void\r\n}\r\n\r\nconst { Option } = Select\r\nconst { Item } = Form\r\n\r\nexport const Configuration: React.FC<ConfigurationProps> = ({\r\n  data,\r\n  onConfirm,\r\n  onCancel,\r\n}) => {\r\n  const { t } = useTranslation('content-detail')\r\n  const [configuration, setConfiguration] = useState(data)\r\n  const [catalogLanguages, setCatalogLanguages] = useState<CatalogLanguage[]>(\r\n    []\r\n  )\r\n\r\n  const getCatalogLanguages = useCallback(async (cancelToken: CancelToken) => {\r\n    const { data } = await CatalogLanguagesApi.getAllCatalogLanguages({\r\n      cancelToken,\r\n    })\r\n\r\n    setCatalogLanguages(data)\r\n  }, [])\r\n\r\n\r\n  const handleConfirm = useCallback(() => {\r\n    onConfirm(configuration)\r\n  }, [onConfirm, configuration])\r\n\r\n  const handleCatalogItemIdChange = useCallback((event: React.ChangeEvent<HTMLInputElement>) => {\r\n    event.persist()\r\n\r\n    setConfiguration(value => ({\r\n      ...value,\r\n      catalog_item_id: Number(event.target.value),\r\n    }))\r\n  }, [])\r\n\r\n  const handleLanguageChange = useCallback(value => {\r\n    setConfiguration(values => ({\r\n      ...values,\r\n      language_code: value === '' ? null : value,\r\n    }))\r\n  }, [])\r\n  \r\n  useEffect(() => {\r\n    const cancelTokenSource = axios.CancelToken.source()\r\n\r\n    getCatalogLanguages(cancelTokenSource.token)\r\n\r\n    return () => cancelTokenSource.cancel()\r\n  }, [getCatalogLanguages])\r\n\r\n\r\n  return (\r\n    <Modal\r\n      visible\r\n      width={600}\r\n      onOk={handleConfirm}\r\n      onCancel={onCancel}\r\n      title={t('catalog-item-configuration.title')}\r\n    >\r\n      <Form layout=\"vertical\">\r\n        <Item label={t('catalog-item-configuration.catalog-item-id')}>\r\n          <Input\r\n            type=\"number\"\r\n            defaultValue={configuration.catalog_item_id}\r\n            onChange={handleCatalogItemIdChange}\r\n          />\r\n        </Item>        \r\n        <Item label={t('catalog-item-configuration.language-code')}>\r\n        <Select\r\n            onChange={handleLanguageChange}\r\n            defaultValue={data.language_code}\r\n            allowClear\r\n          >\r\n            {catalogLanguages.map(({ code, name }) => (\r\n              <Option key={code} value={code}>\r\n                {name}\r\n              </Option>\r\n            ))}\r\n          </Select>\r\n        </Item>      \r\n      </Form>\r\n    </Modal>\r\n  )\r\n}\r\n","import React, { useContext, useCallback, useState, useEffect } from 'react'\r\nimport {\r\n  ModuleProps,\r\n  CatalogItemDataProps,\r\n} from 'scenes/ContentDetail/types/Module'\r\nimport { Container } from '../styles'\r\nimport { ContentDetailContext } from 'scenes/ContentDetail'\r\nimport { JSXParser } from 'components/JSXParser'\r\nimport { Controls } from '../Controls'\r\nimport { useModuleSort } from 'scenes/ContentDetail/hooks/useModuleSort'\r\nimport { OnMove } from 'scenes/ContentDetail/types/OnMove'\r\nimport { useModuleUpdate } from 'scenes/ContentDetail/hooks/useModuleUpdate'\r\nimport { useGetTemplatePreview } from 'scenes/ContentDetail/hooks/useGetTemplatePreview'\r\nimport { useDeleteModule } from 'scenes/ContentDetail/hooks/useDeleteModule'\r\nimport axios, { CancelToken } from 'axios'\r\nimport { Configuration, Data } from './Configuration'\r\nimport { CatalogItemsApi } from 'api/CatalogItems'\r\nimport { CatalogItemPublic } from 'model/api/CatalogItemPublic'\r\nimport { TemplatePreview } from 'model/api/TemplatePreview'\r\nimport { Alert } from 'antd'\r\nimport { useTranslation } from 'react-i18next'\r\n\r\nexport interface CatalogItemProps extends ModuleProps {\r\n  onMove?: OnMove\r\n  data: CatalogItemDataProps\r\n}\r\n\r\nexport const CatalogItem: React.FC<CatalogItemProps> = ({\r\n  uuid,\r\n  isNew,\r\n  moduleId,\r\n  moduleType,\r\n  data: { catalog_item_id, language_code },\r\n  onMove,\r\n  slotId,\r\n  locked,\r\n}) => {\r\n  const { t } = useTranslation('content-detail')\r\n  const { view } = useContext(ContentDetailContext)\r\n  const [catalogItem, setCatalogItem] = useState<CatalogItemPublic>()\r\n  const [isConfigurationOpen, setIsConfigurationOpen] = useState(false)\r\n  const { getTemplatePreview } = useGetTemplatePreview()\r\n  const { drag, drop, isDragging, ref } = useModuleSort({\r\n    uuid,\r\n    slotId,\r\n    onMove,\r\n    locked,\r\n  })\r\n  const { update } = useModuleUpdate<CatalogItemDataProps>({ uuid, slotId })\r\n  const handleDelete = useDeleteModule({ isNew, slotId, uuid, moduleId })\r\n  const [templatePreview, setTemplatePreview] = useState<TemplatePreview>()\r\n\r\n  const handleConfigurationChange = useCallback(\r\n    ({ catalog_item_id, language_code }: Data) => {\r\n      update({ catalog_item_id, language_code }, true)\r\n      setIsConfigurationOpen(false)\r\n    },\r\n    [update]\r\n  )\r\n\r\n  const getCatalogItem = useCallback(\r\n    async (cancelToken: CancelToken) => {\r\n      if (catalog_item_id) {\r\n        try {\r\n          const { data } = await CatalogItemsApi.getPublicCatalogItem(\r\n            catalog_item_id,\r\n            language_code,\r\n            true,\r\n            {\r\n              cancelToken,\r\n            }\r\n          )\r\n\r\n          setCatalogItem(data)\r\n          setTemplatePreview(\r\n            getTemplatePreview(view.path, data.data.template_path)\r\n          )\r\n        } catch (e) {\r\n          setCatalogItem(undefined)\r\n          setTemplatePreview(undefined)\r\n        }\r\n      } else {\r\n        setCatalogItem(undefined)\r\n        setTemplatePreview(undefined)\r\n      }\r\n    },\r\n    [catalog_item_id, view, getTemplatePreview, language_code]\r\n  )\r\n\r\n  useEffect(() => {\r\n    const cancelTokenSource = axios.CancelToken.source()\r\n\r\n    getCatalogItem(cancelTokenSource.token)\r\n\r\n    return () => cancelTokenSource.cancel()\r\n  }, [getCatalogItem])\r\n\r\n  const opacity = isDragging ? 0 : 1\r\n  drag(drop(ref))\r\n\r\n  return (\r\n    <>\r\n      <div ref={ref} style={{ opacity }}>\r\n        <Container locked={locked}>\r\n          {!locked && (\r\n            <Controls\r\n              moduleType={moduleType}\r\n              hasEdit={false}\r\n              onConfigure={() => setIsConfigurationOpen(true)}\r\n              onDelete={handleDelete}\r\n            />\r\n          )}\r\n          {!!templatePreview && catalogItem ? (\r\n            <JSXParser\r\n              jsx={templatePreview.template}\r\n              bindings={{ data: catalogItem }}\r\n              renderInWrapper={false}\r\n            />\r\n          ) : (\r\n            <Alert\r\n              message={t('this-module-needs-to-be-configured-first')}\r\n              type=\"info\"\r\n            />\r\n          )}\r\n        </Container>\r\n      </div>\r\n      {isConfigurationOpen && (\r\n        <Configuration\r\n          data={{ catalog_item_id, language_code }}\r\n          onConfirm={handleConfigurationChange}\r\n          onCancel={() => setIsConfigurationOpen(false)}\r\n        />\r\n      )}\r\n    </>\r\n  )\r\n}\r\n","import React, { useCallback, useState, useEffect } from 'react'\r\nimport { Modal, Select, Form, Input, Switch } from 'antd'\r\nimport { useTranslation } from 'react-i18next'\r\nimport { CatalogDetailDataProps } from 'scenes/ContentDetail/types/Module'\r\nimport axios, { CancelToken } from 'axios'\r\nimport { CatalogLanguagesApi } from 'api/CatalogLanguages'\r\nimport { CatalogLanguage } from 'model/api/CatalogLanguage'\r\n\r\nexport type Data = CatalogDetailDataProps\r\n\r\nexport interface ConfigurationProps {\r\n  data: Data\r\n  onConfirm: (data: Data) => void\r\n  onCancel: () => void\r\n}\r\n\r\nconst { Option } = Select\r\nconst { Item } = Form\r\n\r\nexport const Configuration: React.FC<ConfigurationProps> = ({\r\n  data,\r\n  onConfirm,\r\n  onCancel,\r\n}) => {\r\n  const { t } = useTranslation('content-detail')\r\n  const [configuration, setConfiguration] = useState(data)\r\n  const [languages, setLanguages] = useState<CatalogLanguage[]>()\r\n  const [, setLoading] = useState(false)\r\n\r\n  const getLanguages = useCallback(async (cancelToken: CancelToken) => {\r\n    try {\r\n      setLoading(true)\r\n\r\n      const { data } = await CatalogLanguagesApi.getAllCatalogLanguages({\r\n        cancelToken,\r\n      })\r\n\r\n      setLanguages(data)\r\n      setLoading(false)\r\n    } catch (e) {\r\n      setLoading(false)\r\n    }\r\n  }, [])\r\n\r\n  const handleConfirm = useCallback(() => {\r\n    onConfirm(configuration)\r\n  }, [onConfirm, configuration])\r\n\r\n  const handleCatalogItemIdChange = useCallback(\r\n    ({ target: { value } }: React.ChangeEvent<HTMLInputElement>) => {\r\n      setConfiguration(values => ({\r\n        ...values,\r\n        catalog_item_id: value === '' ? null : Number(value),\r\n      }))\r\n    },\r\n    []\r\n  )\r\n\r\n  const handleLanguageCodeChange = useCallback(\r\n    (language_code: string | null) => {\r\n      setConfiguration(values => ({\r\n        ...values,\r\n        language_code,\r\n      }))\r\n    },\r\n    []\r\n  )\r\n\r\n  const handleCatalogItemIdVariableNameChange = useCallback(\r\n    ({ target: { value } }: React.ChangeEvent<HTMLInputElement>) => {\r\n      setConfiguration(values => ({\r\n        ...values,\r\n        catalog_item_id_variable_name: value === '' ? null : value,\r\n      }))\r\n    },\r\n    []\r\n  )\r\n\r\n  const handleLoadFromGlobalContextChange = useCallback((checked: boolean) => {\r\n    setConfiguration(values => ({\r\n      ...values,\r\n      load_from_global_context: checked,\r\n    }))\r\n  }, [])\r\n\r\n  useEffect(() => {\r\n    const cancelTokenSource = axios.CancelToken.source()\r\n\r\n    getLanguages(cancelTokenSource.token)\r\n\r\n    return () => cancelTokenSource.cancel()\r\n  }, [getLanguages])\r\n\r\n  return (\r\n    <Modal\r\n      visible\r\n      width={600}\r\n      onOk={handleConfirm}\r\n      onCancel={onCancel}\r\n      title={t('catalog-detail-configuration.title')}\r\n    >\r\n      <Form layout=\"vertical\">\r\n        <Item label={t('catalog-detail-configuration.catalog-item-id')}>\r\n          <Input\r\n            allowClear\r\n            type=\"number\"\r\n            value={configuration.catalog_item_id}\r\n            onChange={handleCatalogItemIdChange}\r\n          />\r\n        </Item>\r\n        <Item label={t('catalog-detail-configuration.language-code')}>\r\n          <Select\r\n            defaultValue={configuration.language_code}\r\n            onChange={handleLanguageCodeChange}\r\n            allowClear\r\n          >\r\n            {languages &&\r\n              languages.map(({ code, name }) => (\r\n                <Option value={code}>{name}</Option>\r\n              ))}\r\n          </Select>\r\n        </Item>\r\n        <Item\r\n          label={t(\r\n            'catalog-detail-configuration.catalog-item-id-variable-name'\r\n          )}\r\n        >\r\n          <Input\r\n            onChange={handleCatalogItemIdVariableNameChange}\r\n            defaultValue={data.catalog_item_id_variable_name}\r\n          />\r\n        </Item>\r\n        <Item\r\n          label={t('catalog-detail-configuration.load-from-global-context')}\r\n        >\r\n          <Switch\r\n            onChange={handleLoadFromGlobalContextChange}\r\n            checked={configuration.load_from_global_context}\r\n            defaultChecked={data.load_from_global_context}\r\n          />\r\n        </Item>\r\n      </Form>\r\n    </Modal>\r\n  )\r\n}\r\n","import React, { useContext, useCallback, useState, useEffect } from 'react'\r\nimport {\r\n  ModuleProps,\r\n  CatalogDetailDataProps,\r\n} from 'scenes/ContentDetail/types/Module'\r\nimport { Container } from '../styles'\r\nimport { ContentDetailContext } from 'scenes/ContentDetail'\r\nimport { JSXParser } from 'components/JSXParser'\r\nimport { Controls } from '../Controls'\r\nimport { useModuleSort } from 'scenes/ContentDetail/hooks/useModuleSort'\r\nimport { OnMove } from 'scenes/ContentDetail/types/OnMove'\r\nimport { useModuleUpdate } from 'scenes/ContentDetail/hooks/useModuleUpdate'\r\nimport { useGetTemplatePreview } from 'scenes/ContentDetail/hooks/useGetTemplatePreview'\r\nimport { useDeleteModule } from 'scenes/ContentDetail/hooks/useDeleteModule'\r\nimport axios, { CancelToken } from 'axios'\r\nimport { Configuration, Data } from './Configuration'\r\nimport { Alert } from 'antd'\r\nimport { useTranslation } from 'react-i18next'\r\nimport { CatalogItemPublic } from 'model/api/CatalogItemPublic'\r\nimport { CatalogItemsApi } from 'api/CatalogItems'\r\nimport { TemplatePreview } from 'model/api/TemplatePreview'\r\n\r\nexport interface CatalogDetailProps extends ModuleProps {\r\n  onMove?: OnMove\r\n  data: CatalogDetailDataProps\r\n}\r\n\r\nexport const CatalogDetail: React.FC<CatalogDetailProps> = ({\r\n  uuid,\r\n  isNew,\r\n  moduleId,\r\n  moduleType,\r\n  data: {\r\n    catalog_item_id,\r\n    language_code,\r\n    catalog_item_id_variable_name,\r\n    load_from_global_context,\r\n  },\r\n  onMove,\r\n  slotId,\r\n  locked,\r\n}) => {\r\n  const { t } = useTranslation('content-detail')\r\n  const { view } = useContext(ContentDetailContext)\r\n  const [catalogItemDetail, setCatalogItemDetail] = useState<\r\n    CatalogItemPublic\r\n  >()\r\n  const [isConfigurationOpen, setIsConfigurationOpen] = useState(false)\r\n  const { getTemplatePreview } = useGetTemplatePreview()\r\n  const { drag, drop, isDragging, ref } = useModuleSort({\r\n    uuid,\r\n    slotId,\r\n    onMove,\r\n    locked,\r\n  })\r\n  const { update } = useModuleUpdate<CatalogDetailDataProps>({\r\n    uuid,\r\n    slotId,\r\n  })\r\n  const handleDelete = useDeleteModule({ isNew, slotId, uuid, moduleId })\r\n  const [templatePreview, setTemplatePreview] = useState<TemplatePreview>()\r\n\r\n  const handleConfigurationChange = useCallback(\r\n    ({\r\n      catalog_item_id,\r\n      language_code,\r\n      catalog_item_id_variable_name,\r\n      load_from_global_context,\r\n    }: Data) => {\r\n      update(\r\n        {\r\n          catalog_item_id,\r\n          language_code,\r\n          catalog_item_id_variable_name,\r\n          load_from_global_context,\r\n        },\r\n        true\r\n      )\r\n      setIsConfigurationOpen(false)\r\n    },\r\n    [update]\r\n  )\r\n\r\n  const getCatalogItemDetail = useCallback(\r\n    async (cancelToken: CancelToken) => {\r\n      if (catalog_item_id) {\r\n        try {\r\n          const { data } = await CatalogItemsApi.getPublicCatalogItem(\r\n            catalog_item_id,\r\n            language_code ? language_code : null,\r\n            false,\r\n            {\r\n              cancelToken,\r\n            }\r\n          )\r\n\r\n          setCatalogItemDetail(data)\r\n          setTemplatePreview(\r\n            getTemplatePreview(view.path, data.data.template_path)\r\n          )\r\n        } catch (e) {\r\n          setCatalogItemDetail(undefined)\r\n          setTemplatePreview(undefined)\r\n        }\r\n      } else {\r\n        setCatalogItemDetail(undefined)\r\n        setTemplatePreview(undefined)\r\n      }\r\n    },\r\n    [catalog_item_id, language_code, getTemplatePreview, view.path]\r\n  )\r\n\r\n  useEffect(() => {\r\n    const cancelTokenSource = axios.CancelToken.source()\r\n\r\n    getCatalogItemDetail(cancelTokenSource.token)\r\n\r\n    return () => cancelTokenSource.cancel()\r\n  }, [getCatalogItemDetail])\r\n\r\n  const opacity = isDragging ? 0 : 1\r\n  drag(drop(ref))\r\n\r\n  return (\r\n    <>\r\n      <div ref={ref} style={{ opacity }}>\r\n        <Container locked={locked}>\r\n          {!locked && (\r\n            <Controls\r\n              moduleType={moduleType}\r\n              hasEdit={false}\r\n              onConfigure={() => setIsConfigurationOpen(true)}\r\n              onDelete={handleDelete}\r\n            />\r\n          )}\r\n          {!!templatePreview ? (\r\n            <JSXParser\r\n              jsx={templatePreview.template}\r\n              bindings={{\r\n                data: catalogItemDetail,\r\n                language_code,\r\n                catalog_item_id_variable_name,\r\n                load_from_global_context,\r\n              }}\r\n              renderInWrapper={false}\r\n            />\r\n          ) : (\r\n            <Alert\r\n              message={t('this-module-needs-to-be-configured-first')}\r\n              type=\"info\"\r\n            />\r\n          )}\r\n        </Container>\r\n      </div>\r\n      {isConfigurationOpen && (\r\n        <Configuration\r\n          data={{\r\n            catalog_item_id,\r\n            language_code,\r\n            catalog_item_id_variable_name,\r\n            load_from_global_context,\r\n          }}\r\n          onConfirm={handleConfigurationChange}\r\n          onCancel={() => setIsConfigurationOpen(false)}\r\n        />\r\n      )}\r\n    </>\r\n  )\r\n}\r\n","import React, { useCallback, useState } from 'react'\r\nimport { Modal, Form, Input } from 'antd'\r\nimport { useTranslation } from 'react-i18next'\r\nimport { CatalogSearchDataProps } from 'scenes/ContentDetail/types/Module'\r\nexport type Data = CatalogSearchDataProps\r\n\r\nexport interface ConfigurationProps {\r\n  data: Data\r\n  onConfirm: (data: Data) => void\r\n  onCancel: () => void\r\n}\r\n\r\nconst { Item } = Form\r\n\r\nexport const Configuration: React.FC<ConfigurationProps> = ({\r\n  data,\r\n  onConfirm,\r\n  onCancel,\r\n}) => {\r\n  const { t } = useTranslation('content-detail')\r\n  const [configuration, setConfiguration] = useState(data)\r\n\r\n  const handleConfirm = useCallback(() => {\r\n    onConfirm(configuration)\r\n  }, [onConfirm, configuration])\r\n\r\n  const handleSearchPlaceholderChange = useCallback(\r\n    ({ target: { value } }: React.ChangeEvent<HTMLInputElement>) => {\r\n      setConfiguration(values => ({\r\n        ...values,\r\n        search_placeholder: value,\r\n      }))\r\n    },\r\n    []\r\n  )\r\n\r\n  const handleSubmitLabelChange = useCallback(\r\n    ({ target: { value } }: React.ChangeEvent<HTMLInputElement>) => {\r\n      setConfiguration(values => ({\r\n        ...values,\r\n        submit_label: value,\r\n      }))\r\n    },\r\n    []\r\n  )\r\n\r\n  return (\r\n    <Modal\r\n      visible\r\n      width={600}\r\n      onOk={handleConfirm}\r\n      onCancel={onCancel}\r\n      title={t('catalog-search-configuration.title')}\r\n    >\r\n      <Form layout=\"vertical\">\r\n        <Item label={t('catalog-search-configuration.search-placeholder')}>\r\n          <Input\r\n            defaultValue={configuration.search_placeholder}\r\n            onChange={handleSearchPlaceholderChange}\r\n          />\r\n        </Item>\r\n        <Item label={t('catalog-search-configuration.submit-label')}>\r\n          <Input\r\n            defaultValue={configuration.submit_label}\r\n            onChange={handleSubmitLabelChange}\r\n          />\r\n        </Item>\r\n      </Form>\r\n    </Modal>\r\n  )\r\n}\r\n","import React, { useContext, useCallback, useState } from 'react'\r\nimport {\r\n  ModuleProps,\r\n  CatalogSearchDataProps,\r\n} from 'scenes/ContentDetail/types/Module'\r\nimport { Container } from '../styles'\r\nimport { ContentDetailContext } from 'scenes/ContentDetail'\r\nimport { ModuleTypeEnum } from 'model/api/ModuleTypeEnum'\r\nimport { JSXParser } from 'components/JSXParser'\r\nimport { Controls } from '../Controls'\r\nimport { useModuleSort } from 'scenes/ContentDetail/hooks/useModuleSort'\r\nimport { OnMove } from 'scenes/ContentDetail/types/OnMove'\r\nimport { useModuleUpdate } from 'scenes/ContentDetail/hooks/useModuleUpdate'\r\nimport { Configuration, Data } from './Configuration'\r\nimport { useGetTemplatePreview } from 'scenes/ContentDetail/hooks/useGetTemplatePreview'\r\nimport { useDeleteModule } from 'scenes/ContentDetail/hooks/useDeleteModule'\r\n\r\nexport interface CatalogSearchProps extends ModuleProps {\r\n  onMove?: OnMove\r\n  data: CatalogSearchDataProps\r\n}\r\n\r\nexport const CatalogSearch: React.FC<CatalogSearchProps> = ({\r\n  uuid,\r\n  moduleType,\r\n  isNew,\r\n  moduleId,\r\n  data: { search_placeholder, submit_label },\r\n  onMove,\r\n  slotId,\r\n  locked,\r\n}) => {\r\n  const { view } = useContext(ContentDetailContext)\r\n  const [isConfigurationOpen, setIsConfigurationOpen] = useState(false)\r\n  const { getTemplatePreview } = useGetTemplatePreview()\r\n  const { drag, drop, isDragging, ref } = useModuleSort({\r\n    uuid,\r\n    slotId,\r\n    onMove,\r\n    locked,\r\n  })\r\n  const { update } = useModuleUpdate<CatalogSearchDataProps>({\r\n    uuid,\r\n    slotId,\r\n  })\r\n  const handleDelete = useDeleteModule({ isNew, slotId, uuid, moduleId })\r\n\r\n  const templatePreview =\r\n    view && getTemplatePreview(view.path, ModuleTypeEnum.CATALOG_SEARCH)\r\n\r\n  const handleConfigurationChange = useCallback(\r\n    ({ search_placeholder, submit_label }: Data) => {\r\n      update({ search_placeholder, submit_label }, true)\r\n      setIsConfigurationOpen(false)\r\n    },\r\n    [update]\r\n  )\r\n\r\n  if (templatePreview) {\r\n    const opacity = isDragging ? 0 : 1\r\n    drag(drop(ref))\r\n\r\n    return (\r\n      <>\r\n        <div ref={ref} style={{ opacity }}>\r\n          <Container locked={locked}>\r\n            {!locked && (\r\n              <Controls\r\n                moduleType={moduleType}\r\n                hasEdit={false}\r\n                onConfigure={() => setIsConfigurationOpen(true)}\r\n                onDelete={handleDelete}\r\n              />\r\n            )}\r\n            <JSXParser\r\n              jsx={templatePreview.template}\r\n              bindings={{\r\n                search_placeholder,\r\n                submit_label,\r\n              }}\r\n              renderInWrapper={false}\r\n            />\r\n          </Container>\r\n        </div>\r\n        {isConfigurationOpen && (\r\n          <Configuration\r\n            data={{ search_placeholder, submit_label }}\r\n            onConfirm={handleConfigurationChange}\r\n            onCancel={() => setIsConfigurationOpen(false)}\r\n          />\r\n        )}\r\n      </>\r\n    )\r\n  } else {\r\n    return null\r\n  }\r\n}\r\n","import axios, { AxiosPromise } from 'axios'\r\nimport { RequestConfig } from './requestConfig'\r\nimport { Navigation } from 'model/api/Navigation'\r\nimport { PaginatedList } from 'model/api/PaginatedList'\r\nimport { NavigationDetail } from 'model/api/NavigationDetail'\r\n\r\nexport class NavigationsApi {\r\n  /**\r\n   * Get Navigations\r\n   *\r\n   * @param page\r\n   * @param pageSize\r\n   */\r\n  static getNavigations(\r\n    page?: number,\r\n    pageSize?: number,\r\n    config?: RequestConfig\r\n  ): AxiosPromise<PaginatedList<Navigation>> {\r\n    return axios({\r\n      ...config,\r\n      method: 'GET',\r\n      url: `/navigations`,\r\n      params: {\r\n        page,\r\n        per_page: pageSize\r\n      },\r\n    })\r\n  }\r\n\r\n  /**\r\n   * Get All Navigations\r\n   *\r\n   */\r\n  static getAllNavigations(\r\n    config?: RequestConfig\r\n  ): AxiosPromise<Navigation[]> {\r\n    return axios({\r\n      ...config,\r\n      method: 'GET',\r\n      url: `/navigations/all`,\r\n    })\r\n  }\r\n\r\n  /**\r\n   * Get Navigation\r\n   *\r\n   * @param navigationId\r\n   */\r\n  static getNavigation(\r\n    navigationId: number,\r\n    config?: RequestConfig\r\n  ): AxiosPromise<NavigationDetail> {\r\n    return axios({\r\n      ...config,\r\n      method: 'GET',\r\n      url: `/navigations/${navigationId}`,\r\n    })\r\n  }\r\n\r\n  /**\r\n   * Create Navigation\r\n   *\r\n   * @param data\r\n   */\r\n  static createNavigation(\r\n    data: FormData,\r\n    config?: RequestConfig\r\n  ): AxiosPromise<{ id: number }> {\r\n    return axios({\r\n      ...config,\r\n      method: 'POST',\r\n      url: `/navigations`,\r\n      data\r\n    })\r\n  }\r\n\r\n  /**\r\n   * Update Navigation\r\n   *\r\n   * @param navigationId\r\n   * @param data\r\n   */\r\n  static updateNavigation(\r\n    navigationId: number,\r\n    data: FormData,\r\n    config?: RequestConfig\r\n  ): AxiosPromise {\r\n    return axios({\r\n      ...config,\r\n      method: 'PUT',\r\n      url: `/navigations/${navigationId}`,\r\n      data\r\n    })\r\n  }\r\n\r\n  /**\r\n   * Delete Navigation\r\n   *\r\n   * @param navigationId\r\n   */\r\n  static deleteNavigation(\r\n    navigationId: number,\r\n    config?: RequestConfig\r\n  ): AxiosPromise {\r\n    return axios({\r\n      ...config,\r\n      method: 'DELETE',\r\n      url: `/navigations/${navigationId}`,\r\n    })\r\n  }\r\n}","import React, { useCallback, useState, useEffect } from 'react'\r\nimport { Modal, Select, Form } from 'antd'\r\nimport { useTranslation } from 'react-i18next'\r\nimport { NavigationDataProps } from 'scenes/ContentDetail/types/Module'\r\nimport axios, { CancelToken } from 'axios'\r\nimport { NavigationsApi } from 'api/Navigations'\r\nimport { Navigation } from 'model/api/Navigation'\r\n\r\nexport type Data = NavigationDataProps\r\n\r\nexport interface ConfigurationProps {\r\n  data: Data\r\n  onConfirm: (data: Data) => void\r\n  onCancel: () => void\r\n}\r\n\r\nconst { Option } = Select\r\nconst { Item } = Form\r\n\r\nexport const Configuration: React.FC<ConfigurationProps> = ({\r\n  data,\r\n  onConfirm,\r\n  onCancel,\r\n}) => {\r\n  const { t } = useTranslation('content-detail')\r\n  const [configuration, setConfiguration] = useState(data)\r\n  const [navigations, setNavigations] = useState<Navigation[]>([])\r\n\r\n  const getNavigations = useCallback(async (cancelToken: CancelToken) => {\r\n    const { data } = await NavigationsApi.getAllNavigations({\r\n      cancelToken,\r\n    })\r\n\r\n    setNavigations(data)\r\n  }, [])\r\n\r\n  const handleConfirm = useCallback(() => {\r\n    onConfirm(configuration)\r\n  }, [onConfirm, configuration])\r\n\r\n  const handleNavigationChange = useCallback((navigation_id: number) => {\r\n    setConfiguration(value => ({\r\n      ...value,\r\n      navigation_id,\r\n    }))\r\n  }, [])\r\n\r\n  useEffect(() => {\r\n    const cancelTokenSource = axios.CancelToken.source()\r\n\r\n    getNavigations(cancelTokenSource.token)\r\n\r\n    return () => cancelTokenSource.cancel()\r\n  }, [getNavigations])\r\n\r\n  return (\r\n    <Modal\r\n      visible\r\n      width={600}\r\n      onOk={handleConfirm}\r\n      onCancel={onCancel}\r\n      title={t('navigation-configuration.title')}\r\n    >\r\n      <Form layout=\"vertical\">\r\n        <Item label={t('navigation-configuration.navigation')}>\r\n          <Select\r\n            defaultValue={configuration.navigation_id}\r\n            onChange={handleNavigationChange}\r\n          >\r\n            {navigations.map(({ id, name }) => (\r\n              <Option value={id}>{name}</Option>\r\n            ))}\r\n          </Select>\r\n        </Item>\r\n      </Form>\r\n    </Modal>\r\n  )\r\n}\r\n","import React, { useContext, useCallback, useState, useEffect } from 'react'\r\nimport {\r\n  ModuleProps,\r\n  NavigationDataProps,\r\n} from 'scenes/ContentDetail/types/Module'\r\nimport { Container } from '../styles'\r\nimport { ContentDetailContext } from 'scenes/ContentDetail'\r\nimport { ModuleTypeEnum } from 'model/api/ModuleTypeEnum'\r\nimport { JSXParser } from 'components/JSXParser'\r\nimport { Controls } from '../Controls'\r\nimport { useModuleSort } from 'scenes/ContentDetail/hooks/useModuleSort'\r\nimport { OnMove } from 'scenes/ContentDetail/types/OnMove'\r\nimport { useModuleUpdate } from 'scenes/ContentDetail/hooks/useModuleUpdate'\r\nimport { useGetTemplatePreview } from 'scenes/ContentDetail/hooks/useGetTemplatePreview'\r\nimport { useDeleteModule } from 'scenes/ContentDetail/hooks/useDeleteModule'\r\nimport { NavigationsApi } from 'api/Navigations'\r\nimport { NavigationDetail } from 'model/api/NavigationDetail'\r\nimport axios, { CancelToken } from 'axios'\r\nimport { Configuration, Data } from './Configuration'\r\nimport { Alert } from 'antd'\r\nimport { useTranslation } from 'react-i18next'\r\n\r\nexport interface NavigationProps extends ModuleProps {\r\n  onMove?: OnMove\r\n  data: NavigationDataProps\r\n}\r\n\r\nexport const Navigation: React.FC<NavigationProps> = ({\r\n  uuid,\r\n  isNew,\r\n  moduleId,\r\n  moduleType,\r\n  data: { navigation_id },\r\n  onMove,\r\n  slotId,\r\n  locked,\r\n}) => {\r\n  const { t } = useTranslation('content-detail')\r\n  const { view } = useContext(ContentDetailContext)\r\n  const [navigationData, setNavigationData] = useState<NavigationDetail>()\r\n  const [isConfigurationOpen, setIsConfigurationOpen] = useState(false)\r\n  const { getTemplatePreview } = useGetTemplatePreview()\r\n  const { drag, drop, isDragging, ref } = useModuleSort({\r\n    uuid,\r\n    slotId,\r\n    locked,\r\n    onMove,\r\n  })\r\n  const { update } = useModuleUpdate<NavigationDataProps>({ uuid, slotId })\r\n  const handleDelete = useDeleteModule({ isNew, slotId, uuid, moduleId })\r\n  const templatePreview = navigationData\r\n    ? view &&\r\n      getTemplatePreview(\r\n        `${view.path}/${navigationData.path}`,\r\n        ModuleTypeEnum.NAVIGATION\r\n      )\r\n    : { template: '' }\r\n\r\n  const handleConfigurationChange = useCallback(\r\n    ({ navigation_id }: Data) => {\r\n      update({ navigation_id }, true)\r\n      setIsConfigurationOpen(false)\r\n    },\r\n    [update]\r\n  )\r\n\r\n  const getNavigationData = useCallback(\r\n    async (cancelToken: CancelToken) => {\r\n      if (navigation_id) {\r\n        const { data } = await NavigationsApi.getNavigation(navigation_id, {\r\n          cancelToken,\r\n        })\r\n\r\n        setNavigationData(data)\r\n      }\r\n    },\r\n    [navigation_id]\r\n  )\r\n\r\n  useEffect(() => {\r\n    const cancelTokenSource = axios.CancelToken.source()\r\n\r\n    getNavigationData(cancelTokenSource.token)\r\n\r\n    return () => cancelTokenSource.cancel()\r\n  }, [getNavigationData])\r\n\r\n  if (templatePreview) {\r\n    const template = templatePreview.template\r\n\r\n    const opacity = isDragging ? 0 : 1\r\n    drag(drop(ref))\r\n\r\n    return (\r\n      <>\r\n        <div ref={ref} style={{ opacity }}>\r\n          <Container locked={locked}>\r\n            {!locked && (\r\n              <Controls\r\n                moduleType={moduleType}\r\n                hasEdit={false}\r\n                onConfigure={() => setIsConfigurationOpen(true)}\r\n                onDelete={handleDelete}\r\n              />\r\n            )}\r\n            {!!navigationData ? (\r\n              <JSXParser\r\n                jsx={template}\r\n                bindings={{\r\n                  items: navigationData.items,\r\n                }}\r\n                renderInWrapper={false}\r\n              />\r\n            ) : (\r\n              <Alert\r\n                message={t('this-module-needs-to-be-configured-first')}\r\n                type=\"info\"\r\n              />\r\n            )}\r\n          </Container>\r\n        </div>\r\n        {isConfigurationOpen && (\r\n          <Configuration\r\n            data={{ navigation_id }}\r\n            onConfirm={handleConfigurationChange}\r\n            onCancel={() => setIsConfigurationOpen(false)}\r\n          />\r\n        )}\r\n      </>\r\n    )\r\n  } else {\r\n    return null\r\n  }\r\n}\r\n","import React, { useCallback, useState, useEffect } from 'react'\r\nimport { Modal, Form, Upload, Input } from 'antd'\r\nimport { useTranslation } from 'react-i18next'\r\nimport { ImageDataProps } from 'scenes/ContentDetail/types/Module'\r\nimport { Icon } from 'components/Icon'\r\nimport { UploadFile, UploadChangeParam } from 'antd/lib/upload/interface'\r\nimport { getBase64 } from 'utils/getBase64'\r\nimport styled from 'styled-components'\r\nimport { COLORS } from 'constants/colors'\r\n\r\nconst { CMS_STATIC_URL } = window._envConfig\r\nconst imageUrl = CMS_STATIC_URL + '/images/'\r\n\r\nconst ImageContainer = styled.div`\r\n  display: flex;\r\n  flex-direction: row;\r\n  justify-content: flex-end;\r\n  width: 240px;\r\n  height: 240px;\r\n  margin-top: 24px;\r\n  padding: 12px;\r\n  overflow: hidden;\r\n  background-repeat: no-repeat;\r\n  background-position: 50% 50%;\r\n  background-size: cover;\r\n  border: 1px solid ${COLORS.gray2};\r\n  border-radius: 2px;\r\n`\r\n\r\nconst { Dragger } = Upload\r\n\r\nexport type Data = ImageDataProps\r\n\r\nexport interface ConfigurationProps {\r\n  data: Data\r\n  onConfirm: (data: Data) => void\r\n  onCancel: () => void\r\n}\r\n\r\nconst { Item } = Form\r\n\r\nexport const Configuration: React.FC<ConfigurationProps> = ({\r\n  data,\r\n  onConfirm,\r\n  onCancel,\r\n}) => {\r\n  const { t } = useTranslation('content-detail')\r\n  const [configuration, setConfiguration] = useState(data)\r\n  const [image, setImage] = useState<string>()\r\n\r\n  const handleConfirm = useCallback(() => {\r\n    onConfirm(configuration)\r\n  }, [onConfirm, configuration])\r\n\r\n  const handleImageAltChange = useCallback(\r\n    (event: React.ChangeEvent<HTMLInputElement>) => {\r\n      event.persist()\r\n\r\n      setConfiguration(value => ({\r\n        ...value,\r\n        image_alt: event.target.value,\r\n      }))\r\n    },\r\n    []\r\n  )\r\n\r\n  const getImage = useCallback(async (image?: UploadFile) => {\r\n    if (image) {\r\n      setImage((await getBase64(image.originFileObj)) as string)\r\n    }\r\n  }, [])\r\n\r\n  const handleImageChange = useCallback(\r\n    async ({ fileList, file: { uid } }: UploadChangeParam<UploadFile<any>>) => {\r\n      const filteredImage = fileList.find(item => item.uid === uid)\r\n\r\n      getImage(filteredImage)\r\n\r\n      setConfiguration(value => ({\r\n        ...value,\r\n        image: filteredImage,\r\n      }))\r\n    },\r\n    [getImage]\r\n  )\r\n\r\n  useEffect(() => {\r\n    if (data.image) {\r\n      getImage(data.image)\r\n    }\r\n  }, [data, getImage])\r\n\r\n  const hasImage = image || data.file_name !== ''\r\n\r\n  return (\r\n    <Modal\r\n      visible\r\n      width={600}\r\n      onOk={handleConfirm}\r\n      onCancel={onCancel}\r\n      title={t('image-configuration.title')}\r\n    >\r\n      <Form layout=\"vertical\">\r\n        <Item label={t('image-configuration.image')}>\r\n          <Dragger\r\n            multiple={false}\r\n            beforeUpload={() => {\r\n              return false\r\n            }}\r\n            showUploadList={false}\r\n            accept=\"image/*\"\r\n            onChange={handleImageChange}\r\n          >\r\n            <Icon icon=\"cloud-upload-alt\" size=\"2x\" />\r\n            <p>{t('image-configuration.image-upload')}</p>\r\n          </Dragger>\r\n          {hasImage && (\r\n              <ImageContainer\r\n                style={{\r\n                  backgroundImage: `url(${image ||\r\n                    imageUrl + data.file_name})`,\r\n                }}\r\n              />\r\n            )}\r\n        </Item>\r\n        <Item label={t('image-configuration.image-title')}>\r\n          <Input onChange={handleImageAltChange} defaultValue={data.image_alt} />\r\n        </Item>\r\n      </Form>\r\n    </Modal>\r\n  )\r\n}\r\n","import React, {\r\n  useContext,\r\n  useCallback,\r\n  useState,\r\n  useEffect,\r\n} from 'react'\r\nimport { ModuleProps, ImageDataProps } from 'scenes/ContentDetail/types/Module'\r\nimport { Container } from '../styles'\r\nimport { ContentDetailContext } from 'scenes/ContentDetail'\r\nimport { ModuleTypeEnum } from 'model/api/ModuleTypeEnum'\r\nimport { JSXParser } from 'components/JSXParser'\r\nimport { Controls } from '../Controls'\r\nimport { useModuleSort } from 'scenes/ContentDetail/hooks/useModuleSort'\r\nimport { OnMove } from 'scenes/ContentDetail/types/OnMove'\r\nimport { useModuleUpdate } from 'scenes/ContentDetail/hooks/useModuleUpdate'\r\nimport { Configuration, Data } from './Configuration'\r\nimport { useGetTemplatePreview } from 'scenes/ContentDetail/hooks/useGetTemplatePreview'\r\nimport { useDeleteModule } from 'scenes/ContentDetail/hooks/useDeleteModule'\r\nimport { getBase64 } from 'utils/getBase64'\r\nimport { Alert } from 'antd'\r\nimport { useTranslation } from 'react-i18next'\r\n\r\nconst { CMS_STATIC_URL } = window._envConfig\r\nconst imageUrl = CMS_STATIC_URL + '/images/'\r\n\r\nexport interface ImageProps extends ModuleProps {\r\n  onMove?: OnMove\r\n  data: ImageDataProps\r\n}\r\n\r\nexport const Image: React.FC<ImageProps> = ({\r\n  uuid,\r\n  moduleType,\r\n  isNew,\r\n  moduleId,\r\n  data: { file_name, image, image_alt },\r\n  onMove,\r\n  slotId,\r\n  locked,\r\n}) => {\r\n  const { t } = useTranslation('content-detail')\r\n  const { view, setFiles } = useContext(ContentDetailContext)\r\n  const [isConfigurationOpen, setIsConfigurationOpen] = useState(false)\r\n  const { getTemplatePreview } = useGetTemplatePreview()\r\n  const { drag, drop, isDragging, ref } = useModuleSort({\r\n    uuid,\r\n    slotId,\r\n    onMove,\r\n    locked,\r\n  })\r\n  const { update } = useModuleUpdate<ImageDataProps>({ uuid, slotId })\r\n  const handleDelete = useDeleteModule({ isNew, slotId, uuid, moduleId })\r\n  const [uploadedImage, setUploadedImage] = useState<string>()\r\n\r\n  const templatePreview =\r\n    view && getTemplatePreview(view.path, ModuleTypeEnum.IMAGE)\r\n\r\n  const handleConfigurationChange = useCallback(\r\n    ({ file_name, image, image_alt }: Data) => {\r\n      update({ file_name, image, image_alt }, true)\r\n      setIsConfigurationOpen(false)\r\n    },\r\n    [update]\r\n  )\r\n\r\n  const setUploadedImagePreview = useCallback(async () => {\r\n    if (image) {\r\n      setUploadedImage((await getBase64(image.originFileObj)) as string)\r\n      setFiles(value => ({ ...value, [uuid]: [image] }))\r\n    }\r\n  }, [image, uuid, setFiles])\r\n\r\n  useEffect(() => {\r\n    setUploadedImagePreview()\r\n  }, [setUploadedImagePreview])\r\n\r\n  if (templatePreview) {\r\n    console.log(uploadedImage)\r\n\r\n    const template = templatePreview.template\r\n    const hasImage = uploadedImage || file_name\r\n    const currentImage = uploadedImage || imageUrl + file_name\r\n\r\n    const opacity = isDragging ? 0 : 1\r\n    drag(drop(ref))\r\n\r\n    return (\r\n      <>\r\n        <div ref={ref} style={{ opacity }}>\r\n          <Container locked={locked}>\r\n          {!locked && <Controls\r\n              moduleType={moduleType}\r\n              hasEdit={false}\r\n              onConfigure={() => setIsConfigurationOpen(true)}\r\n              onDelete={handleDelete}\r\n            />}\r\n            {hasImage ? (\r\n              <JSXParser\r\n                jsx={template}\r\n                bindings={{\r\n                  file_name: currentImage,\r\n                  image_alt,\r\n                }}\r\n                renderInWrapper={false}\r\n              />\r\n            ) : (\r\n              <Alert\r\n                message={t('this-module-needs-to-be-configured-first')}\r\n                type=\"info\"\r\n              />\r\n            )}\r\n          </Container>\r\n        </div>\r\n        {isConfigurationOpen && (\r\n          <Configuration\r\n            data={{ file_name, image, image_alt }}\r\n            onConfirm={handleConfigurationChange}\r\n            onCancel={() => setIsConfigurationOpen(false)}\r\n          />\r\n        )}\r\n      </>\r\n    )\r\n  } else {\r\n    return null\r\n  }\r\n}\r\n","import React, { useCallback, useState, useEffect } from 'react'\r\nimport { Modal, Select, Form, TreeSelect, Input, Alert, Space } from 'antd'\r\nimport { useTranslation } from 'react-i18next'\r\nimport { CatalogCategoryTreeDataProps } from 'scenes/ContentDetail/types/Module'\r\nimport axios, { CancelToken } from 'axios'\r\nimport {\r\n  mapCatalogCategories,\r\n  MappedCatalogCategory,\r\n} from 'mappers/mapCatalogCategories'\r\nimport { CatalogCategoriesApi } from 'api/CatalogCategories'\r\nimport { CatalogLanguagesApi } from 'api/CatalogLanguages'\r\nimport { CatalogLanguage } from 'model/api/CatalogLanguage'\r\n\r\nexport type Data = CatalogCategoryTreeDataProps\r\n\r\nexport interface ConfigurationProps {\r\n  data: Data\r\n  onConfirm: (data: Data) => void\r\n  onCancel: () => void\r\n}\r\n\r\nconst { Option } = Select\r\nconst { Item } = Form\r\n\r\nexport const Configuration: React.FC<ConfigurationProps> = ({\r\n  data,\r\n  onConfirm,\r\n  onCancel,\r\n}) => {\r\n  const { t } = useTranslation('content-detail')\r\n  const [configuration, setConfiguration] = useState(data)\r\n  const [languages, setLanguages] = useState<CatalogLanguage[]>()\r\n  const [categories, setCategories] = useState<MappedCatalogCategory[]>()\r\n  const [loading, setLoading] = useState(false)\r\n\r\n  const getCatalogCategories = useCallback(\r\n    async (cancelToken: CancelToken) => {\r\n      try {\r\n        setLoading(true)\r\n        const { data } = await CatalogCategoriesApi.getCatalogCategories(\r\n          undefined,\r\n          undefined,\r\n          undefined,\r\n          undefined,\r\n          {\r\n            cancelToken,\r\n          }\r\n        )\r\n\r\n        setCategories(mapCatalogCategories(data, t, false))\r\n        setLoading(false)\r\n      } catch (e) {\r\n        setLoading(false)\r\n      }\r\n    },\r\n    [t]\r\n  )\r\n\r\n  const getLanguages = useCallback(async (cancelToken: CancelToken) => {\r\n    try {\r\n      setLoading(true)\r\n\r\n      const { data } = await CatalogLanguagesApi.getAllCatalogLanguages({\r\n        cancelToken,\r\n      })\r\n\r\n      setLanguages(data)\r\n      setLoading(false)\r\n    } catch (e) {\r\n      setLoading(false)\r\n    }\r\n  }, [])\r\n\r\n  const handleConfirm = useCallback(() => {\r\n    onConfirm(configuration)\r\n  }, [onConfirm, configuration])\r\n\r\n  const handleParentCategoryChange = useCallback(\r\n    (parent_category_id: number | null) => {\r\n      setConfiguration(value => ({\r\n        ...value,\r\n        parent_category_id,\r\n      }))\r\n    },\r\n    []\r\n  )\r\n\r\n  const handleDisplayIfParentCategoryChange = useCallback(\r\n    (display_if_parent_category_id: number | null) => {\r\n      setConfiguration(value => ({\r\n        ...value,\r\n        display_if_parent_category_id,\r\n      }))\r\n    },\r\n    []\r\n  )\r\n\r\n  const handleLanguageCodeChange = useCallback(\r\n    (language_code: string | null) => {\r\n      setConfiguration(value => ({\r\n        ...value,\r\n        language_code,\r\n      }))\r\n    },\r\n    []\r\n  )\r\n\r\n  const handleLinkPatternChange = useCallback(\r\n    (event: React.ChangeEvent<HTMLInputElement>) => {\r\n      event.persist()\r\n\r\n      setConfiguration(value => ({\r\n        ...value,\r\n        link_pattern: event.target.value,\r\n      }))\r\n    },\r\n    []\r\n  )\r\n\r\n  useEffect(() => {\r\n    const cancelTokenSource = axios.CancelToken.source()\r\n\r\n    getLanguages(cancelTokenSource.token)\r\n    getCatalogCategories(cancelTokenSource.token)\r\n\r\n    return () => cancelTokenSource.cancel()\r\n  }, [getLanguages, getCatalogCategories])\r\n\r\n  return (\r\n    <Modal\r\n      visible\r\n      width={600}\r\n      onOk={handleConfirm}\r\n      onCancel={onCancel}\r\n      title={t('catalog-category-tree-configuration.title')}\r\n    >\r\n      <Form layout=\"vertical\">\r\n        <Item\r\n          label={t('catalog-category-tree-configuration.parent-category-id')}\r\n        >\r\n          {categories ? (\r\n            <TreeSelect\r\n              style={{ width: '100%' }}\r\n              defaultActiveFirstOption\r\n              allowClear\r\n              dropdownStyle={{ maxHeight: 400, overflow: 'auto' }}\r\n              defaultValue={configuration.parent_category_id}\r\n              treeData={categories}\r\n              onChange={handleParentCategoryChange}\r\n              placeholder=\"Please select\"\r\n              treeDefaultExpandAll\r\n            />\r\n          ) : (\r\n            <Input disabled={loading} />\r\n          )}\r\n        </Item>\r\n        <Item\r\n          label={t(\r\n            'catalog-category-tree-configuration.display-if-parent-category-id'\r\n          )}\r\n        >\r\n          {categories ? (\r\n            <TreeSelect\r\n              style={{ width: '100%' }}\r\n              defaultActiveFirstOption\r\n              allowClear\r\n              dropdownStyle={{ maxHeight: 400, overflow: 'auto' }}\r\n              defaultValue={configuration.display_if_parent_category_id}\r\n              treeData={categories}\r\n              onChange={handleDisplayIfParentCategoryChange}\r\n              placeholder=\"Please select\"\r\n              treeDefaultExpandAll\r\n            />\r\n          ) : (\r\n            <Input disabled={loading} />\r\n          )}\r\n        </Item>\r\n        <Item label={t('catalog-category-tree-configuration.language-code')}>\r\n          <Select\r\n            defaultValue={configuration.language_code}\r\n            onChange={handleLanguageCodeChange}\r\n            allowClear\r\n          >\r\n            {languages &&\r\n              languages.map(({ code, name }) => (\r\n                <Option value={code}>{name}</Option>\r\n              ))}\r\n          </Select>\r\n        </Item>\r\n        <Item label={t('catalog-category-tree-configuration.link-pattern')}>\r\n          <Space size=\"middle\" direction=\"vertical\">\r\n            <Input\r\n              value={configuration.link_pattern}\r\n              onChange={handleLinkPatternChange}\r\n            />\r\n            <Alert\r\n              type=\"info\"\r\n              message={t(\r\n                'catalog-category-tree-configuration.link-pattern-info'\r\n              )}\r\n            />\r\n          </Space>\r\n        </Item>\r\n      </Form>\r\n    </Modal>\r\n  )\r\n}\r\n","import React, { useContext, useCallback, useState, useEffect } from 'react'\r\nimport {\r\n  ModuleProps,\r\n  CatalogCategoryTreeDataProps,\r\n} from 'scenes/ContentDetail/types/Module'\r\nimport { Container } from '../styles'\r\nimport { ContentDetailContext } from 'scenes/ContentDetail'\r\nimport { JSXParser } from 'components/JSXParser'\r\nimport { Controls } from '../Controls'\r\nimport { useModuleSort } from 'scenes/ContentDetail/hooks/useModuleSort'\r\nimport { OnMove } from 'scenes/ContentDetail/types/OnMove'\r\nimport { useModuleUpdate } from 'scenes/ContentDetail/hooks/useModuleUpdate'\r\nimport { useGetTemplatePreview } from 'scenes/ContentDetail/hooks/useGetTemplatePreview'\r\nimport { useDeleteModule } from 'scenes/ContentDetail/hooks/useDeleteModule'\r\nimport axios, { CancelToken } from 'axios'\r\nimport { Configuration, Data } from './Configuration'\r\nimport { Alert } from 'antd'\r\nimport { useTranslation } from 'react-i18next'\r\nimport { ModuleTypeEnum } from 'model/api/ModuleTypeEnum'\r\nimport { CatalogCategoriesApi } from 'api/CatalogCategories'\r\nimport { CatalogCategory } from 'model/api/CatalogCategory'\r\n\r\nexport interface CatalogCategoryTreeProps extends ModuleProps {\r\n  onMove?: OnMove\r\n  data: CatalogCategoryTreeDataProps\r\n}\r\n\r\nexport const CatalogCategoryTree: React.FC<CatalogCategoryTreeProps> = ({\r\n  uuid,\r\n  isNew,\r\n  moduleId,\r\n  moduleType,\r\n  data: {\r\n    parent_category_id,\r\n    display_if_parent_category_id,\r\n    language_code,\r\n    link_pattern,\r\n  },\r\n  onMove,\r\n  slotId,\r\n  locked,\r\n}) => {\r\n  const { t } = useTranslation('content-detail')\r\n  const { view } = useContext(ContentDetailContext)\r\n  const [catalogCategories, setCatalogCategories] = useState<\r\n    CatalogCategory[]\r\n  >()\r\n  const [isConfigurationOpen, setIsConfigurationOpen] = useState(false)\r\n  const { getTemplatePreview } = useGetTemplatePreview()\r\n  const { drag, drop, isDragging, ref } = useModuleSort({\r\n    uuid,\r\n    slotId,\r\n    onMove,\r\n    locked,\r\n  })\r\n  const { update } = useModuleUpdate<CatalogCategoryTreeDataProps>({\r\n    uuid,\r\n    slotId,\r\n  })\r\n  const handleDelete = useDeleteModule({ isNew, slotId, uuid, moduleId })\r\n\r\n  const templatePreview =\r\n    view && getTemplatePreview(view.path, ModuleTypeEnum.CATALOG_CATEGORY_TREE)\r\n\r\n  const handleConfigurationChange = useCallback(\r\n    ({\r\n      parent_category_id,\r\n      display_if_parent_category_id,\r\n      language_code,\r\n      link_pattern,\r\n    }: Data) => {\r\n      update(\r\n        {\r\n          parent_category_id,\r\n          display_if_parent_category_id,\r\n          language_code,\r\n          link_pattern,\r\n        },\r\n        true\r\n      )\r\n      setIsConfigurationOpen(false)\r\n    },\r\n    [update]\r\n  )\r\n\r\n  const getCatalogCategories = useCallback(\r\n    async (cancelToken: CancelToken) => {\r\n      const { data } = await CatalogCategoriesApi.getCatalogCategories(\r\n        parent_category_id ? parent_category_id : undefined,\r\n        true,\r\n        true,\r\n        language_code,\r\n        {\r\n          cancelToken,\r\n        }\r\n      )\r\n\r\n      setCatalogCategories(data)\r\n    },\r\n    [parent_category_id, language_code]\r\n  )\r\n\r\n  useEffect(() => {\r\n    const cancelTokenSource = axios.CancelToken.source()\r\n\r\n    getCatalogCategories(cancelTokenSource.token)\r\n\r\n    return () => cancelTokenSource.cancel()\r\n  }, [getCatalogCategories])\r\n\r\n  if (templatePreview) {\r\n    const opacity = isDragging ? 0 : 1\r\n    drag(drop(ref))\r\n\r\n    return (\r\n      <>\r\n        <div ref={ref} style={{ opacity }}>\r\n          <Container locked={locked}>\r\n            {!locked && (\r\n              <Controls\r\n                moduleType={moduleType}\r\n                hasEdit={false}\r\n                onConfigure={() => setIsConfigurationOpen(true)}\r\n                onDelete={handleDelete}\r\n              />\r\n            )}\r\n            <JSXParser\r\n              jsx={templatePreview.template}\r\n              bindings={{\r\n                items: catalogCategories,\r\n                link_pattern,\r\n              }}\r\n              renderInWrapper={false}\r\n            />\r\n          </Container>\r\n        </div>\r\n        {isConfigurationOpen && (\r\n          <Configuration\r\n            data={{\r\n              parent_category_id,\r\n              display_if_parent_category_id,\r\n              language_code,\r\n              link_pattern,\r\n            }}\r\n            onConfirm={handleConfigurationChange}\r\n            onCancel={() => setIsConfigurationOpen(false)}\r\n          />\r\n        )}\r\n      </>\r\n    )\r\n  }\r\n\r\n  return (\r\n    <Alert\r\n      message={t('this-module-needs-to-be-configured-first')}\r\n      type=\"info\"\r\n    />\r\n  )\r\n}\r\n","import React, { useCallback, useState, useEffect } from 'react'\r\nimport { Modal, Select, Form, TreeSelect, Input, Switch } from 'antd'\r\nimport { useTranslation } from 'react-i18next'\r\nimport { CatalogCategoryDataProps } from 'scenes/ContentDetail/types/Module'\r\nimport axios, { CancelToken } from 'axios'\r\nimport {\r\n  mapCatalogCategories,\r\n  MappedCatalogCategory,\r\n} from 'mappers/mapCatalogCategories'\r\nimport { CatalogCategoriesApi } from 'api/CatalogCategories'\r\nimport { CatalogLanguagesApi } from 'api/CatalogLanguages'\r\nimport { CatalogLanguage } from 'model/api/CatalogLanguage'\r\n\r\nexport type Data = CatalogCategoryDataProps\r\n\r\nexport interface ConfigurationProps {\r\n  data: Data\r\n  onConfirm: (data: Data) => void\r\n  onCancel: () => void\r\n}\r\n\r\nconst { Option } = Select\r\nconst { Item } = Form\r\n\r\nexport const Configuration: React.FC<ConfigurationProps> = ({\r\n  data,\r\n  onConfirm,\r\n  onCancel,\r\n}) => {\r\n  const { t } = useTranslation('content-detail')\r\n  const [configuration, setConfiguration] = useState(data)\r\n  const [languages, setLanguages] = useState<CatalogLanguage[]>()\r\n  const [categories, setCategories] = useState<MappedCatalogCategory[]>()\r\n  const [loading, setLoading] = useState(false)\r\n\r\n  const getCatalogCategories = useCallback(\r\n    async (cancelToken: CancelToken) => {\r\n      try {\r\n        setLoading(true)\r\n        const { data } = await CatalogCategoriesApi.getCatalogCategories(\r\n          undefined,\r\n          undefined,\r\n          undefined,\r\n          undefined,\r\n          {\r\n            cancelToken,\r\n          }\r\n        )\r\n\r\n        setCategories(mapCatalogCategories(data, t, false))\r\n        setLoading(false)\r\n      } catch (e) {\r\n        setLoading(false)\r\n      }\r\n    },\r\n    [t]\r\n  )\r\n\r\n  const getLanguages = useCallback(async (cancelToken: CancelToken) => {\r\n    try {\r\n      setLoading(true)\r\n\r\n      const { data } = await CatalogLanguagesApi.getAllCatalogLanguages({\r\n        cancelToken,\r\n      })\r\n\r\n      setLanguages(data)\r\n      setLoading(false)\r\n    } catch (e) {\r\n      setLoading(false)\r\n    }\r\n  }, [])\r\n\r\n  const handleConfirm = useCallback(() => {\r\n    onConfirm(configuration)\r\n  }, [onConfirm, configuration])\r\n\r\n  const handleCategoryChange = useCallback(\r\n    (category_id: number) => {\r\n      setConfiguration(value => ({\r\n        ...value,\r\n        category_id,\r\n      }))\r\n    },\r\n    []\r\n  )\r\n\r\n  const handleLanguageCodeChange = useCallback(\r\n    (language_code: string | null) => {\r\n      setConfiguration(value => ({\r\n        ...value,\r\n        language_code,\r\n      }))\r\n    },\r\n    []\r\n  )\r\n\r\n  const handleCategoryIdVariableNameChange = useCallback(\r\n    ({ target: { value } }: React.ChangeEvent<HTMLInputElement>) => {\r\n      setConfiguration(values => ({\r\n        ...values,\r\n        category_id_variable_name: value === '' ? null : value,\r\n      }))\r\n    },\r\n    []\r\n  )\r\n\r\n  const handleLoadFromGlobalContextChange = useCallback((checked: boolean) => {\r\n    setConfiguration(values => ({\r\n      ...values,\r\n      load_from_global_context: checked,\r\n    }))\r\n  }, [])\r\n\r\n  useEffect(() => {\r\n    const cancelTokenSource = axios.CancelToken.source()\r\n\r\n    getLanguages(cancelTokenSource.token)\r\n    getCatalogCategories(cancelTokenSource.token)\r\n\r\n    return () => cancelTokenSource.cancel()\r\n  }, [getLanguages, getCatalogCategories])\r\n\r\n  return (\r\n    <Modal\r\n      visible\r\n      width={600}\r\n      onOk={handleConfirm}\r\n      onCancel={onCancel}\r\n      title={t('catalog-category-configuration.title')}\r\n    >\r\n      <Form layout=\"vertical\">\r\n        <Item\r\n          label={t('catalog-category-configuration.category-id')}\r\n        >\r\n          {categories ? (\r\n            <TreeSelect\r\n              style={{ width: '100%' }}\r\n              defaultActiveFirstOption\r\n              dropdownStyle={{ maxHeight: 400, overflow: 'auto' }}\r\n              defaultValue={configuration.category_id}\r\n              treeData={categories}\r\n              onChange={handleCategoryChange}\r\n              placeholder=\"Please select\"\r\n              treeDefaultExpandAll\r\n            />\r\n          ) : (\r\n            <Input disabled={loading} />\r\n          )}\r\n        </Item>\r\n        <Item label={t('catalog-category-configuration.language-code')}>\r\n          <Select\r\n            defaultValue={configuration.language_code}\r\n            onChange={handleLanguageCodeChange}\r\n            allowClear\r\n          >\r\n            {languages &&\r\n              languages.map(({ code, name }) => (\r\n                <Option value={code}>{name}</Option>\r\n              ))}\r\n          </Select>\r\n        </Item>\r\n        <Item\r\n          label={t('catalog-category-configuration.category-id-variable-name')}\r\n        >\r\n          <Input\r\n            onChange={handleCategoryIdVariableNameChange}\r\n            defaultValue={data.category_id_variable_name}\r\n          />\r\n        </Item>\r\n        <Item\r\n          label={t('catalog-category-configuration.load-from-global-context')}\r\n        >\r\n          <Switch\r\n            onChange={handleLoadFromGlobalContextChange}\r\n            checked={configuration.load_from_global_context}\r\n            defaultChecked={data.load_from_global_context}\r\n          />\r\n        </Item>\r\n      </Form>\r\n    </Modal>\r\n  )\r\n}\r\n","import React, { useContext, useCallback, useState, useEffect } from 'react'\r\nimport {\r\n  ModuleProps,\r\n  CatalogCategoryDataProps,\r\n} from 'scenes/ContentDetail/types/Module'\r\nimport { Container } from '../styles'\r\nimport { ContentDetailContext } from 'scenes/ContentDetail'\r\nimport { JSXParser } from 'components/JSXParser'\r\nimport { Controls } from '../Controls'\r\nimport { useModuleSort } from 'scenes/ContentDetail/hooks/useModuleSort'\r\nimport { OnMove } from 'scenes/ContentDetail/types/OnMove'\r\nimport { useModuleUpdate } from 'scenes/ContentDetail/hooks/useModuleUpdate'\r\nimport { useGetTemplatePreview } from 'scenes/ContentDetail/hooks/useGetTemplatePreview'\r\nimport { useDeleteModule } from 'scenes/ContentDetail/hooks/useDeleteModule'\r\nimport axios, { CancelToken } from 'axios'\r\nimport { Configuration, Data } from './Configuration'\r\nimport { Alert } from 'antd'\r\nimport { useTranslation } from 'react-i18next'\r\nimport { ModuleTypeEnum } from 'model/api/ModuleTypeEnum'\r\nimport { CatalogCategoriesApi } from 'api/CatalogCategories'\r\nimport { CatalogCategory as CatalogCategoryInerface } from 'model/api/CatalogCategory'\r\n\r\nexport interface CatalogCategoryProps extends ModuleProps {\r\n  onMove?: OnMove\r\n  data: CatalogCategoryDataProps\r\n}\r\n\r\nexport const CatalogCategory: React.FC<CatalogCategoryProps> = ({\r\n  uuid,\r\n  isNew,\r\n  moduleId,\r\n  moduleType,\r\n  data: {\r\n    category_id,\r\n    language_code,\r\n    category_id_variable_name,\r\n    load_from_global_context,\r\n  },\r\n  onMove,\r\n  slotId,\r\n  locked,\r\n}) => {\r\n  const { t } = useTranslation('content-detail')\r\n  const { view } = useContext(ContentDetailContext)\r\n  const [catalogCategory, setCatalogCategory] = useState<\r\n    CatalogCategoryInerface\r\n  >()\r\n  const [isConfigurationOpen, setIsConfigurationOpen] = useState(false)\r\n  const { getTemplatePreview } = useGetTemplatePreview()\r\n  const { drag, drop, isDragging, ref } = useModuleSort({\r\n    uuid,\r\n    slotId,\r\n    onMove,\r\n    locked,\r\n  })\r\n  const { update } = useModuleUpdate<CatalogCategoryDataProps>({\r\n    uuid,\r\n    slotId,\r\n  })\r\n  const handleDelete = useDeleteModule({ isNew, slotId, uuid, moduleId })\r\n\r\n  const templatePreview =\r\n    view && getTemplatePreview(view.path, ModuleTypeEnum.CATALOG_CATEGORY)\r\n\r\n  const handleConfigurationChange = useCallback(\r\n    ({\r\n      category_id,\r\n      language_code,\r\n      category_id_variable_name,\r\n      load_from_global_context,\r\n    }: Data) => {\r\n      update(\r\n        {\r\n          category_id,\r\n          language_code,\r\n          category_id_variable_name,\r\n          load_from_global_context,\r\n        },\r\n        true\r\n      )\r\n      setIsConfigurationOpen(false)\r\n    },\r\n    [update]\r\n  )\r\n\r\n  const getCatalogCategories = useCallback(\r\n    async (cancelToken: CancelToken) => {\r\n      if (category_id) {\r\n        const { data } = await CatalogCategoriesApi.getCatalogCategory(\r\n          category_id,\r\n          true,\r\n          {\r\n            cancelToken,\r\n          }\r\n        )\r\n\r\n        setCatalogCategory(data)\r\n      }\r\n    },\r\n    [category_id]\r\n  )\r\n\r\n  useEffect(() => {\r\n    const cancelTokenSource = axios.CancelToken.source()\r\n\r\n    getCatalogCategories(cancelTokenSource.token)\r\n\r\n    return () => cancelTokenSource.cancel()\r\n  }, [getCatalogCategories])\r\n\r\n  if (templatePreview) {\r\n    const opacity = isDragging ? 0 : 1\r\n    drag(drop(ref))\r\n\r\n    return (\r\n      <>\r\n        <div ref={ref} style={{ opacity }}>\r\n          <Container locked={locked}>\r\n            {!locked && (\r\n              <Controls\r\n                moduleType={moduleType}\r\n                hasEdit={false}\r\n                onConfigure={() => setIsConfigurationOpen(true)}\r\n                onDelete={handleDelete}\r\n              />\r\n            )}\r\n            {!!catalogCategory ||\r\n            category_id_variable_name ||\r\n            load_from_global_context ? (\r\n              <JSXParser\r\n                jsx={templatePreview.template}\r\n                bindings={{\r\n                  data: catalogCategory,\r\n                  language_code,\r\n                  category_id_variable_name,\r\n                  load_from_global_context,\r\n                }}\r\n                renderInWrapper={false}\r\n              />\r\n            ) : (\r\n              <Alert\r\n                message={t('this-module-needs-to-be-configured-first')}\r\n                type=\"info\"\r\n              />\r\n            )}\r\n          </Container>\r\n        </div>\r\n        {isConfigurationOpen && (\r\n          <Configuration\r\n            data={{\r\n              category_id,\r\n              language_code,\r\n              category_id_variable_name,\r\n              load_from_global_context,\r\n            }}\r\n            onConfirm={handleConfigurationChange}\r\n            onCancel={() => setIsConfigurationOpen(false)}\r\n          />\r\n        )}\r\n      </>\r\n    )\r\n  }\r\n\r\n  return (\r\n    <Alert\r\n      message={t('this-module-needs-to-be-configured-first')}\r\n      type=\"info\"\r\n    />\r\n  )\r\n}\r\n","import React, { useContext, useCallback, useMemo } from 'react'\r\nimport { ContentDetailContext } from '../'\r\nimport { ModuleTypeEnum } from 'model/api/ModuleTypeEnum'\r\nimport { Heading } from './Modules/Heading'\r\nimport { Text } from './Modules/Text'\r\nimport { Button } from './Modules/Button'\r\nimport { CatalogListing } from './Modules/CatalogListing'\r\nimport { CatalogItem } from './Modules/CatalogItem'\r\nimport { CatalogDetail } from './Modules/CatalogDetail'\r\nimport { CatalogSearch } from './Modules/CatalogSearch'\r\nimport { Navigation } from './Modules/Navigation'\r\nimport { Image } from './Modules/Image'\r\nimport { CatalogCategoryTree } from './Modules/CatalogCategoryTree'\r\nimport update from 'immutability-helper'\r\nimport { CatalogCategory } from './Modules/CatalogCategory'\r\n\r\nexport interface SlotModulesProps {\r\n  slotId: number\r\n}\r\n\r\nexport const SlotModules: React.FC<SlotModulesProps> = ({ slotId }) => {\r\n  const { modules, setModules } = useContext(ContentDetailContext)\r\n\r\n  const handleMove = useCallback(\r\n    (currentSlotId: number, dragIndex: number, hoverIndex: number) => {\r\n      setModules(value => {\r\n        return {\r\n          ...value,\r\n          [currentSlotId]: update(value[currentSlotId], {\r\n            $splice: [\r\n              [dragIndex, 1],\r\n              [hoverIndex, 0, value[slotId][dragIndex]],\r\n            ],\r\n          }),\r\n        }\r\n      })\r\n    },\r\n    [setModules, slotId]\r\n  )\r\n\r\n  return useMemo(() => {\r\n    if (!modules[slotId]) return null\r\n\r\n    return (\r\n      <>\r\n        {modules[slotId].map(({ moduleType, uuid, ...rest }) => {\r\n          switch (moduleType) {\r\n            case ModuleTypeEnum.HEADING:\r\n              return (\r\n                <Heading\r\n                  moduleType={moduleType}\r\n                  uuid={uuid}\r\n                  onMove={handleMove}\r\n                  {...rest}\r\n                  key={uuid}\r\n                />\r\n              )\r\n            case ModuleTypeEnum.TEXT:\r\n              return (\r\n                <Text\r\n                  moduleType={moduleType}\r\n                  uuid={uuid}\r\n                  onMove={handleMove}\r\n                  {...rest}\r\n                  key={uuid}\r\n                />\r\n              )\r\n            case ModuleTypeEnum.BUTTON:\r\n              return (\r\n                <Button\r\n                  moduleType={moduleType}\r\n                  uuid={uuid}\r\n                  onMove={handleMove}\r\n                  {...rest}\r\n                  key={uuid}\r\n                />\r\n              )\r\n            case ModuleTypeEnum.IMAGE:\r\n              return (\r\n                <Image\r\n                  moduleType={moduleType}\r\n                  uuid={uuid}\r\n                  onMove={handleMove}\r\n                  {...rest}\r\n                  key={uuid}\r\n                />\r\n              )\r\n            case ModuleTypeEnum.NAVIGATION:\r\n              return (\r\n                <Navigation\r\n                  moduleType={moduleType}\r\n                  uuid={uuid}\r\n                  onMove={handleMove}\r\n                  {...rest}\r\n                  key={uuid}\r\n                />\r\n              )\r\n            case ModuleTypeEnum.CATALOG_LISTING:\r\n              return (\r\n                <CatalogListing\r\n                  moduleType={moduleType}\r\n                  uuid={uuid}\r\n                  onMove={handleMove}\r\n                  {...rest}\r\n                  key={uuid}\r\n                />\r\n              )\r\n            case ModuleTypeEnum.CATALOG_ITEM:\r\n              return (\r\n                <CatalogItem\r\n                  moduleType={moduleType}\r\n                  uuid={uuid}\r\n                  onMove={handleMove}\r\n                  {...rest}\r\n                  key={uuid}\r\n                />\r\n              )\r\n            case ModuleTypeEnum.CATALOG_DETAIL:\r\n              return (\r\n                <CatalogDetail\r\n                  moduleType={moduleType}\r\n                  uuid={uuid}\r\n                  onMove={handleMove}\r\n                  {...rest}\r\n                  key={uuid}\r\n                />\r\n              )\r\n            case ModuleTypeEnum.CATALOG_CATEGORY_TREE:\r\n              return (\r\n                <CatalogCategoryTree\r\n                  moduleType={moduleType}\r\n                  uuid={uuid}\r\n                  onMove={handleMove}\r\n                  {...rest}\r\n                  key={uuid}\r\n                />\r\n              )\r\n            case ModuleTypeEnum.CATALOG_CATEGORY:\r\n              return (\r\n                <CatalogCategory\r\n                  moduleType={moduleType}\r\n                  uuid={uuid}\r\n                  onMove={handleMove}\r\n                  {...rest}\r\n                  key={uuid}\r\n                />\r\n              )\r\n            case ModuleTypeEnum.CATALOG_SEARCH:\r\n              return (\r\n                <CatalogSearch\r\n                  moduleType={moduleType}\r\n                  uuid={uuid}\r\n                  onMove={handleMove}\r\n                  {...rest}\r\n                  key={uuid}\r\n                />\r\n              )\r\n            default:\r\n              return null\r\n          }\r\n        })}\r\n      </>\r\n    )\r\n  }, [modules, handleMove, slotId])\r\n}\r\n","import React, { useMemo } from 'react'\r\nimport { LayoutSlot } from 'model/api/LayoutSlot'\r\nimport styled from 'styled-components'\r\nimport { COLORS } from 'constants/colors'\r\nimport { SlotControls } from './SlotControls'\r\nimport { SlotModules } from './SlotModules'\r\nimport { rgba } from 'polished'\r\nimport { Icon } from 'components/Icon'\r\nimport { useModuleMove } from '../hooks/useModuleMove'\r\n\r\n/* const StyledSlot = styled.div<{ isActive: boolean }>`\r\n  width: 100%;\r\n  height: 100%;\r\n  min-height: 64px;\r\n  padding: 6px;\r\n  border: 1px solid ${COLORS.purple1};\r\n\r\n  ${({ isActive }) =>\r\n    isActive &&\r\n    css`\r\n      box-shadow: 0px 0px 11px 0 rgba(115, 209, 61, 1);\r\n    `};\r\n` */\r\n\r\nconst LockedOverlay = styled.div`\r\n  position: absolute;\r\n  top: 0;\r\n  left: 0;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  width: 100%;\r\n  height: 100%;\r\n  background-color: ${rgba(COLORS.gray3, 0.5)};\r\n  user-select: none;\r\n`\r\n\r\nexport interface SlotProps {\r\n  data: LayoutSlot\r\n}\r\n\r\nexport const Slot: React.FC<SlotProps> = ({\r\n  data: { name, html_class_name, html_id, children, locked, id: slotId },\r\n}) => {\r\n  const { drop, isActive } = useModuleMove({ slotId, locked })\r\n\r\n  return useMemo(\r\n    () => (\r\n      <div\r\n        ref={drop}\r\n        className={\r\n          html_class_name +\r\n          ' cms__slot' +\r\n          (isActive ? ' cms__slot--active' : '')\r\n        }\r\n        id={html_id}\r\n      >\r\n        {!locked ? (\r\n          <SlotControls name={name} />\r\n        ) : (\r\n          <LockedOverlay>\r\n            <Icon icon=\"lock\" size=\"lg\" />\r\n          </LockedOverlay>\r\n        )}\r\n        <SlotModules slotId={slotId} />\r\n        {children && children.map(data => <Slot data={data} key={data.id} />)}\r\n      </div>\r\n    ),\r\n    [drop, isActive, html_class_name, html_id, children, slotId, name, locked]\r\n  )\r\n}\r\n","import {\r\n  ModuleProps,\r\n  HeadingDataProps,\r\n  CatalogListingDataProps,\r\n  TextDataProps,\r\n  ButtonDataProps,\r\n  ImageDataProps,\r\n  CatalogItemDataProps,\r\n  CatalogCategoryTreeDataProps,\r\n  CatalogCategoryDataProps,\r\n  CatalogDetailDataProps,\r\n} from '../types/Module'\r\nimport { ItemTypes } from '../types/ItemTypes'\r\nimport { DragItem } from '../types/DragItem'\r\nimport { useDrop } from 'react-dnd'\r\nimport uuid from 'uuid/v4'\r\nimport { ModuleTypeEnum } from 'model/api/ModuleTypeEnum'\r\nimport { useContext } from 'react'\r\nimport { ContentDetailContext } from '..'\r\nimport { ButtonModuleTargetEnum } from 'model/api/ButtonModuleTargetEnum'\r\nimport { HeadingModuleLevelEnum } from 'model/api/HeadingModuleLevelEnum'\r\n\r\nexport interface UseModuleMoveProps {\r\n  slotId: number\r\n  locked: 0 | 1\r\n}\r\n\r\nexport const useModuleMove = ({ slotId, locked }: UseModuleMoveProps) => {\r\n  const { setIsTouched, setModules } = useContext(ContentDetailContext)\r\n\r\n  const [{ isActive }, drop] = useDrop({\r\n    accept: [ItemTypes.NEW_MODULE, ItemTypes.MODULE],\r\n    canDrop: (_, monitor) => !locked || !monitor.getItem().locked,\r\n    collect: monitor => ({\r\n      isActive:\r\n        monitor.canDrop() &&\r\n        monitor.isOver({ shallow: true }) &&\r\n        monitor.getItem().slotId !== slotId,\r\n    }),\r\n    drop: (item: DragItem, monitor) => {\r\n      if (!!item.locked) return\r\n\r\n      if (slotId === item.slotId) return\r\n\r\n      if (monitor.didDrop()) {\r\n        return\r\n      }\r\n\r\n      setIsTouched(true)\r\n\r\n      if (item.type === ItemTypes.NEW_MODULE) {\r\n        setModules(value => {\r\n          const data: ModuleProps = {\r\n            uuid: uuid(),\r\n            slotId,\r\n            isNew: true,\r\n            isTouched: true,\r\n            moduleType: item.moduleType,\r\n            weight: 50,\r\n            data: {},\r\n            locked: false,\r\n            isTemplatePageModule: false,\r\n          }\r\n\r\n          /**\r\n           * Set initial data when new module is dropped\r\n           */\r\n          switch (item.moduleType) {\r\n            case ModuleTypeEnum.TEXT:\r\n              {\r\n                const moduleData: TextDataProps = {\r\n                  content: 'Text...',\r\n                }\r\n\r\n                data.data = moduleData\r\n              }\r\n              break\r\n            case ModuleTypeEnum.HEADING:\r\n              {\r\n                const moduleData: HeadingDataProps = {\r\n                  content: 'Heading...',\r\n                  level: HeadingModuleLevelEnum.LEVEL_1,\r\n                }\r\n\r\n                data.data = moduleData\r\n              }\r\n              break\r\n            case ModuleTypeEnum.CATALOG_ITEM:\r\n              {\r\n                const moduleData: CatalogItemDataProps = {\r\n                  catalog_item_id: undefined,\r\n                  language_code: null,\r\n                }\r\n\r\n                data.data = moduleData\r\n              }\r\n              break\r\n            case ModuleTypeEnum.CATALOG_DETAIL:\r\n              {\r\n                const moduleData: CatalogDetailDataProps = {\r\n                  catalog_item_id: null,\r\n                  language_code: null,\r\n                  catalog_item_id_variable_name: null,\r\n                  load_from_global_context: false,\r\n                }\r\n\r\n                data.data = moduleData\r\n              }\r\n              break\r\n            case ModuleTypeEnum.CATALOG_LISTING:\r\n              {\r\n                const moduleData: CatalogListingDataProps = {\r\n                  category_id: null,\r\n                  language_code: null,\r\n                  category_id_variable_name: null,\r\n                }\r\n\r\n                data.data = moduleData\r\n              }\r\n              break\r\n            case ModuleTypeEnum.CATALOG_CATEGORY_TREE:\r\n              {\r\n                const moduleData: CatalogCategoryTreeDataProps = {\r\n                  parent_category_id: null,\r\n                  display_if_parent_category_id: null,\r\n                  language_code: null,\r\n                  link_pattern: '',\r\n                }\r\n\r\n                data.data = moduleData\r\n              }\r\n              break\r\n            case ModuleTypeEnum.CATALOG_CATEGORY:\r\n              {\r\n                const moduleData: CatalogCategoryDataProps = {\r\n                  category_id: null,\r\n                  language_code: null,\r\n                  category_id_variable_name: null,\r\n                  load_from_global_context: false,\r\n                }\r\n\r\n                data.data = moduleData\r\n              }\r\n              break\r\n            case ModuleTypeEnum.IMAGE:\r\n              {\r\n                const moduleData: ImageDataProps = {\r\n                  file_name: '',\r\n                  image: undefined,\r\n                  image_alt: '',\r\n                }\r\n\r\n                data.data = moduleData\r\n              }\r\n              break\r\n            case ModuleTypeEnum.BUTTON:\r\n              {\r\n                const moduleData: ButtonDataProps = {\r\n                  button_id: undefined,\r\n                  text: 'Button',\r\n                  target: ButtonModuleTargetEnum.SELF,\r\n                  path: '#',\r\n                }\r\n\r\n                data.data = moduleData\r\n              }\r\n              break\r\n          }\r\n\r\n          if (value[slotId] !== undefined) {\r\n            return {\r\n              ...value,\r\n              [slotId]: [...value[slotId], data],\r\n            }\r\n          } else {\r\n            return {\r\n              ...value,\r\n              [slotId]: [data],\r\n            }\r\n          }\r\n        })\r\n      } else if (item.type === ItemTypes.MODULE) {\r\n        /**\r\n         * Move existing module between slots\r\n         */\r\n        if (slotId !== item.slotId) {\r\n          setModules(value => {\r\n            const originalValue = { ...value }\r\n\r\n            const draggedItem = originalValue[item.slotId].find(\r\n              currentItem => currentItem.uuid === item.uuid\r\n            ) as any\r\n\r\n            if (!value[slotId]) {\r\n              value[slotId] = []\r\n            }\r\n\r\n            value[slotId].push({ ...draggedItem, slotId })\r\n\r\n            const newValue = {\r\n              ...value,\r\n              [item.slotId]: value[item.slotId].filter(\r\n                currentItem => currentItem.uuid !== item.uuid\r\n              ),\r\n            }\r\n\r\n            return newValue\r\n          })\r\n        } else {\r\n          return\r\n        }\r\n      } else {\r\n        return\r\n      }\r\n    },\r\n  })\r\n\r\n  return {\r\n    drop,\r\n    isActive,\r\n  }\r\n}\r\n","import styled from 'styled-components'\r\nimport { COLORS } from 'constants/colors'\r\nimport { Controls } from './Modules/styles'\r\n\r\nexport const Styles = styled.div<{ styles: string }>`\r\n  width: 100%;\r\n\r\n  * {\r\n    a,\r\n    button,\r\n    input,\r\n    select,\r\n    textarea {\r\n      pointer-events: none;\r\n    }\r\n\r\n    ${Controls} {\r\n      pointer-events: initial;\r\n\r\n      * {\r\n        pointer-events: initial;\r\n      }\r\n    }\r\n  }\r\n\r\n  *::after:not(.mce-content-body) {\r\n    display: table;\r\n    clear: both;\r\n    content: '';\r\n  }\r\n\r\n  .cms__slot {\r\n    position: relative;\r\n    width: 100%;\r\n    height: 100%;\r\n    min-height: 64px;\r\n    padding: 6px;\r\n    padding-top: 34px !important;\r\n    background: ${COLORS.white};\r\n    border: 1px solid ${COLORS.purple1} !important;\r\n\r\n    &--active {\r\n      box-shadow: 0px 0px 11px 0 ${COLORS.purple1};\r\n    }\r\n  }\r\n\r\n  ${({ styles }) => styles}\r\n`\r\n","import axios, { AxiosPromise } from 'axios'\r\nimport { RequestConfig } from './requestConfig'\r\n\r\nexport class StylesApi {\r\n  /**\r\n   * Get Template Pages\r\n   *\r\n   * @param theme\r\n   * @param file\r\n   */\r\n  static getStyles(\r\n    theme: string,\r\n    file = 'main.css',\r\n    config?: RequestConfig\r\n  ): AxiosPromise<string> {\r\n    const axiosInstance = axios.create()\r\n\r\n    return axiosInstance({\r\n      ...config,\r\n      method: 'GET',\r\n      url: `/storage/themes/${theme}/${file}`,\r\n    })\r\n  }\r\n}","import React from 'react'\r\nimport { Icon } from 'components/Icon'\r\nimport { IconName } from 'constants/icons'\r\nimport { COLORS } from 'constants/colors'\r\nimport styled from 'styled-components'\r\nimport { useDrag } from 'react-dnd'\r\nimport { ItemTypes } from '../types/ItemTypes'\r\nimport { ModuleTypeEnum } from 'model/api/ModuleTypeEnum'\r\n\r\nconst Container = styled.div`\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: center;\r\n  justify-content: center;\r\n  height: 64px;\r\n  background-color: ${COLORS.gray1};\r\n  cursor: move;\r\n\r\n  &:hover {\r\n    color: ${COLORS.white};\r\n    background-color: ${COLORS.blue1};\r\n  }\r\n`\r\n\r\nconst Label = styled.div`\r\n  margin-top: 2px;\r\n  font-size: 12px;\r\n`\r\n\r\nexport interface SidePanelItemProps {\r\n  moduleType: ModuleTypeEnum\r\n  icon: IconName\r\n  label: string\r\n}\r\n\r\nexport const SidePanelItem: React.FC<SidePanelItemProps> = ({\r\n  moduleType,\r\n  icon,\r\n  label,\r\n}) => {\r\n  const [{ opacity }, drag] = useDrag({\r\n    item: { type: ItemTypes.NEW_MODULE, moduleType },\r\n    collect: monitor => ({\r\n      opacity: monitor.isDragging() ? 0.5 : 1,\r\n    }),\r\n  })\r\n\r\n  return (\r\n    <Container ref={drag} style={{ opacity }}>\r\n      <Icon icon={icon} />\r\n      <Label>{label}</Label>\r\n    </Container>\r\n  )\r\n}\r\n","import React from 'react'\r\nimport styled from 'styled-components'\r\nimport { COLORS } from 'constants/colors'\r\nimport { ModuleTypeEnum } from 'model/api/ModuleTypeEnum'\r\nimport { SidePanelItem, SidePanelItemProps } from './SidePanelItem'\r\nimport { useTranslation } from 'react-i18next'\r\nimport { State } from 'state/rootReducer'\r\nimport { useSelector } from 'react-redux'\r\nimport { useDrag } from 'react-dnd'\r\nimport { SidePanelTypes } from 'components/SidepanelDragProvider'\r\n\r\nconst Container = styled.div`\r\n  position: fixed;\r\n  z-index: 100;\r\n  width: 164px;\r\n  background: ${COLORS.white};\r\n  border: 1px solid ${COLORS.gray3};\r\n  border-radius: 2px;\r\n  box-shadow: 0px 0px 11px 0 rgba(0, 0, 0, 0.2);\r\n  cursor: move;\r\n`\r\n\r\nconst Scrollable = styled.div`\r\n  max-height: 270px;\r\n  overflow-y: auto;\r\n`\r\n\r\nconst Group = styled.div`\r\n  padding: 6px;\r\n`\r\n\r\nconst Label = styled.div`\r\n  margin: 0 0 6px;\r\n  font-weight: bold;\r\n`\r\n\r\nconst Grid = styled.div`\r\n  display: grid;\r\n  grid-auto-rows: min-content;\r\n  grid-gap: 1px;\r\n`\r\n\r\nexport const SidePanel: React.FC = () => {\r\n  const { t } = useTranslation('content-detail')\r\n  const { left, top } = useSelector(\r\n    (state: State) => state.user.contentSidePanel\r\n  )\r\n\r\n  const items: SidePanelItemProps[] = [\r\n    {\r\n      moduleType: ModuleTypeEnum.TEXT,\r\n      icon: 'align-left',\r\n      label: t('editor.side-panel.text'),\r\n    },\r\n    {\r\n      moduleType: ModuleTypeEnum.HEADING,\r\n      icon: 'heading',\r\n      label: t('editor.side-panel.heading'),\r\n    },\r\n    {\r\n      moduleType: ModuleTypeEnum.NAVIGATION,\r\n      icon: 'bars',\r\n      label: t('editor.side-panel.navigation'),\r\n    },\r\n    {\r\n      moduleType: ModuleTypeEnum.BUTTON,\r\n      icon: 'square',\r\n      label: t('editor.side-panel.button'),\r\n    },\r\n    {\r\n      moduleType: ModuleTypeEnum.IMAGE,\r\n      icon: 'image',\r\n      label: t('editor.side-panel.image'),\r\n    },\r\n    {\r\n      moduleType: ModuleTypeEnum.GALLERY,\r\n      icon: 'images',\r\n      label: t('editor.side-panel.gallery'),\r\n    },\r\n    {\r\n      moduleType: ModuleTypeEnum.HTML,\r\n      icon: 'code',\r\n      label: t('editor.side-panel.html'),\r\n    },\r\n    {\r\n      moduleType: ModuleTypeEnum.CATALOG_LISTING,\r\n      icon: 'list',\r\n      label: t('editor.side-panel.catalog-listing'),\r\n    },\r\n    {\r\n      moduleType: ModuleTypeEnum.CATALOG_ITEM,\r\n      icon: 'list',\r\n      label: t('editor.side-panel.catalog-item'),\r\n    },\r\n    {\r\n      moduleType: ModuleTypeEnum.CATALOG_DETAIL,\r\n      icon: 'list',\r\n      label: t('editor.side-panel.catalog-detail'),\r\n    },\r\n    {\r\n      moduleType: ModuleTypeEnum.CATALOG_CATEGORY_TREE,\r\n      icon: 'tags',\r\n      label: t('editor.side-panel.catalog-category-tree'),\r\n    },\r\n    {\r\n      moduleType: ModuleTypeEnum.CATALOG_CATEGORY,\r\n      icon: 'tag',\r\n      label: t('editor.side-panel.catalog-category'),\r\n    },\r\n    {\r\n      moduleType: ModuleTypeEnum.CATALOG_SEARCH,\r\n      icon: 'search',\r\n      label: t('editor.side-panel.catalog-search'),\r\n    },\r\n  ]\r\n\r\n  const [{ isDragging }, drag] = useDrag({\r\n    item: { left, top, type: SidePanelTypes.SIDE_PANEL },\r\n    collect: monitor => ({\r\n      isDragging: monitor.isDragging(),\r\n    }),\r\n  })\r\n\r\n  if (isDragging) {\r\n    return <div ref={drag} />\r\n  }\r\n\r\n  return (\r\n    <Container ref={drag} style={{ left, top }}>\r\n      <div>\r\n        <Group>\r\n          <Label>{t('editor.side-panel.modules')}</Label>\r\n          <Scrollable>\r\n            <Grid>\r\n              {items.map(({ moduleType, ...rest }) => (\r\n                <SidePanelItem\r\n                  key={moduleType}\r\n                  moduleType={moduleType}\r\n                  {...rest}\r\n                />\r\n              ))}\r\n            </Grid>\r\n          </Scrollable>\r\n        </Group>\r\n      </div>\r\n    </Container>\r\n  )\r\n}\r\n","import React, {\r\n  useContext,\r\n  useCallback,\r\n  useEffect,\r\n  useState,\r\n  useMemo,\r\n} from 'react'\r\nimport { ContentDetailContext } from '../'\r\nimport { Slot } from './Slot'\r\nimport { Styles } from './Styles'\r\nimport axios, { CancelToken } from 'axios'\r\nimport { StylesApi } from 'api/Styles'\r\nimport styled from 'styled-components'\r\nimport { SidePanel } from './SidePanel'\r\nimport { Skeleton } from 'antd'\r\n\r\nconst Container = styled.div`\r\n  position: relative;\r\n  margin: 6px;\r\n`\r\n\r\nexport const Editor: React.FC = () => {\r\n  const { layoutSlots, view, loading } = useContext(ContentDetailContext)\r\n  const [styles, setStyles] = useState<string>('')\r\n\r\n  const getStyles = useCallback(\r\n    async (cancelToken: CancelToken) => {\r\n      if (view) {\r\n        const { data } = await StylesApi.getStyles(view.name, 'main.css', {\r\n          cancelToken,\r\n        })\r\n\r\n        setStyles(data)\r\n      }\r\n    },\r\n    [view]\r\n  )\r\n\r\n  useEffect(() => {\r\n    const cancelTokenSource = axios.CancelToken.source()\r\n\r\n    getStyles(cancelTokenSource.token)\r\n\r\n    return () => cancelTokenSource.cancel()\r\n  }, [getStyles])\r\n\r\n  return useMemo(() => {\r\n    if (loading) return <Skeleton paragraph={{ rows: 4, width: '100%' }} />\r\n\r\n    return (\r\n      <Container>\r\n        <SidePanel />\r\n        <div className=\"cms__editor\">\r\n          <Styles styles={styles}>\r\n            {layoutSlots &&\r\n              layoutSlots.map(data => <Slot data={data} key={data.id} />)}\r\n          </Styles>\r\n        </div>\r\n      </Container>\r\n    )\r\n  }, [loading, styles, layoutSlots])\r\n}\r\n","import React, { useContext } from 'react'\r\nimport { Input, Select, TreeSelect } from 'formik-antd'\r\nimport { FormikFormItem as Item } from 'components/FormikFormItem'\r\nimport { useTranslation } from 'react-i18next'\r\nimport { useGetPropertiesData } from '../../hooks/useGetPropertiesData'\r\nimport { ContentDetailContext } from '../../'\r\n\r\nconst { Option } = Select\r\n\r\nexport const General: React.FC = () => {\r\n  const { t } = useTranslation('content-detail')\r\n  const { loading: contentDetailLoading } = useContext(ContentDetailContext)\r\n  const { templates, pages, loading: propsDataLoading } = useGetPropertiesData()\r\n\r\n  const loading = contentDetailLoading || propsDataLoading\r\n\r\n  return (\r\n    <>\r\n      <Item label={t('properties.general.template-id')} name=\"template_id\">\r\n        <Select name=\"template_id\" loading={loading}>\r\n          {templates.map(({ id, name }) => (\r\n            <Option value={id} key={id}>\r\n              {name}\r\n            </Option>\r\n          ))}\r\n        </Select>\r\n      </Item>\r\n      <Item label={t('properties.general.parent')} name=\"parent\">\r\n        {pages && !propsDataLoading ? (\r\n          <TreeSelect\r\n            treeData={pages}\r\n            name=\"parent\"\r\n            allowClear\r\n            showArrow\r\n            showSearch\r\n            filterTreeNode\r\n            treeDefaultExpandAll\r\n            treeNodeFilterProp=\"title\"\r\n          />\r\n        ) : (\r\n          <Input name=\"parent\" disabled />\r\n        )}\r\n      </Item>\r\n      <Item label={t('properties.general.name')} name=\"name\">\r\n        <Input name=\"name\" />\r\n      </Item>\r\n      <Item label={t('properties.general.path')} name=\"path\">\r\n        <Input name=\"path\" />\r\n      </Item>\r\n    </>\r\n  )\r\n}\r\n","export enum PageMetaRobotsEnum {\r\n  'ALL' = 'ALL',\r\n  'NOINDEX' = 'NOINDEX',\r\n  'NOINDEX_NOFOLLOW' = 'NOINDEX_NOFOLLOW',\r\n  'INDEX_NOFOLLOW' = 'INDEX_NOFOLLOW',\r\n  'INDEX_FOLLOW' = 'INDEX_FOLLOW',\r\n}\r\n","import React, { useContext, useState, useCallback, useEffect } from 'react'\r\nimport { Input, Select } from 'formik-antd'\r\nimport { FormikFormItem as Item } from 'components/FormikFormItem'\r\nimport { useTranslation } from 'react-i18next'\r\nimport { PageMetaRobotsEnum } from 'model/api/PageMetaRobotsEnum'\r\nimport { Upload } from 'antd'\r\nimport { UploadFile, UploadChangeParam } from 'antd/lib/upload/interface'\r\nimport { Icon } from 'components/Icon'\r\nimport styled from 'styled-components'\r\nimport { getBase64 } from 'utils/getBase64'\r\nimport { ContentDetailContext } from 'scenes/ContentDetail'\r\nimport { IconButton } from 'components/IconButton'\r\nimport { COLORS } from 'constants/colors'\r\nimport { FormValues } from '../DetailForm'\r\nimport { useFormikContext } from 'formik'\r\n\r\nconst { Dragger } = Upload\r\nconst { TextArea } = Input\r\nconst { Option } = Select\r\n\r\nconst ImageContainer = styled.div`\r\n  display: flex;\r\n  flex-direction: row;\r\n  justify-content: flex-end;\r\n  width: 240px;\r\n  height: 240px;\r\n  margin-top: 24px;\r\n  padding: 12px;\r\n  overflow: hidden;\r\n  background-repeat: no-repeat;\r\n  background-position: 50% 50%;\r\n  background-size: cover;\r\n  border: 1px solid ${COLORS.gray2};\r\n  border-radius: 2px;\r\n`\r\n\r\nconst { CMS_STATIC_URL } = window._envConfig\r\nconst imageUrl = CMS_STATIC_URL + '/images/'\r\n\r\nexport const Meta: React.FC = () => {\r\n  const { page } = useContext(ContentDetailContext)\r\n  const { t } = useTranslation('content-detail')\r\n  const [image, setImage] = useState<string>()\r\n  const { setFieldValue } = useFormikContext<FormValues>()\r\n  const metaImage =\r\n    page && page.meta_image ? `${imageUrl}${page.meta_image}` : undefined\r\n  const [file, setFile] = useState<UploadFile<any> | string>(metaImage)\r\n\r\n  const handleChange = useCallback(\r\n    ({ fileList, file: { uid } }: UploadChangeParam<UploadFile<any>>) => {\r\n      const filteredFile = fileList.find(item => item.uid === uid)\r\n\r\n      setFile(filteredFile)\r\n      setFieldValue('meta_image', filteredFile)\r\n    },\r\n    [setFieldValue]\r\n  )\r\n\r\n  const handleDelete = useCallback(() => {\r\n    setFile(undefined)\r\n    setImage(undefined)\r\n    setFieldValue('meta_image', undefined)\r\n  }, [setFieldValue])\r\n\r\n  const getImage = useCallback(async () => {\r\n    if (file) {\r\n      if (typeof file !== 'string') {\r\n        const img = await getBase64(file.originFileObj)\r\n\r\n        setImage(img as string)\r\n      } else {\r\n        setImage(file as string)\r\n      }\r\n    }\r\n  }, [file])\r\n\r\n  useEffect(() => {\r\n    getImage()\r\n  }, [getImage])\r\n\r\n  return (\r\n    <>\r\n      <Item label={t('properties.meta.meta-title')} name=\"meta_title\">\r\n        <Input name=\"meta_title\" />\r\n      </Item>\r\n      <Item\r\n        label={t('properties.meta.meta-description')}\r\n        name=\"meta_description\"\r\n      >\r\n        <TextArea name=\"meta_description\" rows={3} />\r\n      </Item>\r\n      <Item label={t('properties.meta.meta-keywords')} name=\"meta_keywords\">\r\n        <TextArea name=\"meta_keywords\" rows={2} />\r\n      </Item>\r\n      <Item label={t('properties.meta.meta-robots.label')} name=\"meta_robots\">\r\n        <Select name=\"meta_robots\">\r\n          {Object.values(PageMetaRobotsEnum).map(option => (\r\n            <Option key={option} value={option}>\r\n              {t(`properties.meta.meta-robots.options.${option}`)}\r\n            </Option>\r\n          ))}\r\n        </Select>\r\n      </Item>\r\n      <Item label={t('properties.meta.meta-canonical')} name=\"meta_canonical\">\r\n        <Input name=\"meta_canonical\" />\r\n      </Item>\r\n      <Item label={t('properties.meta.meta-image.label')} name=\"meta_image\">\r\n        <Dragger\r\n          multiple={false}\r\n          beforeUpload={() => {\r\n            return false\r\n          }}\r\n          showUploadList={false}\r\n          accept=\"image/*\"\r\n          onChange={info => handleChange(info)}\r\n        >\r\n          <Icon icon=\"cloud-upload-alt\" size=\"2x\" />\r\n          <p>{t('properties.meta.meta-image.upload-file-text')}</p>\r\n        </Dragger>\r\n        {image && (\r\n          <ImageContainer style={{ backgroundImage: `url(${image})` }}>\r\n            <IconButton size=\"small\" icon=\"trash-alt\" onClick={handleDelete}>\r\n              {t('properties.meta.meta-image.delete')}\r\n            </IconButton>\r\n          </ImageContainer>\r\n        )}\r\n      </Item>\r\n    </>\r\n  )\r\n}\r\n","import React from 'react'\r\nimport { Input } from 'formik-antd'\r\nimport { FormikFormItem as Item } from 'components/FormikFormItem'\r\nimport { useTranslation } from 'react-i18next'\r\n\r\nconst { TextArea } = Input\r\n\r\nexport const Advanced: React.FC = () => {\r\n  const { t } = useTranslation('content-detail')\r\n\r\n  return (\r\n    <>\r\n      <Item label={t('properties.advanced.html-head-end')} name=\"html_head_end\">\r\n        <TextArea name=\"html_head_end\" rows={5} />\r\n      </Item>\r\n      <Item label={t('properties.advanced.html-body-start')} name=\"html_body_start\">\r\n        <TextArea name=\"html_body_start\" rows={5} />\r\n      </Item>\r\n      <Item label={t('properties.advanced.html-body-end')} name=\"html_body_end\">\r\n        <TextArea name=\"html_body_end\" rows={5} />\r\n      </Item>\r\n    </>\r\n  )\r\n}\r\n","import React, { useContext, useEffect } from 'react'\r\nimport { useFormikContext } from 'formik'\r\nimport { FormValues } from '../DetailForm'\r\nimport { useTranslation } from 'react-i18next'\r\nimport { ContentDetailContext } from '../../'\r\nimport { General } from './General'\r\nimport { Meta } from './Meta'\r\nimport { Tabs, Skeleton } from 'antd'\r\nimport { Advanced } from './Advanced'\r\n\r\nconst { TabPane } = Tabs\r\n\r\nexport enum PropertiesTabsEnum {\r\n  'GENERAL' = 'GENERAL',\r\n  'META' = 'META',\r\n  'ADVANCED' = 'ADVANCED',\r\n}\r\n\r\nexport const Properties: React.FC = () => {\r\n  const { dirty } = useFormikContext<FormValues>()\r\n  const { t } = useTranslation('content-detail')\r\n  const { setIsPropertiesTouched, loading } = useContext(ContentDetailContext)\r\n\r\n\r\n  useEffect(() => {\r\n    setIsPropertiesTouched(dirty)\r\n  }, [dirty, setIsPropertiesTouched])\r\n\r\n  if (loading) {\r\n    return <Skeleton paragraph={{ rows: 4, width: '100%' }} />\r\n  }\r\n\r\n  return (\r\n    <Tabs defaultActiveKey={PropertiesTabsEnum.GENERAL} tabPosition=\"left\">\r\n      <TabPane\r\n        tab={t('properties.tabs.general')}\r\n        key={PropertiesTabsEnum.GENERAL}\r\n      >\r\n        <General />\r\n      </TabPane>\r\n      <TabPane tab={t('properties.tabs.meta')} key={PropertiesTabsEnum.META}>\r\n        <Meta />\r\n      </TabPane>\r\n      <TabPane\r\n        tab={t('properties.tabs.advanced')}\r\n        key={PropertiesTabsEnum.ADVANCED}\r\n      >\r\n        <Advanced />\r\n      </TabPane>\r\n    </Tabs>\r\n  )\r\n}\r\n","import { useContext, useCallback, useRef, useEffect } from 'react'\r\nimport { ContentDetailContext } from '..'\r\nimport { FormValues } from '../components/DetailForm'\r\nimport { PagesApi } from 'api/Pages'\r\nimport axios, { CancelTokenSource } from 'axios'\r\nimport { notification } from 'antd'\r\nimport { useTranslation } from 'react-i18next'\r\nimport { FormikHelpers } from 'formik'\r\nimport { objectToFormData } from 'object-to-formdata'\r\n\r\nexport const useSave = () => {\r\n  const {\r\n    page,\r\n    modules,\r\n    files,\r\n    setIsTouched,\r\n    setIsPropertiesTouched,\r\n    pageVersions: { getPageVersions },\r\n  } = useContext(ContentDetailContext)\r\n  const { t } = useTranslation('content-detail')\r\n  const cancelTokenSourceRef = useRef<CancelTokenSource>(\r\n    axios.CancelToken.source()\r\n  )\r\n\r\n  useEffect(() => {\r\n    const cancelTokenSource = cancelTokenSourceRef.current\r\n\r\n    return () => cancelTokenSource.cancel()\r\n  }, [])\r\n\r\n  return useCallback(\r\n    async (values: FormValues, { resetForm }: FormikHelpers<FormValues>) => {\r\n      const {\r\n        html_body_end,\r\n        html_body_start,\r\n        html_head_end,\r\n        meta_canonical,\r\n        meta_description,\r\n        meta_keywords,\r\n        meta_robots,\r\n        meta_title,\r\n        name,\r\n        parent,\r\n        path,\r\n        template_id,\r\n        meta_image,\r\n      } = values\r\n\r\n      const formData = new FormData()\r\n      formData.append('html_body_end', html_body_end)\r\n      formData.append('html_body_start', html_body_start)\r\n      formData.append('html_head_end', html_head_end)\r\n      formData.append('meta_description', meta_description)\r\n      formData.append('meta_keywords', meta_keywords)\r\n      formData.append('meta_robots', meta_robots)\r\n      formData.append('meta_title', meta_title)\r\n      formData.append('name', name)\r\n      formData.append('parent', parent)\r\n      formData.append('path', path)\r\n      formData.append('template_id', String(template_id))\r\n\r\n      if (!!meta_canonical && meta_canonical !== '') {\r\n        formData.append('meta_canonical', meta_canonical)\r\n      } else {\r\n        formData.append('meta_canonical', '')\r\n      }\r\n\r\n      if (!!meta_image && typeof meta_image !== 'string') {\r\n        formData.append('meta_image', meta_image.originFileObj)\r\n      } else {\r\n        formData.append('meta_image', '')\r\n      }\r\n\r\n      try {\r\n        const {\r\n          data: { version },\r\n        } = await PagesApi.updatePage(page.identifier, formData, {\r\n          cancelToken: cancelTokenSourceRef.current.token,\r\n        })\r\n\r\n        if (Object.keys(modules).length > 0) {\r\n          try {\r\n            const filesData = new FormData()\r\n\r\n            if (files && Object.keys(files).length > 0) {\r\n              Object.keys(files).forEach(moduleId => {\r\n                files[moduleId].forEach(file => {\r\n                  filesData.append(`files_${moduleId}`, file.originFileObj)\r\n                })\r\n              })\r\n            }\r\n\r\n            const formData = objectToFormData(\r\n              {\r\n                version,\r\n                modules: JSON.stringify(modules),\r\n              },\r\n              {\r\n                nullsAsUndefineds: true,\r\n                booleansAsIntegers: true,\r\n              },\r\n              filesData\r\n            )\r\n\r\n            await PagesApi.setPageModules(page.identifier, formData, {\r\n              cancelToken: cancelTokenSourceRef.current.token,\r\n            })\r\n          } catch (e) {\r\n            notification.error({ message: t('save-error') })\r\n          }\r\n        }\r\n\r\n        setIsPropertiesTouched(false)\r\n        setIsTouched(false)\r\n        resetForm({ values })\r\n        getPageVersions()\r\n\r\n        notification.success({ message: t('save-success') })\r\n      } catch (e) {\r\n        notification.error({ message: t('save-error') })\r\n      }\r\n    },\r\n    [\r\n      modules,\r\n      files,\r\n      page,\r\n      getPageVersions,\r\n      setIsPropertiesTouched,\r\n      setIsTouched,\r\n      t,\r\n    ]\r\n  )\r\n}\r\n","import {\r\n  Dropdown as DropdownBase,\r\n  DropdownItemProps,\r\n} from 'components/Dropdown'\r\nimport { DropdownButton } from 'components/DropdownButton'\r\nimport React from 'react'\r\nimport { useTranslation } from 'react-i18next'\r\n\r\nexport type DropdownAction = 'revert' | 'preview'\r\n\r\nexport interface DropdownProps {\r\n  onClick: (action: DropdownAction) => void\r\n  disabledActions?: DropdownAction[]\r\n}\r\n\r\nexport const Dropdown: React.FC<DropdownProps> = ({ onClick }) => {\r\n  const { t } = useTranslation('content-detail')\r\n\r\n  const handleClick = (action: DropdownAction) => {\r\n    onClick(action)\r\n  }\r\n\r\n  const items: DropdownItemProps[] = [\r\n    {\r\n      children: t('versions.table.context-menu.preview'),\r\n      onClick: () => handleClick('preview'),\r\n      icon: 'eye',\r\n    },\r\n    {\r\n      children: t('versions.table.context-menu.revert'),\r\n      onClick: () => handleClick('revert'),\r\n      icon: 'arrow-left',\r\n      dialog: {\r\n        text: t('versions.table.context-menu.delete-dialog.text'),\r\n        cancel: t('versions.table.context-menu.delete-dialog.cancel'),\r\n        confirm: t('versions.table.context-menu.delete-dialog.confirm'),\r\n      },\r\n    },\r\n  ]\r\n\r\n  return (\r\n    <div>\r\n      <DropdownBase items={items} data-test=\"Dropdown\">\r\n        <DropdownButton size=\"small\" />\r\n      </DropdownBase>\r\n    </div>\r\n  )\r\n}\r\n","import React from 'react'\r\nimport { ColumnProps } from 'antd/es/table'\r\nimport { MappedPageVersion } from './mapPageVersions'\r\nimport i18next from 'i18next'\r\nimport { DropdownAction, Dropdown } from '../components/Versions/Dropdown'\r\nimport { PAGE_STATUS_COLORS } from 'constants/colors'\r\nimport { format } from 'date-fns'\r\nimport { DATE_TIME_FORMAT } from 'constants/date'\r\nimport { Tag } from 'antd'\r\nimport { PageStatusEnum } from 'model/api/PageStatusEnum'\r\n\r\nexport const getPageVersionsColumns = (\r\n  t: i18next.TFunction,\r\n  onClick?: (action: DropdownAction, identifier: string) => void\r\n): ColumnProps<any>[] => [\r\n  {\r\n    dataIndex: 'version',\r\n    title: t('versions.table.columns.version'),\r\n    width: 150,\r\n  },\r\n  {\r\n    key: 'status',\r\n    dataIndex: 'status',\r\n    title: t('versions.table.columns.status'),\r\n    width: 220,\r\n    render: (value: PageStatusEnum) => (\r\n      <Tag color={PAGE_STATUS_COLORS[value]}>{value}</Tag>\r\n    ),\r\n  },\r\n  {\r\n    key: 'modified_at',\r\n    dataIndex: 'modified_at',\r\n    title: t('versions.table.columns.modified-at'),\r\n    render: (value: Date | null) =>\r\n      value ? format(value, DATE_TIME_FORMAT) : '-',\r\n  },\r\n  {\r\n    key: 'context_menu',\r\n    dataIndex: 'context_menu',\r\n    width: 60,\r\n    render: (_, { identifier }: MappedPageVersion) => (\r\n      <Dropdown\r\n        onClick={(action: DropdownAction) =>\r\n          onClick && onClick(action, identifier)\r\n        }\r\n      />\r\n    ),\r\n  },\r\n]\r\n","import React, { useContext, useCallback, useEffect, useMemo } from 'react'\r\nimport { ContentDetailContext } from 'scenes/ContentDetail'\r\nimport { getPageVersionsColumns } from 'scenes/ContentDetail/utils/getPageVersionsColumns'\r\nimport { useTranslation } from 'react-i18next'\r\nimport { DropdownAction } from './Dropdown'\r\nimport { Table } from 'components/Table'\r\n\r\nexport const Versions: React.FC = () => {\r\n  const { t } = useTranslation('content-detail')\r\n  const {\r\n    pageVersions: {\r\n      data,\r\n      loading,\r\n      page,\r\n      setPage,\r\n      pageSize,\r\n      total,\r\n      getPageVersions,\r\n    },\r\n  } = useContext(ContentDetailContext)\r\n\r\n  const handleActionClick = useCallback(\r\n    async (action: DropdownAction, _identifier: string) => {\r\n      switch (action) {\r\n        case 'preview':\r\n          // TODO\r\n          break\r\n        case 'revert':\r\n          // TODO\r\n          break\r\n        default:\r\n          break\r\n      }\r\n    },\r\n    []\r\n  )\r\n\r\n  const handlePageChange = useCallback(\r\n    (page: number) => {\r\n      setPage(page)\r\n    },\r\n    [setPage]\r\n  )\r\n\r\n  useEffect(() => {\r\n    getPageVersions()\r\n  }, [getPageVersions])\r\n\r\n  return useMemo(\r\n    () => (\r\n      <Table\r\n        columns={getPageVersionsColumns(t, handleActionClick)}\r\n        dataSource={data}\r\n        loading={loading}\r\n        isScrollable\r\n        pagination={{\r\n          current: page,\r\n          pageSize,\r\n          total,\r\n          onChange: handlePageChange,\r\n        }}\r\n      />\r\n    ),\r\n    [\r\n      data,\r\n      loading,\r\n      page,\r\n      pageSize,\r\n      total,\r\n      t,\r\n      handleActionClick,\r\n      handlePageChange,\r\n    ]\r\n  )\r\n}\r\n","import React, { useContext } from 'react'\r\nimport { useTranslation } from 'react-i18next'\r\nimport { Tabs, Button } from 'antd'\r\nimport { Page } from 'model/api/Page'\r\nimport { Editor } from '../components/Editor'\r\nimport { COLORS } from 'constants/colors'\r\nimport { IconButton } from 'components/IconButton'\r\nimport { Properties } from '../components/Properties'\r\nimport { Formik } from 'formik'\r\nimport { validateSchema } from 'config/yup'\r\nimport * as Yup from 'yup'\r\nimport { useGetPropertiesInitialValues } from '../hooks/useGetPropertiesInitialValues'\r\nimport { ContentDetailContext } from '..'\r\nimport { Form as FormFormikAntd } from 'formik-antd'\r\nimport { useSave } from '../hooks/useSave'\r\nimport { Versions } from './Versions'\r\nimport { PageStatusEnum } from 'model/api/PageStatusEnum'\r\nimport { UploadFile } from 'antd/es/upload/interface'\r\n\r\nconst { TabPane } = Tabs\r\nconst { Group } = Button\r\n\r\nexport enum ContentTabsEnum {\r\n  EDITOR = 'Editor',\r\n  PROPERTIES = 'Properties',\r\n  VERSIONS = 'Versions',\r\n}\r\n\r\nexport interface FormValues\r\n  extends Partial<\r\n    Pick<\r\n      Page,\r\n      | 'name'\r\n      | 'parent'\r\n      | 'template_id'\r\n      | 'path'\r\n      | 'meta_title'\r\n      | 'meta_description'\r\n      | 'meta_keywords'\r\n      | 'meta_robots'\r\n      | 'meta_canonical'\r\n      | 'html_head_end'\r\n      | 'html_body_start'\r\n      | 'html_body_end'\r\n    >\r\n  > {\r\n  meta_image: string | UploadFile<any> | undefined\r\n}\r\n\r\nexport const FormSchema = Yup.object().shape<FormValues>({\r\n  name: Yup.string().required(),\r\n  path: Yup.string().required(), // TODO local path validation\r\n  parent: Yup.string().notRequired(),\r\n  template_id: Yup.number().required(),\r\n  meta_image: Yup.mixed().notRequired(),\r\n  meta_title: Yup.string().notRequired(),\r\n  meta_robots: Yup.mixed().required(),\r\n  html_body_end: Yup.string().notRequired(),\r\n  html_body_start: Yup.string().notRequired(),\r\n  html_head_end: Yup.string().notRequired(),\r\n  meta_canonical: Yup.string()\r\n    .nullable()\r\n    .notRequired(),\r\n  meta_description: Yup.string().notRequired(),\r\n  meta_keywords: Yup.string().notRequired(),\r\n})\r\n\r\nexport const DetailForm: React.FC = () => {\r\n  const { t } = useTranslation('content-detail')\r\n  const formInitialValues = useGetPropertiesInitialValues()\r\n  const { isTouched, isPropertiesTouched, page, loading } = useContext(\r\n    ContentDetailContext\r\n  )\r\n  const handleSubmit = useSave()\r\n\r\n  return (\r\n    <Formik<FormValues>\r\n      initialValues={formInitialValues}\r\n      enableReinitialize\r\n      validate={values => validateSchema(values, FormSchema)}\r\n      onSubmit={handleSubmit}\r\n    >\r\n      {props => (\r\n        <FormFormikAntd layout=\"vertical\">\r\n          <Tabs\r\n            defaultActiveKey={ContentTabsEnum.EDITOR}\r\n            tabBarExtraContent={\r\n              <Group>\r\n                <IconButton\r\n                  size=\"middle\"\r\n                  icon=\"save\"\r\n                  disabled={\r\n                    (!isTouched && !isPropertiesTouched) || props.isSubmitting\r\n                  }\r\n                  type=\"primary\"\r\n                  color={COLORS.green2}\r\n                  htmlType=\"submit\"\r\n                >\r\n                  {t('save')}\r\n                </IconButton>\r\n                <IconButton\r\n                  size=\"middle\"\r\n                  icon=\"cloud-upload-alt\"\r\n                  htmlType=\"button\"\r\n                  disabled={page && page.status === PageStatusEnum.PUBLISHED}\r\n                >\r\n                  {t('publish')}\r\n                </IconButton>\r\n              </Group>\r\n            }\r\n          >\r\n            <TabPane\r\n              key={ContentTabsEnum.EDITOR}\r\n              tab={t('tabs.editor')}\r\n              disabled={loading}\r\n            >\r\n              <Editor />\r\n            </TabPane>\r\n            <TabPane\r\n              key={ContentTabsEnum.PROPERTIES}\r\n              tab={t('tabs.properties')}\r\n              disabled={loading}\r\n            >\r\n              <Properties />\r\n            </TabPane>\r\n            <TabPane\r\n              key={ContentTabsEnum.VERSIONS}\r\n              tab={t('tabs.versions')}\r\n              disabled={loading}\r\n            >\r\n              <Versions />\r\n            </TabPane>\r\n          </Tabs>\r\n        </FormFormikAntd>\r\n      )}\r\n    </Formik>\r\n  )\r\n}\r\n","import { ContentDetailContext } from '..'\r\nimport { FormValues } from '../components/DetailForm'\r\nimport { useContext } from 'react'\r\n\r\nexport const useGetPropertiesInitialValues = (): FormValues => {\r\n  const { page } = useContext(ContentDetailContext)\r\n\r\n  if (page) {\r\n    return {\r\n      name: page.name,\r\n      path: page.path,\r\n      parent: page.parent,\r\n      template_id: page.template_id,\r\n      meta_title: page.meta_title,\r\n      meta_robots: page.meta_robots,\r\n      meta_keywords: page.meta_keywords,\r\n      meta_description: page.meta_description,\r\n      meta_canonical: page.meta_canonical ? page.meta_canonical : undefined,\r\n      meta_image: page.meta_image,\r\n      html_head_end: page.html_head_end,\r\n      html_body_start: page.html_body_start,\r\n      html_body_end: page.html_body_end,\r\n    }\r\n  } else {\r\n    return {\r\n      name: undefined,\r\n      path: undefined,\r\n      parent: '',\r\n      template_id: undefined,\r\n      meta_title: undefined,\r\n      meta_robots: undefined,\r\n      meta_keywords: undefined,\r\n      meta_description: undefined,\r\n      meta_canonical: undefined,\r\n      meta_image: null,\r\n      html_head_end: undefined,\r\n      html_body_start: undefined,\r\n      html_body_end: undefined,\r\n    }\r\n  }\r\n}\r\n","import { Page } from 'model/api/Page'\r\nimport { PageStatusEnum } from 'model/api/PageStatusEnum'\r\n\r\nexport interface MappedPageVersion {\r\n  key: string\r\n  identifier: string\r\n  modified_at: Date | null\r\n  modified_by: number | null\r\n  status: PageStatusEnum\r\n  version: number\r\n}\r\n\r\nexport const mapPageVersions = (data: Page[]): MappedPageVersion[] =>\r\n  data.map(\r\n    ({\r\n      identifier,\r\n      modified_at,\r\n      modified_by,\r\n      status,\r\n      version,\r\n    }) => ({\r\n      key: String(identifier),\r\n      identifier,\r\n      modified_at: modified_at ? new Date(modified_at) : null,\r\n      modified_by,\r\n      status,\r\n      version,\r\n    })\r\n  )\r\n","import React, {\r\n  useContext,\r\n  useEffect,\r\n  createContext,\r\n  useState,\r\n} from 'react'\r\nimport { RouteComponentProps } from '@reach/router'\r\nimport { useTranslation } from 'react-i18next'\r\nimport { SceneTitle } from 'components/SceneTitle'\r\nimport { AuthenticatedLayoutContext } from 'components/Layout/AuthenticatedLayout'\r\nimport { Form } from './components/Form'\r\nimport { BackButton } from 'components/BackButton'\r\nimport { parse } from 'query-string'\r\nimport { Page } from 'model/api/Page'\r\nimport { LayoutSlot } from 'model/api/LayoutSlot'\r\nimport { Layout } from 'model/api/Layout'\r\nimport { Template } from 'model/api/Template'\r\nimport { View } from 'model/api/View'\r\nimport { useGetPageData, ModulesProps } from './hooks/useGetPageData'\r\nimport { DetailForm } from './components/DetailForm'\r\nimport { MappedPageVersion } from './utils/mapPageVersions'\r\nimport { useGetPageVersions } from './hooks/useGetPageVersions'\r\nimport { UploadFile } from 'antd/lib/upload/interface'\r\n\r\nexport interface ContentDetailContextProps {\r\n  page: Page\r\n  pageVersions: {\r\n    page: number\r\n    setPage: React.Dispatch<React.SetStateAction<number>>\r\n    pageSize: number\r\n    setPageSize: React.Dispatch<React.SetStateAction<number>>\r\n    total: number\r\n    data: MappedPageVersion[]\r\n    loading: boolean\r\n    getPageVersions: () => Promise<void>\r\n  }\r\n  template: Template\r\n  layout: Layout\r\n  layoutSlots: LayoutSlot[]\r\n  view: View\r\n  modules: ModulesProps\r\n  setModules: React.Dispatch<React.SetStateAction<ModulesProps>>\r\n  files: { [moduleId: string]: UploadFile[] }\r\n  setFiles: React.Dispatch<React.SetStateAction<{ [moduleId: string]: UploadFile[] }>>\r\n  deletedModules: number[]\r\n  setDeletedModules: React.Dispatch<React.SetStateAction<number[]>>\r\n  isTouched: boolean\r\n  setIsTouched: React.Dispatch<React.SetStateAction<boolean>>\r\n  isPropertiesTouched: boolean\r\n  setIsPropertiesTouched: React.Dispatch<React.SetStateAction<boolean>>\r\n  loading: boolean\r\n}\r\n\r\nexport const ContentDetailContext = createContext<ContentDetailContextProps>(\r\n  {} as ContentDetailContextProps\r\n)\r\n\r\nexport interface ContentDetailProps extends RouteComponentProps {\r\n  identifier?: string\r\n  view: 'new' | 'detail'\r\n}\r\n\r\nexport const ContentDetail: React.FC<ContentDetailProps> = ({\r\n  identifier,\r\n  view,\r\n  location,\r\n}) => {\r\n  const { t } = useTranslation('content-detail')\r\n  const { setSceneTitle } = useContext(AuthenticatedLayoutContext)\r\n  const {\r\n    page,\r\n    template,\r\n    layout,\r\n    layoutSlots,\r\n    view: templateView,\r\n    modules,\r\n    setModules,\r\n    loading,\r\n  } = useGetPageData({ view, identifier })\r\n  const {\r\n    getPageVersions,\r\n    loading: pageVersionsLoading,\r\n    page: pageVersionsPage,\r\n    pageSize,\r\n    pageVersions,\r\n    setPage,\r\n    setPageSize,\r\n    total,\r\n  } = useGetPageVersions({ view, identifier })\r\n  const [deletedModules, setDeletedModules] = useState([])\r\n  const [files, setFiles] = useState<{ [moduleId: string]: UploadFile[] }>()\r\n  const [isTouched, setIsTouched] = useState(false)\r\n  const [isPropertiesTouched, setIsPropertiesTouched] = useState(false)\r\n  const { parent } = parse(location.search)\r\n\r\n  console.log(isTouched, isPropertiesTouched)\r\n\r\n  useEffect(() => {\r\n    setSceneTitle(\r\n      <SceneTitle\r\n        title={t(view === 'detail' ? 'scene-title.detail' : 'scene-title.new')}\r\n        extraContent={\r\n          <BackButton title={t('scene-title.back-to-pages')} to=\"/content\" />\r\n        }\r\n      />\r\n    )\r\n  }, [setSceneTitle, t, view])\r\n\r\n  if (view === 'new') {\r\n    return <Form parent={parent ? String(parent) : ''} view={view} />\r\n  } else if (view === 'detail' && identifier) {\r\n    return (\r\n      <ContentDetailContext.Provider\r\n        value={{\r\n          page,\r\n          pageVersions: {\r\n            data: pageVersions,\r\n            getPageVersions,\r\n            page: pageVersionsPage,\r\n            setPage,\r\n            pageSize,\r\n            setPageSize,\r\n            total,\r\n            loading: pageVersionsLoading,\r\n          },\r\n          template,\r\n          layout,\r\n          layoutSlots,\r\n          view: templateView,\r\n          modules,\r\n          deletedModules,\r\n          setDeletedModules,\r\n          setModules,\r\n          files,\r\n          setFiles,\r\n          isTouched,\r\n          setIsTouched,\r\n          isPropertiesTouched,\r\n          setIsPropertiesTouched,\r\n          loading,\r\n        }}\r\n      >\r\n        <DetailForm />\r\n      </ContentDetailContext.Provider>\r\n    )\r\n  }\r\n\r\n  return null\r\n}\r\n","import { useState, useRef, useCallback, useEffect } from 'react'\r\nimport { PagesApi } from 'api/Pages'\r\nimport axios, { CancelTokenSource } from 'axios'\r\nimport { MappedPageVersion, mapPageVersions } from '../utils/mapPageVersions'\r\n\r\nexport interface UseGetPageVersionsProps {\r\n  identifier: string\r\n  view: 'new' | 'detail'\r\n}\r\n\r\nexport const useGetPageVersions = ({\r\n  view,\r\n  identifier,\r\n}: UseGetPageVersionsProps) => {\r\n  const [loading, setLoading] = useState(false)\r\n  const [total, setTotal] = useState(0)\r\n  const [page, setPage] = useState(1)\r\n  const [pageSize, setPageSize] = useState(0)\r\n  const [pageVersions, setPageVersions] = useState<MappedPageVersion[]>()\r\n  const cancelTokenSourceRef = useRef<CancelTokenSource>(\r\n    axios.CancelToken.source()\r\n  )\r\n\r\n  const getPageVersions = useCallback(\r\n    async () => {\r\n      if (view === 'detail') {\r\n        setLoading(true)\r\n\r\n        const {\r\n          data: { data, total, per_page },\r\n        } = await PagesApi.getPageVersions(identifier, page, pageSize, {\r\n          cancelToken: cancelTokenSourceRef.current.token,\r\n        })\r\n\r\n        setPageVersions(mapPageVersions(data))\r\n        setTotal(total)\r\n        setPageSize(per_page)\r\n        setLoading(false)\r\n      }\r\n    },\r\n    [identifier, view, page, pageSize]\r\n  )\r\n\r\n  useEffect(() => {\r\n    const cancelTokenSource = cancelTokenSourceRef.current\r\n\r\n    return () => cancelTokenSource.cancel()\r\n  }, [])\r\n\r\n  return {\r\n    pageVersions,\r\n    getPageVersions,\r\n    loading,\r\n    page,\r\n    setPage,\r\n    total,\r\n    pageSize,\r\n    setPageSize,\r\n  }\r\n}\r\n","import axios, { AxiosPromise } from 'axios'\r\nimport { RequestConfig } from './requestConfig'\r\nimport { TemplatePreview } from 'model/api/TemplatePreview'\r\n\r\nexport class TemplatePreviewApi {\r\n  /**\r\n   * Get Template Preview\r\n   *\r\n   * @param viewName\r\n   * @param templateName\r\n   */\r\n  static getTemplatePreview(\r\n    viewName: string,\r\n    templateName: string,\r\n    config?: RequestConfig\r\n  ): AxiosPromise<TemplatePreview> {\r\n    return axios({\r\n      ...config,\r\n      method: 'GET',\r\n      url: `/template-preview`,\r\n      params: {\r\n        view_name: viewName,\r\n        template_name: templateName,\r\n      },\r\n    })\r\n  }\r\n}","import { createAction } from 'redux-actions'\r\nimport { TemplatePreview } from 'model/api/TemplatePreview'\r\nimport { ThunkDispatch } from 'redux-thunk'\r\nimport { State } from 'state/rootReducer'\r\nimport { AnyAction } from 'redux'\r\nimport { ViewsApi } from 'api/Views'\r\nimport { TemplatePreviewApi } from 'api/TemplatePreview'\r\nimport { ModuleTypeEnum } from 'model/api/ModuleTypeEnum'\r\nimport { CatalogItemTemplatesApi } from 'api/CatalogItemTemplates'\r\nimport { NavigationsApi } from 'api/Navigations'\r\n\r\nexport interface SetTemplatePreviewPayload {\r\n  data: TemplatePreview\r\n  moduleName: string\r\n  path: string\r\n}\r\n\r\nexport const SET_TEMPLATE_PREVIEW = 'SET_TEMPLATE_PREVIEW'\r\nexport const CLEAR_TEMPLATE_PREVIEWS = 'CLEAR_TEMPLATE_PREVIEWS'\r\n\r\nexport const setTemplatePreview = createAction<SetTemplatePreviewPayload>(\r\n  SET_TEMPLATE_PREVIEW\r\n)\r\n\r\nexport const clearTemplatePreviews = createAction(CLEAR_TEMPLATE_PREVIEWS)\r\n\r\nexport const fetchTemplatePreviews = () => async (\r\n  dispatch: ThunkDispatch<State, void, AnyAction>,\r\n  getState: () => State\r\n) => {\r\n  const {\r\n    templates: { previews },\r\n  } = getState()\r\n\r\n  const { data: views } = await ViewsApi.getAllViews()\r\n  const {\r\n    data: catalogViews,\r\n  } = await CatalogItemTemplatesApi.getAllCatalogItemTemplates()\r\n\r\n  const { data: navigations } = await NavigationsApi.getAllNavigations()\r\n\r\n  catalogViews.forEach(({ path, view_id }) => {\r\n    const { path: viewPath } = views.find(item => item.id === view_id)\r\n    const catalogViewPath = `${viewPath}`\r\n    const nameListing = path\r\n    const nameDetail = `${path}_detail`\r\n\r\n    /**\r\n     * Listing view\r\n     */\r\n    if (!previews[catalogViewPath] || !previews[catalogViewPath][nameListing]) {\r\n      /**\r\n       * Using promise instead of await/async to lower chance of blocking other\r\n       * requests\r\n       */\r\n      TemplatePreviewApi.getTemplatePreview(catalogViewPath, nameListing)\r\n        .then(({ data: templatePreviewData }) => {\r\n          dispatch(\r\n            setTemplatePreview({\r\n              path: catalogViewPath,\r\n              moduleName: nameListing,\r\n              data: templatePreviewData,\r\n            })\r\n          )\r\n        })\r\n        .catch(() => {\r\n          //\r\n        })\r\n    }\r\n\r\n    /**\r\n     * Detail view\r\n     */\r\n    if (!previews[catalogViewPath] || !previews[catalogViewPath][nameDetail]) {\r\n\r\n      /**\r\n       * Using promise instead of await/async to lower chance of blocking other\r\n       * requests\r\n       */\r\n      TemplatePreviewApi.getTemplatePreview(catalogViewPath, nameDetail)\r\n        .then(({ data: templatePreviewData }) => {\r\n          dispatch(\r\n            setTemplatePreview({\r\n              path: catalogViewPath,\r\n              moduleName: nameDetail,\r\n              data: templatePreviewData,\r\n            })\r\n          )\r\n        })\r\n        .catch(() => {\r\n          //\r\n        })\r\n    }\r\n  })\r\n\r\n  views.forEach(({ path }) => {\r\n    Object.keys(ModuleTypeEnum).forEach(moduleName => {\r\n      /**\r\n       * Load templates for navigation modules separately. Navigation bodules\r\n       * has defined its own subfolder\r\n       */\r\n      if (moduleName === ModuleTypeEnum.NAVIGATION) {\r\n        /**\r\n         * Using promise instead of await/async to lower chance of blocking other\r\n         * requests\r\n         */\r\n        navigations.forEach(({ path: navigationPath }) => {\r\n          const currentPath = `${path}/${navigationPath}`\r\n\r\n          if (!previews[currentPath] || !previews[currentPath][moduleName]) {\r\n            TemplatePreviewApi.getTemplatePreview(\r\n              currentPath,\r\n              moduleName.toLowerCase()\r\n            )\r\n              .then(({ data: templatePreviewData }) => {\r\n                dispatch(\r\n                  setTemplatePreview({\r\n                    path: currentPath,\r\n                    moduleName,\r\n                    data: templatePreviewData,\r\n                  })\r\n                )\r\n              })\r\n              .catch(() => {\r\n                //\r\n              })\r\n          }\r\n        })\r\n      } else {\r\n        if (!previews[path] || !previews[path][moduleName]) {\r\n          /**\r\n           * Using promise instead of await/async to lower chance of blocking other\r\n           * requests\r\n           */\r\n          TemplatePreviewApi.getTemplatePreview(path, moduleName.toLowerCase())\r\n            .then(({ data: templatePreviewData }) => {\r\n              dispatch(\r\n                setTemplatePreview({\r\n                  path,\r\n                  moduleName,\r\n                  data: templatePreviewData,\r\n                })\r\n              )\r\n            })\r\n            .catch(() => {\r\n              //\r\n            })\r\n        }\r\n      }\r\n    })\r\n  })\r\n}\r\n","import axios, { AxiosPromise } from 'axios'\r\nimport { RequestConfig } from './requestConfig'\r\nimport { VariableNameAction } from 'model/api/VariableNameAction'\r\nimport { PaginatedList } from 'model/api/PaginatedList'\r\n\r\nexport class VariableNameActionsApi {\r\n  /**\r\n   * Get Variable Name Actions\r\n   *\r\n   * @param page\r\n   * @param pageSize\r\n   */\r\n  static getVariableNameActions(\r\n    page?: number,\r\n    pageSize?: number,\r\n    config?: RequestConfig\r\n  ): AxiosPromise<PaginatedList<VariableNameAction>> {\r\n    return axios({\r\n      ...config,\r\n      method: 'GET',\r\n      url: `/variable-name-actions`,\r\n      params: {\r\n        page,\r\n        per_page: pageSize\r\n      },\r\n    })\r\n  }\r\n\r\n  /**\r\n   * Get Variable Name Action\r\n   *\r\n   * @param variableNameActionId\r\n   */\r\n  static getVariableNameAction(\r\n    variableNameActionId: number,\r\n    config?: RequestConfig\r\n  ): AxiosPromise<VariableNameAction> {\r\n    return axios({\r\n      ...config,\r\n      method: 'GET',\r\n      url: `/variable-name-actions/${variableNameActionId}`,\r\n    })\r\n  }\r\n\r\n  /**\r\n   * Create Variable Name Action\r\n   *\r\n   * @param data\r\n   */\r\n  static createVariableNameAction(\r\n    data: FormData,\r\n    config?: RequestConfig\r\n  ): AxiosPromise<{ id: number }> {\r\n    return axios({\r\n      ...config,\r\n      method: 'POST',\r\n      url: `/variable-name-actions`,\r\n      data\r\n    })\r\n  }\r\n\r\n  /**\r\n   * Update Variable Name Action\r\n   *\r\n   * @param variableNameActionId\r\n   * @param data\r\n   */\r\n  static updateVariableNameAction(\r\n    variableNameActionId: number,\r\n    data: FormData,\r\n    config?: RequestConfig\r\n  ): AxiosPromise {\r\n    return axios({\r\n      ...config,\r\n      method: 'PUT',\r\n      url: `/variable-name-actions/${variableNameActionId}`,\r\n      data\r\n    })\r\n  }\r\n\r\n  /**\r\n   * Delete Variable Name Action\r\n   *\r\n   * @param variableNameActionId\r\n   */\r\n  static deleteVariableNameAction(\r\n    variableNameActionId: number,\r\n    config?: RequestConfig\r\n  ): AxiosPromise {\r\n    return axios({\r\n      ...config,\r\n      method: 'DELETE',\r\n      url: `/variable-name-actions/${variableNameActionId}`,\r\n    })\r\n  }\r\n}","import { VariableNameActionActionEnm } from 'model/api/VariableNameActionActionEnum'\r\nimport { VariableNameAction } from 'model/api/VariableNameAction'\r\n\r\nexport interface MappedVariableNameAction {\r\n  key: string\r\n  id: number\r\n  variable_name: string\r\n  path: string\r\n  action: VariableNameActionActionEnm\r\n}\r\n\r\nexport const mapVariableNameActions = (\r\n  data: VariableNameAction[]\r\n): MappedVariableNameAction[] =>\r\n  data.map(({ id, variable_name, path, action }) => ({\r\n    key: String(id),\r\n    id,\r\n    variable_name,\r\n    path,\r\n    action,\r\n  }))\r\n","import {\r\n  Dropdown as DropdownBase,\r\n  DropdownItemProps,\r\n} from 'components/Dropdown'\r\nimport { DropdownButton } from 'components/DropdownButton'\r\nimport React, { useCallback } from 'react'\r\nimport { useTranslation } from 'react-i18next'\r\n\r\nexport type DropdownAction = 'edit' | 'delete'\r\n\r\nexport interface DropdownProps {\r\n  onClick: (action: DropdownAction) => void\r\n  disabledActions?: DropdownAction[]\r\n}\r\n\r\nexport const Dropdown: React.FC<DropdownProps> = ({ onClick }) => {\r\n  const { t } = useTranslation('variable-name-actions')\r\n\r\n  const handleClick = useCallback((action: DropdownAction) => {\r\n    onClick(action)\r\n  }, [onClick])\r\n\r\n  const items: DropdownItemProps[] = [\r\n    {\r\n      children: t('table.context-menu.edit'),\r\n      onClick: () => handleClick('edit'),\r\n      icon: 'pen',\r\n    },   \r\n    {\r\n      children: t('table.context-menu.delete'),\r\n      onClick: () => handleClick('delete'),\r\n      icon: 'trash-alt',\r\n      dialog: {\r\n        text: t('table.context-menu.delete-dialog.text'),\r\n        cancel: t('table.context-menu.delete-dialog.cancel'),\r\n        confirm: t('table.context-menu.delete-dialog.confirm')\r\n      }\r\n    },\r\n  ]\r\n\r\n  return (\r\n    <div>\r\n      <DropdownBase items={items} data-test=\"Dropdown\">\r\n        <DropdownButton size=\"small\" />\r\n      </DropdownBase>\r\n    </div>\r\n  )\r\n}\r\n","import React from 'react'\r\nimport { ColumnProps } from 'antd/es/table'\r\nimport i18next from 'i18next'\r\nimport { DropdownAction, Dropdown } from '../components/Dropdown'\r\nimport { MappedVariableNameAction } from './mapVariableNameActions'\r\n\r\nexport const getVariableNameActionsColumns = (\r\n  t: i18next.TFunction,\r\n  onClick?: (action: DropdownAction, viewId: number) => void\r\n): ColumnProps<any>[] => [\r\n  {\r\n    key: 'id',\r\n    dataIndex: 'id',\r\n    title: t('table.columns.id'),\r\n    width: 100,\r\n  },\r\n  {\r\n    key: 'variable_name',\r\n    dataIndex: 'variable_name',\r\n    title: t('table.columns.variable-name'),\r\n    width: 200,\r\n  },\r\n  {\r\n    key: 'path',\r\n    dataIndex: 'path',\r\n    width: 300,\r\n    title: t('table.columns.path'),\r\n  },\r\n  {\r\n    key: 'action',\r\n    dataIndex: 'action',\r\n    title: t('table.columns.action'),\r\n  },\r\n  {\r\n    key: 'context_menu',\r\n    dataIndex: 'context_menu',\r\n    width: 60,\r\n    render: (_, { id }: MappedVariableNameAction) => (\r\n      <Dropdown\r\n        onClick={(action: DropdownAction) => onClick && onClick(action, id)}\r\n      />\r\n    ),\r\n    fixed: 'right',\r\n  },\r\n]\r\n","import React, { useCallback, useState, useEffect, useRef } from 'react'\r\nimport { Table as TableBase } from 'components/Table'\r\nimport axios, { CancelTokenSource } from 'axios'\r\nimport { useTranslation } from 'react-i18next'\r\nimport { DropdownAction } from './Dropdown'\r\nimport { navigate } from '@reach/router'\r\nimport { notification } from 'antd'\r\nimport { VariableNameActionsApi } from 'api/VariableNameActions'\r\nimport {\r\n  MappedVariableNameAction,\r\n  mapVariableNameActions,\r\n} from '../utils/mapVariableNameActions'\r\nimport { getVariableNameActionsColumns } from '../utils/getVariableNameActionsColumns'\r\n\r\nexport const Table: React.FC = () => {\r\n  const { PUBLIC_URL } = process.env\r\n  const { t } = useTranslation('variable-name-actions')\r\n  const [data, setData] = useState<MappedVariableNameAction[]>([])\r\n  const [loading, setLoading] = useState(false)\r\n  const [total, setTotal] = useState(0)\r\n  const [page, setPage] = useState(1)\r\n  const [pageSize, setPageSize] = useState(0)\r\n  const cancelTokenRef = useRef<CancelTokenSource>(axios.CancelToken.source())\r\n\r\n  const getData = useCallback(async () => {\r\n    setLoading(true)\r\n\r\n    const {\r\n      data: { data, total, per_page },\r\n    } = await VariableNameActionsApi.getVariableNameActions(page, pageSize, {\r\n      cancelToken: cancelTokenRef.current.token,\r\n    })\r\n\r\n    setData(mapVariableNameActions(data))\r\n    setTotal(total)\r\n    setPageSize(per_page)\r\n    setLoading(false)\r\n  }, [page, pageSize])\r\n\r\n  const handleActionClick = useCallback(\r\n    async (action: DropdownAction, variableNameActionId: number) => {\r\n      switch (action) {\r\n        case 'edit':\r\n          navigate(\r\n            PUBLIC_URL +\r\n              '/content/variable-name-actions/' +\r\n              variableNameActionId\r\n          )\r\n          break\r\n        case 'delete':\r\n          try {\r\n            await VariableNameActionsApi.deleteVariableNameAction(\r\n              variableNameActionId,\r\n              {\r\n                cancelToken: cancelTokenRef.current.token,\r\n              }\r\n            )\r\n\r\n            notification.success({\r\n              message: t('table.delete-success'),\r\n            })\r\n\r\n            getData()\r\n          } catch (e) {}\r\n          break\r\n        default:\r\n          break\r\n      }\r\n    },\r\n    [PUBLIC_URL, getData, t]\r\n  )\r\n\r\n  const handlePageChange = useCallback((page: number) => {\r\n    setPage(page)\r\n  }, [])\r\n\r\n  useEffect(() => {\r\n    getData()\r\n  }, [getData])\r\n\r\n  useEffect(() => {\r\n    const cancelToken = cancelTokenRef.current\r\n\r\n    return () => cancelToken.cancel()\r\n  }, [])\r\n\r\n  return (\r\n    <TableBase\r\n      columns={getVariableNameActionsColumns(t, handleActionClick)}\r\n      dataSource={data}\r\n      loading={loading}\r\n      pagination={{\r\n        current: page,\r\n        pageSize,\r\n        total,\r\n        onChange: handlePageChange,\r\n      }}\r\n    />\r\n  )\r\n}\r\n","import React, { useContext, useEffect, useCallback } from 'react'\r\nimport { RouteComponentProps, navigate } from '@reach/router'\r\nimport { useTranslation } from 'react-i18next'\r\nimport { SceneTitle } from 'components/SceneTitle'\r\nimport { AuthenticatedLayoutContext } from 'components/Layout/AuthenticatedLayout'\r\nimport { Table } from './components/Table'\r\nimport { Space, Alert } from 'antd'\r\nimport { IconButton } from 'components/IconButton'\r\n\r\nexport const VariableNameActions: React.FC<RouteComponentProps> = () => {\r\n  const { PUBLIC_URL } = process.env\r\n  const { t } = useTranslation('variable-name-actions')\r\n  const { setSceneTitle } = useContext(AuthenticatedLayoutContext)\r\n\r\n  const handleCreateVariable = useCallback(() => {\r\n    navigate(PUBLIC_URL + '/content/variable-name-actions/new')\r\n  }, [PUBLIC_URL])\r\n\r\n  useEffect(() => {\r\n    setSceneTitle(<SceneTitle title={t('scene-title')} />)\r\n  }, [setSceneTitle, t])\r\n\r\n  return (\r\n    <Space size=\"large\" direction=\"vertical\" style={{ width: '100%' }}>\r\n      <IconButton\r\n        size=\"middle\"\r\n        type=\"primary\"\r\n        icon=\"plus\"\r\n        onClick={handleCreateVariable}\r\n      >\r\n        {t('create-new-variable-action')}\r\n      </IconButton>\r\n      <Alert type=\"info\" message={t('variable-name-actions-info')} />\r\n      <Table />\r\n    </Space>\r\n  )\r\n}\r\n","export enum VariableNameActionActionEnm {\r\n  'GET_CATALOG_ITEM' = 'GET_CATALOG_ITEM',\r\n  'GET_CATALOG_CATEGORY' = 'GET_CATALOG_CATEGORY',\r\n  'GET_PAGE_TAG' = 'GET_PAGE_TAG',\r\n}\r\n","import React, { useCallback, useState, useEffect, useRef } from 'react'\r\nimport { Formik } from 'formik'\r\nimport { Input, Form as FormFormikAntd, Select } from 'formik-antd'\r\nimport { FormikFormItem as Item } from 'components/FormikFormItem'\r\nimport { Button, Form as FormAntd, notification } from 'antd'\r\nimport { useTranslation } from 'react-i18next'\r\nimport { validateSchema } from 'config/yup'\r\nimport * as Yup from 'yup'\r\nimport axios, { CancelToken, CancelTokenSource } from 'axios'\r\nimport { navigate } from '@reach/router'\r\nimport { VariableNameActionsApi } from 'api/VariableNameActions'\r\nimport { VariableNameAction } from 'model/api/VariableNameAction'\r\nimport { VariableNameActionActionEnm } from 'model/api/VariableNameActionActionEnum'\r\n\r\nconst { Item: ItemAntd } = FormAntd\r\nconst { Option } = Select\r\n\r\nexport interface FormValues {\r\n  variable_name?: string\r\n  path?: string\r\n  action?: string\r\n}\r\n\r\nexport const FormSchema = Yup.object().shape<FormValues>({\r\n  variable_name: Yup.string().required(),\r\n  path: Yup.string().required(),\r\n  action: Yup.string().required(),\r\n})\r\n\r\nexport interface FormProps {\r\n  variableNameActionId?: number\r\n  view: 'new' | 'detail'\r\n}\r\n\r\nexport const Form: React.FC<FormProps> = ({ variableNameActionId, view }) => {\r\n  const { PUBLIC_URL } = process.env\r\n  const { t } = useTranslation('variable-name-action-detail')\r\n  const [data, setData] = useState<VariableNameAction>()\r\n  const [loading, setLoading] = useState(false)\r\n  const cancelTokenRef = useRef<CancelTokenSource>(axios.CancelToken.source())\r\n  const formInitialValues = data || {\r\n    variable_name: undefined,\r\n    path: undefined,\r\n    action: undefined,\r\n  }\r\n\r\n  const getData = useCallback(\r\n    async (cancelToken: CancelToken) => {\r\n      if (view === 'detail' && variableNameActionId) {\r\n        try {\r\n          setLoading(true)\r\n\r\n          const { data } = await VariableNameActionsApi.getVariableNameAction(\r\n            variableNameActionId,\r\n            {\r\n              cancelToken,\r\n            }\r\n          )\r\n\r\n          setData(data)\r\n          setLoading(false)\r\n        } catch (e) {\r\n          setLoading(false)\r\n        }\r\n      }\r\n    },\r\n    [view, variableNameActionId]\r\n  )\r\n\r\n  const handleSubmit = useCallback(\r\n    async ({ variable_name, path, action }: Required<FormValues>) => {\r\n      try {\r\n        setLoading(true)\r\n\r\n        const formData = new FormData()\r\n        formData.append('variable_name', variable_name)\r\n        formData.append('path', path)\r\n        formData.append('action', action)\r\n\r\n        if (view === 'new') {\r\n          await VariableNameActionsApi.createVariableNameAction(formData, {\r\n            cancelToken: cancelTokenRef.current.token,\r\n          })\r\n\r\n          notification.success({ message: t('create-success') })\r\n          navigate(PUBLIC_URL + '/content/variable-name-actions')\r\n        } else if (view === 'detail' && variableNameActionId) {\r\n          await VariableNameActionsApi.updateVariableNameAction(\r\n            variableNameActionId,\r\n            formData,\r\n            {\r\n              cancelToken: cancelTokenRef.current.token,\r\n            }\r\n          )\r\n\r\n          notification.success({ message: t('update-success') })\r\n          navigate(PUBLIC_URL + '/content/variable-name-actions')\r\n        }\r\n      } catch (e) {\r\n        setLoading(false)\r\n      }\r\n    },\r\n    [PUBLIC_URL, view, t, variableNameActionId]\r\n  )\r\n\r\n  const renderForm = useCallback(\r\n    () => (\r\n      <FormFormikAntd layout=\"vertical\">\r\n        <Item label={t('form.variable-name')} name=\"variable_name\">\r\n          <Input name=\"variable_name\" />\r\n        </Item>\r\n        <Item label={t('form.path')} name=\"path\">\r\n          <Input name=\"path\" />\r\n        </Item>\r\n        <Item label={t('form.action')} name=\"action\">\r\n          <Select name=\"action\">\r\n            {Object.values(VariableNameActionActionEnm).map(value => (\r\n              <Option value={value} key={value}>\r\n                {value}\r\n              </Option>\r\n            ))}\r\n          </Select>\r\n        </Item>\r\n        <ItemAntd>\r\n          <Button\r\n            htmlType=\"submit\"\r\n            type=\"primary\"\r\n            size=\"large\"\r\n            disabled={loading}\r\n          >\r\n            {t(view === 'new' ? 'form.submit.new' : 'form.submit.detail')}\r\n          </Button>\r\n        </ItemAntd>\r\n      </FormFormikAntd>\r\n    ),\r\n    [t, view, loading]\r\n  )\r\n\r\n  useEffect(() => {\r\n    const cancelTokenSource = axios.CancelToken.source()\r\n\r\n    getData(cancelTokenSource.token)\r\n\r\n    return () => cancelTokenSource.cancel()\r\n  }, [getData])\r\n\r\n  useEffect(() => {\r\n    const cancelToken = cancelTokenRef.current\r\n\r\n    return () => cancelToken.cancel()\r\n  }, [])\r\n\r\n  return (\r\n    <Formik<FormValues>\r\n      initialValues={formInitialValues}\r\n      enableReinitialize\r\n      validate={values => validateSchema(values, FormSchema)}\r\n      onSubmit={handleSubmit}\r\n    >\r\n      {() => renderForm()}\r\n    </Formik>\r\n  )\r\n}\r\n","import React, { useContext, useEffect } from 'react'\r\nimport { RouteComponentProps } from '@reach/router'\r\nimport { useTranslation } from 'react-i18next'\r\nimport { SceneTitle } from 'components/SceneTitle'\r\nimport { AuthenticatedLayoutContext } from 'components/Layout/AuthenticatedLayout'\r\nimport { Form } from './components/Form'\r\nimport { BackButton } from 'components/BackButton'\r\n\r\nexport interface VariableNameActionDetailProps extends RouteComponentProps {\r\n  variableNameActionId?: number\r\n  view: 'new' | 'detail'\r\n}\r\n\r\nexport const VariableNameActionDetail: React.FC<VariableNameActionDetailProps> = ({\r\n  variableNameActionId,\r\n  view,\r\n}) => {\r\n  const { t } = useTranslation('variable-name-action-detail')\r\n  const { setSceneTitle } = useContext(AuthenticatedLayoutContext)\r\n\r\n  useEffect(() => {\r\n    setSceneTitle(\r\n      <SceneTitle\r\n        title={t(view === 'detail' ? 'scene-title.detail' : 'scene-title.new')}\r\n        extraContent={\r\n          <BackButton\r\n            title={t('scene-title.back-to-variable-name-actions')}\r\n            to=\"/content/variable-name-actions\"\r\n          />\r\n        }\r\n      />\r\n    )\r\n  }, [setSceneTitle, t, view])\r\n\r\n  return <Form variableNameActionId={variableNameActionId} view={view} />\r\n}\r\n","import {\r\n  Dropdown as DropdownBase,\r\n  DropdownItemProps,\r\n} from 'components/Dropdown'\r\nimport { DropdownButton } from 'components/DropdownButton'\r\nimport React, { useCallback } from 'react'\r\nimport { useTranslation } from 'react-i18next'\r\n\r\nexport type DropdownAction = 'edit' | 'delete'\r\n\r\nexport interface DropdownProps {\r\n  onClick: (action: DropdownAction) => void\r\n  disabledActions?: DropdownAction[]\r\n}\r\n\r\nexport const Dropdown: React.FC<DropdownProps> = ({ onClick }) => {\r\n  const { t } = useTranslation('navigations')\r\n\r\n  const handleClick = useCallback((action: DropdownAction) => {\r\n    onClick(action)\r\n  }, [onClick])\r\n\r\n  const items: DropdownItemProps[] = [\r\n    {\r\n      children: t('table.context-menu.edit'),\r\n      onClick: () => handleClick('edit'),\r\n      icon: 'pen',\r\n    },   \r\n    {\r\n      children: t('table.context-menu.delete'),\r\n      onClick: () => handleClick('delete'),\r\n      icon: 'trash-alt',\r\n      dialog: {\r\n        text: t('table.context-menu.delete-dialog.text'),\r\n        cancel: t('table.context-menu.delete-dialog.cancel'),\r\n        confirm: t('table.context-menu.delete-dialog.confirm')\r\n      }\r\n    },\r\n  ]\r\n\r\n  return (\r\n    <div>\r\n      <DropdownBase items={items} data-test=\"Dropdown\">\r\n        <DropdownButton size=\"small\" />\r\n      </DropdownBase>\r\n    </div>\r\n  )\r\n}\r\n","import React from 'react'\r\nimport { ColumnProps } from 'antd/es/table'\r\nimport { MappedNavigation } from './mapNavigations'\r\nimport i18next from 'i18next'\r\nimport { DropdownAction, Dropdown } from '../components/Dropdown'\r\n\r\nexport const getNavigationsColumns = (\r\n  t: i18next.TFunction,\r\n  onClick?: (action: DropdownAction, viewId: number) => void\r\n): ColumnProps<any>[] => [\r\n  {\r\n    key: 'id',\r\n    dataIndex: 'id',\r\n    title: t('table.columns.id'),\r\n    width: 100,\r\n  },\r\n  {\r\n    key: 'name',\r\n    dataIndex: 'name',\r\n    title: t('table.columns.name'),\r\n    width: 200,\r\n  },\r\n  {\r\n    key: 'path',\r\n    dataIndex: 'path',\r\n    title: t('table.columns.path'),\r\n  },\r\n  {\r\n    key: 'context_menu',\r\n    dataIndex: 'context_menu',\r\n    width: 60,\r\n    render: (_, { id }: MappedNavigation) => (\r\n      <Dropdown\r\n        onClick={(action: DropdownAction) => onClick && onClick(action, id)}\r\n      />\r\n    ),\r\n    fixed: 'right',\r\n  },\r\n]\r\n","import { Navigation } from 'model/api/Navigation'\r\n\r\nexport interface MappedNavigation {\r\n  key: string\r\n  id: number\r\n  name: string\r\n  path: string\r\n}\r\n\r\nexport const mapNavigations = (data: Navigation[]): MappedNavigation[] =>\r\n  data.map(({ id, name, path }) => ({\r\n    key: String(id),\r\n    id,\r\n    name,\r\n    path,\r\n  }))\r\n","import React, { useCallback, useState, useEffect, useRef } from 'react'\r\nimport { Table as TableBase } from 'components/Table'\r\nimport axios, { CancelTokenSource } from 'axios'\r\nimport { useTranslation } from 'react-i18next'\r\nimport { DropdownAction } from './Dropdown'\r\nimport { navigate } from '@reach/router'\r\nimport { notification } from 'antd'\r\nimport { getNavigationsColumns } from '../utils/getNavigationColumns'\r\nimport { MappedNavigation, mapNavigations } from '../utils/mapNavigations'\r\nimport { NavigationsApi } from 'api/Navigations'\r\n\r\nexport const Table: React.FC = () => {\r\n  const { PUBLIC_URL } = process.env\r\n  const { t } = useTranslation('navigations')\r\n  const [data, setData] = useState<MappedNavigation[]>([])\r\n  const [loading, setLoading] = useState(false)\r\n  const [total, setTotal] = useState(0)\r\n  const [page, setPage] = useState(1)\r\n  const [pageSize, setPageSize] = useState(0)\r\n  const cancelTokenRef = useRef<CancelTokenSource>(axios.CancelToken.source())\r\n\r\n  const getData = useCallback(async () => {\r\n    setLoading(true)\r\n\r\n    const {\r\n      data: { data, total, per_page },\r\n    } = await NavigationsApi.getNavigations(page, pageSize, {\r\n      cancelToken: cancelTokenRef.current.token,\r\n    })\r\n\r\n    setData(mapNavigations(data))\r\n    setTotal(total)\r\n    setPageSize(per_page)\r\n    setLoading(false)\r\n  }, [page, pageSize])\r\n\r\n  const handleActionClick = useCallback(\r\n    async (action: DropdownAction, navigationId: number) => {\r\n      switch (action) {\r\n        case 'edit':\r\n          navigate(PUBLIC_URL + '/content/modules/navigations/' + navigationId)\r\n          break\r\n        case 'delete':\r\n          try {\r\n            await NavigationsApi.deleteNavigation(navigationId, {\r\n              cancelToken: cancelTokenRef.current.token,\r\n            })\r\n\r\n            notification.success({\r\n              message: t('table.delete-success'),\r\n            })\r\n\r\n            getData()\r\n          } catch (e) {}\r\n          break\r\n        default:\r\n          break\r\n      }\r\n    },\r\n    [PUBLIC_URL, getData, t]\r\n  )\r\n\r\n  const handlePageChange = useCallback((page: number) => {\r\n    setPage(page)\r\n  }, [])\r\n\r\n  useEffect(() => {\r\n    getData()\r\n  }, [getData])\r\n\r\n  useEffect(() => {\r\n    const cancelToken = cancelTokenRef.current\r\n\r\n    return () => cancelToken.cancel()\r\n  }, [])\r\n\r\n  return (\r\n    <TableBase\r\n      columns={getNavigationsColumns(t, handleActionClick)}\r\n      dataSource={data}\r\n      loading={loading}\r\n      pagination={{\r\n        current: page,\r\n        pageSize,\r\n        total,\r\n        onChange: handlePageChange,\r\n      }}\r\n    />\r\n  )\r\n}\r\n","import React, { useContext, useEffect, useCallback } from 'react'\r\nimport { RouteComponentProps, navigate } from '@reach/router'\r\nimport { useTranslation } from 'react-i18next'\r\nimport { SceneTitle } from 'components/SceneTitle'\r\nimport { AuthenticatedLayoutContext } from 'components/Layout/AuthenticatedLayout'\r\nimport { Table } from './components/Table'\r\nimport { Space } from 'antd'\r\nimport { IconButton } from 'components/IconButton'\r\n\r\nexport const Navigations: React.FC<RouteComponentProps> = () => {\r\n  const { PUBLIC_URL } = process.env\r\n  const { t } = useTranslation('navigations')\r\n  const { setSceneTitle } = useContext(AuthenticatedLayoutContext)\r\n\r\n  const handleCreateNavigation = useCallback(() => {\r\n    navigate(PUBLIC_URL + '/content/modules/navigations/new')\r\n  }, [PUBLIC_URL])\r\n\r\n  useEffect(() => {\r\n    setSceneTitle(<SceneTitle title={t('scene-title')} />)\r\n  }, [setSceneTitle, t])\r\n\r\n  return (\r\n    <Space size=\"large\" direction=\"vertical\" style={{ width: '100%' }}>\r\n      <IconButton\r\n        size=\"middle\"\r\n        type=\"primary\"\r\n        icon=\"plus\"\r\n        onClick={handleCreateNavigation}\r\n      >\r\n        {t('create-new-navigation')}\r\n      </IconButton>\r\n      <Table />\r\n    </Space>\r\n  )\r\n}\r\n","import React, { useCallback, useEffect, useRef, useContext } from 'react'\r\nimport { Formik } from 'formik'\r\nimport { Input, Form as FormFormikAntd } from 'formik-antd'\r\nimport { FormikFormItem as Item } from 'components/FormikFormItem'\r\nimport { Button, Form as FormAntd, notification } from 'antd'\r\nimport { useTranslation } from 'react-i18next'\r\nimport { validateSchema } from 'config/yup'\r\nimport * as Yup from 'yup'\r\nimport axios, { CancelTokenSource } from 'axios'\r\nimport { navigate } from '@reach/router'\r\nimport { NavigationDetailContext } from '../'\r\nimport { NavigationsApi } from 'api/Navigations'\r\n\r\nconst { Item: ItemAntd } = FormAntd\r\n\r\nexport interface FormValues {\r\n  name?: string\r\n  path?: string\r\n}\r\n\r\nexport const FormSchema = Yup.object().shape<FormValues>({\r\n  name: Yup.string().required(),\r\n  path: Yup.string().required(),\r\n})\r\n\r\nexport const Form: React.FC = () => {\r\n  const { PUBLIC_URL } = process.env\r\n  const { t } = useTranslation('navigation-detail')\r\n  const cancelTokenRef = useRef<CancelTokenSource>(axios.CancelToken.source())\r\n  const { view, navigationId, navigation, loading, setLoading } = useContext(\r\n    NavigationDetailContext\r\n  )\r\n  const formInitialValues = navigation || {\r\n    name: undefined,\r\n    path: undefined,\r\n  }\r\n\r\n  const handleSubmit = useCallback(\r\n    async ({ name, path }: Required<FormValues>) => {\r\n      try {\r\n        setLoading(true)\r\n\r\n        const formData = new FormData()\r\n        formData.append('name', name)\r\n        formData.append('path', path)\r\n\r\n        if (view === 'new') {\r\n          const {\r\n            data: { id },\r\n          } = await NavigationsApi.createNavigation(formData, {\r\n            cancelToken: cancelTokenRef.current.token,\r\n          })\r\n\r\n          notification.success({ message: t('create-success') })\r\n          navigate(PUBLIC_URL + '/content/modules/navigations/' + id)\r\n        } else if (view === 'detail' && navigationId) {\r\n          await NavigationsApi.updateNavigation(navigationId, formData, {\r\n            cancelToken: cancelTokenRef.current.token,\r\n          })\r\n\r\n          notification.success({ message: t('update-success') })\r\n          navigate(PUBLIC_URL + '/content/modules/navigations/' + navigationId)\r\n        }\r\n      } catch (e) {\r\n        setLoading(false)\r\n      }\r\n    },\r\n    [PUBLIC_URL, view, t, navigationId, setLoading]\r\n  )\r\n\r\n  const renderForm = useCallback(\r\n    () => (\r\n      <FormFormikAntd layout=\"vertical\">\r\n        <Item label={t('form.name')} name=\"name\">\r\n          <Input name=\"name\" />\r\n        </Item>\r\n        <Item label={t('form.path')} name=\"path\">\r\n          <Input name=\"path\" />\r\n        </Item>\r\n        <ItemAntd>\r\n          <Button\r\n            htmlType=\"submit\"\r\n            type=\"primary\"\r\n            size=\"large\"\r\n            disabled={loading}\r\n          >\r\n            {t(view === 'new' ? 'form.submit.new' : 'form.submit.detail')}\r\n          </Button>\r\n        </ItemAntd>\r\n      </FormFormikAntd>\r\n    ),\r\n    [t, view, loading]\r\n  )\r\n\r\n  useEffect(() => {\r\n    const cancelToken = cancelTokenRef.current\r\n\r\n    return () => cancelToken.cancel()\r\n  }, [])\r\n\r\n  return (\r\n    <Formik<FormValues>\r\n      initialValues={formInitialValues}\r\n      enableReinitialize\r\n      validate={values => validateSchema(values, FormSchema)}\r\n      onSubmit={handleSubmit}\r\n    >\r\n      {() => renderForm()}\r\n    </Formik>\r\n  )\r\n}\r\n","import React, { useContext, useCallback } from 'react'\r\nimport { NavigationItem } from 'model/api/NavigationItem'\r\nimport { NavigationDetailContext } from '..'\r\nimport { Skeleton, Tag } from 'antd'\r\nimport styled, { css } from 'styled-components'\r\nimport { COLORS, PAGE_STATUS_COLORS } from 'constants/colors'\r\nimport { Dropdown, DropdownAction } from './Dropdown'\r\nimport { PageStatusEnum } from 'model/api/PageStatusEnum'\r\nimport { navigate } from '@reach/router'\r\n\r\ninterface ItemProps {\r\n  depth: number\r\n}\r\n\r\nconst Item = styled.div<ItemProps>`\r\n  margin-bottom: 6px;\r\n  margin-left: ${({ depth }) => (depth > 0 ? depth * 24 : 0)}px;\r\n  padding: 8px 24px;\r\n  border: 1px solid ${COLORS.gray2};\r\n  border-radius: 2px;\r\n`\r\n\r\nconst Grid = styled.div`\r\n  display: grid;\r\n  grid-gap: 12px;\r\n  grid-template-columns: auto min-content;\r\n  align-items: center;\r\n`\r\n\r\nconst Name = styled.div`\r\n  white-space: nowrap;\r\n`\r\n\r\nconst URL = styled.div<{ isPage?: boolean }>`\r\n  display: inline-block;\r\n  padding: 1px 8px 3px;\r\n  font-size: 12px;\r\n  background: ${({ isPage }) => (isPage ? COLORS.white : COLORS.gray1)};\r\n  border: 1px solid ${COLORS.gray2};\r\n  border-radius: 4px;\r\n`\r\n\r\nconst PublishedURL = styled(URL)`\r\n  background: ${({ isPage }) => (isPage ? COLORS.white : COLORS.green1)};\r\n  border: 1px solid ${COLORS.green2};\r\n`\r\n\r\nconst StyledDropdown = styled(Dropdown)`\r\n  justify-self: end;\r\n`\r\n\r\nconst Page = styled.div`\r\n  display: grid;\r\n  grid-gap: 12px;\r\n  grid-template-columns: max-content max-content max-content max-content;\r\n  width: 100%;\r\n  margin: 12px 0 6px;\r\n  padding: 6px 12px;\r\n  background: ${COLORS.gray1};\r\n  border: 1px solid ${COLORS.gray2};\r\n  border-radius: 3px;\r\n`\r\n\r\nconst TagGroup = styled.div<{ isPublished: boolean }>`\r\n  ${({ isPublished }) =>\r\n    isPublished &&\r\n    css`\r\n      display: flex;\r\n    `}\r\n\r\n  > span.ant-tag:last-child {\r\n    margin-right: 0;\r\n  }\r\n`\r\n\r\nexport const Tree: React.FC = () => {\r\n  const { PUBLIC_URL } = process.env\r\n  const { navigation, navigationId } = useContext(NavigationDetailContext)\r\n\r\n  const handleDropdownClick = useCallback(\r\n    (action: DropdownAction, id: number) => {\r\n      switch (action) {\r\n        case 'edit':\r\n          navigate(\r\n            PUBLIC_URL +\r\n              '/content/modules/navigations/' +\r\n              navigationId +\r\n              '/items/' +\r\n              id\r\n          )\r\n          break\r\n        case 'edit-mapping':\r\n          navigate(\r\n            PUBLIC_URL +\r\n              '/content/modules/navigations/' +\r\n              navigationId +\r\n              '/items/' +\r\n              id +\r\n              '/mappings'\r\n          )\r\n          break\r\n        case 'create':\r\n          navigate(\r\n            PUBLIC_URL +\r\n              '/content/modules/navigations/' +\r\n              navigationId +\r\n              '/items/new?parentId=' +\r\n              id\r\n          )\r\n          break\r\n        case 'delete':\r\n          break\r\n      }\r\n    },\r\n    [PUBLIC_URL, navigationId]\r\n  )\r\n\r\n  const renderTree = useCallback(\r\n    (children: NavigationItem[], depth: number) => {\r\n      return children.map(({ id, title, children, path, page }) => (\r\n        <>\r\n          <Item key={id} depth={depth}>\r\n            <Grid>\r\n              <Name>{title}</Name>\r\n              <StyledDropdown\r\n                onClick={action => handleDropdownClick(action, id)}\r\n                disabledActions={!page && ['edit-mapping']}\r\n              />\r\n            </Grid>\r\n            {page ? (\r\n              <>\r\n                <Page>\r\n                  <div>{page.name}</div>\r\n                  <TagGroup isPublished={!!page.is_published}>\r\n                    <Tag color={PAGE_STATUS_COLORS[page.status]}>\r\n                      {page.status}\r\n                    </Tag>\r\n                    {!!page.is_published &&\r\n                      page.status !== PageStatusEnum.PUBLISHED && (\r\n                        <Tag\r\n                          color={PAGE_STATUS_COLORS[PageStatusEnum.PUBLISHED]}\r\n                        >\r\n                          {PageStatusEnum.PUBLISHED}\r\n                        </Tag>\r\n                      )}\r\n                  </TagGroup>\r\n                  {page.status !== PageStatusEnum.PUBLISHED && (\r\n                    <URL isPage>{page.path}</URL>\r\n                  )}\r\n                  {page.published_path && (\r\n                    <PublishedURL isPage>{page.published_path}</PublishedURL>\r\n                  )}\r\n                </Page>\r\n              </>\r\n            ) : (\r\n              path && <URL>{path}</URL>\r\n            )}\r\n          </Item>\r\n          {children && (\r\n            <div key={id + '_children'}>{renderTree(children, depth + 1)}</div>\r\n          )}\r\n        </>\r\n      ))\r\n    },\r\n    [handleDropdownClick]\r\n  )\r\n\r\n  if (!navigation) return <Skeleton paragraph={{ rows: 4, width: '100%' }} />\r\n\r\n  if (!navigation.items) return null\r\n\r\n  return <>{renderTree(navigation.items, 0)}</>\r\n}\r\n","import {\r\n  Dropdown as DropdownBase,\r\n  DropdownItemProps,\r\n} from 'components/Dropdown'\r\nimport { DropdownButton } from 'components/DropdownButton'\r\nimport React, { useCallback } from 'react'\r\nimport { useTranslation } from 'react-i18next'\r\n\r\nexport type DropdownAction = 'edit' | 'edit-mapping' | 'create' | 'delete'\r\n\r\nexport interface DropdownProps {\r\n  onClick: (action: DropdownAction) => void\r\n  disabledActions?: DropdownAction[]\r\n  className?: string\r\n}\r\n\r\nexport const Dropdown: React.FC<DropdownProps> = ({ onClick, className, disabledActions }) => {\r\n  const { t } = useTranslation('navigation-detail')\r\n\r\n  const handleClick = useCallback((action: DropdownAction) => {\r\n    onClick(action)\r\n  }, [onClick])\r\n\r\n  const items: DropdownItemProps[] = [\r\n    {\r\n      children: t('items.tree.context-menu.edit'),\r\n      onClick: () => handleClick('edit'),\r\n      icon: 'pen',\r\n    },   \r\n    {\r\n      children: t('items.tree.context-menu.edit-mapping'),\r\n      onClick: () => handleClick('edit-mapping'),\r\n      icon: 'map-signs',\r\n      disabled: disabledActions && disabledActions.includes('edit-mapping')\r\n    },   \r\n    {\r\n      children: t('items.tree.context-menu.create'),\r\n      onClick: () => handleClick('create'),\r\n      icon: 'plus-square',\r\n    }, \r\n    {\r\n      children: t('items.tree.context-menu.delete'),\r\n      onClick: () => handleClick('delete'),\r\n      icon: 'trash-alt',\r\n      dialog: {\r\n        text: t('items.tree.context-menu.delete-dialog.text'),\r\n        cancel: t('items.tree.context-menu.delete-dialog.cancel'),\r\n        confirm: t('items.tree.context-menu.delete-dialog.confirm')\r\n      }\r\n    },\r\n  ]\r\n\r\n  return (\r\n    <div className={className}>\r\n      <DropdownBase items={items} data-test=\"Dropdown\">\r\n        <DropdownButton size=\"small\" />\r\n      </DropdownBase>\r\n    </div>\r\n  )\r\n}\r\n","import React, { useCallback, useContext } from 'react'\r\nimport { Typography, Divider, Space, Alert } from 'antd'\r\nimport styled from 'styled-components'\r\nimport { IconButton } from 'components/IconButton'\r\nimport { useTranslation } from 'react-i18next'\r\nimport { navigate } from '@reach/router'\r\nimport { NavigationDetailContext } from '..'\r\nimport { Tree } from './Tree'\r\n\r\nconst TitleContainer = styled.div`\r\n  display: flex;\r\n  flex-direction: row;\r\n  justify-content: space-between;\r\n`\r\n\r\nconst { Title } = Typography\r\n\r\nexport const Items: React.FC = () => {\r\n  const { PUBLIC_URL } = process.env\r\n  const { t } = useTranslation('navigation-detail')\r\n  const { navigationId } = useContext(NavigationDetailContext)\r\n\r\n  const handleCreateItem = useCallback(() => {\r\n    navigate(\r\n      PUBLIC_URL + '/content/modules/navigations/' + navigationId + '/items/new'\r\n    )\r\n  }, [PUBLIC_URL, navigationId])\r\n\r\n  return (\r\n    <>\r\n      <Divider />\r\n      <Space size=\"large\" direction=\"vertical\" style={{ width: '100%' }}>\r\n        <TitleContainer>\r\n          <Title level={3}>{t('items.title')}</Title>\r\n          <IconButton\r\n            size=\"middle\"\r\n            type=\"primary\"\r\n            icon=\"plus\"\r\n            onClick={handleCreateItem}\r\n          >\r\n            {t('items.create-new-item')}\r\n          </IconButton>\r\n        </TitleContainer>\r\n        <Alert message={t('items-info')} type=\"info\" />\r\n        <Alert message={t('items-warning')} type=\"warning\" />\r\n        <Tree />\r\n      </Space>\r\n    </>\r\n  )\r\n}\r\n","import React, {\r\n  useContext,\r\n  useEffect,\r\n  createContext,\r\n  useState,\r\n  useCallback,\r\n} from 'react'\r\nimport { RouteComponentProps } from '@reach/router'\r\nimport { useTranslation } from 'react-i18next'\r\nimport { SceneTitle } from 'components/SceneTitle'\r\nimport { AuthenticatedLayoutContext } from 'components/Layout/AuthenticatedLayout'\r\nimport { Form } from './components/Form'\r\nimport { BackButton } from 'components/BackButton'\r\nimport { Items } from './components/Items'\r\nimport { NavigationDetail as NavigationDetailInterface } from 'model/api/NavigationDetail'\r\nimport axios, { CancelToken } from 'axios'\r\nimport { NavigationsApi } from 'api/Navigations'\r\n\r\nexport interface NavigationDetailContextProps {\r\n  view: 'new' | 'detail'\r\n  navigationId: number\r\n  navigation?: NavigationDetailInterface\r\n  loading: boolean\r\n  setLoading: React.Dispatch<React.SetStateAction<boolean>>\r\n}\r\n\r\nexport const NavigationDetailContext = createContext<\r\n  NavigationDetailContextProps\r\n>({} as NavigationDetailContextProps)\r\n\r\nexport interface NavigationDetailProps extends RouteComponentProps {\r\n  navigationId?: number\r\n  view: 'new' | 'detail'\r\n}\r\n\r\nexport const NavigationDetail: React.FC<NavigationDetailProps> = ({\r\n  navigationId,\r\n  view,\r\n}) => {\r\n  const { t } = useTranslation('navigation-detail')\r\n  const { setSceneTitle } = useContext(AuthenticatedLayoutContext)\r\n  const [navigation, setNavigation] = useState<NavigationDetailInterface>()\r\n  const [loading, setLoading] = useState(false)\r\n\r\n  const getData = useCallback(\r\n    async (cancelToken: CancelToken) => {\r\n      if (view === 'detail' && navigationId) {\r\n        try {\r\n          setLoading(true)\r\n\r\n          const { data } = await NavigationsApi.getNavigation(navigationId, {\r\n            cancelToken,\r\n          })\r\n\r\n          setNavigation(data)\r\n          setLoading(false)\r\n        } catch (e) {\r\n          setLoading(false)\r\n        }\r\n      }\r\n    },\r\n    [view, navigationId]\r\n  )\r\n\r\n  useEffect(() => {\r\n    const cancelTokenSource = axios.CancelToken.source()\r\n\r\n    getData(cancelTokenSource.token)\r\n\r\n    return () => cancelTokenSource.cancel()\r\n  }, [getData])\r\n\r\n  useEffect(() => {\r\n    setSceneTitle(\r\n      <SceneTitle\r\n        title={t(view === 'detail' ? 'scene-title.detail' : 'scene-title.new')}\r\n        extraContent={\r\n          <BackButton\r\n            title={t('scene-title.back-to-navigations')}\r\n            to=\"/content/modules/navigations\"\r\n          />\r\n        }\r\n      />\r\n    )\r\n  }, [setSceneTitle, t, view])\r\n\r\n  return (\r\n    <NavigationDetailContext.Provider\r\n      value={{ view, navigationId, navigation, loading, setLoading }}\r\n    >\r\n      <Form />\r\n      {view === 'detail' && <Items />}\r\n    </NavigationDetailContext.Provider>\r\n  )\r\n}\r\n","export enum NavigationItemTargetEnum {\r\n  'BLANK' = 'BLANK',\r\n  'SELF' = 'SELF',\r\n  'TOP' = 'TOP',\r\n  'PARENT' = 'PARENT',\r\n}\r\n","import axios, { AxiosPromise } from 'axios'\r\nimport { RequestConfig } from './requestConfig'\r\nimport { NavigationItem } from 'model/api/NavigationItem'\r\n\r\nexport class NavigationsItemsApi {\r\n  /**\r\n   * Get Navigation Item\r\n   *\r\n   * @param navigationId\r\n   * @param navigationItemId\r\n   */\r\n  static getNavigationItem(\r\n    navigationId: number,\r\n    navigationItemId: number,\r\n    config?: RequestConfig\r\n  ): AxiosPromise<NavigationItem> {\r\n    return axios({\r\n      ...config,\r\n      method: 'GET',\r\n      url: `/navigations/${navigationId}/items/${navigationItemId}`,\r\n    })\r\n  }\r\n\r\n  /**\r\n   * Create Navigation Item\r\n   *\r\n   * @param navigationId\r\n   * @param data\r\n   */\r\n  static createNavigationItem(\r\n    navigationId: number,\r\n    data: FormData,\r\n    config?: RequestConfig\r\n  ): AxiosPromise<{ id: number }> {\r\n    return axios({\r\n      ...config,\r\n      method: 'POST',\r\n      url: `/navigations/${navigationId}/items`,\r\n      data,\r\n    })\r\n  }\r\n\r\n  /**\r\n   * Update Navigation Item\r\n   *\r\n   * @param navigationId\r\n   * @param navigationItemId\r\n   * @param data\r\n   */\r\n  static updateNavigationItem(\r\n    navigationId: number,\r\n    navigationItemId: number,\r\n    data: FormData,\r\n    config?: RequestConfig\r\n  ): AxiosPromise {\r\n    return axios({\r\n      ...config,\r\n      method: 'PUT',\r\n      url: `/navigations/${navigationId}/items/${navigationItemId}`,\r\n      data,\r\n    })\r\n  }\r\n\r\n  /**\r\n   * Delete Navigation\r\n   *\r\n   * @param navigationId\r\n   * @param navigationItemId\r\n   */\r\n  static deleteNavigationItem(\r\n    navigationId: number,\r\n    navigationItemId: number,\r\n    config?: RequestConfig\r\n  ): AxiosPromise {\r\n    return axios({\r\n      ...config,\r\n      method: 'DELETE',\r\n      url: `/navigations/${navigationId}/items/${navigationItemId}`,\r\n    })\r\n  }\r\n}\r\n","import { Page } from 'model/api/Page'\r\nimport mapObject from 'map-obj'\r\nimport { NavigationItem } from 'model/api/NavigationItem'\r\n\r\nexport interface MappedNavigationItem\r\n  extends Omit<Page, 'id' | 'title' | 'children'> {\r\n  value: string | null\r\n  title: string\r\n  disabled?: boolean\r\n  children?: MappedNavigationItem[]\r\n}\r\n\r\nexport const mapNavigationItems = (\r\n  data: NavigationItem[],\r\n) => {\r\n  const mappedNavigationItems = (mapObject(\r\n    data,\r\n    (key: any, value: any) => {\r\n      switch (key) {\r\n        case 'id':\r\n          return ['value', value]\r\n        case 'children':\r\n        default:\r\n          return [key, value]\r\n      }\r\n    },\r\n    { deep: true }\r\n  ) as unknown) as MappedNavigationItem[]\r\n\r\n  return mappedNavigationItems\r\n}\r\n","/**\r\n * Expands tree by object or array when property and value equals\r\n *\r\n * @param data\r\n * @param childrenProperty\r\n * @param property\r\n * @param value\r\n * @param expandBy\r\n * \r\n * In case the condition is met on parent object, expand all its children as well\r\n * @param expandSubTree \r\n * \r\n * @param subTreeExpandable\r\n * @returns array\r\n */\r\nexport const expandTree = <T>(\r\n  data: T[],\r\n  childrenProperty: string,\r\n  property: string,\r\n  value: any,\r\n  expandBy: any,\r\n  expandSubTree?: boolean,\r\n  subTreeExpandable?: boolean\r\n): T[] =>\r\n  data.map(item => {\r\n    let newItem = item\r\n\r\n    if (newItem[property] === value || subTreeExpandable) {\r\n      newItem = {\r\n        ...newItem,\r\n        ...expandBy,\r\n      }\r\n    }\r\n\r\n    if (newItem[childrenProperty]) {\r\n      return {\r\n        ...newItem,\r\n        [childrenProperty]: expandTree(\r\n          newItem[childrenProperty],\r\n          childrenProperty,\r\n          property,\r\n          value,\r\n          expandBy,\r\n          expandSubTree,\r\n          subTreeExpandable || newItem[property] === value\r\n        ),\r\n      }\r\n    } else {\r\n      return newItem\r\n    }\r\n  })\r\n","import React, { useCallback, useState, useEffect, useRef } from 'react'\r\nimport { Formik } from 'formik'\r\nimport { Input, Form as FormFormikAntd, TreeSelect, Select } from 'formik-antd'\r\nimport { FormikFormItem as Item } from 'components/FormikFormItem'\r\nimport { Button, Form as FormAntd, notification } from 'antd'\r\nimport { useTranslation } from 'react-i18next'\r\nimport { validateSchema } from 'config/yup'\r\nimport * as Yup from 'yup'\r\nimport axios, { CancelToken, CancelTokenSource } from 'axios'\r\nimport { navigate } from '@reach/router'\r\nimport { NavigationItemTargetEnum } from 'model/api/NavigationItemTargetEnum'\r\nimport { NavigationsItemsApi } from 'api/NavigationItems'\r\nimport { NavigationItem } from 'model/api/NavigationItem'\r\nimport { NavigationsApi } from 'api/Navigations'\r\nimport {\r\n  mapNavigationItems,\r\n  MappedNavigationItem,\r\n} from 'mappers/mapNavigationItems'\r\nimport { PagesApi } from 'api/Pages'\r\nimport { mapPages, MappedPage } from 'mappers/mapPages'\r\nimport { expandTree } from 'utils/expandTree'\r\n\r\nconst { Item: ItemAntd } = FormAntd\r\nconst { Option } = Select\r\n\r\nexport interface FormValues {\r\n  parent_id?: number | null\r\n  title?: string\r\n  page_identifier: string | null\r\n  path?: string\r\n  target?: NavigationItemTargetEnum\r\n  html_class_name?: string\r\n  html_id?: string\r\n  weight?: number\r\n}\r\n\r\nexport const FormSchema = Yup.object().shape<FormValues>({\r\n  parent_id: Yup.number()\r\n    .nullable()\r\n    .notRequired(),\r\n  title: Yup.string().required(),\r\n  page_identifier: Yup.string()\r\n    .nullable()\r\n    .notRequired(),\r\n  path: Yup.string()\r\n    .nullable()\r\n    .notRequired(),\r\n  target: Yup.mixed().required(),\r\n  html_class_name: Yup.string()\r\n    .nullable()\r\n    .notRequired(),\r\n  html_id: Yup.string()\r\n    .nullable()\r\n    .notRequired(),\r\n  weight: Yup.number().required(),\r\n})\r\n\r\nexport interface FormProps {\r\n  parentId?: number\r\n  navigationId: number\r\n  navigationItemId?: number\r\n  view: 'new' | 'detail'\r\n}\r\n\r\nexport const Form: React.FC<FormProps> = ({\r\n  parentId,\r\n  navigationId,\r\n  navigationItemId,\r\n  view,\r\n}) => {\r\n  const { PUBLIC_URL } = process.env\r\n  const { t } = useTranslation('view-detail')\r\n  const [data, setData] = useState<NavigationItem>()\r\n  const [pages, setPages] = useState<MappedPage[]>([])\r\n  const [navigationItems, setNavigationItems] = useState<\r\n    MappedNavigationItem[]\r\n  >([])\r\n  const [loading, setLoading] = useState(false)\r\n  const cancelTokenRef = useRef<CancelTokenSource>(axios.CancelToken.source())\r\n  const formInitialValues = data || {\r\n    parent_id: parentId || undefined,\r\n    title: undefined,\r\n    page_identifier: undefined,\r\n    path: undefined,\r\n    target: NavigationItemTargetEnum.SELF,\r\n    html_class_name: undefined,\r\n    html_id: undefined,\r\n    weight: 50,\r\n  }\r\n\r\n  const getNavigationItems = useCallback(\r\n    async (cancelToken: CancelToken) => {\r\n      setLoading(true)\r\n      const {\r\n        data: { items },\r\n      } = await NavigationsApi.getNavigation(navigationId, {\r\n        cancelToken,\r\n      })\r\n\r\n      if (!!items) {\r\n        if (view === 'detail') {\r\n          const mappedNavigationItems = mapNavigationItems(items)\r\n\r\n          const expandedItems = expandTree<MappedNavigationItem>(\r\n            mappedNavigationItems,\r\n            'children',\r\n            'value',\r\n            Number(navigationItemId),\r\n            { disabled: true },\r\n            true\r\n          )\r\n\r\n          setNavigationItems(expandedItems)\r\n        } else {\r\n          setNavigationItems(mapNavigationItems(items))\r\n        }\r\n      }\r\n      setLoading(false)\r\n    },\r\n    [navigationId, view, navigationItemId]\r\n  )\r\n\r\n  const getPages = useCallback(async (cancelToken: CancelToken) => {\r\n    setLoading(true)\r\n    const { data } = await PagesApi.getAllPages({\r\n      cancelToken,\r\n    })\r\n\r\n    setPages(mapPages(data))\r\n    setLoading(false)\r\n  }, [])\r\n\r\n  const getData = useCallback(\r\n    async (cancelToken: CancelToken) => {\r\n      if (view === 'detail' && navigationId && navigationItemId) {\r\n        try {\r\n          setLoading(true)\r\n\r\n          const { data } = await NavigationsItemsApi.getNavigationItem(\r\n            navigationId,\r\n            navigationItemId,\r\n            {\r\n              cancelToken,\r\n            }\r\n          )\r\n\r\n          setData(data)\r\n          setLoading(false)\r\n        } catch (e) {\r\n          setLoading(false)\r\n        }\r\n      }\r\n    },\r\n    [view, navigationId, navigationItemId]\r\n  )\r\n\r\n  const handleSubmit = useCallback(\r\n    async ({\r\n      parent_id,\r\n      title,\r\n      page_identifier,\r\n      path,\r\n      target,\r\n      html_class_name,\r\n      html_id,\r\n      weight,\r\n    }: Required<FormValues>) => {\r\n      try {\r\n        setLoading(true)\r\n\r\n        const formData = new FormData()\r\n\r\n        formData.append(\r\n          'parent_id',\r\n          parent_id && parent_id !== 0 ? String(parent_id) : ''\r\n        )\r\n        formData.append('title', title)\r\n        formData.append(\r\n          'page_identifier',\r\n          page_identifier ? page_identifier : ''\r\n        )\r\n        formData.append('path', path ? path : '')\r\n        formData.append('target', target)\r\n        formData.append(\r\n          'html_class_name',\r\n          html_class_name ? html_class_name : ''\r\n        )\r\n        formData.append('html_id', html_id ? html_id : '')\r\n        formData.append('weight', String(weight))\r\n\r\n        if (view === 'new') {\r\n          await NavigationsItemsApi.createNavigationItem(\r\n            navigationId,\r\n            formData,\r\n            {\r\n              cancelToken: cancelTokenRef.current.token,\r\n            }\r\n          )\r\n\r\n          notification.success({ message: t('create-success') })\r\n          navigate(PUBLIC_URL + '/content/modules/navigations/' + navigationId)\r\n        } else if (view === 'detail' && navigationItemId) {\r\n          await NavigationsItemsApi.updateNavigationItem(\r\n            navigationId,\r\n            navigationItemId,\r\n            formData,\r\n            {\r\n              cancelToken: cancelTokenRef.current.token,\r\n            }\r\n          )\r\n\r\n          notification.success({ message: t('update-success') })\r\n          navigate(PUBLIC_URL + '/content/modules/navigations/' + navigationId)\r\n        }\r\n      } catch (e) {\r\n        setLoading(false)\r\n      }\r\n    },\r\n    [PUBLIC_URL, view, t, navigationId, navigationItemId]\r\n  )\r\n\r\n  const renderForm = useCallback(\r\n    () => (\r\n      <FormFormikAntd layout=\"vertical\">\r\n        <Item label={t('form.parent-id')} name=\"parent_id\">\r\n          {navigationItems && !loading ? (\r\n            <TreeSelect\r\n              treeData={navigationItems}\r\n              name=\"parent_id\"\r\n              allowClear\r\n              showArrow\r\n              showSearch\r\n              filterTreeNode\r\n              treeDefaultExpandAll\r\n              treeNodeFilterProp=\"title\"\r\n            />\r\n          ) : (\r\n            <Input name=\"parent_id\" disabled />\r\n          )}\r\n        </Item>\r\n        <Item label={t('form.title')} name=\"title\">\r\n          <Input name=\"title\" />\r\n        </Item>\r\n        <Item label={t('form.page-identifier')} name=\"page_identifier\">\r\n          {pages && !loading ? (\r\n            <TreeSelect\r\n              treeData={pages}\r\n              name=\"page_identifier\"\r\n              allowClear\r\n              showArrow\r\n              showSearch\r\n              filterTreeNode\r\n              treeDefaultExpandAll\r\n              treeNodeFilterProp=\"title\"\r\n            />\r\n          ) : (\r\n            <Input name=\"page_identifier\" disabled />\r\n          )}\r\n        </Item>\r\n        <Item label={t('form.path')} name=\"path\">\r\n          <Input name=\"path\" />\r\n        </Item>\r\n        <Item label={t('form.target')} name=\"target\">\r\n          <Select name=\"target\">\r\n            {Object.values(NavigationItemTargetEnum).map(value => (\r\n              <Option value={value} key={value}>\r\n                {value}\r\n              </Option>\r\n            ))}\r\n          </Select>\r\n        </Item>\r\n        <Item label={t('form.html-class-name')} name=\"html_class_name\">\r\n          <Input name=\"html_class_name\" />\r\n        </Item>\r\n        <Item label={t('form.html-id')} name=\"html_id\">\r\n          <Input name=\"html_id\" />\r\n        </Item>\r\n        <Item label={t('form.weight')} name=\"weight\">\r\n          <Input name=\"weight\" type=\"number\" />\r\n        </Item>\r\n        <ItemAntd>\r\n          <Button\r\n            htmlType=\"submit\"\r\n            type=\"primary\"\r\n            size=\"large\"\r\n            disabled={loading}\r\n          >\r\n            {t(view === 'new' ? 'form.submit.new' : 'form.submit.detail')}\r\n          </Button>\r\n        </ItemAntd>\r\n      </FormFormikAntd>\r\n    ),\r\n    [t, view, loading, navigationItems, pages]\r\n  )\r\n\r\n  useEffect(() => {\r\n    const cancelTokenSource = axios.CancelToken.source()\r\n\r\n    getData(cancelTokenSource.token)\r\n    getNavigationItems(cancelTokenSource.token)\r\n    getPages(cancelTokenSource.token)\r\n\r\n    return () => cancelTokenSource.cancel()\r\n  }, [getData, getNavigationItems, getPages])\r\n\r\n  useEffect(() => {\r\n    const cancelToken = cancelTokenRef.current\r\n\r\n    return () => cancelToken.cancel()\r\n  }, [])\r\n\r\n  return (\r\n    <Formik<FormValues>\r\n      initialValues={formInitialValues}\r\n      enableReinitialize\r\n      validate={values => validateSchema(values, FormSchema)}\r\n      onSubmit={handleSubmit}\r\n    >\r\n      {() => renderForm()}\r\n    </Formik>\r\n  )\r\n}\r\n","import React, { useContext, useEffect } from 'react'\r\nimport { RouteComponentProps } from '@reach/router'\r\nimport { useTranslation } from 'react-i18next'\r\nimport { SceneTitle } from 'components/SceneTitle'\r\nimport { AuthenticatedLayoutContext } from 'components/Layout/AuthenticatedLayout'\r\nimport { Form } from './components/Form'\r\nimport { BackButton } from 'components/BackButton'\r\nimport { parse } from 'query-string'\r\n\r\nexport interface NavigationItemDetailProps extends RouteComponentProps {\r\n  navigationItemId?: number\r\n  navigationId?: number\r\n  view: 'new' | 'detail'\r\n}\r\n\r\nexport const NavigationItemDetail: React.FC<NavigationItemDetailProps> = ({\r\n  navigationId,\r\n  navigationItemId,\r\n  view,\r\n  location,\r\n}) => {\r\n  const { t } = useTranslation('navigation-item-detail')\r\n  const { setSceneTitle } = useContext(AuthenticatedLayoutContext)\r\n  const { parentId } = parse(location.search)\r\n\r\n  useEffect(() => {\r\n    setSceneTitle(\r\n      <SceneTitle\r\n        title={t(view === 'detail' ? 'scene-title.detail' : 'scene-title.new')}\r\n        extraContent={\r\n          <BackButton\r\n            title={t('scene-title.back-to-views')}\r\n            to={`/content/modules/navigations/${navigationId}`}\r\n          />\r\n        }\r\n      />\r\n    )\r\n  }, [setSceneTitle, t, view, navigationId])\r\n\r\n  return (\r\n    <Form\r\n      parentId={parentId ? Number(parentId) : undefined}\r\n      navigationId={navigationId}\r\n      navigationItemId={navigationItemId}\r\n      view={view}\r\n    />\r\n  )\r\n}\r\n","import {\r\n  Dropdown as DropdownBase,\r\n  DropdownItemProps,\r\n} from 'components/Dropdown'\r\nimport { DropdownButton } from 'components/DropdownButton'\r\nimport React, { useCallback } from 'react'\r\nimport { useTranslation } from 'react-i18next'\r\n\r\nexport type DropdownAction = 'edit' | 'delete'\r\n\r\nexport interface DropdownProps {\r\n  onClick: (action: DropdownAction) => void\r\n  disabledActions?: DropdownAction[]\r\n}\r\n\r\nexport const Dropdown: React.FC<DropdownProps> = ({ onClick }) => {\r\n  const { t } = useTranslation('navigation-item-variable-mapping')\r\n\r\n  const handleClick = useCallback((action: DropdownAction) => {\r\n    onClick(action)\r\n  }, [onClick])\r\n\r\n  const items: DropdownItemProps[] = [\r\n    {\r\n      children: t('table.context-menu.edit'),\r\n      onClick: () => handleClick('edit'),\r\n      icon: 'pen',\r\n    },   \r\n    {\r\n      children: t('table.context-menu.delete'),\r\n      onClick: () => handleClick('delete'),\r\n      icon: 'trash-alt',\r\n      dialog: {\r\n        text: t('table.context-menu.delete-dialog.text'),\r\n        cancel: t('table.context-menu.delete-dialog.cancel'),\r\n        confirm: t('table.context-menu.delete-dialog.confirm')\r\n      }\r\n    },\r\n  ]\r\n\r\n  return (\r\n    <div>\r\n      <DropdownBase items={items} data-test=\"Dropdown\">\r\n        <DropdownButton size=\"small\" />\r\n      </DropdownBase>\r\n    </div>\r\n  )\r\n}\r\n","import React from 'react'\r\nimport { ColumnProps } from 'antd/es/table'\r\nimport { MappedNavigationItemVariableMapping } from './mapNavigationItemVariableMappings'\r\nimport i18next from 'i18next'\r\nimport { DropdownAction, Dropdown } from '../components/Dropdown'\r\n\r\nexport const getNavigationItemVariableMappingsColumns = (\r\n  t: i18next.TFunction,\r\n  onClick?: (action: DropdownAction, viewId: number) => void\r\n): ColumnProps<any>[] => [\r\n  {\r\n    key: 'id',\r\n    dataIndex: 'id',\r\n    title: t('table.columns.id'),\r\n    width: 100,\r\n  },\r\n  {\r\n    key: 'variable_name',\r\n    dataIndex: 'variable_name',\r\n    title: t('table.columns.variable-name'),\r\n    width: 200,\r\n  },\r\n  {\r\n    key: 'value',\r\n    dataIndex: 'value',\r\n    title: t('table.columns.value'),\r\n  },\r\n  {\r\n    key: 'context_menu',\r\n    dataIndex: 'context_menu',\r\n    width: 60,\r\n    render: (_, { id }: MappedNavigationItemVariableMapping) => (\r\n      <Dropdown\r\n        onClick={(action: DropdownAction) => onClick && onClick(action, id)}\r\n      />\r\n    ),\r\n    fixed: 'right',\r\n  },\r\n]\r\n","import { NavigationItemVariableMapping } from 'model/api/NavigationItemVariableMapping'\r\n\r\nexport interface MappedNavigationItemVariableMapping {\r\n  key: string\r\n  id: number\r\n  variable_name: string\r\n  value: string\r\n}\r\n\r\nexport const mapNavigationItemVariableMapping = (\r\n  data: NavigationItemVariableMapping[]\r\n): MappedNavigationItemVariableMapping[] =>\r\n  data.map(({ id, variable_name, value }) => ({\r\n    key: String(id),\r\n    id,\r\n    variable_name,\r\n    value,\r\n  }))\r\n","import axios, { AxiosPromise } from 'axios'\r\nimport { RequestConfig } from './requestConfig'\r\nimport { PaginatedList } from 'model/api/PaginatedList'\r\nimport { NavigationItemVariableMapping } from 'model/api/NavigationItemVariableMapping'\r\n\r\nexport class NavigationsItemVariableMappingsApi {\r\n  /**\r\n   * Get Navigation Item Variable Mappings\r\n   *\r\n   * @param navigationId\r\n   * @param navigationItemId\r\n   * @param page\r\n   * @param pageSize\r\n   */\r\n  static getNavigationItemVariableMappings(\r\n    navigationId: number,\r\n    navigationItemId: number,\r\n    page?: number,\r\n    pageSize?: number,\r\n    config?: RequestConfig\r\n  ): AxiosPromise<PaginatedList<NavigationItemVariableMapping>> {\r\n    return axios({\r\n      ...config,\r\n      method: 'GET',\r\n      url: `/navigations/${navigationId}/items/${navigationItemId}/mappings`,\r\n      params: {\r\n        page,\r\n        per_page: pageSize,\r\n      },\r\n    })\r\n  }\r\n\r\n  /**\r\n   * Get Navigation Item Variable Mapping\r\n   *\r\n   * @param navigationId\r\n   * @param navigationItemId\r\n   * @param navigationItemVariableMappingId\r\n   */\r\n  static getNavigationItemVariableMapping(\r\n    navigationId: number,\r\n    navigationItemId: number,\r\n    navigationItemVariableMappingId: number,\r\n    config?: RequestConfig\r\n  ): AxiosPromise<NavigationItemVariableMapping> {\r\n    return axios({\r\n      ...config,\r\n      method: 'GET',\r\n      url: `/navigations/${navigationId}/items/${navigationItemId}/mappings/${navigationItemVariableMappingId}`,\r\n    })\r\n  }\r\n\r\n  /**\r\n   * Create Navigation Item Variable Mapping\r\n   *\r\n   * @param navigationId\r\n   * @param navigationItemId\r\n   * @param data\r\n   */\r\n  static createNavigationItemVariableMapping(\r\n    navigationId: number,\r\n    navigationItemId: number,\r\n    data: FormData,\r\n    config?: RequestConfig\r\n  ): AxiosPromise<{ id: number }> {\r\n    return axios({\r\n      ...config,\r\n      method: 'POST',\r\n      url: `/navigations/${navigationId}/items/${navigationItemId}/mappings`,\r\n      data,\r\n    })\r\n  }\r\n\r\n  /**\r\n   * Update Navigation Item Variable Mapping\r\n   *\r\n   * @param navigationId\r\n   * @param navigationItemId\r\n   * @param navigationItemVariableMappingId\r\n   * @param data\r\n   */\r\n  static updateNavigationItemVariableMapping(\r\n    navigationId: number,\r\n    navigationItemId: number,\r\n    navigationItemVariableMappingId: number,\r\n    data: FormData,\r\n    config?: RequestConfig\r\n  ): AxiosPromise {\r\n    return axios({\r\n      ...config,\r\n      method: 'PUT',\r\n      url: `/navigations/${navigationId}/items/${navigationItemId}/mappings/${navigationItemVariableMappingId}`,\r\n      data,\r\n    })\r\n  }\r\n\r\n  /**\r\n   * Delete Navigation Item Variable Mapping\r\n   *\r\n   * @param navigationId\r\n   * @param navigationItemId\r\n   * @param navigationItemVariableMappingId\r\n   */\r\n  static deleteNavigationItemVariableMapping(\r\n    navigationId: number,\r\n    navigationItemId: number,\r\n    navigationItemVariableMappingId: number,\r\n    config?: RequestConfig\r\n  ): AxiosPromise {\r\n    return axios({\r\n      ...config,\r\n      method: 'DELETE',\r\n      url: `/navigations/${navigationId}/items/${navigationItemId}/mappings/${navigationItemVariableMappingId}`,\r\n    })\r\n  }\r\n}\r\n","import React, { useCallback, useState, useEffect, useRef } from 'react'\r\nimport { Table as TableBase } from 'components/Table'\r\nimport axios, { CancelTokenSource } from 'axios'\r\nimport { useTranslation } from 'react-i18next'\r\nimport { DropdownAction } from './Dropdown'\r\nimport { navigate } from '@reach/router'\r\nimport { notification } from 'antd'\r\nimport { getNavigationItemVariableMappingsColumns } from '../utils/getNavigationItemVariableMappingsColumns'\r\nimport {\r\n  mapNavigationItemVariableMapping,\r\n  MappedNavigationItemVariableMapping,\r\n} from '../utils/mapNavigationItemVariableMappings'\r\nimport { NavigationsItemVariableMappingsApi } from 'api/NavigationItemVariableMappings'\r\n\r\nexport interface TableProps {\r\n  navigationId: number\r\n  navigationItemId: number\r\n}\r\n\r\nexport const Table: React.FC<TableProps> = ({\r\n  navigationId,\r\n  navigationItemId,\r\n}) => {\r\n  const { PUBLIC_URL } = process.env\r\n  const { t } = useTranslation('views')\r\n  const [data, setData] = useState<MappedNavigationItemVariableMapping[]>([])\r\n  const [loading, setLoading] = useState(false)\r\n  const [total, setTotal] = useState(0)\r\n  const [page, setPage] = useState(1)\r\n  const [pageSize, setPageSize] = useState(0)\r\n  const cancelTokenRef = useRef<CancelTokenSource>(axios.CancelToken.source())\r\n\r\n  const getData = useCallback(async () => {\r\n    setLoading(true)\r\n\r\n    const {\r\n      data: { data, total, per_page },\r\n    } = await NavigationsItemVariableMappingsApi.getNavigationItemVariableMappings(\r\n      navigationId,\r\n      navigationItemId,\r\n      page,\r\n      pageSize,\r\n      {\r\n        cancelToken: cancelTokenRef.current.token,\r\n      }\r\n    )\r\n\r\n    setData(mapNavigationItemVariableMapping(data))\r\n    setTotal(total)\r\n    setPageSize(per_page)\r\n    setLoading(false)\r\n  }, [page, pageSize, navigationId, navigationItemId])\r\n\r\n  const handleActionClick = useCallback(\r\n    async (action: DropdownAction, variableMappindId: number) => {\r\n      switch (action) {\r\n        case 'edit':\r\n          navigate(\r\n            PUBLIC_URL +\r\n              '/content/modules/navigations/' +\r\n              navigationId +\r\n              '/items/' +\r\n              navigationItemId +\r\n              '/mappings/' +\r\n              variableMappindId\r\n          )\r\n          break\r\n        case 'delete':\r\n          try {\r\n            await NavigationsItemVariableMappingsApi.deleteNavigationItemVariableMapping(\r\n              navigationId,\r\n              navigationItemId,\r\n              variableMappindId,\r\n              {\r\n                cancelToken: cancelTokenRef.current.token,\r\n              }\r\n            )\r\n\r\n            notification.success({\r\n              message: t('table.delete-success'),\r\n            })\r\n\r\n            getData()\r\n          } catch (e) {}\r\n          break\r\n        default:\r\n          break\r\n      }\r\n    },\r\n    [PUBLIC_URL, getData, t, navigationId, navigationItemId]\r\n  )\r\n\r\n  const handlePageChange = useCallback((page: number) => {\r\n    setPage(page)\r\n  }, [])\r\n\r\n  useEffect(() => {\r\n    getData()\r\n  }, [getData])\r\n\r\n  useEffect(() => {\r\n    const cancelToken = cancelTokenRef.current\r\n\r\n    return () => cancelToken.cancel()\r\n  }, [])\r\n\r\n  return (\r\n    <TableBase\r\n      columns={getNavigationItemVariableMappingsColumns(t, handleActionClick)}\r\n      dataSource={data}\r\n      loading={loading}\r\n      pagination={{\r\n        current: page,\r\n        pageSize,\r\n        total,\r\n        onChange: handlePageChange,\r\n      }}\r\n    />\r\n  )\r\n}\r\n","import React, { useCallback, useState, useEffect } from 'react'\r\nimport styled from 'styled-components'\r\nimport { Info, InfoItemProps } from 'components/Info'\r\nimport { useTranslation } from 'react-i18next'\r\nimport { NavigationItem } from 'model/api/NavigationItem'\r\nimport axios, { CancelToken } from 'axios'\r\nimport { NavigationsItemsApi } from 'api/NavigationItems'\r\nimport { Tag } from 'antd'\r\nimport { PAGE_STATUS_COLORS } from 'constants/colors'\r\nimport { PageStatusEnum } from 'model/api/PageStatusEnum'\r\n\r\nconst StyledInfo = styled(Info)`\r\n  margin-bottom: 24px;\r\n`\r\n\r\nexport interface DetailInfoProps {\r\n  navigationId: number\r\n  navigationItemId: number\r\n}\r\n\r\nexport const DetailInfo: React.FC<DetailInfoProps> = ({\r\n  navigationId,\r\n  navigationItemId,\r\n}) => {\r\n  const { t } = useTranslation('navigation-item-variable-mappings')\r\n  const [navigationItem, setNavigationItem] = useState<NavigationItem>()\r\n\r\n  const getNavigationItem = useCallback(\r\n    async (cancelToken: CancelToken) => {\r\n      const { data } = await NavigationsItemsApi.getNavigationItem(\r\n        navigationId,\r\n        navigationItemId,\r\n        {\r\n          cancelToken,\r\n        }\r\n      )\r\n\r\n      setNavigationItem(data)\r\n    },\r\n    [navigationId, navigationItemId]\r\n  )\r\n\r\n  const getItems = useCallback((): InfoItemProps[] => {\r\n    if (!!navigationItem) {\r\n      const { title, path, page } = navigationItem\r\n      return [\r\n        {\r\n          key: 'title',\r\n          label: t('info.title'),\r\n          value: title,\r\n        },\r\n        {\r\n          key: 'path',\r\n          label: t('info.path'),\r\n          value: path ? path : '-',\r\n        },\r\n        {\r\n          key: 'page',\r\n          label: t('info.page'),\r\n          value: page ? page.name : '-',\r\n        },\r\n        {\r\n          key: 'page-status',\r\n          label: t('info.page-status'),\r\n          value: page ? (\r\n            <>\r\n              <Tag color={PAGE_STATUS_COLORS[page.status]}>{page.status}</Tag>\r\n              {page.is_published &&\r\n                page.status !== PageStatusEnum.PUBLISHED && (\r\n                  <Tag color={PAGE_STATUS_COLORS[PageStatusEnum.PUBLISHED]}>\r\n                    {PageStatusEnum.PUBLISHED}\r\n                  </Tag>\r\n                )}\r\n            </>\r\n          ) : (\r\n            '-'\r\n          ),\r\n        },\r\n        {\r\n          key: 'page-path',\r\n          label: t('info.page-path'),\r\n          value: page ? page.path : '-',\r\n        },\r\n        {\r\n          key: 'page-published-path',\r\n          label: t('info.page-published-path'),\r\n          value: page ? page.published_path : '-',\r\n        },\r\n      ]\r\n    } else {\r\n      return []\r\n    }\r\n  }, [navigationItem, t])\r\n\r\n  useEffect(() => {\r\n    const cancelTokenSource = axios.CancelToken.source()\r\n\r\n    getNavigationItem(cancelTokenSource.token)\r\n\r\n    return () => cancelTokenSource.cancel()\r\n  }, [getNavigationItem])\r\n\r\n  return <StyledInfo loading={!navigationItem} items={getItems()} />\r\n}\r\n","import React, { useContext, useEffect, useCallback } from 'react'\r\nimport { RouteComponentProps, navigate } from '@reach/router'\r\nimport { useTranslation } from 'react-i18next'\r\nimport { SceneTitle } from 'components/SceneTitle'\r\nimport { AuthenticatedLayoutContext } from 'components/Layout/AuthenticatedLayout'\r\nimport { Table } from './components/Table'\r\nimport { Space } from 'antd'\r\nimport { IconButton } from 'components/IconButton'\r\nimport { DetailInfo } from './components/DetailInfo'\r\nimport { BackButton } from 'components/BackButton'\r\n\r\nexport interface NavigationItemsVariableMappingsProps\r\n  extends RouteComponentProps {\r\n  navigationId?: number\r\n  navigationItemId?: number\r\n}\r\n\r\nexport const NavigationItemsVariableMappings: React.FC<NavigationItemsVariableMappingsProps> = ({\r\n  navigationId,\r\n  navigationItemId,\r\n}) => {\r\n  const { PUBLIC_URL } = process.env\r\n  const { t } = useTranslation('navigation-item-variable-mappings')\r\n\r\n  const { setSceneTitle } = useContext(AuthenticatedLayoutContext)\r\n\r\n  const handleCreateMapping = useCallback(() => {\r\n    navigate(\r\n      PUBLIC_URL +\r\n        '/content/modules/navigations/' +\r\n        navigationId +\r\n        '/items/' +\r\n        navigationItemId +\r\n        '/mappings/new'\r\n    )\r\n  }, [PUBLIC_URL, navigationId, navigationItemId])\r\n\r\n  useEffect(() => {\r\n    setSceneTitle(\r\n      <SceneTitle\r\n        title={t('scene-title')}\r\n        extraContent={\r\n          <BackButton\r\n            title={t('scene-title.back-to-navigation-detail')}\r\n            to={`/content/modules/navigations/${navigationId}`}\r\n          />\r\n        }\r\n      />\r\n    )\r\n  }, [setSceneTitle, t, navigationId])\r\n\r\n  return (\r\n    <Space size=\"large\" direction=\"vertical\" style={{ width: '100%' }}>\r\n      <IconButton\r\n        size=\"middle\"\r\n        type=\"primary\"\r\n        icon=\"plus\"\r\n        onClick={handleCreateMapping}\r\n      >\r\n        {t('create-new-variable-mapping')}\r\n      </IconButton>\r\n      <DetailInfo\r\n        navigationId={navigationId}\r\n        navigationItemId={navigationItemId}\r\n      />\r\n      <Table navigationId={navigationId} navigationItemId={navigationItemId} />\r\n    </Space>\r\n  )\r\n}\r\n","import React, { useCallback, useState, useEffect, useRef } from 'react'\r\nimport { Formik } from 'formik'\r\nimport { Input, Form as FormFormikAntd } from 'formik-antd'\r\nimport { FormikFormItem as Item } from 'components/FormikFormItem'\r\nimport { Button, Form as FormAntd, notification } from 'antd'\r\nimport { useTranslation } from 'react-i18next'\r\nimport { validateSchema } from 'config/yup'\r\nimport * as Yup from 'yup'\r\nimport axios, { CancelToken, CancelTokenSource } from 'axios'\r\nimport { navigate } from '@reach/router'\r\nimport { NavigationsItemVariableMappingsApi } from 'api/NavigationItemVariableMappings'\r\nimport { NavigationItemVariableMapping } from 'model/api/NavigationItemVariableMapping'\r\n\r\nconst { Item: ItemAntd } = FormAntd\r\n\r\nexport interface FormValues {\r\n  variable_name?: string\r\n  value?: string\r\n}\r\n\r\nexport const FormSchema = Yup.object().shape<FormValues>({\r\n  variable_name: Yup.string().required(),\r\n  value: Yup.string().required(),\r\n})\r\n\r\nexport interface FormProps {\r\n  navigationId: number\r\n  navigationItemId: number\r\n  navigationItemVariableMappingId?: number\r\n  view: 'new' | 'detail'\r\n}\r\n\r\nexport const Form: React.FC<FormProps> = ({\r\n  navigationId,\r\n  navigationItemId,\r\n  navigationItemVariableMappingId,\r\n  view,\r\n}) => {\r\n  const { PUBLIC_URL } = process.env\r\n  const { t } = useTranslation('navigation-item-variable-item-mapping-detail')\r\n  const [data, setData] = useState<NavigationItemVariableMapping>()\r\n  const [loading, setLoading] = useState(false)\r\n  const cancelTokenRef = useRef<CancelTokenSource>(axios.CancelToken.source())\r\n  const formInitialValues = data || {\r\n    variable_name: undefined,\r\n    value: undefined,\r\n  }\r\n\r\n  const getData = useCallback(\r\n    async (cancelToken: CancelToken) => {\r\n      if (view === 'detail' && navigationItemVariableMappingId) {\r\n        try {\r\n          setLoading(true)\r\n\r\n          const {\r\n            data,\r\n          } = await NavigationsItemVariableMappingsApi.getNavigationItemVariableMapping(\r\n            navigationId,\r\n            navigationItemId,\r\n            navigationItemVariableMappingId,\r\n            {\r\n              cancelToken,\r\n            }\r\n          )\r\n\r\n          setData(data)\r\n          setLoading(false)\r\n        } catch (e) {\r\n          setLoading(false)\r\n        }\r\n      }\r\n    },\r\n    [view, navigationId, navigationItemId, navigationItemVariableMappingId]\r\n  )\r\n\r\n  const handleSubmit = useCallback(\r\n    async ({ variable_name, value }: Required<FormValues>) => {\r\n      try {\r\n        setLoading(true)\r\n\r\n        const formData = new FormData()\r\n        formData.append('variable_name', variable_name)\r\n        formData.append('value', value)\r\n\r\n        if (view === 'new') {\r\n          await NavigationsItemVariableMappingsApi.createNavigationItemVariableMapping(\r\n            navigationId,\r\n            navigationItemId,\r\n            formData,\r\n            {\r\n              cancelToken: cancelTokenRef.current.token,\r\n            }\r\n          )\r\n\r\n          notification.success({ message: t('create-success') })\r\n          navigate(\r\n            PUBLIC_URL +\r\n              '/content/modules/navigations/' +\r\n              navigationId +\r\n              '/items/' +\r\n              navigationItemId +\r\n              '/mappings'\r\n          )\r\n        } else if (view === 'detail' && navigationItemVariableMappingId) {\r\n          await NavigationsItemVariableMappingsApi.updateNavigationItemVariableMapping(\r\n            navigationId,\r\n            navigationItemId,\r\n            navigationItemVariableMappingId,\r\n            formData,\r\n            {\r\n              cancelToken: cancelTokenRef.current.token,\r\n            }\r\n          )\r\n\r\n          notification.success({ message: t('update-success') })\r\n          navigate(\r\n            PUBLIC_URL +\r\n              '/content/modules/navigations/' +\r\n              navigationId +\r\n              '/items/' +\r\n              navigationItemId +\r\n              '/mappings'\r\n          )\r\n        }\r\n      } catch (e) {\r\n        setLoading(false)\r\n      }\r\n    },\r\n    [\r\n      PUBLIC_URL,\r\n      view,\r\n      t,\r\n      navigationId,\r\n      navigationItemId,\r\n      navigationItemVariableMappingId,\r\n    ]\r\n  )\r\n\r\n  const renderForm = useCallback(\r\n    () => (\r\n      <FormFormikAntd layout=\"vertical\">\r\n        <Item label={t('form.variable-name')} name=\"variable_name\">\r\n          <Input name=\"variable_name\" />\r\n        </Item>\r\n        <Item label={t('form.value')} name=\"value\">\r\n          <Input name=\"value\" />\r\n        </Item>\r\n        <ItemAntd>\r\n          <Button\r\n            htmlType=\"submit\"\r\n            type=\"primary\"\r\n            size=\"large\"\r\n            disabled={loading}\r\n          >\r\n            {t(view === 'new' ? 'form.submit.new' : 'form.submit.detail')}\r\n          </Button>\r\n        </ItemAntd>\r\n      </FormFormikAntd>\r\n    ),\r\n    [t, view, loading]\r\n  )\r\n\r\n  useEffect(() => {\r\n    const cancelTokenSource = axios.CancelToken.source()\r\n\r\n    getData(cancelTokenSource.token)\r\n\r\n    return () => cancelTokenSource.cancel()\r\n  }, [getData])\r\n\r\n  useEffect(() => {\r\n    const cancelToken = cancelTokenRef.current\r\n\r\n    return () => cancelToken.cancel()\r\n  }, [])\r\n\r\n  return (\r\n    <Formik<FormValues>\r\n      initialValues={formInitialValues}\r\n      enableReinitialize\r\n      validate={values => validateSchema(values, FormSchema)}\r\n      onSubmit={handleSubmit}\r\n    >\r\n      {() => renderForm()}\r\n    </Formik>\r\n  )\r\n}\r\n","import React, { useContext, useEffect } from 'react'\r\nimport { RouteComponentProps } from '@reach/router'\r\nimport { useTranslation } from 'react-i18next'\r\nimport { SceneTitle } from 'components/SceneTitle'\r\nimport { AuthenticatedLayoutContext } from 'components/Layout/AuthenticatedLayout'\r\nimport { Form } from './components/Form'\r\nimport { BackButton } from 'components/BackButton'\r\n\r\nexport interface NavigationItemVariableMappingDetailProps\r\n  extends RouteComponentProps {\r\n  navigationId?: number\r\n  navigationItemId?: number\r\n  navigationItemVariableMappingId?: number\r\n  view: 'new' | 'detail'\r\n}\r\n\r\nexport const NavigationItemVariableMappingDetail: React.FC<NavigationItemVariableMappingDetailProps> = ({\r\n  navigationId,\r\n  navigationItemId,\r\n  navigationItemVariableMappingId,\r\n  view,\r\n}) => {\r\n  const { t } = useTranslation('navigation-item-variable-mapping-detail')\r\n  const { setSceneTitle } = useContext(AuthenticatedLayoutContext)\r\n\r\n  useEffect(() => {\r\n    setSceneTitle(\r\n      <SceneTitle\r\n        title={t(view === 'detail' ? 'scene-title.detail' : 'scene-title.new')}\r\n        extraContent={\r\n          <BackButton\r\n            title={t('scene-title.back-to-navigation-item-variable-mappings')}\r\n            to={\r\n              '/content/modules/navigations/' +\r\n              navigationId +\r\n              '/items/' +\r\n              navigationItemId +\r\n              '/mappings'\r\n            }\r\n          />\r\n        }\r\n      />\r\n    )\r\n  }, [setSceneTitle, t, view, navigationId, navigationItemId])\r\n\r\n  return (\r\n    <Form\r\n      navigationId={navigationId}\r\n      navigationItemId={navigationItemId}\r\n      navigationItemVariableMappingId={navigationItemVariableMappingId}\r\n      view={view}\r\n    />\r\n  )\r\n}\r\n","import React, { useCallback, useState, useEffect, useRef } from 'react'\r\nimport { Formik } from 'formik'\r\nimport { Input, Form as FormFormikAntd } from 'formik-antd'\r\nimport { FormikFormItem as Item } from 'components/FormikFormItem'\r\nimport { Button, Form as FormAntd, notification } from 'antd'\r\nimport { useTranslation } from 'react-i18next'\r\nimport { validateSchema } from 'config/yup'\r\nimport * as Yup from 'yup'\r\nimport axios, { CancelToken, CancelTokenSource } from 'axios'\r\nimport { navigate } from '@reach/router'\r\nimport { Button as ButtonInterface } from 'model/api/Button'\r\nimport { ButtonsApi } from 'api/Buttons'\r\n\r\nconst { Item: ItemAntd } = FormAntd\r\n\r\nexport interface FormValues {\r\n  name?: string\r\n  class_name?: string\r\n}\r\n\r\nexport const FormSchema = Yup.object().shape<FormValues>({\r\n  name: Yup.string().required(),\r\n  class_name: Yup.string().required(),\r\n})\r\n\r\nexport interface FormProps {\r\n  buttonId?: number\r\n  view: 'new' | 'detail'\r\n}\r\n\r\nexport const Form: React.FC<FormProps> = ({ buttonId, view }) => {\r\n  const { PUBLIC_URL } = process.env\r\n  const { t } = useTranslation('button-detail')\r\n  const [data, setData] = useState<ButtonInterface>()\r\n  const [loading, setLoading] = useState(false)\r\n  const cancelTokenRef = useRef<CancelTokenSource>(axios.CancelToken.source())\r\n  const formInitialValues = data || {\r\n    name: undefined,\r\n    class_name: undefined,\r\n  }\r\n\r\n  const getData = useCallback(\r\n    async (cancelToken: CancelToken) => {\r\n      if (view === 'detail' && buttonId) {\r\n        try {\r\n          setLoading(true)\r\n\r\n          const { data } = await ButtonsApi.getButton(buttonId, {\r\n            cancelToken,\r\n          })\r\n\r\n          setData(data)\r\n          setLoading(false)\r\n        } catch (e) {\r\n          setLoading(false)\r\n        }\r\n      }\r\n    },\r\n    [view, buttonId]\r\n  )\r\n\r\n  const handleSubmit = useCallback(\r\n    async ({ name, class_name }: Required<FormValues>) => {\r\n      try {\r\n        setLoading(true)\r\n\r\n        const formData = new FormData()\r\n        formData.append('name', name)\r\n        formData.append('class_name', class_name)\r\n\r\n        if (view === 'new') {\r\n          await ButtonsApi.createButton(formData, {\r\n            cancelToken: cancelTokenRef.current.token,\r\n          })\r\n\r\n          notification.success({ message: t('create-success') })\r\n          navigate(PUBLIC_URL + '/content/modules/buttons')\r\n        } else if (view === 'detail' && buttonId) {\r\n          await ButtonsApi.updateButton(buttonId, formData, {\r\n            cancelToken: cancelTokenRef.current.token,\r\n          })\r\n\r\n          notification.success({ message: t('update-success') })\r\n          navigate(PUBLIC_URL + '/content/modules/buttons')\r\n        }\r\n      } catch (e) {\r\n        setLoading(false)\r\n      }\r\n    },\r\n    [PUBLIC_URL, view, t, buttonId]\r\n  )\r\n\r\n  const renderForm = useCallback(\r\n    () => (\r\n      <FormFormikAntd layout=\"vertical\">\r\n        <Item label={t('form.name')} name=\"name\">\r\n          <Input name=\"name\" />\r\n        </Item>\r\n        <Item label={t('form.class-name')} name=\"class_name\">\r\n          <Input name=\"class_name\" />\r\n        </Item>\r\n        <ItemAntd>\r\n          <Button\r\n            htmlType=\"submit\"\r\n            type=\"primary\"\r\n            size=\"large\"\r\n            disabled={loading}\r\n          >\r\n            {t(view === 'new' ? 'form.submit.new' : 'form.submit.detail')}\r\n          </Button>\r\n        </ItemAntd>\r\n      </FormFormikAntd>\r\n    ),\r\n    [t, view, loading]\r\n  )\r\n\r\n  useEffect(() => {\r\n    const cancelTokenSource = axios.CancelToken.source()\r\n\r\n    getData(cancelTokenSource.token)\r\n\r\n    return () => cancelTokenSource.cancel()\r\n  }, [getData])\r\n\r\n  useEffect(() => {\r\n    const cancelToken = cancelTokenRef.current\r\n\r\n    return () => cancelToken.cancel()\r\n  }, [])\r\n\r\n  return (\r\n    <Formik<FormValues>\r\n      initialValues={formInitialValues}\r\n      enableReinitialize\r\n      validate={values => validateSchema(values, FormSchema)}\r\n      onSubmit={handleSubmit}\r\n    >\r\n      {() => renderForm()}\r\n    </Formik>\r\n  )\r\n}\r\n","import React, { useContext, useEffect } from 'react'\r\nimport { RouteComponentProps } from '@reach/router'\r\nimport { useTranslation } from 'react-i18next'\r\nimport { SceneTitle } from 'components/SceneTitle'\r\nimport { AuthenticatedLayoutContext } from 'components/Layout/AuthenticatedLayout'\r\nimport { Form } from './components/Form'\r\nimport { BackButton } from 'components/BackButton'\r\n\r\nexport interface ButtonDetailProps extends RouteComponentProps {\r\n  buttonId?: number\r\n  view: 'new' | 'detail'\r\n}\r\n\r\nexport const ButtonDetail: React.FC<ButtonDetailProps> = ({\r\n  buttonId,\r\n  view,\r\n}) => {\r\n  const { t } = useTranslation('button-detail')\r\n  const { setSceneTitle } = useContext(AuthenticatedLayoutContext)\r\n\r\n  useEffect(() => {\r\n    setSceneTitle(\r\n      <SceneTitle\r\n        title={t(view === 'detail' ? 'scene-title.detail' : 'scene-title.new')}\r\n        extraContent={\r\n          <BackButton\r\n            title={t('scene-title.back-to-buttons')}\r\n            to=\"/content/modules/buttons\"\r\n          />\r\n        }\r\n      />\r\n    )\r\n  }, [setSceneTitle, t, view])\r\n\r\n  return (\r\n    <Form\r\n      buttonId={buttonId}\r\n      view={view}\r\n    />\r\n  )\r\n}\r\n","import {\r\n  Dropdown as DropdownBase,\r\n  DropdownItemProps,\r\n} from 'components/Dropdown'\r\nimport { DropdownButton } from 'components/DropdownButton'\r\nimport React, { useCallback } from 'react'\r\nimport { useTranslation } from 'react-i18next'\r\n\r\nexport type DropdownAction = 'edit' | 'delete'\r\n\r\nexport interface DropdownProps {\r\n  onClick: (action: DropdownAction) => void\r\n  disabledActions?: DropdownAction[]\r\n}\r\n\r\nexport const Dropdown: React.FC<DropdownProps> = ({ onClick }) => {\r\n  const { t } = useTranslation('buttons')\r\n\r\n  const handleClick = useCallback((action: DropdownAction) => {\r\n    onClick(action)\r\n  }, [onClick])\r\n\r\n  const items: DropdownItemProps[] = [\r\n    {\r\n      children: t('table.context-menu.edit'),\r\n      onClick: () => handleClick('edit'),\r\n      icon: 'pen',\r\n    },   \r\n    {\r\n      children: t('table.context-menu.delete'),\r\n      onClick: () => handleClick('delete'),\r\n      icon: 'trash-alt',\r\n      dialog: {\r\n        text: t('table.context-menu.delete-dialog.text'),\r\n        cancel: t('table.context-menu.delete-dialog.cancel'),\r\n        confirm: t('table.context-menu.delete-dialog.confirm')\r\n      }\r\n    },\r\n  ]\r\n\r\n  return (\r\n    <div>\r\n      <DropdownBase items={items} data-test=\"Dropdown\">\r\n        <DropdownButton size=\"small\" />\r\n      </DropdownBase>\r\n    </div>\r\n  )\r\n}\r\n","import React from 'react'\r\nimport { ColumnProps } from 'antd/es/table'\r\nimport { MappedButton } from './mapButtons'\r\nimport i18next from 'i18next'\r\nimport { DropdownAction, Dropdown } from '../components/Dropdown'\r\n\r\nexport const getButtonsColumns = (\r\n  t: i18next.TFunction,\r\n  onClick?: (action: DropdownAction, viewId: number) => void\r\n): ColumnProps<any>[] => [\r\n  {\r\n    key: 'id',\r\n    dataIndex: 'id',\r\n    title: t('table.columns.id'),\r\n    width: 100,\r\n  },\r\n  {\r\n    key: 'name',\r\n    dataIndex: 'name',\r\n    title: t('table.columns.name'),\r\n  },\r\n  {\r\n    key: 'context_menu',\r\n    dataIndex: 'context_menu',\r\n    width: 60,\r\n    render: (_, { id }: MappedButton) => (\r\n      <Dropdown\r\n        onClick={(action: DropdownAction) => onClick && onClick(action, id)}\r\n      />\r\n    ),\r\n    fixed: 'right',\r\n  },\r\n]\r\n","import { Button } from 'model/api/Button'\r\n\r\nexport interface MappedButton {\r\n  key: string\r\n  id: number\r\n  name: string\r\n}\r\n\r\nexport const mapButtons = (data: Button[]): MappedButton[] =>\r\n  data.map(({ id, name }) => ({\r\n    key: String(id),\r\n    id,\r\n    name,\r\n  }))\r\n","import React, { useCallback, useState, useEffect, useRef } from 'react'\r\nimport { Table as TableBase } from 'components/Table'\r\nimport axios, { CancelTokenSource } from 'axios'\r\nimport { useTranslation } from 'react-i18next'\r\nimport { DropdownAction } from './Dropdown'\r\nimport { navigate } from '@reach/router'\r\nimport { notification } from 'antd'\r\nimport { getButtonsColumns } from '../utils/getButtonsColumns'\r\nimport { MappedButton, mapButtons } from '../utils/mapButtons'\r\nimport { ButtonsApi } from 'api/Buttons'\r\n\r\nexport const Table: React.FC = () => {\r\n  const { PUBLIC_URL } = process.env\r\n  const { t } = useTranslation('buttons')\r\n  const [data, setData] = useState<MappedButton[]>([])\r\n  const [loading, setLoading] = useState(false)\r\n  const [total, setTotal] = useState(0)\r\n  const [page, setPage] = useState(1)\r\n  const [pageSize, setPageSize] = useState(0)\r\n  const cancelTokenRef = useRef<CancelTokenSource>(axios.CancelToken.source())\r\n\r\n  const getData = useCallback(async () => {\r\n    setLoading(true)\r\n\r\n    const {\r\n      data: { data, total, per_page },\r\n    } = await ButtonsApi.getButtons(page, pageSize, {\r\n      cancelToken: cancelTokenRef.current.token,\r\n    })\r\n\r\n    setData(mapButtons(data))\r\n    setTotal(total)\r\n    setPageSize(per_page)\r\n    setLoading(false)\r\n  }, [page, pageSize])\r\n\r\n  const handleActionClick = useCallback(\r\n    async (action: DropdownAction, buttonId: number) => {\r\n      switch (action) {\r\n        case 'edit':\r\n          navigate(PUBLIC_URL + '/content/modules/buttons/' + buttonId)\r\n          break\r\n        case 'delete':\r\n          try {\r\n            await ButtonsApi.deleteButton(buttonId, {\r\n              cancelToken: cancelTokenRef.current.token,\r\n            })\r\n\r\n            notification.success({\r\n              message: t('table.delete-success'),\r\n            })\r\n\r\n            getData()\r\n          } catch (e) {}\r\n          break\r\n        default:\r\n          break\r\n      }\r\n    },\r\n    [PUBLIC_URL, getData, t]\r\n  )\r\n\r\n  const handlePageChange = useCallback((page: number) => {\r\n    setPage(page)\r\n  }, [])\r\n\r\n  useEffect(() => {\r\n    getData()\r\n  }, [getData])\r\n\r\n  useEffect(() => {\r\n    const cancelToken = cancelTokenRef.current\r\n\r\n    return () => cancelToken.cancel()\r\n  }, [])\r\n\r\n  return (\r\n    <TableBase\r\n      columns={getButtonsColumns(t, handleActionClick)}\r\n      dataSource={data}\r\n      loading={loading}\r\n      pagination={{\r\n        current: page,\r\n        pageSize,\r\n        total,\r\n        onChange: handlePageChange,\r\n      }}\r\n    />\r\n  )\r\n}\r\n","import React, { useContext, useEffect, useCallback } from 'react'\r\nimport { RouteComponentProps, navigate } from '@reach/router'\r\nimport { useTranslation } from 'react-i18next'\r\nimport { SceneTitle } from 'components/SceneTitle'\r\nimport { AuthenticatedLayoutContext } from 'components/Layout/AuthenticatedLayout'\r\nimport { Table } from './components/Table'\r\nimport { Space } from 'antd'\r\nimport { IconButton } from 'components/IconButton'\r\n\r\nexport const Buttons: React.FC<RouteComponentProps> = () => {\r\n  const { PUBLIC_URL } = process.env\r\n  const { t } = useTranslation('buttons')\r\n  const { setSceneTitle } = useContext(AuthenticatedLayoutContext)\r\n\r\n  const handleCreateButton = useCallback(() => {\r\n    navigate(PUBLIC_URL + '/content/modules/buttons/new')\r\n  }, [PUBLIC_URL])\r\n\r\n  useEffect(() => {\r\n    setSceneTitle(<SceneTitle title={t('scene-title')} />)\r\n  }, [setSceneTitle, t])\r\n\r\n  return (\r\n    <Space size=\"large\" direction=\"vertical\" style={{ width: '100%' }}>\r\n      <IconButton\r\n        size=\"middle\"\r\n        type=\"primary\"\r\n        icon=\"plus\"\r\n        onClick={handleCreateButton}\r\n      >\r\n        {t('create-new-button')}\r\n      </IconButton>\r\n      <Table />\r\n    </Space>\r\n  )\r\n}\r\n","import React, { useEffect } from 'react'\r\nimport { AuthenticatedLayout } from 'components/Layout/AuthenticatedLayout'\r\nimport { Router, Redirect } from '@reach/router'\r\nimport { Dashboard } from 'scenes/Dashboard'\r\nimport { Content } from 'scenes/Content'\r\nimport { Catalog } from 'scenes/Catalog'\r\nimport { Forms } from 'scenes/Forms'\r\nimport { Settings } from 'scenes/Settings'\r\nimport { CatalogTemplates } from 'scenes/CatalogTemplates'\r\nimport { CatalogTemplateDetail } from 'scenes/CatalogTemplateDetail'\r\nimport { CatalogTemplateFieldDetail } from 'scenes/CatalogTemplateFieldDetail'\r\nimport { InternalServerError } from 'scenes/InternalServerError'\r\nimport { AuthenticatedErrorLayout } from 'components/Layout/AuthenticatedErrorLayout'\r\nimport { PageNotFound } from 'scenes/PageNotFound'\r\nimport { RedirectTo } from 'scenes/RedirectTo'\r\nimport { CatalogLanguages } from 'scenes/CatalogLanguages'\r\nimport { CatalogLanguageDetail } from 'scenes/CatalogLanguageDetail'\r\nimport { CatalogDetail } from 'scenes/CatalogDetail'\r\nimport { CatalogCategories } from 'scenes/CatalogCategories'\r\nimport { CatalogCategoryDetail } from 'scenes/CatalogCategoryDetail'\r\nimport { ScrollToTop } from 'components/ScrollToTop'\r\nimport { CatalogCurrencies } from 'scenes/CatalogCurrencies'\r\nimport { CatalogCurrencyDetail } from 'scenes/CatalogCurrencyDetail'\r\nimport { CatalogCurrencyTaxRateDetail } from 'scenes/CatalogCurrencyTaxRateDetail'\r\nimport { Views } from 'scenes/Views'\r\nimport { ViewDetail } from 'scenes/ViewDetail'\r\nimport { Templates } from 'scenes/Templates'\r\nimport { Layouts } from 'scenes/Layouts'\r\nimport { LayoutDetail } from 'scenes/LayoutDetail'\r\nimport { TemplateDetail } from 'scenes/TemplateDetail'\r\nimport { ContentDetail } from 'scenes/ContentDetail'\r\nimport { useThunkDispatch } from 'hooks/useThunkDispatch'\r\nimport { fetchTemplatePreviews } from 'state/actions/templates'\r\nimport { VariableNameActions } from 'scenes/VariableNameActions'\r\nimport { VariableNameActionDetail } from 'scenes/VariableNameActionDetail'\r\nimport { Navigations } from 'scenes/Navigations'\r\nimport { NavigationDetail } from 'scenes/NavigationDetail'\r\nimport { NavigationItemDetail } from 'scenes/NavigationItemDetail'\r\nimport { NavigationItemsVariableMappings } from 'scenes/NavigationItemVariableMappings'\r\nimport { NavigationItemVariableMappingDetail } from 'scenes/NavigationItemVariableMappingDetail'\r\nimport { ButtonDetail } from 'scenes/ButtonDetail'\r\nimport { Buttons } from 'scenes/Buttons'\r\n\r\nexport const AuthenticatedRouter = () => {\r\n  const { PUBLIC_URL } = process.env\r\n  const dispatch = useThunkDispatch()\r\n\r\n  useEffect(() => {\r\n    dispatch(fetchTemplatePreviews())\r\n  }, [dispatch])\r\n\r\n  return (\r\n    <Router primary={false}>\r\n      <ScrollToTop path={PUBLIC_URL + '/'}>\r\n        <AuthenticatedLayout path=\"/\">\r\n          <Dashboard path=\"/\" />\r\n\r\n          <Content path=\"/content\" />\r\n          <ContentDetail path=\"/content/new\" view=\"new\" key=\"content-new\" />\r\n          <ContentDetail\r\n            path=\"/content/:identifier\"\r\n            view=\"detail\"\r\n            key=\"content-detail\"\r\n          />\r\n\r\n          <Views path=\"/content/views\" />\r\n          <ViewDetail path=\"/content/views/new\" view=\"new\" key=\"view-new\" />\r\n          <ViewDetail\r\n            path=\"/content/views/:viewId\"\r\n            view=\"detail\"\r\n            key=\"view-detail\"\r\n          />\r\n\r\n          <Layouts path=\"content/layouts\" />\r\n          <LayoutDetail\r\n            path=\"content/layouts/new\"\r\n            view=\"new\"\r\n            key=\"layout-new\"\r\n          />\r\n          <LayoutDetail\r\n            path=\"content/layouts/:layoutId\"\r\n            view=\"detail\"\r\n            key=\"layout-detail\"\r\n          />\r\n\r\n          <Templates path=\"/content/templates\" />\r\n          <TemplateDetail\r\n            path=\"/content/templates/new\"\r\n            view=\"new\"\r\n            key=\"template-new\"\r\n          />\r\n          <TemplateDetail\r\n            path=\"/content/templates/:templateId\"\r\n            view=\"detail\"\r\n            key=\"template-detail\"\r\n          />\r\n\r\n          <VariableNameActions path=\"/content/variable-name-actions\" />\r\n          <VariableNameActionDetail\r\n            path=\"/content/variable-name-actions/new\"\r\n            view=\"new\"\r\n            key=\"variable-name-action-new\"\r\n          />\r\n          <VariableNameActionDetail\r\n            path=\"/content/variable-name-actions/:variableNameActionId\"\r\n            view=\"detail\"\r\n            key=\"variable-name-action-detail\"\r\n          />\r\n\r\n          <Buttons path=\"/content/modules/buttons\" />\r\n          <ButtonDetail\r\n            path=\"/content/modules/buttons/new\"\r\n            view=\"new\"\r\n            key=\"button-new\"\r\n          />\r\n          <ButtonDetail\r\n            path=\"/content/modules/buttons/:buttonId\"\r\n            view=\"detail\"\r\n            key=\"button-detail\"\r\n          />\r\n\r\n          <Navigations path=\"/content/modules/navigations\" />\r\n          <NavigationDetail\r\n            path=\"/content/modules/navigations/new\"\r\n            view=\"new\"\r\n            key=\"navigation-new\"\r\n          />\r\n          <NavigationDetail\r\n            path=\"/content/modules/navigations/:navigationId\"\r\n            view=\"detail\"\r\n            key=\"navigation-detail\"\r\n          />\r\n\r\n          <NavigationItemDetail\r\n            path=\"/content/modules/navigations/:navigationId/items/new\"\r\n            view=\"new\"\r\n            key=\"navigation-item-new\"\r\n          />\r\n          <NavigationItemDetail\r\n            path=\"/content/modules/navigations/:navigationId/items/:navigationItemId\"\r\n            view=\"detail\"\r\n            key=\"navigation-item-detail\"\r\n          />\r\n\r\n          <NavigationItemsVariableMappings path=\"/content/modules/navigations/:navigationId/items/:navigationItemId/mappings\" />\r\n          <NavigationItemVariableMappingDetail\r\n            path=\"/content/modules/navigations/:navigationId/items/:navigationItemId/mappings/new\"\r\n            key=\"navigation-item-variable-mapping-new\"\r\n            view=\"new\"\r\n          />\r\n          <NavigationItemVariableMappingDetail\r\n            path=\"/content/modules/navigations/:navigationId/items/:navigationItemId/mappings/:navigationItemVariableMappingId\"\r\n            key=\"navigation-item-variable-mapping-detail\"\r\n            view=\"detail\"\r\n          />\r\n\r\n          <Catalog path=\"/catalog\" />\r\n          <CatalogDetail path=\"/catalog/new\" view=\"new\" key=\"catalog-new\" />\r\n          <CatalogDetail\r\n            path=\"/catalog/:catalogItemId\"\r\n            view=\"detail\"\r\n            key=\"catalog-detail\"\r\n          />\r\n\r\n          <CatalogTemplates path=\"/catalog/templates\" />\r\n          <CatalogTemplateDetail\r\n            path=\"/catalog/templates/new\"\r\n            view=\"new\"\r\n            key=\"catalog-template-new\"\r\n          />\r\n          <CatalogTemplateDetail\r\n            path=\"/catalog/templates/:catalogItemTemplateId\"\r\n            view=\"detail\"\r\n            key=\"catalog-template-detail\"\r\n          />\r\n\r\n          <CatalogTemplateFieldDetail\r\n            path=\"/catalog/templates/:catalogItemTemplateId/fields/new\"\r\n            view=\"new\"\r\n            key=\"catalog-template-field-new\"\r\n          />\r\n          <CatalogTemplateFieldDetail\r\n            path=\"/catalog/templates/:catalogItemTemplateId/fields/:catalogItemTemplateFieldId\"\r\n            view=\"detail\"\r\n            key=\"catalog-template-field-detail\"\r\n          />\r\n\r\n          <CatalogCategories path=\"/catalog/categories\" />\r\n          <CatalogCategoryDetail\r\n            path=\"/catalog/categories/new\"\r\n            view=\"new\"\r\n            key=\"catlaog-category-new\"\r\n          />\r\n          <CatalogCategoryDetail\r\n            path=\"/catalog/categories/:catalogCategoryId\"\r\n            view=\"detail\"\r\n            key=\"catlaog-category-detail\"\r\n          />\r\n\r\n          <CatalogLanguages path=\"/catalog/languages\" />\r\n          <CatalogLanguageDetail\r\n            path=\"/catalog/languages/new\"\r\n            view=\"new\"\r\n            key=\"catalog-language-new\"\r\n          />\r\n          <CatalogLanguageDetail\r\n            path=\"/catalog/languages/:code\"\r\n            view=\"detail\"\r\n            key=\"catalog-language-detail\"\r\n          />\r\n\r\n          <CatalogCurrencies path=\"/catalog/currencies\" />\r\n          <CatalogCurrencyDetail\r\n            path=\"/catalog/currencies/new\"\r\n            view=\"new\"\r\n            key=\"catalog-currency-new\"\r\n          />\r\n          <CatalogCurrencyDetail\r\n            path=\"/catalog/currencies/:catalogCurrencyId\"\r\n            view=\"detail\"\r\n            key=\"catalog-currency-detail\"\r\n          />\r\n\r\n          <CatalogCurrencyTaxRateDetail\r\n            view=\"new\"\r\n            path=\"/catalog/currencies/:catalogCurrencyId/tax-rates/new\"\r\n            key=\"catalog-currency-tax-rate-new\"\r\n          />\r\n          <CatalogCurrencyTaxRateDetail\r\n            view=\"detail\"\r\n            path=\"/catalog/currencies/:catalogCurrencyId/tax-rates/:catalogCurrencyTaxRateId\"\r\n            key=\"catalog-currency-tax-rate-detail\"\r\n          />\r\n\r\n          <Forms path=\"/forms\" />\r\n\r\n          <Settings path=\"/settings\" />\r\n\r\n          <RedirectTo path=\"/redirect-to\" />\r\n          <Redirect\r\n            noThrow\r\n            from=\"/*\"\r\n            to={PUBLIC_URL + '/status/page-not-found'}\r\n          />\r\n        </AuthenticatedLayout>\r\n\r\n        <AuthenticatedErrorLayout path={'/status/'}>\r\n          <InternalServerError path=\"/internal-server-error\" />\r\n          <PageNotFound path=\"/page-not-found\" />\r\n        </AuthenticatedErrorLayout>\r\n      </ScrollToTop>\r\n    </Router>\r\n  )\r\n}\r\n","import ReactGA from 'react-ga'\r\nimport { useLocation } from 'hooks/useLocation'\r\n\r\nexport const useTrackPageView = () => {\r\n  const {\r\n    location,\r\n    location: { pathname, href },\r\n  } = useLocation()\r\n\r\n  const setTrackPageView = () => {\r\n    ReactGA.send({\r\n      page: pathname,\r\n      location: href,\r\n      hitType: 'pageview',\r\n    })\r\n  }\r\n\r\n  return { location, setTrackPageView }\r\n}\r\n","import { globalHistory } from '@reach/router'\r\nimport { useEffect, useState } from 'react'\r\n\r\nexport const useLocation = () => {\r\n  const initialState = {\r\n    location: globalHistory.location,\r\n    navigate: globalHistory.navigate,\r\n  }\r\n\r\n  const [state, setState] = useState(initialState)\r\n\r\n  useEffect(() => {\r\n    const removeListener = globalHistory.listen(({ location }) => {\r\n      setState({ ...initialState, ...{ location } })\r\n    })\r\n\r\n    return () => {\r\n      removeListener()\r\n    }\r\n  }, [initialState])\r\n\r\n  return state\r\n}\r\n","import React, { useCallback } from 'react'\r\nimport { Formik } from 'formik'\r\nimport { Input, Form as FormFormikAntd } from 'formik-antd'\r\nimport { Button, Form as FormAntd } from 'antd'\r\nimport { FormikFormItem as Item } from 'components/FormikFormItem'\r\nimport { useTranslation } from 'react-i18next'\r\nimport { validateSchema } from 'config/yup'\r\nimport * as Yup from 'yup'\r\nimport { RouteComponentProps } from '@reach/router'\r\nimport { useThunkDispatch } from 'hooks/useThunkDispatch'\r\nimport { login } from 'state/actions/session'\r\nimport { State } from 'state/rootReducer'\r\nimport { useSelector } from 'react-redux'\r\nimport { Paper } from 'components/Paper'\r\nimport styled from 'styled-components'\r\nimport logo from 'assets/images/logo_lg.png'\r\n\r\nconst { Item: ItemAntd } = FormAntd\r\n\r\nconst Container = styled(Paper)`\r\n  width: 400px;\r\n  min-height: initial;\r\n`\r\n\r\nconst Layout = styled.div`\r\n  display: flex;\r\n  flex-direction: column;\r\n`\r\n\r\nconst Logo = styled.img`\r\n  width: 170px;\r\n  height: auto;\r\n  margin-bottom: 24px;\r\n`\r\n\r\nexport interface FormValues {\r\n  email?: string\r\n  password?: string\r\n}\r\n\r\nexport const FormSchema = Yup.object().shape<FormValues>({\r\n  email: Yup.string().required(),\r\n  password: Yup.string().required(),\r\n})\r\n\r\nexport const Login: React.FC<RouteComponentProps> = () => {\r\n  const { t } = useTranslation('login')\r\n  const { isLoggingIn } = useSelector((state: State) => state.session)\r\n  const dispatch = useThunkDispatch()\r\n  const formInitialValues: FormValues = {\r\n    email: undefined,\r\n    password: undefined,\r\n  }\r\n\r\n  const handleSubmit = useCallback(\r\n    ({ email, password }: Required<FormValues>) => {\r\n      dispatch(login(email, password))\r\n    },\r\n    [dispatch]\r\n  )\r\n\r\n  const renderForm = useCallback(\r\n    () => (\r\n      <FormFormikAntd layout=\"vertical\">\r\n        <Item label={t('form.email')} name=\"email\">\r\n          <Input name=\"email\" disabled={isLoggingIn} />\r\n        </Item>\r\n        <Item label={t('form.password')} name=\"password\">\r\n          <Input name=\"password\" type=\"password\" disabled={isLoggingIn} />\r\n        </Item>\r\n        <ItemAntd>\r\n          <Button\r\n            htmlType=\"submit\"\r\n            type=\"primary\"\r\n            size=\"large\"\r\n            disabled={isLoggingIn}\r\n          >\r\n            {t('form.submit')}\r\n          </Button>\r\n        </ItemAntd>\r\n      </FormFormikAntd>\r\n    ),\r\n    [t, isLoggingIn]\r\n  )\r\n\r\n  return (\r\n    <Layout>\r\n      <Logo src={logo} />\r\n      <Container>\r\n        <Formik<FormValues>\r\n          initialValues={formInitialValues}\r\n          validate={values => validateSchema(values, FormSchema)}\r\n          onSubmit={handleSubmit}\r\n        >\r\n          {() => renderForm()}\r\n        </Formik>\r\n      </Container>\r\n    </Layout>\r\n  )\r\n}\r\n","import React from 'react'\r\nimport { Layout } from 'antd'\r\nimport styled from 'styled-components'\r\nimport { RouteComponentProps } from '@reach/router'\r\nimport { COLORS } from 'constants/colors'\r\n\r\nconst { Content } = Layout\r\n\r\nconst StyledContent = styled(Content)`\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  min-height: 100vh;\r\n  background: ${COLORS.blue5};\r\n`\r\n\r\nexport interface AnonymousLayoutProps extends RouteComponentProps {\r\n  children: React.ReactNode | React.ReactNodeArray\r\n}\r\n\r\nexport const AnonymousLayout: React.FC<AnonymousLayoutProps> = ({\r\n  children,\r\n}) => (\r\n  <Layout>\r\n    <StyledContent>{children}</StyledContent>\r\n  </Layout>\r\n)\r\n","import React, { useEffect } from 'react'\r\nimport { Router } from '@reach/router'\r\nimport { Login } from 'scenes/Login'\r\nimport { AnonymousLayout } from 'components/Layout/AnonymousLayout'\r\nimport { useThunkDispatch } from 'hooks/useThunkDispatch'\r\nimport { clearTemplatePreviews } from 'state/actions/templates'\r\n\r\nconst { PUBLIC_URL } = process.env\r\n\r\nexport const AnonymousRouter = () => {\r\n  const dispatch = useThunkDispatch()\r\n\r\n  useEffect(() => {\r\n    dispatch(clearTemplatePreviews())\r\n  }, [dispatch])\r\n\r\n  return (\r\n    <Router primary={false}>\r\n      <AnonymousLayout path={PUBLIC_URL + '/'}>\r\n        <Login path=\"/*\" />\r\n      </AnonymousLayout>\r\n    </Router>\r\n  )\r\n}\r\n","import React, { useEffect } from 'react'\r\nimport { Helmet } from 'react-helmet'\r\nimport { useTranslation } from 'react-i18next'\r\nimport { AuthenticatedRouter } from 'components/Router/AuthenticatedRouter'\r\nimport { useTrackPageView } from 'hooks/useTrackPageView'\r\nimport './i18n'\r\nimport { AnonymousRouter } from 'components/Router/AnonymousRouter'\r\nimport { useSelector } from 'react-redux'\r\nimport { State } from 'state/rootReducer'\r\n\r\nconst App: React.FC = () => {\r\n  const { t } = useTranslation()\r\n  const { location, setTrackPageView } = useTrackPageView()\r\n  const { isLoggedIn } = useSelector((state: State) => state.session)\r\n\r\n  useEffect(() => {\r\n    setTrackPageView()\r\n  }, [location, setTrackPageView])\r\n\r\n  return (\r\n    <>\r\n      <Helmet>\r\n        <title>{t('html-title')}</title>\r\n      </Helmet>\r\n      {!isLoggedIn ? <AnonymousRouter /> : <AuthenticatedRouter />}\r\n    </>\r\n  )\r\n}\r\n\r\nexport default App\r\n","import React from 'react'\r\nimport { Layout, Skeleton } from 'antd'\r\nimport { Paper } from 'components/Paper'\r\nimport styled from 'styled-components'\r\nimport { COLORS } from 'constants/colors'\r\nimport {\r\n  StyledHeader as Header,\r\n  StyledLayout,\r\n  Main,\r\n  Container,\r\n} from '../AuthenticatedLayout'\r\n\r\nconst { Content, Footer } = Layout\r\n\r\nconst StyledHeader = styled(Header)`\r\n  && {\r\n    background-color: ${COLORS.gray3};\r\n  }\r\n`\r\n\r\nconst StyledSkeleton = styled(Skeleton)`\r\n  && {\r\n    background: ${COLORS.gray1};\r\n  }\r\n`\r\n\r\nexport const AuthenticatedLoadingLayout: React.FC = () => (\r\n  <StyledLayout>\r\n    <StyledHeader />\r\n    <Container>\r\n      <StyledSkeleton active title={{ width: 250 }} paragraph={false} />\r\n    </Container>\r\n    <Main>\r\n      <Content>\r\n        <Paper>\r\n          <Skeleton active paragraph={{ rows: 4, width: 550 }} />\r\n        </Paper>\r\n      </Content>\r\n    </Main>\r\n    <Footer />\r\n  </StyledLayout>\r\n)\r\n","import { Action, handleActions } from 'redux-actions'\r\nimport Cookies from 'js-cookie'\r\nimport {\r\n  LOGOUT_CLEAR_STATE,\r\n  RECEIVE_LOGIN,\r\n  REQUEST_LOGIN,\r\n} from 'state/actions/session'\r\n\r\nexport interface SessionState {\r\n  isLoggedIn: boolean\r\n  isLoggingIn: boolean\r\n}\r\n\r\nconst isLoggedIn = !!Cookies.get('AUTH_USER')\r\n\r\nexport const sessionInitialState: SessionState = {\r\n  isLoggedIn,\r\n  isLoggingIn: false,\r\n}\r\n\r\nexport const sessionReducer = handleActions<SessionState, any>(\r\n  {\r\n    [REQUEST_LOGIN]: (state: SessionState): SessionState => ({\r\n      ...state,\r\n      isLoggingIn: true,\r\n    }),\r\n\r\n    [RECEIVE_LOGIN]: (\r\n      state: SessionState,\r\n      action: Action<boolean>\r\n    ): SessionState => ({\r\n      ...state,\r\n      isLoggedIn: action.payload,\r\n      isLoggingIn: false,\r\n    }),\r\n\r\n    [LOGOUT_CLEAR_STATE]: (state: SessionState): SessionState => ({\r\n      ...state,\r\n      isLoggedIn: false,\r\n    }),\r\n  },\r\n  sessionInitialState\r\n)    ","import { Action, handleActions } from 'redux-actions'\r\nimport {\r\n  SET_CONTENT_SIDE_PANEL_POSITION,\r\n  SetContentSidePanelPositionPayload,\r\n} from 'state/actions/user'\r\n\r\nexport interface UserState {\r\n  contentSidePanel: {\r\n    top: number\r\n    left: number\r\n  }\r\n}\r\n\r\nexport const userInitialState: UserState = {\r\n  contentSidePanel: {\r\n    top: 20,\r\n    left: 20,\r\n  },\r\n}\r\n\r\nexport const userReducer = handleActions<UserState, any>({\r\n  [SET_CONTENT_SIDE_PANEL_POSITION]: (\r\n    state: UserState,\r\n    action: Action<SetContentSidePanelPositionPayload>\r\n  ): UserState => ({\r\n    ...state,\r\n    contentSidePanel: action.payload,\r\n  }),\r\n}, userInitialState)\r\n","import { Action, handleActions } from 'redux-actions'\r\nimport { TemplatePreview } from 'model/api/TemplatePreview'\r\nimport {\r\n  SET_TEMPLATE_PREVIEW,\r\n  SetTemplatePreviewPayload,\r\n  CLEAR_TEMPLATE_PREVIEWS,\r\n} from 'state/actions/templates'\r\n\r\nexport interface TemplatesState {\r\n  previews: {\r\n    [path: string]: TemplatePreview\r\n  }\r\n}\r\n\r\nexport const templatesInitialState: TemplatesState = {\r\n  previews: {},\r\n}\r\n\r\nexport const templatesReducer = handleActions<TemplatesState, any>(\r\n  {\r\n    [SET_TEMPLATE_PREVIEW]: (\r\n      state: TemplatesState,\r\n      action: Action<SetTemplatePreviewPayload>\r\n    ): TemplatesState => ({\r\n      ...state,\r\n      previews: {\r\n        ...state.previews,\r\n        [action.payload.path]: {\r\n          ...state.previews[action.payload.path],\r\n          [action.payload.moduleName]: action.payload.data,\r\n        },\r\n      },\r\n    }),\r\n    [CLEAR_TEMPLATE_PREVIEWS]: (state: TemplatesState): TemplatesState => ({\r\n      ...state,\r\n      previews: {},\r\n    }),\r\n  },\r\n  templatesInitialState\r\n)\r\n","import { combineReducers } from 'redux'\r\nimport { PersistState } from 'redux-persist'\r\nimport {\r\n  sessionReducer,\r\n  sessionInitialState,\r\n  SessionState,\r\n} from 'state/reducers/session'\r\nimport { userInitialState, UserState, userReducer } from './reducers/user'\r\nimport {\r\n  TemplatesState,\r\n  templatesInitialState,\r\n  templatesReducer,\r\n} from './reducers/templates'\r\n\r\nexport interface State {\r\n  session: SessionState\r\n  user: UserState\r\n  templates: TemplatesState\r\n  _persist?: PersistState\r\n}\r\n\r\nexport const initialState: State = {\r\n  session: sessionInitialState,\r\n  user: userInitialState,\r\n  templates: templatesInitialState,\r\n}\r\n\r\nexport const rootReducer = combineReducers({\r\n  session: sessionReducer,\r\n  user: userReducer,\r\n  templates: templatesReducer,\r\n})\r\n\r\nexport default rootReducer\r\n","import { rootReducer, initialState, State } from './rootReducer'\r\nimport { applyMiddleware, createStore, Store } from 'redux'\r\nimport { composeWithDevTools } from 'redux-devtools-extension'\r\nimport { createMigrate, persistReducer } from 'redux-persist'\r\nimport storage from 'redux-persist/lib/storage'\r\nimport thunk from 'redux-thunk'\r\nimport {\r\n  MigrationManifest,\r\n  PersistConfig,\r\n  PersistedState,\r\n} from 'redux-persist/es/types'\r\nimport createDebounce from 'redux-debounced'\r\nimport { sessionInitialState } from 'state/reducers/session'\r\nimport { userInitialState } from './reducers/user'\r\nimport { templatesInitialState } from './reducers/templates'\r\n\r\nexport const STORE_VERSION = 1\r\n\r\nconst migrations: MigrationManifest = {\r\n  1: (state: PersistedState) => {\r\n    if (state) {\r\n      return {\r\n        ...state,\r\n        session: sessionInitialState,\r\n        user: userInitialState,\r\n        templates: templatesInitialState,\r\n      }\r\n    }\r\n  },\r\n}\r\n\r\nconst persistConfig: PersistConfig<State> = {\r\n  key: 'root',\r\n  version: STORE_VERSION,\r\n  storage,\r\n  whitelist: ['user', 'templates'],\r\n  migrate: createMigrate(migrations, {\r\n    debug: process.env.NODE_ENV === 'development',\r\n  }),\r\n}\r\n\r\nconst configureStore = (): Store<State, any> =>\r\n  createStore(\r\n    persistReducer(persistConfig, rootReducer),\r\n    initialState,\r\n    composeWithDevTools(applyMiddleware(createDebounce(), thunk))\r\n  )\r\n\r\nexport const store = configureStore()\r\n","import React from 'react'\r\nimport axios, { AxiosError } from 'axios'\r\nimport { notification } from 'antd'\r\nimport { ApiRequestConfig } from 'api/requestConfig'\r\nimport { navigate } from '@reach/router'\r\nimport Cookies from 'js-cookie'\r\nimport { AUTHORIZATION_HEADER } from 'constants/http'\r\nimport { Store } from 'redux'\r\nimport { State } from 'state/rootReducer'\r\nimport { logoutClearState } from 'state/actions/session'\r\n\r\nconst isErrorHandlerDisabled = (config: ApiRequestConfig) => {\r\n  return config && config.errorHandlerDisabled\r\n}\r\n\r\nconst errorHandler = (error: AxiosError<any>, store: Store<State, any>) => {\r\n  const { PUBLIC_URL } = process.env\r\n\r\n  if (error.response && !axios.isCancel(error)) {\r\n    if (isErrorHandlerDisabled(error.config)) {\r\n      return Promise.reject({ ...error })\r\n    }\r\n\r\n    if (error.response) {\r\n      if (error.response.status === 500) {\r\n        navigate(PUBLIC_URL + '/status/internal-server-error')\r\n      } else if (error.response.status === 405) {\r\n        notification.error({\r\n          message: <>405 Method not allowed</>,\r\n          duration: 10,\r\n        })\r\n      } else if (error.response.status === 401) {\r\n        store.dispatch(logoutClearState())\r\n      } else {\r\n        if (typeof error.response.data === 'object') {\r\n          const extractedErrors = []\r\n          const errors = error.response.data\r\n\r\n          Object.keys(errors).forEach((key: string) => {\r\n            errors[key].forEach((error: string) => {\r\n              extractedErrors.push(error)\r\n            })\r\n          })\r\n\r\n          notification.error({\r\n            message: (\r\n              <>\r\n                {extractedErrors.map((error, key) => (\r\n                  <div key={key}>{error}</div>\r\n                ))}\r\n              </>\r\n            ),\r\n            duration: 10,\r\n          })\r\n\r\n          return Promise.reject({ ...error })\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  throw error\r\n}\r\n\r\nexport const configureAxiosInterceptors = () => {\r\n  const { CMS_BASE_URL } = window._envConfig\r\n\r\n  const requestInterceptor = axios.interceptors.request.use(config => ({\r\n    ...config,\r\n    baseURL: CMS_BASE_URL,\r\n    headers: {\r\n      [AUTHORIZATION_HEADER]: `Bearer ${Cookies.get('AUTH_USER')}`,\r\n      Credentials: 'same-origin'\r\n    }\r\n  }))\r\n\r\n  return {\r\n    request: [requestInterceptor],\r\n  }\r\n}\r\n\r\nexport const configureMessageHandleAxiosInterceptors = (store: Store<State, any>) => {\r\n  const responseInterceptor = axios.interceptors.response.use(\r\n    success => success,\r\n    error => errorHandler(error, store)\r\n  )\r\n  return { response: responseInterceptor }\r\n}\r\n","// import { addIconsToLibrary } from 'constants/icons'\r\nimport initializeTracking from 'tracking'\r\nimport GlobalStyle from 'GlobalStyle'\r\nimport 'i18n'\r\nimport App from 'App'\r\nimport React, { Suspense } from 'react'\r\nimport ReactDOM from 'react-dom'\r\nimport {\r\n  configureAxiosInterceptors,\r\n  configureMessageHandleAxiosInterceptors,\r\n} from 'axiosConfig'\r\nimport { addIconsToLibrary } from 'constants/icons'\r\nimport { AuthenticatedLoadingLayout } from 'components/Layout/AuthenticatedLoadingLayout'\r\nimport { persistStore } from 'redux-persist'\r\nimport { PersistGate } from 'redux-persist/integration/react'\r\nimport { Provider } from 'react-redux'\r\nimport { store } from 'state/store'\r\nimport { DndProvider } from 'react-dnd'\r\nimport Backend from 'react-dnd-html5-backend'\r\n\r\nconfigureAxiosInterceptors()\r\nconfigureMessageHandleAxiosInterceptors(store)\r\naddIconsToLibrary()\r\ninitializeTracking()\r\n\r\nReactDOM.render(\r\n  <DndProvider backend={Backend}>\r\n    <Provider store={store}>\r\n      <PersistGate loading={null} persistor={persistStore(store)}>\r\n        <Suspense fallback={<AuthenticatedLoadingLayout />}>\r\n          <App />\r\n          <GlobalStyle />\r\n        </Suspense>\r\n      </PersistGate>\r\n    </Provider>\r\n  </DndProvider>,\r\n  document.getElementById('root')\r\n)\r\n","import { IconDefinition, library } from '@fortawesome/fontawesome-svg-core'\r\nimport {\r\n  faAlignJustify,\r\n  faArrowsAltV,\r\n  faBars,\r\n  faCog,\r\n  faCogs,\r\n  faCopy,\r\n  faDatabase,\r\n  faDownload,\r\n  faExchangeAlt,\r\n  faEye,\r\n  faFileSignature,\r\n  faGlobeAmericas,\r\n  faCheck,\r\n  faMinusSquare,\r\n  faPaperPlane,\r\n  faPen,\r\n  faPlus,\r\n  faPlusSquare,\r\n  faRedoAlt,\r\n  faSignOutAlt,\r\n  faSquare,\r\n  faSyncAlt,\r\n  faTable,\r\n  faTasks,\r\n  faTimes,\r\n  faTimesCircle,\r\n  faTrashAlt,\r\n  faUser,\r\n  faClone,\r\n  faCloudUploadAlt,\r\n  faCloudDownloadAlt,\r\n  faArrowCircleUp,\r\n  faArrowCircleDown,\r\n  faChevronCircleUp,\r\n  faChevronCircleDown,\r\n  faAngleDown,\r\n  faAngleRight,\r\n  faArrowLeft,\r\n  faFolder,\r\n  faFile,\r\n  faArrowUp,\r\n  faAlignLeft,\r\n  faHeading,\r\n  faImage,\r\n  faImages,\r\n  faCode,\r\n  faSave,\r\n  faLock,\r\n  faList,\r\n  faMapSigns,\r\n  faTags,\r\n  faTag,\r\n  faSearch,\r\n} from '@fortawesome/free-solid-svg-icons'\r\n\r\nimport { faBuilding } from '@fortawesome/free-regular-svg-icons'\r\n\r\nexport type IconName =\r\n  | 'align-justify'\r\n  | 'arrows-alt-v'\r\n  | 'bars'\r\n  | 'building'\r\n  | 'cog'\r\n  | 'cogs'\r\n  | 'copy'\r\n  | 'database'\r\n  | 'download'\r\n  | 'exchange-alt'\r\n  | 'eye'\r\n  | 'file-signature'\r\n  | 'globe-americas'\r\n  | 'check'\r\n  | 'minus-square'\r\n  | 'paper-plane'\r\n  | 'pen'\r\n  | 'plus-square'\r\n  | 'plus'\r\n  | 'redo-alt'\r\n  | 'sign-out-alt'\r\n  | 'square'\r\n  | 'sync-alt'\r\n  | 'table'\r\n  | 'tasks'\r\n  | 'times-circle'\r\n  | 'times'\r\n  | 'trash-alt'\r\n  | 'user'\r\n  | 'clone'\r\n  | 'cloud-upload-alt'\r\n  | 'cloud-download-alt'\r\n  | 'arrow-alt-circle-up'\r\n  | 'arrow-alt-circle-down'\r\n  | 'chevron-circle-up'\r\n  | 'chevron-circle-down'\r\n  | 'angle-down'\r\n  | 'angle-right'\r\n  | 'arrow-left'\r\n  | 'folder'\r\n  | 'file'\r\n  | 'arrow-up'\r\n  | 'align-left'\r\n  | 'heading'\r\n  | 'image'\r\n  | 'images'\r\n  | 'code'\r\n  | 'save'\r\n  | 'lock'\r\n  | 'list'\r\n  | 'map-signs'\r\n  | 'tags'\r\n  | 'tag'\r\n  | 'search'\r\n  | IconDefinition\r\n\r\nexport const addIconsToLibrary = () => {\r\n  library.add(\r\n    faAlignJustify,\r\n    faArrowsAltV,\r\n    faBars,\r\n    faBuilding,\r\n    faCog,\r\n    faCogs,\r\n    faCopy,\r\n    faDatabase,\r\n    faDownload,\r\n    faExchangeAlt,\r\n    faEye,\r\n    faFileSignature,\r\n    faGlobeAmericas,\r\n    faCheck,\r\n    faMinusSquare,\r\n    faPaperPlane,\r\n    faPen,\r\n    faPlus,\r\n    faPlus,\r\n    faPlusSquare,\r\n    faRedoAlt,\r\n    faSignOutAlt,\r\n    faSquare,\r\n    faSyncAlt,\r\n    faTable,\r\n    faTasks,\r\n    faTimes,\r\n    faTimesCircle,\r\n    faTrashAlt,\r\n    faUser,\r\n    faClone,\r\n    faCloudUploadAlt,\r\n    faCloudDownloadAlt,\r\n    faArrowCircleUp,\r\n    faArrowCircleDown,\r\n    faChevronCircleUp,\r\n    faChevronCircleDown,\r\n    faAngleDown,\r\n    faAngleRight,\r\n    faArrowLeft,\r\n    faFolder,\r\n    faFile,\r\n    faArrowUp,\r\n    faAlignLeft,\r\n    faHeading,\r\n    faImage,\r\n    faImages,\r\n    faCode,\r\n    faSave,\r\n    faLock,\r\n    faList,\r\n    faMapSigns,\r\n    faTags,\r\n    faTag,\r\n    faSearch\r\n  )\r\n}\r\n"],"sourceRoot":""}